/* << Copyright 2022 Iñigo Tamayo Uria, Ana Domínguez Fanlo, Mikel Joseba Zorrilla Berasategui, Héctor Rivas Pagador, Sergio Cabrero Barros, Juan Felipe Mogollón Rodríguez and Stefano Masneri. >>
This file is part of Orkestralib.
Orkestralib is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
Orkestralib is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.
You should have received a copy of the GNU Lesser General Public License along with Orkestralib. If not, see <https://www.gnu.org/licenses/>. */
/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@a11y/focus-trap/debounce.js":
/*!***************************************************!*\
  !*** ./node_modules/@a11y/focus-trap/debounce.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "debounce": function() { return /* binding */ debounce; }
/* harmony export */ });
const timeouts = new Map();
/**
 * Debounces a callback.
 * @param cb
 * @param ms
 * @param id
 */
function debounce(cb, ms, id) {
    // Clear current timeout for id
    const timeout = timeouts.get(id);
    if (timeout != null) {
        window.clearTimeout(timeout);
    }
    // Set new timeout
    timeouts.set(id, window.setTimeout(() => {
        cb();
        timeouts.delete(id);
    }, ms));
}
//# sourceMappingURL=debounce.js.map

/***/ }),

/***/ "./node_modules/@a11y/focus-trap/focus-trap.js":
/*!*****************************************************!*\
  !*** ./node_modules/@a11y/focus-trap/focus-trap.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FocusTrap": function() { return /* binding */ FocusTrap; }
/* harmony export */ });
/* harmony import */ var _debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debounce */ "./node_modules/@a11y/focus-trap/debounce.js");
/* harmony import */ var _focusable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./focusable */ "./node_modules/@a11y/focus-trap/focusable.js");
/* harmony import */ var _shadow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shadow */ "./node_modules/@a11y/focus-trap/shadow.js");



/**
 * Template for the focus trap.
 */
const template = document.createElement("template");
template.innerHTML = `
	<div id="start"></div>
	<div id="backup"></div>
	<slot></slot>
	<div id="end"></div>
`;
/**
 * Focus trap web component.
 * @customElement focus-trap
 * @slot - Default content.
 */
class FocusTrap extends HTMLElement {
    /**
     * Attaches the shadow root.
     */
    constructor() {
        super();
        // The debounce id is used to distinguish this focus trap from others when debouncing
        this.debounceId = Math.random().toString();
        this._focused = false;
        const shadow = this.attachShadow({ mode: "open" });
        shadow.appendChild(template.content.cloneNode(true));
        this.$backup = shadow.querySelector("#backup");
        this.$start = shadow.querySelector("#start");
        this.$end = shadow.querySelector("#end");
        this.focusLastElement = this.focusLastElement.bind(this);
        this.focusFirstElement = this.focusFirstElement.bind(this);
        this.onFocusIn = this.onFocusIn.bind(this);
        this.onFocusOut = this.onFocusOut.bind(this);
    }
    // Whenever one of these attributes changes we need to render the template again.
    static get observedAttributes() {
        return [
            "inactive"
        ];
    }
    /**
     * Determines whether the focus trap is active or not.
     * @attr
     */
    get inactive() {
        return this.hasAttribute("inactive");
    }
    set inactive(value) {
        value ? this.setAttribute("inactive", "") : this.removeAttribute("inactive");
    }
    /**
     * Returns whether the element currently has focus.
     */
    get focused() {
        return this._focused;
    }
    /**
     * Hooks up the element.
     */
    connectedCallback() {
        this.$start.addEventListener("focus", this.focusLastElement);
        this.$end.addEventListener("focus", this.focusFirstElement);
        // Focus out is called every time the user tabs around inside the element
        this.addEventListener("focusin", this.onFocusIn);
        this.addEventListener("focusout", this.onFocusOut);
        this.render();
    }
    /**
     * Tears down the element.
     */
    disconnectedCallback() {
        this.$start.removeEventListener("focus", this.focusLastElement);
        this.$end.removeEventListener("focus", this.focusFirstElement);
        this.removeEventListener("focusin", this.onFocusIn);
        this.removeEventListener("focusout", this.onFocusOut);
    }
    /**
     * When the attributes changes we need to re-render the template.
     */
    attributeChangedCallback() {
        this.render();
    }
    /**
     * Focuses the first focusable element in the focus trap.
     */
    focusFirstElement() {
        this.trapFocus();
    }
    /**
     * Focuses the last focusable element in the focus trap.
     */
    focusLastElement() {
        this.trapFocus(true);
    }
    /**
     * Returns a list of the focusable children found within the element.
     */
    getFocusableElements() {
        return (0,_shadow__WEBPACK_IMPORTED_MODULE_2__.queryShadowRoot)(this, _focusable__WEBPACK_IMPORTED_MODULE_1__.isHidden, _focusable__WEBPACK_IMPORTED_MODULE_1__.isFocusable);
    }
    /**
     * Focuses on either the last or first focusable element.
     * @param {boolean} trapToEnd
     */
    trapFocus(trapToEnd) {
        if (this.inactive)
            return;
        let focusableChildren = this.getFocusableElements();
        if (focusableChildren.length > 0) {
            if (trapToEnd) {
                focusableChildren[focusableChildren.length - 1].focus();
            }
            else {
                focusableChildren[0].focus();
            }
            this.$backup.setAttribute("tabindex", "-1");
        }
        else {
            // If there are no focusable children we need to focus on the backup
            // to trap the focus. This is a useful behavior if the focus trap is
            // for example used in a dialog and we don't want the user to tab
            // outside the dialog even though there are no focusable children
            // in the dialog.
            this.$backup.setAttribute("tabindex", "0");
            this.$backup.focus();
        }
    }
    /**
     * When the element gains focus this function is called.
     */
    onFocusIn() {
        this.updateFocused(true);
    }
    /**
     * When the element looses its focus this function is called.
     */
    onFocusOut() {
        this.updateFocused(false);
    }
    /**
     * Updates the focused property and updates the view.
     * The update is debounced because the focusin and focusout out
     * might fire multiple times in a row. We only want to render
     * the element once, therefore waiting until the focus is "stable".
     * @param value
     */
    updateFocused(value) {
        (0,_debounce__WEBPACK_IMPORTED_MODULE_0__.debounce)(() => {
            if (this.focused !== value) {
                this._focused = value;
                this.render();
            }
        }, 0, this.debounceId);
    }
    /**
     * Updates the template.
     */
    render() {
        this.$start.setAttribute("tabindex", !this.focused || this.inactive ? `-1` : `0`);
        this.$end.setAttribute("tabindex", !this.focused || this.inactive ? `-1` : `0`);
        this.focused ? this.setAttribute("focused", "") : this.removeAttribute("focused");
    }
}
window.customElements.define("focus-trap", FocusTrap);
//# sourceMappingURL=focus-trap.js.map

/***/ }),

/***/ "./node_modules/@a11y/focus-trap/focusable.js":
/*!****************************************************!*\
  !*** ./node_modules/@a11y/focus-trap/focusable.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isHidden": function() { return /* binding */ isHidden; },
/* harmony export */   "isDisabled": function() { return /* binding */ isDisabled; },
/* harmony export */   "isFocusable": function() { return /* binding */ isFocusable; }
/* harmony export */ });
/**
 * Returns whether the element is hidden.
 * @param $elem
 */
function isHidden($elem) {
    return $elem.hasAttribute("hidden")
        || ($elem.hasAttribute("aria-hidden") && $elem.getAttribute("aria-hidden") !== "false")
        // A quick and dirty way to check whether the element is hidden.
        // For a more fine-grained check we could use "window.getComputedStyle" but we don't because of bad performance.
        // If the element has visibility set to "hidden" or "collapse", display set to "none" or opacity set to "0" through CSS
        // we won't be able to catch it here. We accept it due to the huge performance benefits.
        || $elem.style.display === `none`
        || $elem.style.opacity === `0`
        || $elem.style.visibility === `hidden`
        || $elem.style.visibility === `collapse`;
    // If offsetParent is null we can assume that the element is hidden
    // https://stackoverflow.com/questions/306305/what-would-make-offsetparent-null
    //|| $elem.offsetParent == null;
}
/**
 * Returns whether the element is disabled.
 * @param $elem
 */
function isDisabled($elem) {
    return $elem.hasAttribute("disabled")
        || ($elem.hasAttribute("aria-disabled") && $elem.getAttribute("aria-disabled") !== "false");
}
/**
 * Determines whether an element is focusable.
 * Read more here: https://stackoverflow.com/questions/1599660/which-html-elements-can-receive-focus/1600194#1600194
 * Or here: https://stackoverflow.com/questions/18261595/how-to-check-if-a-dom-element-is-focusable
 * @param $elem
 */
function isFocusable($elem) {
    // Discard elements that are removed from the tab order.
    if ($elem.getAttribute("tabindex") === "-1" || isHidden($elem) || isDisabled($elem)) {
        return false;
    }
    return (
    // At this point we know that the element can have focus (eg. won't be -1) if the tabindex attribute exists
    $elem.hasAttribute("tabindex")
        // Anchor tags or area tags with a href set
        || ($elem instanceof HTMLAnchorElement || $elem instanceof HTMLAreaElement) && $elem.hasAttribute("href")
        // Form elements which are not disabled
        || ($elem instanceof HTMLButtonElement
            || $elem instanceof HTMLInputElement
            || $elem instanceof HTMLTextAreaElement
            || $elem instanceof HTMLSelectElement)
        // IFrames
        || $elem instanceof HTMLIFrameElement);
}
//# sourceMappingURL=focusable.js.map

/***/ }),

/***/ "./node_modules/@a11y/focus-trap/index.js":
/*!************************************************!*\
  !*** ./node_modules/@a11y/focus-trap/index.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "queryShadowRoot": function() { return /* reexport safe */ _shadow__WEBPACK_IMPORTED_MODULE_0__.queryShadowRoot; },
/* harmony export */   "isDisabled": function() { return /* reexport safe */ _focusable__WEBPACK_IMPORTED_MODULE_1__.isDisabled; },
/* harmony export */   "isFocusable": function() { return /* reexport safe */ _focusable__WEBPACK_IMPORTED_MODULE_1__.isFocusable; },
/* harmony export */   "isHidden": function() { return /* reexport safe */ _focusable__WEBPACK_IMPORTED_MODULE_1__.isHidden; },
/* harmony export */   "FocusTrap": function() { return /* reexport safe */ _focus_trap__WEBPACK_IMPORTED_MODULE_2__.FocusTrap; }
/* harmony export */ });
/* harmony import */ var _shadow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shadow */ "./node_modules/@a11y/focus-trap/shadow.js");
/* harmony import */ var _focusable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./focusable */ "./node_modules/@a11y/focus-trap/focusable.js");
/* harmony import */ var _focus_trap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./focus-trap */ "./node_modules/@a11y/focus-trap/focus-trap.js");



//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@a11y/focus-trap/shadow.js":
/*!*************************************************!*\
  !*** ./node_modules/@a11y/focus-trap/shadow.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "queryShadowRoot": function() { return /* binding */ queryShadowRoot; }
/* harmony export */ });
/**
 * Traverses the slots of the open shadowroots and returns all children matching the query.
 * @param {ShadowRoot | HTMLElement} root
 * @param skipNode
 * @param isMatch
 * @param {number} maxDepth
 * @param {number} depth
 * @returns {HTMLElement[]}
 */
function queryShadowRoot(root, skipNode, isMatch, maxDepth = 20, depth = 0) {
    let matches = [];
    // If the depth is above the max depth, abort the searching here.
    if (depth >= maxDepth) {
        return matches;
    }
    // Traverses a slot element
    const traverseSlot = ($slot) => {
        // Only check nodes that are of the type Node.ELEMENT_NODE
        // Read more here https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType
        const assignedNodes = $slot.assignedNodes().filter(node => node.nodeType === 1);
        if (assignedNodes.length > 0) {
            return queryShadowRoot(assignedNodes[0].parentElement, skipNode, isMatch, maxDepth, depth + 1);
        }
        return [];
    };
    // Go through each child and continue the traversing if necessary
    // Even though the typing says that children can't be undefined, Edge 15 sometimes gives an undefined value.
    // Therefore we fallback to an empty array if it is undefined.
    const children = Array.from(root.children || []);
    for (const $child of children) {
        // Check if the node and its descendants should be skipped
        if (skipNode($child)) {
            continue;
        }
        // If the child matches we always add it
        if (isMatch($child)) {
            matches.push($child);
        }
        if ($child.shadowRoot != null) {
            matches.push(...queryShadowRoot($child.shadowRoot, skipNode, isMatch, maxDepth, depth + 1));
        }
        else if ($child.tagName === "SLOT") {
            matches.push(...traverseSlot($child));
        }
        else {
            matches.push(...queryShadowRoot($child, skipNode, isMatch, maxDepth, depth + 1));
        }
    }
    return matches;
}
//# sourceMappingURL=shadow.js.map

/***/ }),

/***/ "./node_modules/@socket.io/base64-arraybuffer/dist/base64-arraybuffer.es5.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@socket.io/base64-arraybuffer/dist/base64-arraybuffer.es5.js ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "decode": function() { return /* binding */ decode; },
/* harmony export */   "encode": function() { return /* binding */ encode; }
/* harmony export */ });
/*
 * base64-arraybuffer 1.0.1 <https://github.com/niklasvh/base64-arraybuffer>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
// Use a lookup table to find the index.
var lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);
for (var i = 0; i < chars.length; i++) {
    lookup[chars.charCodeAt(i)] = i;
}
var encode = function (arraybuffer) {
    var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';
    for (i = 0; i < len; i += 3) {
        base64 += chars[bytes[i] >> 2];
        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];
        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];
        base64 += chars[bytes[i + 2] & 63];
    }
    if (len % 3 === 2) {
        base64 = base64.substring(0, base64.length - 1) + '=';
    }
    else if (len % 3 === 1) {
        base64 = base64.substring(0, base64.length - 2) + '==';
    }
    return base64;
};
var decode = function (base64) {
    var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;
    if (base64[base64.length - 1] === '=') {
        bufferLength--;
        if (base64[base64.length - 2] === '=') {
            bufferLength--;
        }
    }
    var arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);
    for (i = 0; i < len; i += 4) {
        encoded1 = lookup[base64.charCodeAt(i)];
        encoded2 = lookup[base64.charCodeAt(i + 1)];
        encoded3 = lookup[base64.charCodeAt(i + 2)];
        encoded4 = lookup[base64.charCodeAt(i + 3)];
        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);
        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);
        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);
    }
    return arraybuffer;
};


//# sourceMappingURL=base64-arraybuffer.es5.js.map


/***/ }),

/***/ "./node_modules/@socket.io/component-emitter/index.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@socket.io/component-emitter/index.mjs ***!
  \*************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Emitter": function() { return /* binding */ Emitter; }
/* harmony export */ });
/**
 * Initialize a new `Emitter`.
 *
 * @api public
 */

function Emitter(obj) {
  if (obj) return mixin(obj);
}

/**
 * Mixin the emitter properties.
 *
 * @param {Object} obj
 * @return {Object}
 * @api private
 */

function mixin(obj) {
  for (var key in Emitter.prototype) {
    obj[key] = Emitter.prototype[key];
  }
  return obj;
}

/**
 * Listen on the given `event` with `fn`.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.on =
Emitter.prototype.addEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};
  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])
    .push(fn);
  return this;
};

/**
 * Adds an `event` listener that will be invoked a single
 * time then automatically removed.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.once = function(event, fn){
  function on() {
    this.off(event, on);
    fn.apply(this, arguments);
  }

  on.fn = fn;
  this.on(event, on);
  return this;
};

/**
 * Remove the given callback for `event` or all
 * registered callbacks.
 *
 * @param {String} event
 * @param {Function} fn
 * @return {Emitter}
 * @api public
 */

Emitter.prototype.off =
Emitter.prototype.removeListener =
Emitter.prototype.removeAllListeners =
Emitter.prototype.removeEventListener = function(event, fn){
  this._callbacks = this._callbacks || {};

  // all
  if (0 == arguments.length) {
    this._callbacks = {};
    return this;
  }

  // specific event
  var callbacks = this._callbacks['$' + event];
  if (!callbacks) return this;

  // remove all handlers
  if (1 == arguments.length) {
    delete this._callbacks['$' + event];
    return this;
  }

  // remove specific handler
  var cb;
  for (var i = 0; i < callbacks.length; i++) {
    cb = callbacks[i];
    if (cb === fn || cb.fn === fn) {
      callbacks.splice(i, 1);
      break;
    }
  }

  // Remove event specific arrays for event types that no
  // one is subscribed for to avoid memory leak.
  if (callbacks.length === 0) {
    delete this._callbacks['$' + event];
  }

  return this;
};

/**
 * Emit `event` with the given args.
 *
 * @param {String} event
 * @param {Mixed} ...
 * @return {Emitter}
 */

Emitter.prototype.emit = function(event){
  this._callbacks = this._callbacks || {};

  var args = new Array(arguments.length - 1)
    , callbacks = this._callbacks['$' + event];

  for (var i = 1; i < arguments.length; i++) {
    args[i - 1] = arguments[i];
  }

  if (callbacks) {
    callbacks = callbacks.slice(0);
    for (var i = 0, len = callbacks.length; i < len; ++i) {
      callbacks[i].apply(this, args);
    }
  }

  return this;
};

// alias used for reserved events (protected method)
Emitter.prototype.emitReserved = Emitter.prototype.emit;

/**
 * Return array of callbacks for `event`.
 *
 * @param {String} event
 * @return {Array}
 * @api public
 */

Emitter.prototype.listeners = function(event){
  this._callbacks = this._callbacks || {};
  return this._callbacks['$' + event] || [];
};

/**
 * Check if this emitter has `event` handlers.
 *
 * @param {String} event
 * @return {Boolean}
 * @api public
 */

Emitter.prototype.hasListeners = function(event){
  return !! this.listeners(event).length;
};


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/orkestra/transitions/css/simple.css":
/*!***************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/orkestra/transitions/css/simple.css ***!
  \***************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.id, ".ork_rotate { transition: transform 3s;transform: translateZ(0px) rotateY(56deg); }\n.ork_rotate1 { transition: transform 3s;transform: translateZ(56px) rotateY(156deg); }\n.ork_opacity_0 {transition: opacity  0.5s ease-in-out;\n    z-index: 99999;\n    background-color:black;\n    opacity: 0;\n}\n.ork_opacity_1 {transition: opacity 1.5s ease-in-out;\n    z-index: 99999;\n    background-color: black;\n    opacity: 1.0;\n}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/custom.css":
/*!**************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/custom.css ***!
  \**************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.id, ".container {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  width:100%;\n  height: 100%;\n}\n.resizable {\n  resize: both;\n  overflow: scroll;\n  border: 3px solid red;\n  \n}\n.grid{\ndisplay:grid;\n}\n.item79 {\nwidth: 32%;\npadding-bottom: 0%; /* 32:18, i.e. 16:9 */\nmargin-bottom: 0%; /* (100-32*3)/2 */\nheight: 33%;\nbackground-color:black;\nposition:relative;\n}\n.item24 {\nwidth: 49%;\npadding-bottom: 0%; /* 32:18, i.e. 16:9 */\nmargin-bottom: 2%; /* (100-32*3)/2 */\nbackground-color: black;\n  position:relative;\n}\n.item34 {\n  width: 49%;\n  height: 49%;\n  padding-bottom: 0%; /* 32:18, i.e. 16:9 */\n  margin-bottom: 1%; /* (100-32*3)/2 */\n  background-color: black;\n  position:relative;\n  }\n  .item456 {\n    width: 32%;\n    height: 49%;\n    padding-bottom: 0%; /* 32:18, i.e. 16:9 */\n    margin-bottom: 1%; /* (100-32*3)/2 */\n    background-color: black;\n    position:relative;\n    }\n.item21 {\n  width: 99%;\n   height:99%;\n  background-color: black;\n  padding-bottom: 0%; /* 32:18, i.e. 16:9 */\n  margin-bottom: 0%; /* (100-32*3)/2 */\n  position:absolute;\n  left:0%;\n  top:0%;\n}\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/pipgrid.css":
/*!***************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/pipgrid.css ***!
  \***************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.id, ".containerpipgrid{\n    width:100%;\n    height:100%;\n    position: relative !important;\n}\n.main{\n    width: 67%;\n    height: 100%;\n}\n.fullmain{\n    width: 100%;\n}\n.secondary{\n    width: 33%;\n    left:66%;\n    position:absolute;\n}\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/tabs.css":
/*!************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/tabs.css ***!
  \************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.id, "\n/* Style the tab */\n.tab {\n    overflow: hidden;\n    border: 1px solid #ccc;\n    background-color: #f1f1f1;\n  }\n  \n  /* Style the buttons inside the tab */\n  .tab button {\n    background-color: inherit;\n    float: left;\n    border: none;\n    outline: none;\n    cursor: pointer;\n    padding: 14px 16px;\n    transition: 0.3s;\n    font-size: 17px;\n  }\n  \n  /* Change background color of buttons on hover */\n  .tab button:hover {\n    background-color: #ddd;\n  }\n  \n  /* Create an active/current tablink class */\n  .tab button.active {\n    background-color: #ccc;\n  }\n  \n  /* Style the tab content */\n  .tabcontentNone {\n    display: none;\n    padding: 6px 12px;\n    border: 1px solid #ccc;\n    border-top: none;\n  }\n  .tabcontentDisplay {\n    display: block;\n    padding: 6px 12px;\n    border: 1px solid #ccc;\n    border-top: none;\n  }", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/wcs/css/apptable.css":
/*!************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/wcs/css/apptable.css ***!
  \************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.id, "\ndiv{\n\tword-wrap:break-word;\n}\n\n\t\n\t/*\n\tLabel the data\n*/\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/wcs/css/usertable.css":
/*!*************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/wcs/css/usertable.css ***!
  \*************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.id, "\tdiv{\n\t\tword-wrap:break-word;\n\t}\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ (function(module) {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (useSourceMap) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item, useSourceMap);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

function cssWithMappingToString(item, useSourceMap) {
  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring

  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (useSourceMap && typeof btoa === 'function') {
    var sourceMapping = toComment(cssMapping);
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
  }

  return [content].join('\n');
} // Adapted from convert-source-map (MIT)


function toComment(sourceMap) {
  // eslint-disable-next-line no-undef
  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
  return "/*# ".concat(data, " */");
}

/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/contrib/has-cors.js":
/*!*********************************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/contrib/has-cors.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "hasCORS": function() { return /* binding */ hasCORS; }
/* harmony export */ });
// imported from https://github.com/component/has-cors
let value = false;
try {
    value = typeof XMLHttpRequest !== 'undefined' &&
        'withCredentials' in new XMLHttpRequest();
}
catch (err) {
    // if XMLHttp support is disabled in IE then it will throw
    // when trying to create
}
const hasCORS = value;


/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/contrib/parseqs.js":
/*!********************************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/contrib/parseqs.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "encode": function() { return /* binding */ encode; },
/* harmony export */   "decode": function() { return /* binding */ decode; }
/* harmony export */ });
// imported from https://github.com/galkn/querystring
/**
 * Compiles a querystring
 * Returns string representation of the object
 *
 * @param {Object}
 * @api private
 */
function encode(obj) {
    let str = '';
    for (let i in obj) {
        if (obj.hasOwnProperty(i)) {
            if (str.length)
                str += '&';
            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);
        }
    }
    return str;
}
/**
 * Parses a simple querystring into an object
 *
 * @param {String} qs
 * @api private
 */
function decode(qs) {
    let qry = {};
    let pairs = qs.split('&');
    for (let i = 0, l = pairs.length; i < l; i++) {
        let pair = pairs[i].split('=');
        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
    }
    return qry;
}


/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/contrib/parseuri.js":
/*!*********************************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/contrib/parseuri.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "parse": function() { return /* binding */ parse; }
/* harmony export */ });
// imported from https://github.com/galkn/parseuri
/**
 * Parses an URI
 *
 * @author Steven Levithan <stevenlevithan.com> (MIT license)
 * @api private
 */
const re = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;
const parts = [
    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'
];
function parse(str) {
    const src = str, b = str.indexOf('['), e = str.indexOf(']');
    if (b != -1 && e != -1) {
        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);
    }
    let m = re.exec(str || ''), uri = {}, i = 14;
    while (i--) {
        uri[parts[i]] = m[i] || '';
    }
    if (b != -1 && e != -1) {
        uri.source = src;
        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');
        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');
        uri.ipv6uri = true;
    }
    uri.pathNames = pathNames(uri, uri['path']);
    uri.queryKey = queryKey(uri, uri['query']);
    return uri;
}
function pathNames(obj, path) {
    const regx = /\/{2,9}/g, names = path.replace(regx, "/").split("/");
    if (path.substr(0, 1) == '/' || path.length === 0) {
        names.splice(0, 1);
    }
    if (path.substr(path.length - 1, 1) == '/') {
        names.splice(names.length - 1, 1);
    }
    return names;
}
function queryKey(uri, query) {
    const data = {};
    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {
        if ($1) {
            data[$1] = $2;
        }
    });
    return data;
}


/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/contrib/yeast.js":
/*!******************************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/contrib/yeast.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "encode": function() { return /* binding */ encode; },
/* harmony export */   "decode": function() { return /* binding */ decode; },
/* harmony export */   "yeast": function() { return /* binding */ yeast; }
/* harmony export */ });
// imported from https://github.com/unshiftio/yeast

const alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''), length = 64, map = {};
let seed = 0, i = 0, prev;
/**
 * Return a string representing the specified number.
 *
 * @param {Number} num The number to convert.
 * @returns {String} The string representation of the number.
 * @api public
 */
function encode(num) {
    let encoded = '';
    do {
        encoded = alphabet[num % length] + encoded;
        num = Math.floor(num / length);
    } while (num > 0);
    return encoded;
}
/**
 * Return the integer value specified by the given string.
 *
 * @param {String} str The string to convert.
 * @returns {Number} The integer value represented by the string.
 * @api public
 */
function decode(str) {
    let decoded = 0;
    for (i = 0; i < str.length; i++) {
        decoded = decoded * length + map[str.charAt(i)];
    }
    return decoded;
}
/**
 * Yeast: A tiny growing id generator.
 *
 * @returns {String} A unique id.
 * @api public
 */
function yeast() {
    const now = encode(+new Date());
    if (now !== prev)
        return seed = 0, prev = now;
    return now + '.' + encode(seed++);
}
//
// Map each character to its index.
//
for (; i < length; i++)
    map[alphabet[i]] = i;


/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/globalThis.browser.js":
/*!***********************************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/globalThis.browser.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ((() => {
    if (typeof self !== "undefined") {
        return self;
    }
    else if (typeof window !== "undefined") {
        return window;
    }
    else {
        return Function("return this")();
    }
})());


/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/index.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Socket": function() { return /* reexport safe */ _socket_js__WEBPACK_IMPORTED_MODULE_0__.Socket; },
/* harmony export */   "protocol": function() { return /* binding */ protocol; },
/* harmony export */   "Transport": function() { return /* reexport safe */ _transport_js__WEBPACK_IMPORTED_MODULE_1__.Transport; },
/* harmony export */   "transports": function() { return /* reexport safe */ _transports_index_js__WEBPACK_IMPORTED_MODULE_2__.transports; },
/* harmony export */   "installTimerFunctions": function() { return /* reexport safe */ _util_js__WEBPACK_IMPORTED_MODULE_3__.installTimerFunctions; },
/* harmony export */   "parse": function() { return /* reexport safe */ _contrib_parseuri_js__WEBPACK_IMPORTED_MODULE_4__.parse; }
/* harmony export */ });
/* harmony import */ var _socket_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./socket.js */ "./node_modules/engine.io-client/build/esm/socket.js");
/* harmony import */ var _transport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transport.js */ "./node_modules/engine.io-client/build/esm/transport.js");
/* harmony import */ var _transports_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./transports/index.js */ "./node_modules/engine.io-client/build/esm/transports/index.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util.js */ "./node_modules/engine.io-client/build/esm/util.js");
/* harmony import */ var _contrib_parseuri_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./contrib/parseuri.js */ "./node_modules/engine.io-client/build/esm/contrib/parseuri.js");


const protocol = _socket_js__WEBPACK_IMPORTED_MODULE_0__.Socket.protocol;






/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/socket.js":
/*!***********************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/socket.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Socket": function() { return /* binding */ Socket; }
/* harmony export */ });
/* harmony import */ var _transports_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transports/index.js */ "./node_modules/engine.io-client/build/esm/transports/index.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ "./node_modules/engine.io-client/build/esm/util.js");
/* harmony import */ var _contrib_parseqs_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contrib/parseqs.js */ "./node_modules/engine.io-client/build/esm/contrib/parseqs.js");
/* harmony import */ var _contrib_parseuri_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./contrib/parseuri.js */ "./node_modules/engine.io-client/build/esm/contrib/parseuri.js");
/* harmony import */ var _socket_io_component_emitter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @socket.io/component-emitter */ "./node_modules/@socket.io/component-emitter/index.mjs");
/* harmony import */ var engine_io_parser__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js");






class Socket extends _socket_io_component_emitter__WEBPACK_IMPORTED_MODULE_4__.Emitter {
    /**
     * Socket constructor.
     *
     * @param {String|Object} uri or options
     * @param {Object} opts - options
     * @api public
     */
    constructor(uri, opts = {}) {
        super();
        if (uri && "object" === typeof uri) {
            opts = uri;
            uri = null;
        }
        if (uri) {
            uri = (0,_contrib_parseuri_js__WEBPACK_IMPORTED_MODULE_3__.parse)(uri);
            opts.hostname = uri.host;
            opts.secure = uri.protocol === "https" || uri.protocol === "wss";
            opts.port = uri.port;
            if (uri.query)
                opts.query = uri.query;
        }
        else if (opts.host) {
            opts.hostname = (0,_contrib_parseuri_js__WEBPACK_IMPORTED_MODULE_3__.parse)(opts.host).host;
        }
        (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.installTimerFunctions)(this, opts);
        this.secure =
            null != opts.secure
                ? opts.secure
                : typeof location !== "undefined" && "https:" === location.protocol;
        if (opts.hostname && !opts.port) {
            // if no port is specified manually, use the protocol default
            opts.port = this.secure ? "443" : "80";
        }
        this.hostname =
            opts.hostname ||
                (typeof location !== "undefined" ? location.hostname : "localhost");
        this.port =
            opts.port ||
                (typeof location !== "undefined" && location.port
                    ? location.port
                    : this.secure
                        ? "443"
                        : "80");
        this.transports = opts.transports || ["polling", "websocket"];
        this.readyState = "";
        this.writeBuffer = [];
        this.prevBufferLen = 0;
        this.opts = Object.assign({
            path: "/engine.io",
            agent: false,
            withCredentials: false,
            upgrade: true,
            timestampParam: "t",
            rememberUpgrade: false,
            rejectUnauthorized: true,
            perMessageDeflate: {
                threshold: 1024
            },
            transportOptions: {},
            closeOnBeforeunload: true
        }, opts);
        this.opts.path = this.opts.path.replace(/\/$/, "") + "/";
        if (typeof this.opts.query === "string") {
            this.opts.query = (0,_contrib_parseqs_js__WEBPACK_IMPORTED_MODULE_2__.decode)(this.opts.query);
        }
        // set on handshake
        this.id = null;
        this.upgrades = null;
        this.pingInterval = null;
        this.pingTimeout = null;
        // set on heartbeat
        this.pingTimeoutTimer = null;
        if (typeof addEventListener === "function") {
            if (this.opts.closeOnBeforeunload) {
                // Firefox closes the connection when the "beforeunload" event is emitted but not Chrome. This event listener
                // ensures every browser behaves the same (no "disconnect" event at the Socket.IO level when the page is
                // closed/reloaded)
                addEventListener("beforeunload", () => {
                    if (this.transport) {
                        // silently close the transport
                        this.transport.removeAllListeners();
                        this.transport.close();
                    }
                }, false);
            }
            if (this.hostname !== "localhost") {
                this.offlineEventListener = () => {
                    this.onClose("transport close", {
                        description: "network connection lost"
                    });
                };
                addEventListener("offline", this.offlineEventListener, false);
            }
        }
        this.open();
    }
    /**
     * Creates transport of the given type.
     *
     * @param {String} transport name
     * @return {Transport}
     * @api private
     */
    createTransport(name) {
        const query = Object.assign({}, this.opts.query);
        // append engine.io protocol identifier
        query.EIO = engine_io_parser__WEBPACK_IMPORTED_MODULE_5__.protocol;
        // transport name
        query.transport = name;
        // session id if we already have one
        if (this.id)
            query.sid = this.id;
        const opts = Object.assign({}, this.opts.transportOptions[name], this.opts, {
            query,
            socket: this,
            hostname: this.hostname,
            secure: this.secure,
            port: this.port
        });
        return new _transports_index_js__WEBPACK_IMPORTED_MODULE_0__.transports[name](opts);
    }
    /**
     * Initializes transport to use and starts probe.
     *
     * @api private
     */
    open() {
        let transport;
        if (this.opts.rememberUpgrade &&
            Socket.priorWebsocketSuccess &&
            this.transports.indexOf("websocket") !== -1) {
            transport = "websocket";
        }
        else if (0 === this.transports.length) {
            // Emit error on next tick so it can be listened to
            this.setTimeoutFn(() => {
                this.emitReserved("error", "No transports available");
            }, 0);
            return;
        }
        else {
            transport = this.transports[0];
        }
        this.readyState = "opening";
        // Retry with the next transport if the transport is disabled (jsonp: false)
        try {
            transport = this.createTransport(transport);
        }
        catch (e) {
            this.transports.shift();
            this.open();
            return;
        }
        transport.open();
        this.setTransport(transport);
    }
    /**
     * Sets the current transport. Disables the existing one (if any).
     *
     * @api private
     */
    setTransport(transport) {
        if (this.transport) {
            this.transport.removeAllListeners();
        }
        // set up transport
        this.transport = transport;
        // set up transport listeners
        transport
            .on("drain", this.onDrain.bind(this))
            .on("packet", this.onPacket.bind(this))
            .on("error", this.onError.bind(this))
            .on("close", reason => this.onClose("transport close", reason));
    }
    /**
     * Probes a transport.
     *
     * @param {String} transport name
     * @api private
     */
    probe(name) {
        let transport = this.createTransport(name);
        let failed = false;
        Socket.priorWebsocketSuccess = false;
        const onTransportOpen = () => {
            if (failed)
                return;
            transport.send([{ type: "ping", data: "probe" }]);
            transport.once("packet", msg => {
                if (failed)
                    return;
                if ("pong" === msg.type && "probe" === msg.data) {
                    this.upgrading = true;
                    this.emitReserved("upgrading", transport);
                    if (!transport)
                        return;
                    Socket.priorWebsocketSuccess = "websocket" === transport.name;
                    this.transport.pause(() => {
                        if (failed)
                            return;
                        if ("closed" === this.readyState)
                            return;
                        cleanup();
                        this.setTransport(transport);
                        transport.send([{ type: "upgrade" }]);
                        this.emitReserved("upgrade", transport);
                        transport = null;
                        this.upgrading = false;
                        this.flush();
                    });
                }
                else {
                    const err = new Error("probe error");
                    // @ts-ignore
                    err.transport = transport.name;
                    this.emitReserved("upgradeError", err);
                }
            });
        };
        function freezeTransport() {
            if (failed)
                return;
            // Any callback called by transport should be ignored since now
            failed = true;
            cleanup();
            transport.close();
            transport = null;
        }
        // Handle any error that happens while probing
        const onerror = err => {
            const error = new Error("probe error: " + err);
            // @ts-ignore
            error.transport = transport.name;
            freezeTransport();
            this.emitReserved("upgradeError", error);
        };
        function onTransportClose() {
            onerror("transport closed");
        }
        // When the socket is closed while we're probing
        function onclose() {
            onerror("socket closed");
        }
        // When the socket is upgraded while we're probing
        function onupgrade(to) {
            if (transport && to.name !== transport.name) {
                freezeTransport();
            }
        }
        // Remove all listeners on the transport and on self
        const cleanup = () => {
            transport.removeListener("open", onTransportOpen);
            transport.removeListener("error", onerror);
            transport.removeListener("close", onTransportClose);
            this.off("close", onclose);
            this.off("upgrading", onupgrade);
        };
        transport.once("open", onTransportOpen);
        transport.once("error", onerror);
        transport.once("close", onTransportClose);
        this.once("close", onclose);
        this.once("upgrading", onupgrade);
        transport.open();
    }
    /**
     * Called when connection is deemed open.
     *
     * @api private
     */
    onOpen() {
        this.readyState = "open";
        Socket.priorWebsocketSuccess = "websocket" === this.transport.name;
        this.emitReserved("open");
        this.flush();
        // we check for `readyState` in case an `open`
        // listener already closed the socket
        if ("open" === this.readyState &&
            this.opts.upgrade &&
            this.transport.pause) {
            let i = 0;
            const l = this.upgrades.length;
            for (; i < l; i++) {
                this.probe(this.upgrades[i]);
            }
        }
    }
    /**
     * Handles a packet.
     *
     * @api private
     */
    onPacket(packet) {
        if ("opening" === this.readyState ||
            "open" === this.readyState ||
            "closing" === this.readyState) {
            this.emitReserved("packet", packet);
            // Socket is live - any packet counts
            this.emitReserved("heartbeat");
            switch (packet.type) {
                case "open":
                    this.onHandshake(JSON.parse(packet.data));
                    break;
                case "ping":
                    this.resetPingTimeout();
                    this.sendPacket("pong");
                    this.emitReserved("ping");
                    this.emitReserved("pong");
                    break;
                case "error":
                    const err = new Error("server error");
                    // @ts-ignore
                    err.code = packet.data;
                    this.onError(err);
                    break;
                case "message":
                    this.emitReserved("data", packet.data);
                    this.emitReserved("message", packet.data);
                    break;
            }
        }
        else {
        }
    }
    /**
     * Called upon handshake completion.
     *
     * @param {Object} data - handshake obj
     * @api private
     */
    onHandshake(data) {
        this.emitReserved("handshake", data);
        this.id = data.sid;
        this.transport.query.sid = data.sid;
        this.upgrades = this.filterUpgrades(data.upgrades);
        this.pingInterval = data.pingInterval;
        this.pingTimeout = data.pingTimeout;
        this.maxPayload = data.maxPayload;
        this.onOpen();
        // In case open handler closes socket
        if ("closed" === this.readyState)
            return;
        this.resetPingTimeout();
    }
    /**
     * Sets and resets ping timeout timer based on server pings.
     *
     * @api private
     */
    resetPingTimeout() {
        this.clearTimeoutFn(this.pingTimeoutTimer);
        this.pingTimeoutTimer = this.setTimeoutFn(() => {
            this.onClose("ping timeout");
        }, this.pingInterval + this.pingTimeout);
        if (this.opts.autoUnref) {
            this.pingTimeoutTimer.unref();
        }
    }
    /**
     * Called on `drain` event
     *
     * @api private
     */
    onDrain() {
        this.writeBuffer.splice(0, this.prevBufferLen);
        // setting prevBufferLen = 0 is very important
        // for example, when upgrading, upgrade packet is sent over,
        // and a nonzero prevBufferLen could cause problems on `drain`
        this.prevBufferLen = 0;
        if (0 === this.writeBuffer.length) {
            this.emitReserved("drain");
        }
        else {
            this.flush();
        }
    }
    /**
     * Flush write buffers.
     *
     * @api private
     */
    flush() {
        if ("closed" !== this.readyState &&
            this.transport.writable &&
            !this.upgrading &&
            this.writeBuffer.length) {
            const packets = this.getWritablePackets();
            this.transport.send(packets);
            // keep track of current length of writeBuffer
            // splice writeBuffer and callbackBuffer on `drain`
            this.prevBufferLen = packets.length;
            this.emitReserved("flush");
        }
    }
    /**
     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP
     * long-polling)
     *
     * @private
     */
    getWritablePackets() {
        const shouldCheckPayloadSize = this.maxPayload &&
            this.transport.name === "polling" &&
            this.writeBuffer.length > 1;
        if (!shouldCheckPayloadSize) {
            return this.writeBuffer;
        }
        let payloadSize = 1; // first packet type
        for (let i = 0; i < this.writeBuffer.length; i++) {
            const data = this.writeBuffer[i].data;
            if (data) {
                payloadSize += (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.byteLength)(data);
            }
            if (i > 0 && payloadSize > this.maxPayload) {
                return this.writeBuffer.slice(0, i);
            }
            payloadSize += 2; // separator + packet type
        }
        return this.writeBuffer;
    }
    /**
     * Sends a message.
     *
     * @param {String} message.
     * @param {Function} callback function.
     * @param {Object} options.
     * @return {Socket} for chaining.
     * @api public
     */
    write(msg, options, fn) {
        this.sendPacket("message", msg, options, fn);
        return this;
    }
    send(msg, options, fn) {
        this.sendPacket("message", msg, options, fn);
        return this;
    }
    /**
     * Sends a packet.
     *
     * @param {String} packet type.
     * @param {String} data.
     * @param {Object} options.
     * @param {Function} callback function.
     * @api private
     */
    sendPacket(type, data, options, fn) {
        if ("function" === typeof data) {
            fn = data;
            data = undefined;
        }
        if ("function" === typeof options) {
            fn = options;
            options = null;
        }
        if ("closing" === this.readyState || "closed" === this.readyState) {
            return;
        }
        options = options || {};
        options.compress = false !== options.compress;
        const packet = {
            type: type,
            data: data,
            options: options
        };
        this.emitReserved("packetCreate", packet);
        this.writeBuffer.push(packet);
        if (fn)
            this.once("flush", fn);
        this.flush();
    }
    /**
     * Closes the connection.
     *
     * @api public
     */
    close() {
        const close = () => {
            this.onClose("forced close");
            this.transport.close();
        };
        const cleanupAndClose = () => {
            this.off("upgrade", cleanupAndClose);
            this.off("upgradeError", cleanupAndClose);
            close();
        };
        const waitForUpgrade = () => {
            // wait for upgrade to finish since we can't send packets while pausing a transport
            this.once("upgrade", cleanupAndClose);
            this.once("upgradeError", cleanupAndClose);
        };
        if ("opening" === this.readyState || "open" === this.readyState) {
            this.readyState = "closing";
            if (this.writeBuffer.length) {
                this.once("drain", () => {
                    if (this.upgrading) {
                        waitForUpgrade();
                    }
                    else {
                        close();
                    }
                });
            }
            else if (this.upgrading) {
                waitForUpgrade();
            }
            else {
                close();
            }
        }
        return this;
    }
    /**
     * Called upon transport error
     *
     * @api private
     */
    onError(err) {
        Socket.priorWebsocketSuccess = false;
        this.emitReserved("error", err);
        this.onClose("transport error", err);
    }
    /**
     * Called upon transport close.
     *
     * @api private
     */
    onClose(reason, description) {
        if ("opening" === this.readyState ||
            "open" === this.readyState ||
            "closing" === this.readyState) {
            // clear timers
            this.clearTimeoutFn(this.pingTimeoutTimer);
            // stop event from firing again for transport
            this.transport.removeAllListeners("close");
            // ensure transport won't stay open
            this.transport.close();
            // ignore further transport communication
            this.transport.removeAllListeners();
            if (typeof removeEventListener === "function") {
                removeEventListener("offline", this.offlineEventListener, false);
            }
            // set ready state
            this.readyState = "closed";
            // clear session id
            this.id = null;
            // emit close event
            this.emitReserved("close", reason, description);
            // clean buffers after, so users can still
            // grab the buffers on `close` event
            this.writeBuffer = [];
            this.prevBufferLen = 0;
        }
    }
    /**
     * Filters upgrades, returning only those matching client transports.
     *
     * @param {Array} server upgrades
     * @api private
     *
     */
    filterUpgrades(upgrades) {
        const filteredUpgrades = [];
        let i = 0;
        const j = upgrades.length;
        for (; i < j; i++) {
            if (~this.transports.indexOf(upgrades[i]))
                filteredUpgrades.push(upgrades[i]);
        }
        return filteredUpgrades;
    }
}
Socket.protocol = engine_io_parser__WEBPACK_IMPORTED_MODULE_5__.protocol;


/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/transport.js":
/*!**************************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/transport.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Transport": function() { return /* binding */ Transport; }
/* harmony export */ });
/* harmony import */ var engine_io_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js");
/* harmony import */ var _socket_io_component_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @socket.io/component-emitter */ "./node_modules/@socket.io/component-emitter/index.mjs");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util.js */ "./node_modules/engine.io-client/build/esm/util.js");



class TransportError extends Error {
    constructor(reason, description, context) {
        super(reason);
        this.description = description;
        this.context = context;
        this.type = "TransportError";
    }
}
class Transport extends _socket_io_component_emitter__WEBPACK_IMPORTED_MODULE_1__.Emitter {
    /**
     * Transport abstract constructor.
     *
     * @param {Object} options.
     * @api private
     */
    constructor(opts) {
        super();
        this.writable = false;
        (0,_util_js__WEBPACK_IMPORTED_MODULE_2__.installTimerFunctions)(this, opts);
        this.opts = opts;
        this.query = opts.query;
        this.readyState = "";
        this.socket = opts.socket;
    }
    /**
     * Emits an error.
     *
     * @param {String} reason
     * @param description
     * @param context - the error context
     * @return {Transport} for chaining
     * @api protected
     */
    onError(reason, description, context) {
        super.emitReserved("error", new TransportError(reason, description, context));
        return this;
    }
    /**
     * Opens the transport.
     *
     * @api public
     */
    open() {
        if ("closed" === this.readyState || "" === this.readyState) {
            this.readyState = "opening";
            this.doOpen();
        }
        return this;
    }
    /**
     * Closes the transport.
     *
     * @api public
     */
    close() {
        if ("opening" === this.readyState || "open" === this.readyState) {
            this.doClose();
            this.onClose();
        }
        return this;
    }
    /**
     * Sends multiple packets.
     *
     * @param {Array} packets
     * @api public
     */
    send(packets) {
        if ("open" === this.readyState) {
            this.write(packets);
        }
        else {
            // this might happen if the transport was silently closed in the beforeunload event handler
        }
    }
    /**
     * Called upon open
     *
     * @api protected
     */
    onOpen() {
        this.readyState = "open";
        this.writable = true;
        super.emitReserved("open");
    }
    /**
     * Called with data.
     *
     * @param {String} data
     * @api protected
     */
    onData(data) {
        const packet = (0,engine_io_parser__WEBPACK_IMPORTED_MODULE_0__.decodePacket)(data, this.socket.binaryType);
        this.onPacket(packet);
    }
    /**
     * Called with a decoded packet.
     *
     * @api protected
     */
    onPacket(packet) {
        super.emitReserved("packet", packet);
    }
    /**
     * Called upon close.
     *
     * @api protected
     */
    onClose(details) {
        this.readyState = "closed";
        super.emitReserved("close", details);
    }
}


/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/transports/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/transports/index.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "transports": function() { return /* binding */ transports; }
/* harmony export */ });
/* harmony import */ var _polling_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./polling.js */ "./node_modules/engine.io-client/build/esm/transports/polling.js");
/* harmony import */ var _websocket_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./websocket.js */ "./node_modules/engine.io-client/build/esm/transports/websocket.js");


const transports = {
    websocket: _websocket_js__WEBPACK_IMPORTED_MODULE_1__.WS,
    polling: _polling_js__WEBPACK_IMPORTED_MODULE_0__.Polling
};


/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/transports/polling.js":
/*!***********************************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/transports/polling.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Polling": function() { return /* binding */ Polling; },
/* harmony export */   "Request": function() { return /* binding */ Request; }
/* harmony export */ });
/* harmony import */ var _transport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../transport.js */ "./node_modules/engine.io-client/build/esm/transport.js");
/* harmony import */ var _contrib_yeast_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contrib/yeast.js */ "./node_modules/engine.io-client/build/esm/contrib/yeast.js");
/* harmony import */ var _contrib_parseqs_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contrib/parseqs.js */ "./node_modules/engine.io-client/build/esm/contrib/parseqs.js");
/* harmony import */ var engine_io_parser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js");
/* harmony import */ var _xmlhttprequest_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./xmlhttprequest.js */ "./node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js");
/* harmony import */ var _socket_io_component_emitter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @socket.io/component-emitter */ "./node_modules/@socket.io/component-emitter/index.mjs");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util.js */ "./node_modules/engine.io-client/build/esm/util.js");
/* harmony import */ var _globalThis_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../globalThis.js */ "./node_modules/engine.io-client/build/esm/globalThis.browser.js");








function empty() { }
const hasXHR2 = (function () {
    const xhr = new _xmlhttprequest_js__WEBPACK_IMPORTED_MODULE_4__.default({
        xdomain: false
    });
    return null != xhr.responseType;
})();
class Polling extends _transport_js__WEBPACK_IMPORTED_MODULE_0__.Transport {
    /**
     * XHR Polling constructor.
     *
     * @param {Object} opts
     * @api public
     */
    constructor(opts) {
        super(opts);
        this.polling = false;
        if (typeof location !== "undefined") {
            const isSSL = "https:" === location.protocol;
            let port = location.port;
            // some user agents have empty `location.port`
            if (!port) {
                port = isSSL ? "443" : "80";
            }
            this.xd =
                (typeof location !== "undefined" &&
                    opts.hostname !== location.hostname) ||
                    port !== opts.port;
            this.xs = opts.secure !== isSSL;
        }
        /**
         * XHR supports binary
         */
        const forceBase64 = opts && opts.forceBase64;
        this.supportsBinary = hasXHR2 && !forceBase64;
    }
    /**
     * Transport name.
     */
    get name() {
        return "polling";
    }
    /**
     * Opens the socket (triggers polling). We write a PING message to determine
     * when the transport is open.
     *
     * @api private
     */
    doOpen() {
        this.poll();
    }
    /**
     * Pauses polling.
     *
     * @param {Function} callback upon buffers are flushed and transport is paused
     * @api private
     */
    pause(onPause) {
        this.readyState = "pausing";
        const pause = () => {
            this.readyState = "paused";
            onPause();
        };
        if (this.polling || !this.writable) {
            let total = 0;
            if (this.polling) {
                total++;
                this.once("pollComplete", function () {
                    --total || pause();
                });
            }
            if (!this.writable) {
                total++;
                this.once("drain", function () {
                    --total || pause();
                });
            }
        }
        else {
            pause();
        }
    }
    /**
     * Starts polling cycle.
     *
     * @api public
     */
    poll() {
        this.polling = true;
        this.doPoll();
        this.emitReserved("poll");
    }
    /**
     * Overloads onData to detect payloads.
     *
     * @api private
     */
    onData(data) {
        const callback = packet => {
            // if its the first message we consider the transport open
            if ("opening" === this.readyState && packet.type === "open") {
                this.onOpen();
            }
            // if its a close packet, we close the ongoing requests
            if ("close" === packet.type) {
                this.onClose({ description: "transport closed by the server" });
                return false;
            }
            // otherwise bypass onData and handle the message
            this.onPacket(packet);
        };
        // decode payload
        (0,engine_io_parser__WEBPACK_IMPORTED_MODULE_3__.decodePayload)(data, this.socket.binaryType).forEach(callback);
        // if an event did not trigger closing
        if ("closed" !== this.readyState) {
            // if we got data we're not polling
            this.polling = false;
            this.emitReserved("pollComplete");
            if ("open" === this.readyState) {
                this.poll();
            }
            else {
            }
        }
    }
    /**
     * For polling, send a close packet.
     *
     * @api private
     */
    doClose() {
        const close = () => {
            this.write([{ type: "close" }]);
        };
        if ("open" === this.readyState) {
            close();
        }
        else {
            // in case we're trying to close while
            // handshaking is in progress (GH-164)
            this.once("open", close);
        }
    }
    /**
     * Writes a packets payload.
     *
     * @param {Array} data packets
     * @param {Function} drain callback
     * @api private
     */
    write(packets) {
        this.writable = false;
        (0,engine_io_parser__WEBPACK_IMPORTED_MODULE_3__.encodePayload)(packets, data => {
            this.doWrite(data, () => {
                this.writable = true;
                this.emitReserved("drain");
            });
        });
    }
    /**
     * Generates uri for connection.
     *
     * @api private
     */
    uri() {
        let query = this.query || {};
        const schema = this.opts.secure ? "https" : "http";
        let port = "";
        // cache busting is forced
        if (false !== this.opts.timestampRequests) {
            query[this.opts.timestampParam] = (0,_contrib_yeast_js__WEBPACK_IMPORTED_MODULE_1__.yeast)();
        }
        if (!this.supportsBinary && !query.sid) {
            query.b64 = 1;
        }
        // avoid port if default for schema
        if (this.opts.port &&
            (("https" === schema && Number(this.opts.port) !== 443) ||
                ("http" === schema && Number(this.opts.port) !== 80))) {
            port = ":" + this.opts.port;
        }
        const encodedQuery = (0,_contrib_parseqs_js__WEBPACK_IMPORTED_MODULE_2__.encode)(query);
        const ipv6 = this.opts.hostname.indexOf(":") !== -1;
        return (schema +
            "://" +
            (ipv6 ? "[" + this.opts.hostname + "]" : this.opts.hostname) +
            port +
            this.opts.path +
            (encodedQuery.length ? "?" + encodedQuery : ""));
    }
    /**
     * Creates a request.
     *
     * @param {String} method
     * @api private
     */
    request(opts = {}) {
        Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);
        return new Request(this.uri(), opts);
    }
    /**
     * Sends data.
     *
     * @param {String} data to send.
     * @param {Function} called upon flush.
     * @api private
     */
    doWrite(data, fn) {
        const req = this.request({
            method: "POST",
            data: data
        });
        req.on("success", fn);
        req.on("error", (xhrStatus, context) => {
            this.onError("xhr post error", xhrStatus, context);
        });
    }
    /**
     * Starts a poll cycle.
     *
     * @api private
     */
    doPoll() {
        const req = this.request();
        req.on("data", this.onData.bind(this));
        req.on("error", (xhrStatus, context) => {
            this.onError("xhr poll error", xhrStatus, context);
        });
        this.pollXhr = req;
    }
}
class Request extends _socket_io_component_emitter__WEBPACK_IMPORTED_MODULE_5__.Emitter {
    /**
     * Request constructor
     *
     * @param {Object} options
     * @api public
     */
    constructor(uri, opts) {
        super();
        (0,_util_js__WEBPACK_IMPORTED_MODULE_6__.installTimerFunctions)(this, opts);
        this.opts = opts;
        this.method = opts.method || "GET";
        this.uri = uri;
        this.async = false !== opts.async;
        this.data = undefined !== opts.data ? opts.data : null;
        this.create();
    }
    /**
     * Creates the XHR object and sends the request.
     *
     * @api private
     */
    create() {
        const opts = (0,_util_js__WEBPACK_IMPORTED_MODULE_6__.pick)(this.opts, "agent", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "autoUnref");
        opts.xdomain = !!this.opts.xd;
        opts.xscheme = !!this.opts.xs;
        const xhr = (this.xhr = new _xmlhttprequest_js__WEBPACK_IMPORTED_MODULE_4__.default(opts));
        try {
            xhr.open(this.method, this.uri, this.async);
            try {
                if (this.opts.extraHeaders) {
                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);
                    for (let i in this.opts.extraHeaders) {
                        if (this.opts.extraHeaders.hasOwnProperty(i)) {
                            xhr.setRequestHeader(i, this.opts.extraHeaders[i]);
                        }
                    }
                }
            }
            catch (e) { }
            if ("POST" === this.method) {
                try {
                    xhr.setRequestHeader("Content-type", "text/plain;charset=UTF-8");
                }
                catch (e) { }
            }
            try {
                xhr.setRequestHeader("Accept", "*/*");
            }
            catch (e) { }
            // ie6 check
            if ("withCredentials" in xhr) {
                xhr.withCredentials = this.opts.withCredentials;
            }
            if (this.opts.requestTimeout) {
                xhr.timeout = this.opts.requestTimeout;
            }
            xhr.onreadystatechange = () => {
                if (4 !== xhr.readyState)
                    return;
                if (200 === xhr.status || 1223 === xhr.status) {
                    this.onLoad();
                }
                else {
                    // make sure the `error` event handler that's user-set
                    // does not throw in the same tick and gets caught here
                    this.setTimeoutFn(() => {
                        this.onError(typeof xhr.status === "number" ? xhr.status : 0);
                    }, 0);
                }
            };
            xhr.send(this.data);
        }
        catch (e) {
            // Need to defer since .create() is called directly from the constructor
            // and thus the 'error' event can only be only bound *after* this exception
            // occurs.  Therefore, also, we cannot throw here at all.
            this.setTimeoutFn(() => {
                this.onError(e);
            }, 0);
            return;
        }
        if (typeof document !== "undefined") {
            this.index = Request.requestsCount++;
            Request.requests[this.index] = this;
        }
    }
    /**
     * Called upon error.
     *
     * @api private
     */
    onError(err) {
        this.emitReserved("error", err, this.xhr);
        this.cleanup(true);
    }
    /**
     * Cleans up house.
     *
     * @api private
     */
    cleanup(fromError) {
        if ("undefined" === typeof this.xhr || null === this.xhr) {
            return;
        }
        this.xhr.onreadystatechange = empty;
        if (fromError) {
            try {
                this.xhr.abort();
            }
            catch (e) { }
        }
        if (typeof document !== "undefined") {
            delete Request.requests[this.index];
        }
        this.xhr = null;
    }
    /**
     * Called upon load.
     *
     * @api private
     */
    onLoad() {
        const data = this.xhr.responseText;
        if (data !== null) {
            this.emitReserved("data", data);
            this.emitReserved("success");
            this.cleanup();
        }
    }
    /**
     * Aborts the request.
     *
     * @api public
     */
    abort() {
        this.cleanup();
    }
}
Request.requestsCount = 0;
Request.requests = {};
/**
 * Aborts pending requests when unloading the window. This is needed to prevent
 * memory leaks (e.g. when using IE) and to ensure that no spurious error is
 * emitted.
 */
if (typeof document !== "undefined") {
    // @ts-ignore
    if (typeof attachEvent === "function") {
        // @ts-ignore
        attachEvent("onunload", unloadHandler);
    }
    else if (typeof addEventListener === "function") {
        const terminationEvent = "onpagehide" in _globalThis_js__WEBPACK_IMPORTED_MODULE_7__.default ? "pagehide" : "unload";
        addEventListener(terminationEvent, unloadHandler, false);
    }
}
function unloadHandler() {
    for (let i in Request.requests) {
        if (Request.requests.hasOwnProperty(i)) {
            Request.requests[i].abort();
        }
    }
}


/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js ***!
  \*********************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "nextTick": function() { return /* binding */ nextTick; },
/* harmony export */   "WebSocket": function() { return /* binding */ WebSocket; },
/* harmony export */   "usingBrowserWebSocket": function() { return /* binding */ usingBrowserWebSocket; },
/* harmony export */   "defaultBinaryType": function() { return /* binding */ defaultBinaryType; }
/* harmony export */ });
/* harmony import */ var _globalThis_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globalThis.js */ "./node_modules/engine.io-client/build/esm/globalThis.browser.js");

const nextTick = (() => {
    const isPromiseAvailable = typeof Promise === "function" && typeof Promise.resolve === "function";
    if (isPromiseAvailable) {
        return cb => Promise.resolve().then(cb);
    }
    else {
        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);
    }
})();
const WebSocket = _globalThis_js__WEBPACK_IMPORTED_MODULE_0__.default.WebSocket || _globalThis_js__WEBPACK_IMPORTED_MODULE_0__.default.MozWebSocket;
const usingBrowserWebSocket = true;
const defaultBinaryType = "arraybuffer";


/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/transports/websocket.js":
/*!*************************************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/transports/websocket.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WS": function() { return /* binding */ WS; }
/* harmony export */ });
/* harmony import */ var _transport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../transport.js */ "./node_modules/engine.io-client/build/esm/transport.js");
/* harmony import */ var _contrib_parseqs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contrib/parseqs.js */ "./node_modules/engine.io-client/build/esm/contrib/parseqs.js");
/* harmony import */ var _contrib_yeast_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contrib/yeast.js */ "./node_modules/engine.io-client/build/esm/contrib/yeast.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util.js */ "./node_modules/engine.io-client/build/esm/util.js");
/* harmony import */ var _websocket_constructor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./websocket-constructor.js */ "./node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js");
/* harmony import */ var engine_io_parser__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! engine.io-parser */ "./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js");






// detect ReactNative environment
const isReactNative = typeof navigator !== "undefined" &&
    typeof navigator.product === "string" &&
    navigator.product.toLowerCase() === "reactnative";
class WS extends _transport_js__WEBPACK_IMPORTED_MODULE_0__.Transport {
    /**
     * WebSocket transport constructor.
     *
     * @api {Object} connection options
     * @api public
     */
    constructor(opts) {
        super(opts);
        this.supportsBinary = !opts.forceBase64;
    }
    /**
     * Transport name.
     *
     * @api public
     */
    get name() {
        return "websocket";
    }
    /**
     * Opens socket.
     *
     * @api private
     */
    doOpen() {
        if (!this.check()) {
            // let probe timeout
            return;
        }
        const uri = this.uri();
        const protocols = this.opts.protocols;
        // React Native only supports the 'headers' option, and will print a warning if anything else is passed
        const opts = isReactNative
            ? {}
            : (0,_util_js__WEBPACK_IMPORTED_MODULE_3__.pick)(this.opts, "agent", "perMessageDeflate", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "localAddress", "protocolVersion", "origin", "maxPayload", "family", "checkServerIdentity");
        if (this.opts.extraHeaders) {
            opts.headers = this.opts.extraHeaders;
        }
        try {
            this.ws =
                _websocket_constructor_js__WEBPACK_IMPORTED_MODULE_4__.usingBrowserWebSocket && !isReactNative
                    ? protocols
                        ? new _websocket_constructor_js__WEBPACK_IMPORTED_MODULE_4__.WebSocket(uri, protocols)
                        : new _websocket_constructor_js__WEBPACK_IMPORTED_MODULE_4__.WebSocket(uri)
                    : new _websocket_constructor_js__WEBPACK_IMPORTED_MODULE_4__.WebSocket(uri, protocols, opts);
        }
        catch (err) {
            return this.emitReserved("error", err);
        }
        this.ws.binaryType = this.socket.binaryType || _websocket_constructor_js__WEBPACK_IMPORTED_MODULE_4__.defaultBinaryType;
        this.addEventListeners();
    }
    /**
     * Adds event listeners to the socket
     *
     * @api private
     */
    addEventListeners() {
        this.ws.onopen = () => {
            if (this.opts.autoUnref) {
                this.ws._socket.unref();
            }
            this.onOpen();
        };
        this.ws.onclose = closeEvent => this.onClose({
            description: "websocket connection closed",
            context: closeEvent
        });
        this.ws.onmessage = ev => this.onData(ev.data);
        this.ws.onerror = e => this.onError("websocket error", e);
    }
    /**
     * Writes data to socket.
     *
     * @param {Array} array of packets.
     * @api private
     */
    write(packets) {
        this.writable = false;
        // encodePacket efficient as it uses WS framing
        // no need for encodePayload
        for (let i = 0; i < packets.length; i++) {
            const packet = packets[i];
            const lastPacket = i === packets.length - 1;
            (0,engine_io_parser__WEBPACK_IMPORTED_MODULE_5__.encodePacket)(packet, this.supportsBinary, data => {
                // always create a new object (GH-437)
                const opts = {};
                if (!_websocket_constructor_js__WEBPACK_IMPORTED_MODULE_4__.usingBrowserWebSocket) {
                    if (packet.options) {
                        opts.compress = packet.options.compress;
                    }
                    if (this.opts.perMessageDeflate) {
                        const len = 
                        // @ts-ignore
                        "string" === typeof data ? Buffer.byteLength(data) : data.length;
                        if (len < this.opts.perMessageDeflate.threshold) {
                            opts.compress = false;
                        }
                    }
                }
                // Sometimes the websocket has already been closed but the browser didn't
                // have a chance of informing us about it yet, in that case send will
                // throw an error
                try {
                    if (_websocket_constructor_js__WEBPACK_IMPORTED_MODULE_4__.usingBrowserWebSocket) {
                        // TypeError is thrown when passing the second argument on Safari
                        this.ws.send(data);
                    }
                    else {
                        this.ws.send(data, opts);
                    }
                }
                catch (e) {
                }
                if (lastPacket) {
                    // fake drain
                    // defer to next tick to allow Socket to clear writeBuffer
                    (0,_websocket_constructor_js__WEBPACK_IMPORTED_MODULE_4__.nextTick)(() => {
                        this.writable = true;
                        this.emitReserved("drain");
                    }, this.setTimeoutFn);
                }
            });
        }
    }
    /**
     * Closes socket.
     *
     * @api private
     */
    doClose() {
        if (typeof this.ws !== "undefined") {
            this.ws.close();
            this.ws = null;
        }
    }
    /**
     * Generates uri for connection.
     *
     * @api private
     */
    uri() {
        let query = this.query || {};
        const schema = this.opts.secure ? "wss" : "ws";
        let port = "";
        // avoid port if default for schema
        if (this.opts.port &&
            (("wss" === schema && Number(this.opts.port) !== 443) ||
                ("ws" === schema && Number(this.opts.port) !== 80))) {
            port = ":" + this.opts.port;
        }
        // append timestamp to URI
        if (this.opts.timestampRequests) {
            query[this.opts.timestampParam] = (0,_contrib_yeast_js__WEBPACK_IMPORTED_MODULE_2__.yeast)();
        }
        // communicate binary support capabilities
        if (!this.supportsBinary) {
            query.b64 = 1;
        }
        const encodedQuery = (0,_contrib_parseqs_js__WEBPACK_IMPORTED_MODULE_1__.encode)(query);
        const ipv6 = this.opts.hostname.indexOf(":") !== -1;
        return (schema +
            "://" +
            (ipv6 ? "[" + this.opts.hostname + "]" : this.opts.hostname) +
            port +
            this.opts.path +
            (encodedQuery.length ? "?" + encodedQuery : ""));
    }
    /**
     * Feature detection for WebSocket.
     *
     * @return {Boolean} whether this transport is available.
     * @api public
     */
    check() {
        return (!!_websocket_constructor_js__WEBPACK_IMPORTED_MODULE_4__.WebSocket &&
            !("__initialize" in _websocket_constructor_js__WEBPACK_IMPORTED_MODULE_4__.WebSocket && this.name === WS.prototype.name));
    }
}


/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js ***!
  \**************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }
/* harmony export */ });
/* harmony import */ var _contrib_has_cors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../contrib/has-cors.js */ "./node_modules/engine.io-client/build/esm/contrib/has-cors.js");
/* harmony import */ var _globalThis_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globalThis.js */ "./node_modules/engine.io-client/build/esm/globalThis.browser.js");
// browser shim for xmlhttprequest module


/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(opts) {
    const xdomain = opts.xdomain;
    // XMLHttpRequest can be disabled on IE
    try {
        if ("undefined" !== typeof XMLHttpRequest && (!xdomain || _contrib_has_cors_js__WEBPACK_IMPORTED_MODULE_0__.hasCORS)) {
            return new XMLHttpRequest();
        }
    }
    catch (e) { }
    if (!xdomain) {
        try {
            return new _globalThis_js__WEBPACK_IMPORTED_MODULE_1__.default[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP");
        }
        catch (e) { }
    }
}


/***/ }),

/***/ "./node_modules/engine.io-client/build/esm/util.js":
/*!*********************************************************!*\
  !*** ./node_modules/engine.io-client/build/esm/util.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "pick": function() { return /* binding */ pick; },
/* harmony export */   "installTimerFunctions": function() { return /* binding */ installTimerFunctions; },
/* harmony export */   "byteLength": function() { return /* binding */ byteLength; }
/* harmony export */ });
/* harmony import */ var _globalThis_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globalThis.js */ "./node_modules/engine.io-client/build/esm/globalThis.browser.js");

function pick(obj, ...attr) {
    return attr.reduce((acc, k) => {
        if (obj.hasOwnProperty(k)) {
            acc[k] = obj[k];
        }
        return acc;
    }, {});
}
// Keep a reference to the real timeout functions so they can be used when overridden
const NATIVE_SET_TIMEOUT = setTimeout;
const NATIVE_CLEAR_TIMEOUT = clearTimeout;
function installTimerFunctions(obj, opts) {
    if (opts.useNativeTimers) {
        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(_globalThis_js__WEBPACK_IMPORTED_MODULE_0__.default);
        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(_globalThis_js__WEBPACK_IMPORTED_MODULE_0__.default);
    }
    else {
        obj.setTimeoutFn = setTimeout.bind(_globalThis_js__WEBPACK_IMPORTED_MODULE_0__.default);
        obj.clearTimeoutFn = clearTimeout.bind(_globalThis_js__WEBPACK_IMPORTED_MODULE_0__.default);
    }
}
// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)
const BASE64_OVERHEAD = 1.33;
// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9
function byteLength(obj) {
    if (typeof obj === "string") {
        return utf8Length(obj);
    }
    // arraybuffer or blob
    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);
}
function utf8Length(str) {
    let c = 0, length = 0;
    for (let i = 0, l = str.length; i < l; i++) {
        c = str.charCodeAt(i);
        if (c < 0x80) {
            length += 1;
        }
        else if (c < 0x800) {
            length += 2;
        }
        else if (c < 0xd800 || c >= 0xe000) {
            length += 3;
        }
        else {
            i++;
            length += 4;
        }
    }
    return length;
}


/***/ }),

/***/ "./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/commons.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/commons.js ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PACKET_TYPES": function() { return /* binding */ PACKET_TYPES; },
/* harmony export */   "PACKET_TYPES_REVERSE": function() { return /* binding */ PACKET_TYPES_REVERSE; },
/* harmony export */   "ERROR_PACKET": function() { return /* binding */ ERROR_PACKET; }
/* harmony export */ });
const PACKET_TYPES = Object.create(null); // no Map = no polyfill
PACKET_TYPES["open"] = "0";
PACKET_TYPES["close"] = "1";
PACKET_TYPES["ping"] = "2";
PACKET_TYPES["pong"] = "3";
PACKET_TYPES["message"] = "4";
PACKET_TYPES["upgrade"] = "5";
PACKET_TYPES["noop"] = "6";
const PACKET_TYPES_REVERSE = Object.create(null);
Object.keys(PACKET_TYPES).forEach(key => {
    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;
});
const ERROR_PACKET = { type: "error", data: "parser error" };



/***/ }),

/***/ "./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/decodePacket.browser.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/decodePacket.browser.js ***!
  \*******************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _commons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./commons.js */ "./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/commons.js");
/* harmony import */ var _socket_io_base64_arraybuffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @socket.io/base64-arraybuffer */ "./node_modules/@socket.io/base64-arraybuffer/dist/base64-arraybuffer.es5.js");


const withNativeArrayBuffer = typeof ArrayBuffer === "function";
const decodePacket = (encodedPacket, binaryType) => {
    if (typeof encodedPacket !== "string") {
        return {
            type: "message",
            data: mapBinary(encodedPacket, binaryType)
        };
    }
    const type = encodedPacket.charAt(0);
    if (type === "b") {
        return {
            type: "message",
            data: decodeBase64Packet(encodedPacket.substring(1), binaryType)
        };
    }
    const packetType = _commons_js__WEBPACK_IMPORTED_MODULE_0__.PACKET_TYPES_REVERSE[type];
    if (!packetType) {
        return _commons_js__WEBPACK_IMPORTED_MODULE_0__.ERROR_PACKET;
    }
    return encodedPacket.length > 1
        ? {
            type: _commons_js__WEBPACK_IMPORTED_MODULE_0__.PACKET_TYPES_REVERSE[type],
            data: encodedPacket.substring(1)
        }
        : {
            type: _commons_js__WEBPACK_IMPORTED_MODULE_0__.PACKET_TYPES_REVERSE[type]
        };
};
const decodeBase64Packet = (data, binaryType) => {
    if (withNativeArrayBuffer) {
        const decoded = (0,_socket_io_base64_arraybuffer__WEBPACK_IMPORTED_MODULE_1__.decode)(data);
        return mapBinary(decoded, binaryType);
    }
    else {
        return { base64: true, data }; // fallback for old browsers
    }
};
const mapBinary = (data, binaryType) => {
    switch (binaryType) {
        case "blob":
            return data instanceof ArrayBuffer ? new Blob([data]) : data;
        case "arraybuffer":
        default:
            return data; // assuming the data is already an ArrayBuffer
    }
};
/* harmony default export */ __webpack_exports__["default"] = (decodePacket);


/***/ }),

/***/ "./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/encodePacket.browser.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/encodePacket.browser.js ***!
  \*******************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _commons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./commons.js */ "./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/commons.js");

const withNativeBlob = typeof Blob === "function" ||
    (typeof Blob !== "undefined" &&
        Object.prototype.toString.call(Blob) === "[object BlobConstructor]");
const withNativeArrayBuffer = typeof ArrayBuffer === "function";
// ArrayBuffer.isView method is not defined in IE10
const isView = obj => {
    return typeof ArrayBuffer.isView === "function"
        ? ArrayBuffer.isView(obj)
        : obj && obj.buffer instanceof ArrayBuffer;
};
const encodePacket = ({ type, data }, supportsBinary, callback) => {
    if (withNativeBlob && data instanceof Blob) {
        if (supportsBinary) {
            return callback(data);
        }
        else {
            return encodeBlobAsBase64(data, callback);
        }
    }
    else if (withNativeArrayBuffer &&
        (data instanceof ArrayBuffer || isView(data))) {
        if (supportsBinary) {
            return callback(data);
        }
        else {
            return encodeBlobAsBase64(new Blob([data]), callback);
        }
    }
    // plain string
    return callback(_commons_js__WEBPACK_IMPORTED_MODULE_0__.PACKET_TYPES[type] + (data || ""));
};
const encodeBlobAsBase64 = (data, callback) => {
    const fileReader = new FileReader();
    fileReader.onload = function () {
        const content = fileReader.result.split(",")[1];
        callback("b" + content);
    };
    return fileReader.readAsDataURL(data);
};
/* harmony default export */ __webpack_exports__["default"] = (encodePacket);


/***/ }),

/***/ "./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "protocol": function() { return /* binding */ protocol; },
/* harmony export */   "encodePacket": function() { return /* reexport safe */ _encodePacket_js__WEBPACK_IMPORTED_MODULE_0__.default; },
/* harmony export */   "encodePayload": function() { return /* binding */ encodePayload; },
/* harmony export */   "decodePacket": function() { return /* reexport safe */ _decodePacket_js__WEBPACK_IMPORTED_MODULE_1__.default; },
/* harmony export */   "decodePayload": function() { return /* binding */ decodePayload; }
/* harmony export */ });
/* harmony import */ var _encodePacket_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./encodePacket.js */ "./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/encodePacket.browser.js");
/* harmony import */ var _decodePacket_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./decodePacket.js */ "./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/decodePacket.browser.js");


const SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text
const encodePayload = (packets, callback) => {
    // some packets may be added to the array while encoding, so the initial length must be saved
    const length = packets.length;
    const encodedPackets = new Array(length);
    let count = 0;
    packets.forEach((packet, i) => {
        // force base64 encoding for binary packets
        (0,_encodePacket_js__WEBPACK_IMPORTED_MODULE_0__.default)(packet, false, encodedPacket => {
            encodedPackets[i] = encodedPacket;
            if (++count === length) {
                callback(encodedPackets.join(SEPARATOR));
            }
        });
    });
};
const decodePayload = (encodedPayload, binaryType) => {
    const encodedPackets = encodedPayload.split(SEPARATOR);
    const packets = [];
    for (let i = 0; i < encodedPackets.length; i++) {
        const decodedPacket = (0,_decodePacket_js__WEBPACK_IMPORTED_MODULE_1__.default)(encodedPackets[i], binaryType);
        packets.push(decodedPacket);
        if (decodedPacket.type === "error") {
            break;
        }
    }
    return packets;
};
const protocol = 4;



/***/ }),

/***/ "./node_modules/loglevel/lib/loglevel.js":
/*!***********************************************!*\
  !*** ./node_modules/loglevel/lib/loglevel.js ***!
  \***********************************************/
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! loglevel - v1.7.1 - https://github.com/pimterry/loglevel - (c) 2020 Tim Perry - licensed MIT */
(function (root, definition) {
    "use strict";
    if (true) {
        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition),
		__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
		(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
		__WEBPACK_AMD_DEFINE_FACTORY__),
		__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else {}
}(this, function () {
    "use strict";

    // Slightly dubious tricks to cut down minimized file size
    var noop = function() {};
    var undefinedType = "undefined";
    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (
        /Trident\/|MSIE /.test(window.navigator.userAgent)
    );

    var logMethods = [
        "trace",
        "debug",
        "info",
        "warn",
        "error"
    ];

    // Cross-browser bind equivalent that works at least back to IE6
    function bindMethod(obj, methodName,prefix) {
        var method = obj[methodName];
        if (typeof method.bind === 'function') {
            return method.bind(obj, `[${methodName.toUpperCase()}]`, prefix);
        } else {
            try {
                return Function.prototype.bind.call(method, obj);
            } catch (e) {
                // Missing bind shim or IE8 + Modernizr, fallback to wrapping
                return function() {
                    return Function.prototype.apply.apply(method, [obj, arguments]);
                };
            }
        }
    }

    // Trace() doesn't print the message in IE, so for that case we need to wrap it
    function traceForIE() {
        if (console.log) {
            if (console.log.apply) {
                console.log.apply(console, arguments);
            } else {
                // In old IE, native console methods themselves don't have apply().
                Function.prototype.apply.apply(console.log, [console, arguments]);
            }
        }
        if (console.trace) console.trace();
    }

    // Build the best logging method possible for this env
    // Wherever possible we want to bind, not wrap, to preserve stack traces
    function realMethod(methodName,prefix) {
        if (methodName === 'debug') {
            methodName = 'log';
        }

        if (typeof console === undefinedType) {
            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives
        } else if (methodName === 'trace' && isIE) {
            return traceForIE;
        } else if (console[methodName] !== undefined) {
            return bindMethod(console, methodName, prefix, methodName);
        } else if (console.log !== undefined) {
            return bindMethod(console, 'log');
        } else {
            return noop;
        }
    }

    // These private functions always need `this` to be set properly

    function replaceLoggingMethods(level, prefix) {
        /*jshint validthis:true */
        for (var i = 0; i < logMethods.length; i++) {
            var methodName = logMethods[i];
            this[methodName] = (i < level) ?
                noop :
                this.methodFactory(methodName, level, prefix);
        }

        // Define log.log as an alias for log.debug
        this.log = this.debug;
    }

    // In old IE versions, the console isn't present until you first open it.
    // We build realMethod() replacements here that regenerate logging methods
    function enableLoggingWhenConsoleArrives(methodName, level, prefix) {
        return function () {
            if (typeof console !== undefinedType) {
                replaceLoggingMethods.call(this, level, prefix);
                this[methodName].apply(this, arguments);
            }
        };
    }

    // By default, we use closely bound real methods wherever possible, and
    // otherwise we wait for a console to appear, and then try again.
    function defaultMethodFactory(methodName, level, prefix) {
        /*jshint validthis:true */
        return realMethod(methodName, prefix) ||
               enableLoggingWhenConsoleArrives.apply(this, arguments);
    }

    function Logger(name, defaultLevel, factory) {
      var self = this;
      var currentLevel;

      var storageKey = "loglevel";
      if (typeof name === "string") {
        storageKey += ":" + name;
      } else if (typeof name === "symbol") {
        storageKey = undefined;
      }

      function persistLevelIfPossible(levelNum) {
          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();

          if (typeof window === undefinedType || !storageKey) return;

          // Use localStorage if available
          try {
              window.localStorage[storageKey] = levelName;
              return;
          } catch (ignore) {}

          // Use session cookie as fallback
          try {
              window.document.cookie =
                encodeURIComponent(storageKey) + "=" + levelName + ";";
          } catch (ignore) {}
      }

      function getPersistedLevel() {
          var storedLevel;

          if (typeof window === undefinedType || !storageKey) return;

          try {
              storedLevel = window.localStorage[storageKey];
          } catch (ignore) {}

          // Fallback to cookies if local storage gives us nothing
          if (typeof storedLevel === undefinedType) {
              try {
                  var cookie = window.document.cookie;
                  var location = cookie.indexOf(
                      encodeURIComponent(storageKey) + "=");
                  if (location !== -1) {
                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];
                  }
              } catch (ignore) {}
          }

          // If the stored level is not valid, treat it as if nothing was stored.
          if (self.levels[storedLevel] === undefined) {
              storedLevel = undefined;
          }

          return storedLevel;
      }

      /*
       *
       * Public logger API - see https://github.com/pimterry/loglevel for details
       *
       */

      self.name = name;

      self.levels = { "TRACE": 0, "DEBUG": 1, "INFO": 2, "WARN": 3,
          "ERROR": 4, "SILENT": 5};

      self.methodFactory = factory || defaultMethodFactory;

      self.getLevel = function () {
          return currentLevel;
      };
      self.setPrefix = function(prefix) {
	   self.prefix = prefix;
	   if (typeof self.prefix === "function")
		   replaceLoggingMethods.call(self, self.level, self.prefix() || name.toUpperCase() || "");
	   else 
                  replaceLoggingMethods.call(self, self.level, self.prefix || name.toUpperCase() || "");
           if (typeof console === undefinedType && level < self.levels.SILENT) {
                  return "No console available for logging";
           }
      }
      self.setLevel = function (level, persist) {
          if (typeof level === "string" && self.levels[level.toUpperCase()] !== undefined) {
              level = self.levels[level.toUpperCase()];
          }
          if (typeof level === "number" && level >= 0 && level <= self.levels.SILENT) {
              currentLevel = level;
              if (persist !== false) {  // defaults to true
                  persistLevelIfPossible(level);
              }
	      
              replaceLoggingMethods.call(self, level,  (name || "").toUpperCase());
              if (typeof console === undefinedType && level < self.levels.SILENT) {
                  return "No console available for logging";
              }
          } else {
              throw "log.setLevel() called with invalid level: " + level;
          }
      };

      self.setDefaultLevel = function (level) {
          if (!getPersistedLevel()) {
              self.setLevel(level, false);
          }
      };

      self.enableAll = function(persist) {
          self.setLevel(self.levels.TRACE, persist);
      };

      self.disableAll = function(persist) {
          self.setLevel(self.levels.SILENT, persist);
      };

      // Initialize with the right level
      var initialLevel = getPersistedLevel();
      if (initialLevel == null) {
          initialLevel = defaultLevel == null ? "WARN" : defaultLevel;
      }
      self.setLevel(initialLevel, false);
    }

    /*
     *
     * Top-level API
     *
     */

    var defaultLogger = new Logger();

    var _loggersByName = {};
    defaultLogger.getLogger = function getLogger(name) {
        if ((typeof name !== "symbol" && typeof name !== "string") || name === "") {
          throw new TypeError("You must supply a name when creating a logger.");
        }

        var logger = _loggersByName[name];
        if (!logger) {
          logger = _loggersByName[name] = new Logger(
            name, defaultLogger.getLevel(), defaultLogger.methodFactory);
        }
        return logger;
    };

    // Grab the current global log variable in case of overwrite
    var _log = (typeof window !== undefinedType) ? window.log : undefined;
    defaultLogger.noConflict = function() {
        if (typeof window !== undefinedType &&
               window.log === defaultLogger) {
            window.log = _log;
        }

        return defaultLogger;
    };

    defaultLogger.getLoggers = function getLoggers() {
        return _loggersByName;
    };

    // ES6 default export, for compatibility
    defaultLogger['default'] = defaultLogger;

    return defaultLogger;
}));


/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/NotificationFactories.js":
/*!***********************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/NotificationFactories.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "COMPLETE_NOTIFICATION": function() { return /* binding */ COMPLETE_NOTIFICATION; },
/* harmony export */   "errorNotification": function() { return /* binding */ errorNotification; },
/* harmony export */   "nextNotification": function() { return /* binding */ nextNotification; },
/* harmony export */   "createNotification": function() { return /* binding */ createNotification; }
/* harmony export */ });
var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();
function errorNotification(error) {
    return createNotification('E', undefined, error);
}
function nextNotification(value) {
    return createNotification('N', value, undefined);
}
function createNotification(kind, value, error) {
    return {
        kind: kind,
        value: value,
        error: error,
    };
}
//# sourceMappingURL=NotificationFactories.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/Observable.js":
/*!************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/Observable.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Observable": function() { return /* binding */ Observable; }
/* harmony export */ });
/* harmony import */ var _Subscriber__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Subscriber */ "./node_modules/rxjs/dist/esm5/internal/Subscriber.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Subscription */ "./node_modules/rxjs/dist/esm5/internal/Subscription.js");
/* harmony import */ var _symbol_observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./symbol/observable */ "./node_modules/rxjs/dist/esm5/internal/symbol/observable.js");
/* harmony import */ var _util_pipe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util/pipe */ "./node_modules/rxjs/dist/esm5/internal/util/pipe.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config */ "./node_modules/rxjs/dist/esm5/internal/config.js");
/* harmony import */ var _util_isFunction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./util/isFunction */ "./node_modules/rxjs/dist/esm5/internal/util/isFunction.js");
/* harmony import */ var _util_errorContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util/errorContext */ "./node_modules/rxjs/dist/esm5/internal/util/errorContext.js");







var Observable = (function () {
    function Observable(subscribe) {
        if (subscribe) {
            this._subscribe = subscribe;
        }
    }
    Observable.prototype.lift = function (operator) {
        var observable = new Observable();
        observable.source = this;
        observable.operator = operator;
        return observable;
    };
    Observable.prototype.subscribe = function (observerOrNext, error, complete) {
        var _this = this;
        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new _Subscriber__WEBPACK_IMPORTED_MODULE_0__.SafeSubscriber(observerOrNext, error, complete);
        (0,_util_errorContext__WEBPACK_IMPORTED_MODULE_1__.errorContext)(function () {
            var _a = _this, operator = _a.operator, source = _a.source;
            subscriber.add(operator
                ?
                    operator.call(subscriber, source)
                : source
                    ?
                        _this._subscribe(subscriber)
                    :
                        _this._trySubscribe(subscriber));
        });
        return subscriber;
    };
    Observable.prototype._trySubscribe = function (sink) {
        try {
            return this._subscribe(sink);
        }
        catch (err) {
            sink.error(err);
        }
    };
    Observable.prototype.forEach = function (next, promiseCtor) {
        var _this = this;
        promiseCtor = getPromiseCtor(promiseCtor);
        return new promiseCtor(function (resolve, reject) {
            var subscriber = new _Subscriber__WEBPACK_IMPORTED_MODULE_0__.SafeSubscriber({
                next: function (value) {
                    try {
                        next(value);
                    }
                    catch (err) {
                        reject(err);
                        subscriber.unsubscribe();
                    }
                },
                error: reject,
                complete: resolve,
            });
            _this.subscribe(subscriber);
        });
    };
    Observable.prototype._subscribe = function (subscriber) {
        var _a;
        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);
    };
    Observable.prototype[_symbol_observable__WEBPACK_IMPORTED_MODULE_2__.observable] = function () {
        return this;
    };
    Observable.prototype.pipe = function () {
        var operations = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            operations[_i] = arguments[_i];
        }
        return (0,_util_pipe__WEBPACK_IMPORTED_MODULE_3__.pipeFromArray)(operations)(this);
    };
    Observable.prototype.toPromise = function (promiseCtor) {
        var _this = this;
        promiseCtor = getPromiseCtor(promiseCtor);
        return new promiseCtor(function (resolve, reject) {
            var value;
            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });
        });
    };
    Observable.create = function (subscribe) {
        return new Observable(subscribe);
    };
    return Observable;
}());

function getPromiseCtor(promiseCtor) {
    var _a;
    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : _config__WEBPACK_IMPORTED_MODULE_4__.config.Promise) !== null && _a !== void 0 ? _a : Promise;
}
function isObserver(value) {
    return value && (0,_util_isFunction__WEBPACK_IMPORTED_MODULE_5__.isFunction)(value.next) && (0,_util_isFunction__WEBPACK_IMPORTED_MODULE_5__.isFunction)(value.error) && (0,_util_isFunction__WEBPACK_IMPORTED_MODULE_5__.isFunction)(value.complete);
}
function isSubscriber(value) {
    return (value && value instanceof _Subscriber__WEBPACK_IMPORTED_MODULE_0__.Subscriber) || (isObserver(value) && (0,_Subscription__WEBPACK_IMPORTED_MODULE_6__.isSubscription)(value));
}
//# sourceMappingURL=Observable.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/Subject.js":
/*!*********************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/Subject.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Subject": function() { return /* binding */ Subject; },
/* harmony export */   "AnonymousSubject": function() { return /* binding */ AnonymousSubject; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _Observable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Observable */ "./node_modules/rxjs/dist/esm5/internal/Observable.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Subscription */ "./node_modules/rxjs/dist/esm5/internal/Subscription.js");
/* harmony import */ var _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util/ObjectUnsubscribedError */ "./node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js");
/* harmony import */ var _util_arrRemove__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util/arrRemove */ "./node_modules/rxjs/dist/esm5/internal/util/arrRemove.js");
/* harmony import */ var _util_errorContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util/errorContext */ "./node_modules/rxjs/dist/esm5/internal/util/errorContext.js");






var Subject = (function (_super) {
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(Subject, _super);
    function Subject() {
        var _this = _super.call(this) || this;
        _this.closed = false;
        _this.currentObservers = null;
        _this.observers = [];
        _this.isStopped = false;
        _this.hasError = false;
        _this.thrownError = null;
        return _this;
    }
    Subject.prototype.lift = function (operator) {
        var subject = new AnonymousSubject(this, this);
        subject.operator = operator;
        return subject;
    };
    Subject.prototype._throwIfClosed = function () {
        if (this.closed) {
            throw new _util_ObjectUnsubscribedError__WEBPACK_IMPORTED_MODULE_1__.ObjectUnsubscribedError();
        }
    };
    Subject.prototype.next = function (value) {
        var _this = this;
        (0,_util_errorContext__WEBPACK_IMPORTED_MODULE_2__.errorContext)(function () {
            var e_1, _a;
            _this._throwIfClosed();
            if (!_this.isStopped) {
                if (!_this.currentObservers) {
                    _this.currentObservers = Array.from(_this.observers);
                }
                try {
                    for (var _b = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__values)(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var observer = _c.value;
                        observer.next(value);
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
        });
    };
    Subject.prototype.error = function (err) {
        var _this = this;
        (0,_util_errorContext__WEBPACK_IMPORTED_MODULE_2__.errorContext)(function () {
            _this._throwIfClosed();
            if (!_this.isStopped) {
                _this.hasError = _this.isStopped = true;
                _this.thrownError = err;
                var observers = _this.observers;
                while (observers.length) {
                    observers.shift().error(err);
                }
            }
        });
    };
    Subject.prototype.complete = function () {
        var _this = this;
        (0,_util_errorContext__WEBPACK_IMPORTED_MODULE_2__.errorContext)(function () {
            _this._throwIfClosed();
            if (!_this.isStopped) {
                _this.isStopped = true;
                var observers = _this.observers;
                while (observers.length) {
                    observers.shift().complete();
                }
            }
        });
    };
    Subject.prototype.unsubscribe = function () {
        this.isStopped = this.closed = true;
        this.observers = this.currentObservers = null;
    };
    Object.defineProperty(Subject.prototype, "observed", {
        get: function () {
            var _a;
            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;
        },
        enumerable: false,
        configurable: true
    });
    Subject.prototype._trySubscribe = function (subscriber) {
        this._throwIfClosed();
        return _super.prototype._trySubscribe.call(this, subscriber);
    };
    Subject.prototype._subscribe = function (subscriber) {
        this._throwIfClosed();
        this._checkFinalizedStatuses(subscriber);
        return this._innerSubscribe(subscriber);
    };
    Subject.prototype._innerSubscribe = function (subscriber) {
        var _this = this;
        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;
        if (hasError || isStopped) {
            return _Subscription__WEBPACK_IMPORTED_MODULE_3__.EMPTY_SUBSCRIPTION;
        }
        this.currentObservers = null;
        observers.push(subscriber);
        return new _Subscription__WEBPACK_IMPORTED_MODULE_3__.Subscription(function () {
            _this.currentObservers = null;
            (0,_util_arrRemove__WEBPACK_IMPORTED_MODULE_4__.arrRemove)(observers, subscriber);
        });
    };
    Subject.prototype._checkFinalizedStatuses = function (subscriber) {
        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;
        if (hasError) {
            subscriber.error(thrownError);
        }
        else if (isStopped) {
            subscriber.complete();
        }
    };
    Subject.prototype.asObservable = function () {
        var observable = new _Observable__WEBPACK_IMPORTED_MODULE_5__.Observable();
        observable.source = this;
        return observable;
    };
    Subject.create = function (destination, source) {
        return new AnonymousSubject(destination, source);
    };
    return Subject;
}(_Observable__WEBPACK_IMPORTED_MODULE_5__.Observable));

var AnonymousSubject = (function (_super) {
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(AnonymousSubject, _super);
    function AnonymousSubject(destination, source) {
        var _this = _super.call(this) || this;
        _this.destination = destination;
        _this.source = source;
        return _this;
    }
    AnonymousSubject.prototype.next = function (value) {
        var _a, _b;
        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);
    };
    AnonymousSubject.prototype.error = function (err) {
        var _a, _b;
        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);
    };
    AnonymousSubject.prototype.complete = function () {
        var _a, _b;
        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);
    };
    AnonymousSubject.prototype._subscribe = function (subscriber) {
        var _a, _b;
        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : _Subscription__WEBPACK_IMPORTED_MODULE_3__.EMPTY_SUBSCRIPTION;
    };
    return AnonymousSubject;
}(Subject));

//# sourceMappingURL=Subject.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/Subscriber.js":
/*!************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/Subscriber.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Subscriber": function() { return /* binding */ Subscriber; },
/* harmony export */   "SafeSubscriber": function() { return /* binding */ SafeSubscriber; },
/* harmony export */   "EMPTY_OBSERVER": function() { return /* binding */ EMPTY_OBSERVER; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _util_isFunction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util/isFunction */ "./node_modules/rxjs/dist/esm5/internal/util/isFunction.js");
/* harmony import */ var _Subscription__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Subscription */ "./node_modules/rxjs/dist/esm5/internal/Subscription.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config */ "./node_modules/rxjs/dist/esm5/internal/config.js");
/* harmony import */ var _util_reportUnhandledError__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./util/reportUnhandledError */ "./node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js");
/* harmony import */ var _util_noop__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./util/noop */ "./node_modules/rxjs/dist/esm5/internal/util/noop.js");
/* harmony import */ var _NotificationFactories__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./NotificationFactories */ "./node_modules/rxjs/dist/esm5/internal/NotificationFactories.js");
/* harmony import */ var _scheduler_timeoutProvider__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./scheduler/timeoutProvider */ "./node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js");
/* harmony import */ var _util_errorContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./util/errorContext */ "./node_modules/rxjs/dist/esm5/internal/util/errorContext.js");









var Subscriber = (function (_super) {
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(Subscriber, _super);
    function Subscriber(destination) {
        var _this = _super.call(this) || this;
        _this.isStopped = false;
        if (destination) {
            _this.destination = destination;
            if ((0,_Subscription__WEBPACK_IMPORTED_MODULE_1__.isSubscription)(destination)) {
                destination.add(_this);
            }
        }
        else {
            _this.destination = EMPTY_OBSERVER;
        }
        return _this;
    }
    Subscriber.create = function (next, error, complete) {
        return new SafeSubscriber(next, error, complete);
    };
    Subscriber.prototype.next = function (value) {
        if (this.isStopped) {
            handleStoppedNotification((0,_NotificationFactories__WEBPACK_IMPORTED_MODULE_2__.nextNotification)(value), this);
        }
        else {
            this._next(value);
        }
    };
    Subscriber.prototype.error = function (err) {
        if (this.isStopped) {
            handleStoppedNotification((0,_NotificationFactories__WEBPACK_IMPORTED_MODULE_2__.errorNotification)(err), this);
        }
        else {
            this.isStopped = true;
            this._error(err);
        }
    };
    Subscriber.prototype.complete = function () {
        if (this.isStopped) {
            handleStoppedNotification(_NotificationFactories__WEBPACK_IMPORTED_MODULE_2__.COMPLETE_NOTIFICATION, this);
        }
        else {
            this.isStopped = true;
            this._complete();
        }
    };
    Subscriber.prototype.unsubscribe = function () {
        if (!this.closed) {
            this.isStopped = true;
            _super.prototype.unsubscribe.call(this);
            this.destination = null;
        }
    };
    Subscriber.prototype._next = function (value) {
        this.destination.next(value);
    };
    Subscriber.prototype._error = function (err) {
        try {
            this.destination.error(err);
        }
        finally {
            this.unsubscribe();
        }
    };
    Subscriber.prototype._complete = function () {
        try {
            this.destination.complete();
        }
        finally {
            this.unsubscribe();
        }
    };
    return Subscriber;
}(_Subscription__WEBPACK_IMPORTED_MODULE_1__.Subscription));

var _bind = Function.prototype.bind;
function bind(fn, thisArg) {
    return _bind.call(fn, thisArg);
}
var ConsumerObserver = (function () {
    function ConsumerObserver(partialObserver) {
        this.partialObserver = partialObserver;
    }
    ConsumerObserver.prototype.next = function (value) {
        var partialObserver = this.partialObserver;
        if (partialObserver.next) {
            try {
                partialObserver.next(value);
            }
            catch (error) {
                handleUnhandledError(error);
            }
        }
    };
    ConsumerObserver.prototype.error = function (err) {
        var partialObserver = this.partialObserver;
        if (partialObserver.error) {
            try {
                partialObserver.error(err);
            }
            catch (error) {
                handleUnhandledError(error);
            }
        }
        else {
            handleUnhandledError(err);
        }
    };
    ConsumerObserver.prototype.complete = function () {
        var partialObserver = this.partialObserver;
        if (partialObserver.complete) {
            try {
                partialObserver.complete();
            }
            catch (error) {
                handleUnhandledError(error);
            }
        }
    };
    return ConsumerObserver;
}());
var SafeSubscriber = (function (_super) {
    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(SafeSubscriber, _super);
    function SafeSubscriber(observerOrNext, error, complete) {
        var _this = _super.call(this) || this;
        var partialObserver;
        if ((0,_util_isFunction__WEBPACK_IMPORTED_MODULE_3__.isFunction)(observerOrNext) || !observerOrNext) {
            partialObserver = {
                next: observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined,
                error: error !== null && error !== void 0 ? error : undefined,
                complete: complete !== null && complete !== void 0 ? complete : undefined,
            };
        }
        else {
            var context_1;
            if (_this && _config__WEBPACK_IMPORTED_MODULE_4__.config.useDeprecatedNextContext) {
                context_1 = Object.create(observerOrNext);
                context_1.unsubscribe = function () { return _this.unsubscribe(); };
                partialObserver = {
                    next: observerOrNext.next && bind(observerOrNext.next, context_1),
                    error: observerOrNext.error && bind(observerOrNext.error, context_1),
                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),
                };
            }
            else {
                partialObserver = observerOrNext;
            }
        }
        _this.destination = new ConsumerObserver(partialObserver);
        return _this;
    }
    return SafeSubscriber;
}(Subscriber));

function handleUnhandledError(error) {
    if (_config__WEBPACK_IMPORTED_MODULE_4__.config.useDeprecatedSynchronousErrorHandling) {
        (0,_util_errorContext__WEBPACK_IMPORTED_MODULE_5__.captureError)(error);
    }
    else {
        (0,_util_reportUnhandledError__WEBPACK_IMPORTED_MODULE_6__.reportUnhandledError)(error);
    }
}
function defaultErrorHandler(err) {
    throw err;
}
function handleStoppedNotification(notification, subscriber) {
    var onStoppedNotification = _config__WEBPACK_IMPORTED_MODULE_4__.config.onStoppedNotification;
    onStoppedNotification && _scheduler_timeoutProvider__WEBPACK_IMPORTED_MODULE_7__.timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });
}
var EMPTY_OBSERVER = {
    closed: true,
    next: _util_noop__WEBPACK_IMPORTED_MODULE_8__.noop,
    error: defaultErrorHandler,
    complete: _util_noop__WEBPACK_IMPORTED_MODULE_8__.noop,
};
//# sourceMappingURL=Subscriber.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/Subscription.js":
/*!**************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/Subscription.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Subscription": function() { return /* binding */ Subscription; },
/* harmony export */   "EMPTY_SUBSCRIPTION": function() { return /* binding */ EMPTY_SUBSCRIPTION; },
/* harmony export */   "isSubscription": function() { return /* binding */ isSubscription; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _util_isFunction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util/isFunction */ "./node_modules/rxjs/dist/esm5/internal/util/isFunction.js");
/* harmony import */ var _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util/UnsubscriptionError */ "./node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js");
/* harmony import */ var _util_arrRemove__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util/arrRemove */ "./node_modules/rxjs/dist/esm5/internal/util/arrRemove.js");




var Subscription = (function () {
    function Subscription(initialTeardown) {
        this.initialTeardown = initialTeardown;
        this.closed = false;
        this._parentage = null;
        this._finalizers = null;
    }
    Subscription.prototype.unsubscribe = function () {
        var e_1, _a, e_2, _b;
        var errors;
        if (!this.closed) {
            this.closed = true;
            var _parentage = this._parentage;
            if (_parentage) {
                this._parentage = null;
                if (Array.isArray(_parentage)) {
                    try {
                        for (var _parentage_1 = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__values)(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {
                            var parent_1 = _parentage_1_1.value;
                            parent_1.remove(this);
                        }
                    }
                    catch (e_1_1) { e_1 = { error: e_1_1 }; }
                    finally {
                        try {
                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                    }
                }
                else {
                    _parentage.remove(this);
                }
            }
            var initialFinalizer = this.initialTeardown;
            if ((0,_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(initialFinalizer)) {
                try {
                    initialFinalizer();
                }
                catch (e) {
                    errors = e instanceof _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_2__.UnsubscriptionError ? e.errors : [e];
                }
            }
            var _finalizers = this._finalizers;
            if (_finalizers) {
                this._finalizers = null;
                try {
                    for (var _finalizers_1 = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__values)(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {
                        var finalizer = _finalizers_1_1.value;
                        try {
                            execFinalizer(finalizer);
                        }
                        catch (err) {
                            errors = errors !== null && errors !== void 0 ? errors : [];
                            if (err instanceof _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_2__.UnsubscriptionError) {
                                errors = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([], (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__read)(errors)), (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__read)(err.errors));
                            }
                            else {
                                errors.push(err);
                            }
                        }
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
            }
            if (errors) {
                throw new _util_UnsubscriptionError__WEBPACK_IMPORTED_MODULE_2__.UnsubscriptionError(errors);
            }
        }
    };
    Subscription.prototype.add = function (teardown) {
        var _a;
        if (teardown && teardown !== this) {
            if (this.closed) {
                execFinalizer(teardown);
            }
            else {
                if (teardown instanceof Subscription) {
                    if (teardown.closed || teardown._hasParent(this)) {
                        return;
                    }
                    teardown._addParent(this);
                }
                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);
            }
        }
    };
    Subscription.prototype._hasParent = function (parent) {
        var _parentage = this._parentage;
        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));
    };
    Subscription.prototype._addParent = function (parent) {
        var _parentage = this._parentage;
        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;
    };
    Subscription.prototype._removeParent = function (parent) {
        var _parentage = this._parentage;
        if (_parentage === parent) {
            this._parentage = null;
        }
        else if (Array.isArray(_parentage)) {
            (0,_util_arrRemove__WEBPACK_IMPORTED_MODULE_3__.arrRemove)(_parentage, parent);
        }
    };
    Subscription.prototype.remove = function (teardown) {
        var _finalizers = this._finalizers;
        _finalizers && (0,_util_arrRemove__WEBPACK_IMPORTED_MODULE_3__.arrRemove)(_finalizers, teardown);
        if (teardown instanceof Subscription) {
            teardown._removeParent(this);
        }
    };
    Subscription.EMPTY = (function () {
        var empty = new Subscription();
        empty.closed = true;
        return empty;
    })();
    return Subscription;
}());

var EMPTY_SUBSCRIPTION = Subscription.EMPTY;
function isSubscription(value) {
    return (value instanceof Subscription ||
        (value && 'closed' in value && (0,_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(value.remove) && (0,_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(value.add) && (0,_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(value.unsubscribe)));
}
function execFinalizer(finalizer) {
    if ((0,_util_isFunction__WEBPACK_IMPORTED_MODULE_1__.isFunction)(finalizer)) {
        finalizer();
    }
    else {
        finalizer.unsubscribe();
    }
}
//# sourceMappingURL=Subscription.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/config.js":
/*!********************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/config.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "config": function() { return /* binding */ config; }
/* harmony export */ });
var config = {
    onUnhandledError: null,
    onStoppedNotification: null,
    Promise: undefined,
    useDeprecatedSynchronousErrorHandling: false,
    useDeprecatedNextContext: false,
};
//# sourceMappingURL=config.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js":
/*!***************************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "timeoutProvider": function() { return /* binding */ timeoutProvider; }
/* harmony export */ });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var timeoutProvider = {
    setTimeout: function (handler, timeout) {
        var args = [];
        for (var _i = 2; _i < arguments.length; _i++) {
            args[_i - 2] = arguments[_i];
        }
        var delegate = timeoutProvider.delegate;
        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {
            return delegate.setTimeout.apply(delegate, (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([handler, timeout], (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__read)(args)));
        }
        return setTimeout.apply(void 0, (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([handler, timeout], (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__read)(args)));
    },
    clearTimeout: function (handle) {
        var delegate = timeoutProvider.delegate;
        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);
    },
    delegate: undefined,
};
//# sourceMappingURL=timeoutProvider.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/symbol/observable.js":
/*!*******************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/symbol/observable.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "observable": function() { return /* binding */ observable; }
/* harmony export */ });
var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();
//# sourceMappingURL=observable.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js":
/*!******************************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ObjectUnsubscribedError": function() { return /* binding */ ObjectUnsubscribedError; }
/* harmony export */ });
/* harmony import */ var _createErrorClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createErrorClass */ "./node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js");

var ObjectUnsubscribedError = (0,_createErrorClass__WEBPACK_IMPORTED_MODULE_0__.createErrorClass)(function (_super) {
    return function ObjectUnsubscribedErrorImpl() {
        _super(this);
        this.name = 'ObjectUnsubscribedError';
        this.message = 'object unsubscribed';
    };
});
//# sourceMappingURL=ObjectUnsubscribedError.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js":
/*!**************************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UnsubscriptionError": function() { return /* binding */ UnsubscriptionError; }
/* harmony export */ });
/* harmony import */ var _createErrorClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createErrorClass */ "./node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js");

var UnsubscriptionError = (0,_createErrorClass__WEBPACK_IMPORTED_MODULE_0__.createErrorClass)(function (_super) {
    return function UnsubscriptionErrorImpl(errors) {
        _super(this);
        this.message = errors
            ? errors.length + " errors occurred during unsubscription:\n" + errors.map(function (err, i) { return i + 1 + ") " + err.toString(); }).join('\n  ')
            : '';
        this.name = 'UnsubscriptionError';
        this.errors = errors;
    };
});
//# sourceMappingURL=UnsubscriptionError.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/util/arrRemove.js":
/*!****************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/util/arrRemove.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "arrRemove": function() { return /* binding */ arrRemove; }
/* harmony export */ });
function arrRemove(arr, item) {
    if (arr) {
        var index = arr.indexOf(item);
        0 <= index && arr.splice(index, 1);
    }
}
//# sourceMappingURL=arrRemove.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js":
/*!***********************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createErrorClass": function() { return /* binding */ createErrorClass; }
/* harmony export */ });
function createErrorClass(createImpl) {
    var _super = function (instance) {
        Error.call(instance);
        instance.stack = new Error().stack;
    };
    var ctorFunc = createImpl(_super);
    ctorFunc.prototype = Object.create(Error.prototype);
    ctorFunc.prototype.constructor = ctorFunc;
    return ctorFunc;
}
//# sourceMappingURL=createErrorClass.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/util/errorContext.js":
/*!*******************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/util/errorContext.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "errorContext": function() { return /* binding */ errorContext; },
/* harmony export */   "captureError": function() { return /* binding */ captureError; }
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ "./node_modules/rxjs/dist/esm5/internal/config.js");

var context = null;
function errorContext(cb) {
    if (_config__WEBPACK_IMPORTED_MODULE_0__.config.useDeprecatedSynchronousErrorHandling) {
        var isRoot = !context;
        if (isRoot) {
            context = { errorThrown: false, error: null };
        }
        cb();
        if (isRoot) {
            var _a = context, errorThrown = _a.errorThrown, error = _a.error;
            context = null;
            if (errorThrown) {
                throw error;
            }
        }
    }
    else {
        cb();
    }
}
function captureError(err) {
    if (_config__WEBPACK_IMPORTED_MODULE_0__.config.useDeprecatedSynchronousErrorHandling && context) {
        context.errorThrown = true;
        context.error = err;
    }
}
//# sourceMappingURL=errorContext.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/util/identity.js":
/*!***************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/util/identity.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "identity": function() { return /* binding */ identity; }
/* harmony export */ });
function identity(x) {
    return x;
}
//# sourceMappingURL=identity.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/util/isFunction.js":
/*!*****************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/util/isFunction.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isFunction": function() { return /* binding */ isFunction; }
/* harmony export */ });
function isFunction(value) {
    return typeof value === 'function';
}
//# sourceMappingURL=isFunction.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/util/noop.js":
/*!***********************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/util/noop.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "noop": function() { return /* binding */ noop; }
/* harmony export */ });
function noop() { }
//# sourceMappingURL=noop.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/util/pipe.js":
/*!***********************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/util/pipe.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "pipe": function() { return /* binding */ pipe; },
/* harmony export */   "pipeFromArray": function() { return /* binding */ pipeFromArray; }
/* harmony export */ });
/* harmony import */ var _identity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./identity */ "./node_modules/rxjs/dist/esm5/internal/util/identity.js");

function pipe() {
    var fns = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        fns[_i] = arguments[_i];
    }
    return pipeFromArray(fns);
}
function pipeFromArray(fns) {
    if (fns.length === 0) {
        return _identity__WEBPACK_IMPORTED_MODULE_0__.identity;
    }
    if (fns.length === 1) {
        return fns[0];
    }
    return function piped(input) {
        return fns.reduce(function (prev, fn) { return fn(prev); }, input);
    };
}
//# sourceMappingURL=pipe.js.map

/***/ }),

/***/ "./node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js":
/*!***************************************************************************!*\
  !*** ./node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "reportUnhandledError": function() { return /* binding */ reportUnhandledError; }
/* harmony export */ });
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./node_modules/rxjs/dist/esm5/internal/config.js");
/* harmony import */ var _scheduler_timeoutProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../scheduler/timeoutProvider */ "./node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js");


function reportUnhandledError(err) {
    _scheduler_timeoutProvider__WEBPACK_IMPORTED_MODULE_0__.timeoutProvider.setTimeout(function () {
        var onUnhandledError = _config__WEBPACK_IMPORTED_MODULE_1__.config.onUnhandledError;
        if (onUnhandledError) {
            onUnhandledError(err);
        }
        else {
            throw err;
        }
    });
}
//# sourceMappingURL=reportUnhandledError.js.map

/***/ }),

/***/ "./node_modules/sdp/sdp.js":
/*!*********************************!*\
  !*** ./node_modules/sdp/sdp.js ***!
  \*********************************/
/***/ (function(module) {

"use strict";
/* eslint-env node */


// SDP helpers.
const SDPUtils = {};

// Generate an alphanumeric identifier for cname or mids.
// TODO: use UUIDs instead? https://gist.github.com/jed/982883
SDPUtils.generateIdentifier = function() {
  return Math.random().toString(36).substr(2, 10);
};

// The RTCP CNAME used by all peerconnections from the same JS.
SDPUtils.localCName = SDPUtils.generateIdentifier();

// Splits SDP into lines, dealing with both CRLF and LF.
SDPUtils.splitLines = function(blob) {
  return blob.trim().split('\n').map(line => line.trim());
};
// Splits SDP into sessionpart and mediasections. Ensures CRLF.
SDPUtils.splitSections = function(blob) {
  const parts = blob.split('\nm=');
  return parts.map((part, index) => (index > 0 ?
    'm=' + part : part).trim() + '\r\n');
};

// Returns the session description.
SDPUtils.getDescription = function(blob) {
  const sections = SDPUtils.splitSections(blob);
  return sections && sections[0];
};

// Returns the individual media sections.
SDPUtils.getMediaSections = function(blob) {
  const sections = SDPUtils.splitSections(blob);
  sections.shift();
  return sections;
};

// Returns lines that start with a certain prefix.
SDPUtils.matchPrefix = function(blob, prefix) {
  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);
};

// Parses an ICE candidate line. Sample input:
// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8
// rport 55996"
// Input can be prefixed with a=.
SDPUtils.parseCandidate = function(line) {
  let parts;
  // Parse both variants.
  if (line.indexOf('a=candidate:') === 0) {
    parts = line.substring(12).split(' ');
  } else {
    parts = line.substring(10).split(' ');
  }

  const candidate = {
    foundation: parts[0],
    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],
    protocol: parts[2].toLowerCase(),
    priority: parseInt(parts[3], 10),
    ip: parts[4],
    address: parts[4], // address is an alias for ip.
    port: parseInt(parts[5], 10),
    // skip parts[6] == 'typ'
    type: parts[7],
  };

  for (let i = 8; i < parts.length; i += 2) {
    switch (parts[i]) {
      case 'raddr':
        candidate.relatedAddress = parts[i + 1];
        break;
      case 'rport':
        candidate.relatedPort = parseInt(parts[i + 1], 10);
        break;
      case 'tcptype':
        candidate.tcpType = parts[i + 1];
        break;
      case 'ufrag':
        candidate.ufrag = parts[i + 1]; // for backward compatibility.
        candidate.usernameFragment = parts[i + 1];
        break;
      default: // extension handling, in particular ufrag. Don't overwrite.
        if (candidate[parts[i]] === undefined) {
          candidate[parts[i]] = parts[i + 1];
        }
        break;
    }
  }
  return candidate;
};

// Translates a candidate object into SDP candidate attribute.
// This does not include the a= prefix!
SDPUtils.writeCandidate = function(candidate) {
  const sdp = [];
  sdp.push(candidate.foundation);

  const component = candidate.component;
  if (component === 'rtp') {
    sdp.push(1);
  } else if (component === 'rtcp') {
    sdp.push(2);
  } else {
    sdp.push(component);
  }
  sdp.push(candidate.protocol.toUpperCase());
  sdp.push(candidate.priority);
  sdp.push(candidate.address || candidate.ip);
  sdp.push(candidate.port);

  const type = candidate.type;
  sdp.push('typ');
  sdp.push(type);
  if (type !== 'host' && candidate.relatedAddress &&
      candidate.relatedPort) {
    sdp.push('raddr');
    sdp.push(candidate.relatedAddress);
    sdp.push('rport');
    sdp.push(candidate.relatedPort);
  }
  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {
    sdp.push('tcptype');
    sdp.push(candidate.tcpType);
  }
  if (candidate.usernameFragment || candidate.ufrag) {
    sdp.push('ufrag');
    sdp.push(candidate.usernameFragment || candidate.ufrag);
  }
  return 'candidate:' + sdp.join(' ');
};

// Parses an ice-options line, returns an array of option tags.
// Sample input:
// a=ice-options:foo bar
SDPUtils.parseIceOptions = function(line) {
  return line.substr(14).split(' ');
};

// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:
// a=rtpmap:111 opus/48000/2
SDPUtils.parseRtpMap = function(line) {
  let parts = line.substr(9).split(' ');
  const parsed = {
    payloadType: parseInt(parts.shift(), 10), // was: id
  };

  parts = parts[0].split('/');

  parsed.name = parts[0];
  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate
  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;
  // legacy alias, got renamed back to channels in ORTC.
  parsed.numChannels = parsed.channels;
  return parsed;
};

// Generates a rtpmap line from RTCRtpCodecCapability or
// RTCRtpCodecParameters.
SDPUtils.writeRtpMap = function(codec) {
  let pt = codec.payloadType;
  if (codec.preferredPayloadType !== undefined) {
    pt = codec.preferredPayloadType;
  }
  const channels = codec.channels || codec.numChannels || 1;
  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +
      (channels !== 1 ? '/' + channels : '') + '\r\n';
};

// Parses a extmap line (headerextension from RFC 5285). Sample input:
// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset
// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset
SDPUtils.parseExtmap = function(line) {
  const parts = line.substr(9).split(' ');
  return {
    id: parseInt(parts[0], 10),
    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',
    uri: parts[1],
  };
};

// Generates an extmap line from RTCRtpHeaderExtensionParameters or
// RTCRtpHeaderExtension.
SDPUtils.writeExtmap = function(headerExtension) {
  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +
      (headerExtension.direction && headerExtension.direction !== 'sendrecv'
        ? '/' + headerExtension.direction
        : '') +
      ' ' + headerExtension.uri + '\r\n';
};

// Parses a fmtp line, returns dictionary. Sample input:
// a=fmtp:96 vbr=on;cng=on
// Also deals with vbr=on; cng=on
SDPUtils.parseFmtp = function(line) {
  const parsed = {};
  let kv;
  const parts = line.substr(line.indexOf(' ') + 1).split(';');
  for (let j = 0; j < parts.length; j++) {
    kv = parts[j].trim().split('=');
    parsed[kv[0].trim()] = kv[1];
  }
  return parsed;
};

// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.
SDPUtils.writeFmtp = function(codec) {
  let line = '';
  let pt = codec.payloadType;
  if (codec.preferredPayloadType !== undefined) {
    pt = codec.preferredPayloadType;
  }
  if (codec.parameters && Object.keys(codec.parameters).length) {
    const params = [];
    Object.keys(codec.parameters).forEach(param => {
      if (codec.parameters[param] !== undefined) {
        params.push(param + '=' + codec.parameters[param]);
      } else {
        params.push(param);
      }
    });
    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\r\n';
  }
  return line;
};

// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:
// a=rtcp-fb:98 nack rpsi
SDPUtils.parseRtcpFb = function(line) {
  const parts = line.substr(line.indexOf(' ') + 1).split(' ');
  return {
    type: parts.shift(),
    parameter: parts.join(' '),
  };
};

// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.
SDPUtils.writeRtcpFb = function(codec) {
  let lines = '';
  let pt = codec.payloadType;
  if (codec.preferredPayloadType !== undefined) {
    pt = codec.preferredPayloadType;
  }
  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {
    // FIXME: special handling for trr-int?
    codec.rtcpFeedback.forEach(fb => {
      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +
      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +
          '\r\n';
    });
  }
  return lines;
};

// Parses a RFC 5576 ssrc media attribute. Sample input:
// a=ssrc:3735928559 cname:something
SDPUtils.parseSsrcMedia = function(line) {
  const sp = line.indexOf(' ');
  const parts = {
    ssrc: parseInt(line.substr(7, sp - 7), 10),
  };
  const colon = line.indexOf(':', sp);
  if (colon > -1) {
    parts.attribute = line.substr(sp + 1, colon - sp - 1);
    parts.value = line.substr(colon + 1);
  } else {
    parts.attribute = line.substr(sp + 1);
  }
  return parts;
};

// Parse a ssrc-group line (see RFC 5576). Sample input:
// a=ssrc-group:semantics 12 34
SDPUtils.parseSsrcGroup = function(line) {
  const parts = line.substr(13).split(' ');
  return {
    semantics: parts.shift(),
    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),
  };
};

// Extracts the MID (RFC 5888) from a media section.
// Returns the MID or undefined if no mid line was found.
SDPUtils.getMid = function(mediaSection) {
  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];
  if (mid) {
    return mid.substr(6);
  }
};

// Parses a fingerprint line for DTLS-SRTP.
SDPUtils.parseFingerprint = function(line) {
  const parts = line.substr(14).split(' ');
  return {
    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.
    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.
  };
};

// Extracts DTLS parameters from SDP media section or sessionpart.
// FIXME: for consistency with other functions this should only
//   get the fingerprint line as input. See also getIceParameters.
SDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {
  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=fingerprint:');
  // Note: a=setup line is ignored since we use the 'auto' role in Edge.
  return {
    role: 'auto',
    fingerprints: lines.map(SDPUtils.parseFingerprint),
  };
};

// Serializes DTLS parameters to SDP.
SDPUtils.writeDtlsParameters = function(params, setupType) {
  let sdp = 'a=setup:' + setupType + '\r\n';
  params.fingerprints.forEach(fp => {
    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\r\n';
  });
  return sdp;
};

// Parses a=crypto lines into
//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members
SDPUtils.parseCryptoLine = function(line) {
  const parts = line.substr(9).split(' ');
  return {
    tag: parseInt(parts[0], 10),
    cryptoSuite: parts[1],
    keyParams: parts[2],
    sessionParams: parts.slice(3),
  };
};

SDPUtils.writeCryptoLine = function(parameters) {
  return 'a=crypto:' + parameters.tag + ' ' +
    parameters.cryptoSuite + ' ' +
    (typeof parameters.keyParams === 'object'
      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)
      : parameters.keyParams) +
    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +
    '\r\n';
};

// Parses the crypto key parameters into
//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*
SDPUtils.parseCryptoKeyParams = function(keyParams) {
  if (keyParams.indexOf('inline:') !== 0) {
    return null;
  }
  const parts = keyParams.substr(7).split('|');
  return {
    keyMethod: 'inline',
    keySalt: parts[0],
    lifeTime: parts[1],
    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,
    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,
  };
};

SDPUtils.writeCryptoKeyParams = function(keyParams) {
  return keyParams.keyMethod + ':'
    + keyParams.keySalt +
    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +
    (keyParams.mkiValue && keyParams.mkiLength
      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength
      : '');
};

// Extracts all SDES parameters.
SDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {
  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=crypto:');
  return lines.map(SDPUtils.parseCryptoLine);
};

// Parses ICE information from SDP media section or sessionpart.
// FIXME: for consistency with other functions this should only
//   get the ice-ufrag and ice-pwd lines as input.
SDPUtils.getIceParameters = function(mediaSection, sessionpart) {
  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=ice-ufrag:')[0];
  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=ice-pwd:')[0];
  if (!(ufrag && pwd)) {
    return null;
  }
  return {
    usernameFragment: ufrag.substr(12),
    password: pwd.substr(10),
  };
};

// Serializes ICE parameters to SDP.
SDPUtils.writeIceParameters = function(params) {
  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\r\n' +
      'a=ice-pwd:' + params.password + '\r\n';
  if (params.iceLite) {
    sdp += 'a=ice-lite\r\n';
  }
  return sdp;
};

// Parses the SDP media section and returns RTCRtpParameters.
SDPUtils.parseRtpParameters = function(mediaSection) {
  const description = {
    codecs: [],
    headerExtensions: [],
    fecMechanisms: [],
    rtcp: [],
  };
  const lines = SDPUtils.splitLines(mediaSection);
  const mline = lines[0].split(' ');
  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]
    const pt = mline[i];
    const rtpmapline = SDPUtils.matchPrefix(
      mediaSection, 'a=rtpmap:' + pt + ' ')[0];
    if (rtpmapline) {
      const codec = SDPUtils.parseRtpMap(rtpmapline);
      const fmtps = SDPUtils.matchPrefix(
        mediaSection, 'a=fmtp:' + pt + ' ');
      // Only the first a=fmtp:<pt> is considered.
      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};
      codec.rtcpFeedback = SDPUtils.matchPrefix(
        mediaSection, 'a=rtcp-fb:' + pt + ' ')
        .map(SDPUtils.parseRtcpFb);
      description.codecs.push(codec);
      // parse FEC mechanisms from rtpmap lines.
      switch (codec.name.toUpperCase()) {
        case 'RED':
        case 'ULPFEC':
          description.fecMechanisms.push(codec.name.toUpperCase());
          break;
        default: // only RED and ULPFEC are recognized as FEC mechanisms.
          break;
      }
    }
  }
  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {
    description.headerExtensions.push(SDPUtils.parseExtmap(line));
  });
  // FIXME: parse rtcp.
  return description;
};

// Generates parts of the SDP media section describing the capabilities /
// parameters.
SDPUtils.writeRtpDescription = function(kind, caps) {
  let sdp = '';

  // Build the mline.
  sdp += 'm=' + kind + ' ';
  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.
  sdp += ' UDP/TLS/RTP/SAVPF ';
  sdp += caps.codecs.map(codec => {
    if (codec.preferredPayloadType !== undefined) {
      return codec.preferredPayloadType;
    }
    return codec.payloadType;
  }).join(' ') + '\r\n';

  sdp += 'c=IN IP4 0.0.0.0\r\n';
  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\r\n';

  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.
  caps.codecs.forEach(codec => {
    sdp += SDPUtils.writeRtpMap(codec);
    sdp += SDPUtils.writeFmtp(codec);
    sdp += SDPUtils.writeRtcpFb(codec);
  });
  let maxptime = 0;
  caps.codecs.forEach(codec => {
    if (codec.maxptime > maxptime) {
      maxptime = codec.maxptime;
    }
  });
  if (maxptime > 0) {
    sdp += 'a=maxptime:' + maxptime + '\r\n';
  }

  if (caps.headerExtensions) {
    caps.headerExtensions.forEach(extension => {
      sdp += SDPUtils.writeExtmap(extension);
    });
  }
  // FIXME: write fecMechanisms.
  return sdp;
};

// Parses the SDP media section and returns an array of
// RTCRtpEncodingParameters.
SDPUtils.parseRtpEncodingParameters = function(mediaSection) {
  const encodingParameters = [];
  const description = SDPUtils.parseRtpParameters(mediaSection);
  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;
  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;

  // filter a=ssrc:... cname:, ignore PlanB-msid
  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')
    .map(line => SDPUtils.parseSsrcMedia(line))
    .filter(parts => parts.attribute === 'cname');
  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;
  let secondarySsrc;

  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')
    .map(line => {
      const parts = line.substr(17).split(' ');
      return parts.map(part => parseInt(part, 10));
    });
  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {
    secondarySsrc = flows[0][1];
  }

  description.codecs.forEach(codec => {
    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {
      let encParam = {
        ssrc: primarySsrc,
        codecPayloadType: parseInt(codec.parameters.apt, 10),
      };
      if (primarySsrc && secondarySsrc) {
        encParam.rtx = {ssrc: secondarySsrc};
      }
      encodingParameters.push(encParam);
      if (hasRed) {
        encParam = JSON.parse(JSON.stringify(encParam));
        encParam.fec = {
          ssrc: primarySsrc,
          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',
        };
        encodingParameters.push(encParam);
      }
    }
  });
  if (encodingParameters.length === 0 && primarySsrc) {
    encodingParameters.push({
      ssrc: primarySsrc,
    });
  }

  // we support both b=AS and b=TIAS but interpret AS as TIAS.
  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');
  if (bandwidth.length) {
    if (bandwidth[0].indexOf('b=TIAS:') === 0) {
      bandwidth = parseInt(bandwidth[0].substr(7), 10);
    } else if (bandwidth[0].indexOf('b=AS:') === 0) {
      // use formula from JSEP to convert b=AS to TIAS value.
      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95
          - (50 * 40 * 8);
    } else {
      bandwidth = undefined;
    }
    encodingParameters.forEach(params => {
      params.maxBitrate = bandwidth;
    });
  }
  return encodingParameters;
};

// parses http://draft.ortc.org/#rtcrtcpparameters*
SDPUtils.parseRtcpParameters = function(mediaSection) {
  const rtcpParameters = {};

  // Gets the first SSRC. Note that with RTX there might be multiple
  // SSRCs.
  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')
    .map(line => SDPUtils.parseSsrcMedia(line))
    .filter(obj => obj.attribute === 'cname')[0];
  if (remoteSsrc) {
    rtcpParameters.cname = remoteSsrc.value;
    rtcpParameters.ssrc = remoteSsrc.ssrc;
  }

  // Edge uses the compound attribute instead of reducedSize
  // compound is !reducedSize
  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');
  rtcpParameters.reducedSize = rsize.length > 0;
  rtcpParameters.compound = rsize.length === 0;

  // parses the rtcp-mux attrіbute.
  // Note that Edge does not support unmuxed RTCP.
  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');
  rtcpParameters.mux = mux.length > 0;

  return rtcpParameters;
};

SDPUtils.writeRtcpParameters = function(rtcpParameters) {
  let sdp = '';
  if (rtcpParameters.reducedSize) {
    sdp += 'a=rtcp-rsize\r\n';
  }
  if (rtcpParameters.mux) {
    sdp += 'a=rtcp-mux\r\n';
  }
  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {
    sdp += 'a=ssrc:' + rtcpParameters.ssrc +
      ' cname:' + rtcpParameters.cname + '\r\n';
  }
  return sdp;
};


// parses either a=msid: or a=ssrc:... msid lines and returns
// the id of the MediaStream and MediaStreamTrack.
SDPUtils.parseMsid = function(mediaSection) {
  let parts;
  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');
  if (spec.length === 1) {
    parts = spec[0].substr(7).split(' ');
    return {stream: parts[0], track: parts[1]};
  }
  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')
    .map(line => SDPUtils.parseSsrcMedia(line))
    .filter(msidParts => msidParts.attribute === 'msid');
  if (planB.length > 0) {
    parts = planB[0].value.split(' ');
    return {stream: parts[0], track: parts[1]};
  }
};

// SCTP
// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back
// to draft-ietf-mmusic-sctp-sdp-05
SDPUtils.parseSctpDescription = function(mediaSection) {
  const mline = SDPUtils.parseMLine(mediaSection);
  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');
  let maxMessageSize;
  if (maxSizeLine.length > 0) {
    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);
  }
  if (isNaN(maxMessageSize)) {
    maxMessageSize = 65536;
  }
  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');
  if (sctpPort.length > 0) {
    return {
      port: parseInt(sctpPort[0].substr(12), 10),
      protocol: mline.fmt,
      maxMessageSize,
    };
  }
  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');
  if (sctpMapLines.length > 0) {
    const parts = sctpMapLines[0]
      .substr(10)
      .split(' ');
    return {
      port: parseInt(parts[0], 10),
      protocol: parts[1],
      maxMessageSize,
    };
  }
};

// SCTP
// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers
// support by now receiving in this format, unless we originally parsed
// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line
// protocol of DTLS/SCTP -- without UDP/ or TCP/)
SDPUtils.writeSctpDescription = function(media, sctp) {
  let output = [];
  if (media.protocol !== 'DTLS/SCTP') {
    output = [
      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\r\n',
      'c=IN IP4 0.0.0.0\r\n',
      'a=sctp-port:' + sctp.port + '\r\n',
    ];
  } else {
    output = [
      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\r\n',
      'c=IN IP4 0.0.0.0\r\n',
      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\r\n',
    ];
  }
  if (sctp.maxMessageSize !== undefined) {
    output.push('a=max-message-size:' + sctp.maxMessageSize + '\r\n');
  }
  return output.join('');
};

// Generate a session ID for SDP.
// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1
// recommends using a cryptographically random +ve 64-bit value
// but right now this should be acceptable and within the right range
SDPUtils.generateSessionId = function() {
  return Math.random().toString().substr(2, 21);
};

// Write boiler plate for start of SDP
// sessId argument is optional - if not supplied it will
// be generated randomly
// sessVersion is optional and defaults to 2
// sessUser is optional and defaults to 'thisisadapterortc'
SDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {
  let sessionId;
  const version = sessVer !== undefined ? sessVer : 2;
  if (sessId) {
    sessionId = sessId;
  } else {
    sessionId = SDPUtils.generateSessionId();
  }
  const user = sessUser || 'thisisadapterortc';
  // FIXME: sess-id should be an NTP timestamp.
  return 'v=0\r\n' +
      'o=' + user + ' ' + sessionId + ' ' + version +
        ' IN IP4 127.0.0.1\r\n' +
      's=-\r\n' +
      't=0 0\r\n';
};

// Gets the direction from the mediaSection or the sessionpart.
SDPUtils.getDirection = function(mediaSection, sessionpart) {
  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.
  const lines = SDPUtils.splitLines(mediaSection);
  for (let i = 0; i < lines.length; i++) {
    switch (lines[i]) {
      case 'a=sendrecv':
      case 'a=sendonly':
      case 'a=recvonly':
      case 'a=inactive':
        return lines[i].substr(2);
      default:
        // FIXME: What should happen here?
    }
  }
  if (sessionpart) {
    return SDPUtils.getDirection(sessionpart);
  }
  return 'sendrecv';
};

SDPUtils.getKind = function(mediaSection) {
  const lines = SDPUtils.splitLines(mediaSection);
  const mline = lines[0].split(' ');
  return mline[0].substr(2);
};

SDPUtils.isRejected = function(mediaSection) {
  return mediaSection.split(' ', 2)[1] === '0';
};

SDPUtils.parseMLine = function(mediaSection) {
  const lines = SDPUtils.splitLines(mediaSection);
  const parts = lines[0].substr(2).split(' ');
  return {
    kind: parts[0],
    port: parseInt(parts[1], 10),
    protocol: parts[2],
    fmt: parts.slice(3).join(' '),
  };
};

SDPUtils.parseOLine = function(mediaSection) {
  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];
  const parts = line.substr(2).split(' ');
  return {
    username: parts[0],
    sessionId: parts[1],
    sessionVersion: parseInt(parts[2], 10),
    netType: parts[3],
    addressType: parts[4],
    address: parts[5],
  };
};

// a very naive interpretation of a valid SDP.
SDPUtils.isValidSDP = function(blob) {
  if (typeof blob !== 'string' || blob.length === 0) {
    return false;
  }
  const lines = SDPUtils.splitLines(blob);
  for (let i = 0; i < lines.length; i++) {
    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {
      return false;
    }
    // TODO: check the modifier a bit more.
  }
  return true;
};

// Expose public methods.
if (true) {
  module.exports = SDPUtils;
}


/***/ }),

/***/ "./node_modules/socket.io-client/build/esm/contrib/backo2.js":
/*!*******************************************************************!*\
  !*** ./node_modules/socket.io-client/build/esm/contrib/backo2.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Backoff": function() { return /* binding */ Backoff; }
/* harmony export */ });
/**
 * Initialize backoff timer with `opts`.
 *
 * - `min` initial timeout in milliseconds [100]
 * - `max` max timeout [10000]
 * - `jitter` [0]
 * - `factor` [2]
 *
 * @param {Object} opts
 * @api public
 */
function Backoff(opts) {
    opts = opts || {};
    this.ms = opts.min || 100;
    this.max = opts.max || 10000;
    this.factor = opts.factor || 2;
    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;
    this.attempts = 0;
}
/**
 * Return the backoff duration.
 *
 * @return {Number}
 * @api public
 */
Backoff.prototype.duration = function () {
    var ms = this.ms * Math.pow(this.factor, this.attempts++);
    if (this.jitter) {
        var rand = Math.random();
        var deviation = Math.floor(rand * this.jitter * ms);
        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;
    }
    return Math.min(ms, this.max) | 0;
};
/**
 * Reset the number of attempts.
 *
 * @api public
 */
Backoff.prototype.reset = function () {
    this.attempts = 0;
};
/**
 * Set the minimum duration
 *
 * @api public
 */
Backoff.prototype.setMin = function (min) {
    this.ms = min;
};
/**
 * Set the maximum duration
 *
 * @api public
 */
Backoff.prototype.setMax = function (max) {
    this.max = max;
};
/**
 * Set the jitter
 *
 * @api public
 */
Backoff.prototype.setJitter = function (jitter) {
    this.jitter = jitter;
};


/***/ }),

/***/ "./node_modules/socket.io-client/build/esm/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/socket.io-client/build/esm/index.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "protocol": function() { return /* reexport safe */ socket_io_parser__WEBPACK_IMPORTED_MODULE_3__.protocol; },
/* harmony export */   "Manager": function() { return /* reexport safe */ _manager_js__WEBPACK_IMPORTED_MODULE_1__.Manager; },
/* harmony export */   "Socket": function() { return /* reexport safe */ _socket_js__WEBPACK_IMPORTED_MODULE_2__.Socket; },
/* harmony export */   "io": function() { return /* binding */ lookup; },
/* harmony export */   "connect": function() { return /* binding */ lookup; },
/* harmony export */   "default": function() { return /* binding */ lookup; }
/* harmony export */ });
/* harmony import */ var _url_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./url.js */ "./node_modules/socket.io-client/build/esm/url.js");
/* harmony import */ var _manager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./manager.js */ "./node_modules/socket.io-client/build/esm/manager.js");
/* harmony import */ var _socket_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./socket.js */ "./node_modules/socket.io-client/build/esm/socket.js");
/* harmony import */ var socket_io_parser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! socket.io-parser */ "./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/index.js");



/**
 * Managers cache.
 */
const cache = {};
function lookup(uri, opts) {
    if (typeof uri === "object") {
        opts = uri;
        uri = undefined;
    }
    opts = opts || {};
    const parsed = (0,_url_js__WEBPACK_IMPORTED_MODULE_0__.url)(uri, opts.path || "/socket.io");
    const source = parsed.source;
    const id = parsed.id;
    const path = parsed.path;
    const sameNamespace = cache[id] && path in cache[id]["nsps"];
    const newConnection = opts.forceNew ||
        opts["force new connection"] ||
        false === opts.multiplex ||
        sameNamespace;
    let io;
    if (newConnection) {
        io = new _manager_js__WEBPACK_IMPORTED_MODULE_1__.Manager(source, opts);
    }
    else {
        if (!cache[id]) {
            cache[id] = new _manager_js__WEBPACK_IMPORTED_MODULE_1__.Manager(source, opts);
        }
        io = cache[id];
    }
    if (parsed.query && !opts.query) {
        opts.query = parsed.queryKey;
    }
    return io.socket(parsed.path, opts);
}
// so that "lookup" can be used both as a function (e.g. `io(...)`) and as a
// namespace (e.g. `io.connect(...)`), for backward compatibility
Object.assign(lookup, {
    Manager: _manager_js__WEBPACK_IMPORTED_MODULE_1__.Manager,
    Socket: _socket_js__WEBPACK_IMPORTED_MODULE_2__.Socket,
    io: lookup,
    connect: lookup,
});
/**
 * Protocol version.
 *
 * @public
 */

/**
 * Expose constructors for standalone build.
 *
 * @public
 */



/***/ }),

/***/ "./node_modules/socket.io-client/build/esm/manager.js":
/*!************************************************************!*\
  !*** ./node_modules/socket.io-client/build/esm/manager.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Manager": function() { return /* binding */ Manager; }
/* harmony export */ });
/* harmony import */ var engine_io_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! engine.io-client */ "./node_modules/engine.io-client/build/esm/index.js");
/* harmony import */ var _socket_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./socket.js */ "./node_modules/socket.io-client/build/esm/socket.js");
/* harmony import */ var socket_io_parser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! socket.io-parser */ "./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/index.js");
/* harmony import */ var _on_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./on.js */ "./node_modules/socket.io-client/build/esm/on.js");
/* harmony import */ var _contrib_backo2_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./contrib/backo2.js */ "./node_modules/socket.io-client/build/esm/contrib/backo2.js");
/* harmony import */ var _socket_io_component_emitter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @socket.io/component-emitter */ "./node_modules/@socket.io/component-emitter/index.mjs");






class Manager extends _socket_io_component_emitter__WEBPACK_IMPORTED_MODULE_5__.Emitter {
    constructor(uri, opts) {
        var _a;
        super();
        this.nsps = {};
        this.subs = [];
        if (uri && "object" === typeof uri) {
            opts = uri;
            uri = undefined;
        }
        opts = opts || {};
        opts.path = opts.path || "/socket.io";
        this.opts = opts;
        (0,engine_io_client__WEBPACK_IMPORTED_MODULE_0__.installTimerFunctions)(this, opts);
        this.reconnection(opts.reconnection !== false);
        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);
        this.reconnectionDelay(opts.reconnectionDelay || 1000);
        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);
        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);
        this.backoff = new _contrib_backo2_js__WEBPACK_IMPORTED_MODULE_4__.Backoff({
            min: this.reconnectionDelay(),
            max: this.reconnectionDelayMax(),
            jitter: this.randomizationFactor(),
        });
        this.timeout(null == opts.timeout ? 20000 : opts.timeout);
        this._readyState = "closed";
        this.uri = uri;
        const _parser = opts.parser || socket_io_parser__WEBPACK_IMPORTED_MODULE_2__;
        this.encoder = new _parser.Encoder();
        this.decoder = new _parser.Decoder();
        this._autoConnect = opts.autoConnect !== false;
        if (this._autoConnect)
            this.open();
    }
    reconnection(v) {
        if (!arguments.length)
            return this._reconnection;
        this._reconnection = !!v;
        return this;
    }
    reconnectionAttempts(v) {
        if (v === undefined)
            return this._reconnectionAttempts;
        this._reconnectionAttempts = v;
        return this;
    }
    reconnectionDelay(v) {
        var _a;
        if (v === undefined)
            return this._reconnectionDelay;
        this._reconnectionDelay = v;
        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);
        return this;
    }
    randomizationFactor(v) {
        var _a;
        if (v === undefined)
            return this._randomizationFactor;
        this._randomizationFactor = v;
        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);
        return this;
    }
    reconnectionDelayMax(v) {
        var _a;
        if (v === undefined)
            return this._reconnectionDelayMax;
        this._reconnectionDelayMax = v;
        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);
        return this;
    }
    timeout(v) {
        if (!arguments.length)
            return this._timeout;
        this._timeout = v;
        return this;
    }
    /**
     * Starts trying to reconnect if reconnection is enabled and we have not
     * started reconnecting yet
     *
     * @private
     */
    maybeReconnectOnOpen() {
        // Only try to reconnect if it's the first time we're connecting
        if (!this._reconnecting &&
            this._reconnection &&
            this.backoff.attempts === 0) {
            // keeps reconnection from firing twice for the same reconnection loop
            this.reconnect();
        }
    }
    /**
     * Sets the current transport `socket`.
     *
     * @param {Function} fn - optional, callback
     * @return self
     * @public
     */
    open(fn) {
        if (~this._readyState.indexOf("open"))
            return this;
        this.engine = new engine_io_client__WEBPACK_IMPORTED_MODULE_0__.Socket(this.uri, this.opts);
        const socket = this.engine;
        const self = this;
        this._readyState = "opening";
        this.skipReconnect = false;
        // emit `open`
        const openSubDestroy = (0,_on_js__WEBPACK_IMPORTED_MODULE_3__.on)(socket, "open", function () {
            self.onopen();
            fn && fn();
        });
        // emit `error`
        const errorSub = (0,_on_js__WEBPACK_IMPORTED_MODULE_3__.on)(socket, "error", (err) => {
            self.cleanup();
            self._readyState = "closed";
            this.emitReserved("error", err);
            if (fn) {
                fn(err);
            }
            else {
                // Only do this if there is no fn to handle the error
                self.maybeReconnectOnOpen();
            }
        });
        if (false !== this._timeout) {
            const timeout = this._timeout;
            if (timeout === 0) {
                openSubDestroy(); // prevents a race condition with the 'open' event
            }
            // set timer
            const timer = this.setTimeoutFn(() => {
                openSubDestroy();
                socket.close();
                // @ts-ignore
                socket.emit("error", new Error("timeout"));
            }, timeout);
            if (this.opts.autoUnref) {
                timer.unref();
            }
            this.subs.push(function subDestroy() {
                clearTimeout(timer);
            });
        }
        this.subs.push(openSubDestroy);
        this.subs.push(errorSub);
        return this;
    }
    /**
     * Alias for open()
     *
     * @return self
     * @public
     */
    connect(fn) {
        return this.open(fn);
    }
    /**
     * Called upon transport open.
     *
     * @private
     */
    onopen() {
        // clear old subs
        this.cleanup();
        // mark as open
        this._readyState = "open";
        this.emitReserved("open");
        // add new subs
        const socket = this.engine;
        this.subs.push((0,_on_js__WEBPACK_IMPORTED_MODULE_3__.on)(socket, "ping", this.onping.bind(this)), (0,_on_js__WEBPACK_IMPORTED_MODULE_3__.on)(socket, "data", this.ondata.bind(this)), (0,_on_js__WEBPACK_IMPORTED_MODULE_3__.on)(socket, "error", this.onerror.bind(this)), (0,_on_js__WEBPACK_IMPORTED_MODULE_3__.on)(socket, "close", this.onclose.bind(this)), (0,_on_js__WEBPACK_IMPORTED_MODULE_3__.on)(this.decoder, "decoded", this.ondecoded.bind(this)));
    }
    /**
     * Called upon a ping.
     *
     * @private
     */
    onping() {
        this.emitReserved("ping");
    }
    /**
     * Called with data.
     *
     * @private
     */
    ondata(data) {
        this.decoder.add(data);
    }
    /**
     * Called when parser fully decodes a packet.
     *
     * @private
     */
    ondecoded(packet) {
        this.emitReserved("packet", packet);
    }
    /**
     * Called upon socket error.
     *
     * @private
     */
    onerror(err) {
        this.emitReserved("error", err);
    }
    /**
     * Creates a new socket for the given `nsp`.
     *
     * @return {Socket}
     * @public
     */
    socket(nsp, opts) {
        let socket = this.nsps[nsp];
        if (!socket) {
            socket = new _socket_js__WEBPACK_IMPORTED_MODULE_1__.Socket(this, nsp, opts);
            this.nsps[nsp] = socket;
        }
        return socket;
    }
    /**
     * Called upon a socket close.
     *
     * @param socket
     * @private
     */
    _destroy(socket) {
        const nsps = Object.keys(this.nsps);
        for (const nsp of nsps) {
            const socket = this.nsps[nsp];
            if (socket.active) {
                return;
            }
        }
        this._close();
    }
    /**
     * Writes a packet.
     *
     * @param packet
     * @private
     */
    _packet(packet) {
        const encodedPackets = this.encoder.encode(packet);
        for (let i = 0; i < encodedPackets.length; i++) {
            this.engine.write(encodedPackets[i], packet.options);
        }
    }
    /**
     * Clean up transport subscriptions and packet buffer.
     *
     * @private
     */
    cleanup() {
        this.subs.forEach((subDestroy) => subDestroy());
        this.subs.length = 0;
        this.decoder.destroy();
    }
    /**
     * Close the current socket.
     *
     * @private
     */
    _close() {
        this.skipReconnect = true;
        this._reconnecting = false;
        this.onclose("forced close");
        if (this.engine)
            this.engine.close();
    }
    /**
     * Alias for close()
     *
     * @private
     */
    disconnect() {
        return this._close();
    }
    /**
     * Called upon engine close.
     *
     * @private
     */
    onclose(reason, description) {
        this.cleanup();
        this.backoff.reset();
        this._readyState = "closed";
        this.emitReserved("close", reason, description);
        if (this._reconnection && !this.skipReconnect) {
            this.reconnect();
        }
    }
    /**
     * Attempt a reconnection.
     *
     * @private
     */
    reconnect() {
        if (this._reconnecting || this.skipReconnect)
            return this;
        const self = this;
        if (this.backoff.attempts >= this._reconnectionAttempts) {
            this.backoff.reset();
            this.emitReserved("reconnect_failed");
            this._reconnecting = false;
        }
        else {
            const delay = this.backoff.duration();
            this._reconnecting = true;
            const timer = this.setTimeoutFn(() => {
                if (self.skipReconnect)
                    return;
                this.emitReserved("reconnect_attempt", self.backoff.attempts);
                // check again for the case socket closed in above events
                if (self.skipReconnect)
                    return;
                self.open((err) => {
                    if (err) {
                        self._reconnecting = false;
                        self.reconnect();
                        this.emitReserved("reconnect_error", err);
                    }
                    else {
                        self.onreconnect();
                    }
                });
            }, delay);
            if (this.opts.autoUnref) {
                timer.unref();
            }
            this.subs.push(function subDestroy() {
                clearTimeout(timer);
            });
        }
    }
    /**
     * Called upon successful reconnect.
     *
     * @private
     */
    onreconnect() {
        const attempt = this.backoff.attempts;
        this._reconnecting = false;
        this.backoff.reset();
        this.emitReserved("reconnect", attempt);
    }
}


/***/ }),

/***/ "./node_modules/socket.io-client/build/esm/on.js":
/*!*******************************************************!*\
  !*** ./node_modules/socket.io-client/build/esm/on.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "on": function() { return /* binding */ on; }
/* harmony export */ });
function on(obj, ev, fn) {
    obj.on(ev, fn);
    return function subDestroy() {
        obj.off(ev, fn);
    };
}


/***/ }),

/***/ "./node_modules/socket.io-client/build/esm/socket.js":
/*!***********************************************************!*\
  !*** ./node_modules/socket.io-client/build/esm/socket.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Socket": function() { return /* binding */ Socket; }
/* harmony export */ });
/* harmony import */ var socket_io_parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io-parser */ "./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/index.js");
/* harmony import */ var _on_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./on.js */ "./node_modules/socket.io-client/build/esm/on.js");
/* harmony import */ var _socket_io_component_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @socket.io/component-emitter */ "./node_modules/@socket.io/component-emitter/index.mjs");



/**
 * Internal events.
 * These events can't be emitted by the user.
 */
const RESERVED_EVENTS = Object.freeze({
    connect: 1,
    connect_error: 1,
    disconnect: 1,
    disconnecting: 1,
    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener
    newListener: 1,
    removeListener: 1,
});
class Socket extends _socket_io_component_emitter__WEBPACK_IMPORTED_MODULE_2__.Emitter {
    /**
     * `Socket` constructor.
     *
     * @public
     */
    constructor(io, nsp, opts) {
        super();
        this.connected = false;
        this.receiveBuffer = [];
        this.sendBuffer = [];
        this.ids = 0;
        this.acks = {};
        this.flags = {};
        this.io = io;
        this.nsp = nsp;
        if (opts && opts.auth) {
            this.auth = opts.auth;
        }
        if (this.io._autoConnect)
            this.open();
    }
    /**
     * Whether the socket is currently disconnected
     */
    get disconnected() {
        return !this.connected;
    }
    /**
     * Subscribe to open, close and packet events
     *
     * @private
     */
    subEvents() {
        if (this.subs)
            return;
        const io = this.io;
        this.subs = [
            (0,_on_js__WEBPACK_IMPORTED_MODULE_1__.on)(io, "open", this.onopen.bind(this)),
            (0,_on_js__WEBPACK_IMPORTED_MODULE_1__.on)(io, "packet", this.onpacket.bind(this)),
            (0,_on_js__WEBPACK_IMPORTED_MODULE_1__.on)(io, "error", this.onerror.bind(this)),
            (0,_on_js__WEBPACK_IMPORTED_MODULE_1__.on)(io, "close", this.onclose.bind(this)),
        ];
    }
    /**
     * Whether the Socket will try to reconnect when its Manager connects or reconnects
     */
    get active() {
        return !!this.subs;
    }
    /**
     * "Opens" the socket.
     *
     * @public
     */
    connect() {
        if (this.connected)
            return this;
        this.subEvents();
        if (!this.io["_reconnecting"])
            this.io.open(); // ensure open
        if ("open" === this.io._readyState)
            this.onopen();
        return this;
    }
    /**
     * Alias for connect()
     */
    open() {
        return this.connect();
    }
    /**
     * Sends a `message` event.
     *
     * @return self
     * @public
     */
    send(...args) {
        args.unshift("message");
        this.emit.apply(this, args);
        return this;
    }
    /**
     * Override `emit`.
     * If the event is in `events`, it's emitted normally.
     *
     * @return self
     * @public
     */
    emit(ev, ...args) {
        if (RESERVED_EVENTS.hasOwnProperty(ev)) {
            throw new Error('"' + ev + '" is a reserved event name');
        }
        args.unshift(ev);
        const packet = {
            type: socket_io_parser__WEBPACK_IMPORTED_MODULE_0__.PacketType.EVENT,
            data: args,
        };
        packet.options = {};
        packet.options.compress = this.flags.compress !== false;
        // event ack callback
        if ("function" === typeof args[args.length - 1]) {
            const id = this.ids++;
            const ack = args.pop();
            this._registerAckCallback(id, ack);
            packet.id = id;
        }
        const isTransportWritable = this.io.engine &&
            this.io.engine.transport &&
            this.io.engine.transport.writable;
        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);
        if (discardPacket) {
        }
        else if (this.connected) {
            this.notifyOutgoingListeners(packet);
            this.packet(packet);
        }
        else {
            this.sendBuffer.push(packet);
        }
        this.flags = {};
        return this;
    }
    /**
     * @private
     */
    _registerAckCallback(id, ack) {
        const timeout = this.flags.timeout;
        if (timeout === undefined) {
            this.acks[id] = ack;
            return;
        }
        // @ts-ignore
        const timer = this.io.setTimeoutFn(() => {
            delete this.acks[id];
            for (let i = 0; i < this.sendBuffer.length; i++) {
                if (this.sendBuffer[i].id === id) {
                    this.sendBuffer.splice(i, 1);
                }
            }
            ack.call(this, new Error("operation has timed out"));
        }, timeout);
        this.acks[id] = (...args) => {
            // @ts-ignore
            this.io.clearTimeoutFn(timer);
            ack.apply(this, [null, ...args]);
        };
    }
    /**
     * Sends a packet.
     *
     * @param packet
     * @private
     */
    packet(packet) {
        packet.nsp = this.nsp;
        this.io._packet(packet);
    }
    /**
     * Called upon engine `open`.
     *
     * @private
     */
    onopen() {
        if (typeof this.auth == "function") {
            this.auth((data) => {
                this.packet({ type: socket_io_parser__WEBPACK_IMPORTED_MODULE_0__.PacketType.CONNECT, data });
            });
        }
        else {
            this.packet({ type: socket_io_parser__WEBPACK_IMPORTED_MODULE_0__.PacketType.CONNECT, data: this.auth });
        }
    }
    /**
     * Called upon engine or manager `error`.
     *
     * @param err
     * @private
     */
    onerror(err) {
        if (!this.connected) {
            this.emitReserved("connect_error", err);
        }
    }
    /**
     * Called upon engine `close`.
     *
     * @param reason
     * @param description
     * @private
     */
    onclose(reason, description) {
        this.connected = false;
        delete this.id;
        this.emitReserved("disconnect", reason, description);
    }
    /**
     * Called with socket packet.
     *
     * @param packet
     * @private
     */
    onpacket(packet) {
        const sameNamespace = packet.nsp === this.nsp;
        if (!sameNamespace)
            return;
        switch (packet.type) {
            case socket_io_parser__WEBPACK_IMPORTED_MODULE_0__.PacketType.CONNECT:
                if (packet.data && packet.data.sid) {
                    const id = packet.data.sid;
                    this.onconnect(id);
                }
                else {
                    this.emitReserved("connect_error", new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));
                }
                break;
            case socket_io_parser__WEBPACK_IMPORTED_MODULE_0__.PacketType.EVENT:
            case socket_io_parser__WEBPACK_IMPORTED_MODULE_0__.PacketType.BINARY_EVENT:
                this.onevent(packet);
                break;
            case socket_io_parser__WEBPACK_IMPORTED_MODULE_0__.PacketType.ACK:
            case socket_io_parser__WEBPACK_IMPORTED_MODULE_0__.PacketType.BINARY_ACK:
                this.onack(packet);
                break;
            case socket_io_parser__WEBPACK_IMPORTED_MODULE_0__.PacketType.DISCONNECT:
                this.ondisconnect();
                break;
            case socket_io_parser__WEBPACK_IMPORTED_MODULE_0__.PacketType.CONNECT_ERROR:
                this.destroy();
                const err = new Error(packet.data.message);
                // @ts-ignore
                err.data = packet.data.data;
                this.emitReserved("connect_error", err);
                break;
        }
    }
    /**
     * Called upon a server event.
     *
     * @param packet
     * @private
     */
    onevent(packet) {
        const args = packet.data || [];
        if (null != packet.id) {
            args.push(this.ack(packet.id));
        }
        if (this.connected) {
            this.emitEvent(args);
        }
        else {
            this.receiveBuffer.push(Object.freeze(args));
        }
    }
    emitEvent(args) {
        if (this._anyListeners && this._anyListeners.length) {
            const listeners = this._anyListeners.slice();
            for (const listener of listeners) {
                listener.apply(this, args);
            }
        }
        super.emit.apply(this, args);
    }
    /**
     * Produces an ack callback to emit with an event.
     *
     * @private
     */
    ack(id) {
        const self = this;
        let sent = false;
        return function (...args) {
            // prevent double callbacks
            if (sent)
                return;
            sent = true;
            self.packet({
                type: socket_io_parser__WEBPACK_IMPORTED_MODULE_0__.PacketType.ACK,
                id: id,
                data: args,
            });
        };
    }
    /**
     * Called upon a server acknowlegement.
     *
     * @param packet
     * @private
     */
    onack(packet) {
        const ack = this.acks[packet.id];
        if ("function" === typeof ack) {
            ack.apply(this, packet.data);
            delete this.acks[packet.id];
        }
        else {
        }
    }
    /**
     * Called upon server connect.
     *
     * @private
     */
    onconnect(id) {
        this.id = id;
        this.connected = true;
        this.emitBuffered();
        this.emitReserved("connect");
    }
    /**
     * Emit buffered events (received and emitted).
     *
     * @private
     */
    emitBuffered() {
        this.receiveBuffer.forEach((args) => this.emitEvent(args));
        this.receiveBuffer = [];
        this.sendBuffer.forEach((packet) => {
            this.notifyOutgoingListeners(packet);
            this.packet(packet);
        });
        this.sendBuffer = [];
    }
    /**
     * Called upon server disconnect.
     *
     * @private
     */
    ondisconnect() {
        this.destroy();
        this.onclose("io server disconnect");
    }
    /**
     * Called upon forced client/server side disconnections,
     * this method ensures the manager stops tracking us and
     * that reconnections don't get triggered for this.
     *
     * @private
     */
    destroy() {
        if (this.subs) {
            // clean subscriptions to avoid reconnections
            this.subs.forEach((subDestroy) => subDestroy());
            this.subs = undefined;
        }
        this.io["_destroy"](this);
    }
    /**
     * Disconnects the socket manually.
     *
     * @return self
     * @public
     */
    disconnect() {
        if (this.connected) {
            this.packet({ type: socket_io_parser__WEBPACK_IMPORTED_MODULE_0__.PacketType.DISCONNECT });
        }
        // remove socket from pool
        this.destroy();
        if (this.connected) {
            // fire events
            this.onclose("io client disconnect");
        }
        return this;
    }
    /**
     * Alias for disconnect()
     *
     * @return self
     * @public
     */
    close() {
        return this.disconnect();
    }
    /**
     * Sets the compress flag.
     *
     * @param compress - if `true`, compresses the sending data
     * @return self
     * @public
     */
    compress(compress) {
        this.flags.compress = compress;
        return this;
    }
    /**
     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not
     * ready to send messages.
     *
     * @returns self
     * @public
     */
    get volatile() {
        this.flags.volatile = true;
        return this;
    }
    /**
     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the
     * given number of milliseconds have elapsed without an acknowledgement from the server:
     *
     * ```
     * socket.timeout(5000).emit("my-event", (err) => {
     *   if (err) {
     *     // the server did not acknowledge the event in the given delay
     *   }
     * });
     * ```
     *
     * @returns self
     * @public
     */
    timeout(timeout) {
        this.flags.timeout = timeout;
        return this;
    }
    /**
     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
     * callback.
     *
     * @param listener
     * @public
     */
    onAny(listener) {
        this._anyListeners = this._anyListeners || [];
        this._anyListeners.push(listener);
        return this;
    }
    /**
     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
     * callback. The listener is added to the beginning of the listeners array.
     *
     * @param listener
     * @public
     */
    prependAny(listener) {
        this._anyListeners = this._anyListeners || [];
        this._anyListeners.unshift(listener);
        return this;
    }
    /**
     * Removes the listener that will be fired when any event is emitted.
     *
     * @param listener
     * @public
     */
    offAny(listener) {
        if (!this._anyListeners) {
            return this;
        }
        if (listener) {
            const listeners = this._anyListeners;
            for (let i = 0; i < listeners.length; i++) {
                if (listener === listeners[i]) {
                    listeners.splice(i, 1);
                    return this;
                }
            }
        }
        else {
            this._anyListeners = [];
        }
        return this;
    }
    /**
     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,
     * e.g. to remove listeners.
     *
     * @public
     */
    listenersAny() {
        return this._anyListeners || [];
    }
    /**
     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
     * callback.
     *
     * @param listener
     *
     * <pre><code>
     *
     * socket.onAnyOutgoing((event, ...args) => {
     *   console.log(event);
     * });
     *
     * </pre></code>
     *
     * @public
     */
    onAnyOutgoing(listener) {
        this._anyOutgoingListeners = this._anyOutgoingListeners || [];
        this._anyOutgoingListeners.push(listener);
        return this;
    }
    /**
     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
     * callback. The listener is added to the beginning of the listeners array.
     *
     * @param listener
     *
     * <pre><code>
     *
     * socket.prependAnyOutgoing((event, ...args) => {
     *   console.log(event);
     * });
     *
     * </pre></code>
     *
     * @public
     */
    prependAnyOutgoing(listener) {
        this._anyOutgoingListeners = this._anyOutgoingListeners || [];
        this._anyOutgoingListeners.unshift(listener);
        return this;
    }
    /**
     * Removes the listener that will be fired when any event is emitted.
     *
     * @param listener
     *
     * <pre><code>
     *
     * const handler = (event, ...args) => {
     *   console.log(event);
     * }
     *
     * socket.onAnyOutgoing(handler);
     *
     * // then later
     * socket.offAnyOutgoing(handler);
     *
     * </pre></code>
     *
     * @public
     */
    offAnyOutgoing(listener) {
        if (!this._anyOutgoingListeners) {
            return this;
        }
        if (listener) {
            const listeners = this._anyOutgoingListeners;
            for (let i = 0; i < listeners.length; i++) {
                if (listener === listeners[i]) {
                    listeners.splice(i, 1);
                    return this;
                }
            }
        }
        else {
            this._anyOutgoingListeners = [];
        }
        return this;
    }
    /**
     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,
     * e.g. to remove listeners.
     *
     * @public
     */
    listenersAnyOutgoing() {
        return this._anyOutgoingListeners || [];
    }
    /**
     * Notify the listeners for each packet sent
     *
     * @param packet
     *
     * @private
     */
    notifyOutgoingListeners(packet) {
        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {
            const listeners = this._anyOutgoingListeners.slice();
            for (const listener of listeners) {
                listener.apply(this, packet.data);
            }
        }
    }
}


/***/ }),

/***/ "./node_modules/socket.io-client/build/esm/url.js":
/*!********************************************************!*\
  !*** ./node_modules/socket.io-client/build/esm/url.js ***!
  \********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "url": function() { return /* binding */ url; }
/* harmony export */ });
/* harmony import */ var engine_io_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! engine.io-client */ "./node_modules/engine.io-client/build/esm/index.js");

/**
 * URL parser.
 *
 * @param uri - url
 * @param path - the request path of the connection
 * @param loc - An object meant to mimic window.location.
 *        Defaults to window.location.
 * @public
 */
function url(uri, path = "", loc) {
    let obj = uri;
    // default to window.location
    loc = loc || (typeof location !== "undefined" && location);
    if (null == uri)
        uri = loc.protocol + "//" + loc.host;
    // relative path support
    if (typeof uri === "string") {
        if ("/" === uri.charAt(0)) {
            if ("/" === uri.charAt(1)) {
                uri = loc.protocol + uri;
            }
            else {
                uri = loc.host + uri;
            }
        }
        if (!/^(https?|wss?):\/\//.test(uri)) {
            if ("undefined" !== typeof loc) {
                uri = loc.protocol + "//" + uri;
            }
            else {
                uri = "https://" + uri;
            }
        }
        // parse
        obj = (0,engine_io_client__WEBPACK_IMPORTED_MODULE_0__.parse)(uri);
    }
    // make sure we treat `localhost:80` and `localhost` equally
    if (!obj.port) {
        if (/^(http|ws)$/.test(obj.protocol)) {
            obj.port = "80";
        }
        else if (/^(http|ws)s$/.test(obj.protocol)) {
            obj.port = "443";
        }
    }
    obj.path = obj.path || "/";
    const ipv6 = obj.host.indexOf(":") !== -1;
    const host = ipv6 ? "[" + obj.host + "]" : obj.host;
    // define unique id
    obj.id = obj.protocol + "://" + host + ":" + obj.port + path;
    // define href
    obj.href =
        obj.protocol +
            "://" +
            host +
            (loc && loc.port === obj.port ? "" : ":" + obj.port);
    return obj;
}


/***/ }),

/***/ "./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/binary.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/binary.js ***!
  \*****************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "deconstructPacket": function() { return /* binding */ deconstructPacket; },
/* harmony export */   "reconstructPacket": function() { return /* binding */ reconstructPacket; }
/* harmony export */ });
/* harmony import */ var _is_binary_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./is-binary.js */ "./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/is-binary.js");

/**
 * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.
 *
 * @param {Object} packet - socket.io event packet
 * @return {Object} with deconstructed packet and list of buffers
 * @public
 */
function deconstructPacket(packet) {
    const buffers = [];
    const packetData = packet.data;
    const pack = packet;
    pack.data = _deconstructPacket(packetData, buffers);
    pack.attachments = buffers.length; // number of binary 'attachments'
    return { packet: pack, buffers: buffers };
}
function _deconstructPacket(data, buffers) {
    if (!data)
        return data;
    if ((0,_is_binary_js__WEBPACK_IMPORTED_MODULE_0__.isBinary)(data)) {
        const placeholder = { _placeholder: true, num: buffers.length };
        buffers.push(data);
        return placeholder;
    }
    else if (Array.isArray(data)) {
        const newData = new Array(data.length);
        for (let i = 0; i < data.length; i++) {
            newData[i] = _deconstructPacket(data[i], buffers);
        }
        return newData;
    }
    else if (typeof data === "object" && !(data instanceof Date)) {
        const newData = {};
        for (const key in data) {
            if (Object.prototype.hasOwnProperty.call(data, key)) {
                newData[key] = _deconstructPacket(data[key], buffers);
            }
        }
        return newData;
    }
    return data;
}
/**
 * Reconstructs a binary packet from its placeholder packet and buffers
 *
 * @param {Object} packet - event packet with placeholders
 * @param {Array} buffers - binary buffers to put in placeholder positions
 * @return {Object} reconstructed packet
 * @public
 */
function reconstructPacket(packet, buffers) {
    packet.data = _reconstructPacket(packet.data, buffers);
    packet.attachments = undefined; // no longer useful
    return packet;
}
function _reconstructPacket(data, buffers) {
    if (!data)
        return data;
    if (data && data._placeholder) {
        return buffers[data.num]; // appropriate buffer (should be natural order anyway)
    }
    else if (Array.isArray(data)) {
        for (let i = 0; i < data.length; i++) {
            data[i] = _reconstructPacket(data[i], buffers);
        }
    }
    else if (typeof data === "object") {
        for (const key in data) {
            if (Object.prototype.hasOwnProperty.call(data, key)) {
                data[key] = _reconstructPacket(data[key], buffers);
            }
        }
    }
    return data;
}


/***/ }),

/***/ "./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/index.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/index.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "protocol": function() { return /* binding */ protocol; },
/* harmony export */   "PacketType": function() { return /* binding */ PacketType; },
/* harmony export */   "Encoder": function() { return /* binding */ Encoder; },
/* harmony export */   "Decoder": function() { return /* binding */ Decoder; }
/* harmony export */ });
/* harmony import */ var _socket_io_component_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @socket.io/component-emitter */ "./node_modules/@socket.io/component-emitter/index.mjs");
/* harmony import */ var _binary_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./binary.js */ "./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/binary.js");
/* harmony import */ var _is_binary_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./is-binary.js */ "./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/is-binary.js");



/**
 * Protocol version.
 *
 * @public
 */
const protocol = 5;
var PacketType;
(function (PacketType) {
    PacketType[PacketType["CONNECT"] = 0] = "CONNECT";
    PacketType[PacketType["DISCONNECT"] = 1] = "DISCONNECT";
    PacketType[PacketType["EVENT"] = 2] = "EVENT";
    PacketType[PacketType["ACK"] = 3] = "ACK";
    PacketType[PacketType["CONNECT_ERROR"] = 4] = "CONNECT_ERROR";
    PacketType[PacketType["BINARY_EVENT"] = 5] = "BINARY_EVENT";
    PacketType[PacketType["BINARY_ACK"] = 6] = "BINARY_ACK";
})(PacketType || (PacketType = {}));
/**
 * A socket.io Encoder instance
 */
class Encoder {
    /**
     * Encoder constructor
     *
     * @param {function} replacer - custom replacer to pass down to JSON.parse
     */
    constructor(replacer) {
        this.replacer = replacer;
    }
    /**
     * Encode a packet as a single string if non-binary, or as a
     * buffer sequence, depending on packet type.
     *
     * @param {Object} obj - packet object
     */
    encode(obj) {
        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {
            if ((0,_is_binary_js__WEBPACK_IMPORTED_MODULE_2__.hasBinary)(obj)) {
                obj.type =
                    obj.type === PacketType.EVENT
                        ? PacketType.BINARY_EVENT
                        : PacketType.BINARY_ACK;
                return this.encodeAsBinary(obj);
            }
        }
        return [this.encodeAsString(obj)];
    }
    /**
     * Encode packet as string.
     */
    encodeAsString(obj) {
        // first is type
        let str = "" + obj.type;
        // attachments if we have them
        if (obj.type === PacketType.BINARY_EVENT ||
            obj.type === PacketType.BINARY_ACK) {
            str += obj.attachments + "-";
        }
        // if we have a namespace other than `/`
        // we append it followed by a comma `,`
        if (obj.nsp && "/" !== obj.nsp) {
            str += obj.nsp + ",";
        }
        // immediately followed by the id
        if (null != obj.id) {
            str += obj.id;
        }
        // json data
        if (null != obj.data) {
            str += JSON.stringify(obj.data, this.replacer);
        }
        return str;
    }
    /**
     * Encode packet as 'buffer sequence' by removing blobs, and
     * deconstructing packet into object with placeholders and
     * a list of buffers.
     */
    encodeAsBinary(obj) {
        const deconstruction = (0,_binary_js__WEBPACK_IMPORTED_MODULE_1__.deconstructPacket)(obj);
        const pack = this.encodeAsString(deconstruction.packet);
        const buffers = deconstruction.buffers;
        buffers.unshift(pack); // add packet info to beginning of data list
        return buffers; // write all the buffers
    }
}
/**
 * A socket.io Decoder instance
 *
 * @return {Object} decoder
 */
class Decoder extends _socket_io_component_emitter__WEBPACK_IMPORTED_MODULE_0__.Emitter {
    /**
     * Decoder constructor
     *
     * @param {function} reviver - custom reviver to pass down to JSON.stringify
     */
    constructor(reviver) {
        super();
        this.reviver = reviver;
    }
    /**
     * Decodes an encoded packet string into packet JSON.
     *
     * @param {String} obj - encoded packet
     */
    add(obj) {
        let packet;
        if (typeof obj === "string") {
            packet = this.decodeString(obj);
            if (packet.type === PacketType.BINARY_EVENT ||
                packet.type === PacketType.BINARY_ACK) {
                // binary packet's json
                this.reconstructor = new BinaryReconstructor(packet);
                // no attachments, labeled binary but no binary data to follow
                if (packet.attachments === 0) {
                    super.emitReserved("decoded", packet);
                }
            }
            else {
                // non-binary full packet
                super.emitReserved("decoded", packet);
            }
        }
        else if ((0,_is_binary_js__WEBPACK_IMPORTED_MODULE_2__.isBinary)(obj) || obj.base64) {
            // raw binary data
            if (!this.reconstructor) {
                throw new Error("got binary data when not reconstructing a packet");
            }
            else {
                packet = this.reconstructor.takeBinaryData(obj);
                if (packet) {
                    // received final buffer
                    this.reconstructor = null;
                    super.emitReserved("decoded", packet);
                }
            }
        }
        else {
            throw new Error("Unknown type: " + obj);
        }
    }
    /**
     * Decode a packet String (JSON data)
     *
     * @param {String} str
     * @return {Object} packet
     */
    decodeString(str) {
        let i = 0;
        // look up type
        const p = {
            type: Number(str.charAt(0)),
        };
        if (PacketType[p.type] === undefined) {
            throw new Error("unknown packet type " + p.type);
        }
        // look up attachments if type binary
        if (p.type === PacketType.BINARY_EVENT ||
            p.type === PacketType.BINARY_ACK) {
            const start = i + 1;
            while (str.charAt(++i) !== "-" && i != str.length) { }
            const buf = str.substring(start, i);
            if (buf != Number(buf) || str.charAt(i) !== "-") {
                throw new Error("Illegal attachments");
            }
            p.attachments = Number(buf);
        }
        // look up namespace (if any)
        if ("/" === str.charAt(i + 1)) {
            const start = i + 1;
            while (++i) {
                const c = str.charAt(i);
                if ("," === c)
                    break;
                if (i === str.length)
                    break;
            }
            p.nsp = str.substring(start, i);
        }
        else {
            p.nsp = "/";
        }
        // look up id
        const next = str.charAt(i + 1);
        if ("" !== next && Number(next) == next) {
            const start = i + 1;
            while (++i) {
                const c = str.charAt(i);
                if (null == c || Number(c) != c) {
                    --i;
                    break;
                }
                if (i === str.length)
                    break;
            }
            p.id = Number(str.substring(start, i + 1));
        }
        // look up json data
        if (str.charAt(++i)) {
            const payload = this.tryParse(str.substr(i));
            if (Decoder.isPayloadValid(p.type, payload)) {
                p.data = payload;
            }
            else {
                throw new Error("invalid payload");
            }
        }
        return p;
    }
    tryParse(str) {
        try {
            return JSON.parse(str, this.reviver);
        }
        catch (e) {
            return false;
        }
    }
    static isPayloadValid(type, payload) {
        switch (type) {
            case PacketType.CONNECT:
                return typeof payload === "object";
            case PacketType.DISCONNECT:
                return payload === undefined;
            case PacketType.CONNECT_ERROR:
                return typeof payload === "string" || typeof payload === "object";
            case PacketType.EVENT:
            case PacketType.BINARY_EVENT:
                return Array.isArray(payload) && payload.length > 0;
            case PacketType.ACK:
            case PacketType.BINARY_ACK:
                return Array.isArray(payload);
        }
    }
    /**
     * Deallocates a parser's resources
     */
    destroy() {
        if (this.reconstructor) {
            this.reconstructor.finishedReconstruction();
        }
    }
}
/**
 * A manager of a binary event's 'buffer sequence'. Should
 * be constructed whenever a packet of type BINARY_EVENT is
 * decoded.
 *
 * @param {Object} packet
 * @return {BinaryReconstructor} initialized reconstructor
 */
class BinaryReconstructor {
    constructor(packet) {
        this.packet = packet;
        this.buffers = [];
        this.reconPack = packet;
    }
    /**
     * Method to be called when binary data received from connection
     * after a BINARY_EVENT packet.
     *
     * @param {Buffer | ArrayBuffer} binData - the raw binary data received
     * @return {null | Object} returns null if more binary data is expected or
     *   a reconstructed packet object if all buffers have been received.
     */
    takeBinaryData(binData) {
        this.buffers.push(binData);
        if (this.buffers.length === this.reconPack.attachments) {
            // done with buffer list
            const packet = (0,_binary_js__WEBPACK_IMPORTED_MODULE_1__.reconstructPacket)(this.reconPack, this.buffers);
            this.finishedReconstruction();
            return packet;
        }
        return null;
    }
    /**
     * Cleans up binary packet reconstruction variables.
     */
    finishedReconstruction() {
        this.reconPack = null;
        this.buffers = [];
    }
}


/***/ }),

/***/ "./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/is-binary.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/is-binary.js ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isBinary": function() { return /* binding */ isBinary; },
/* harmony export */   "hasBinary": function() { return /* binding */ hasBinary; }
/* harmony export */ });
const withNativeArrayBuffer = typeof ArrayBuffer === "function";
const isView = (obj) => {
    return typeof ArrayBuffer.isView === "function"
        ? ArrayBuffer.isView(obj)
        : obj.buffer instanceof ArrayBuffer;
};
const toString = Object.prototype.toString;
const withNativeBlob = typeof Blob === "function" ||
    (typeof Blob !== "undefined" &&
        toString.call(Blob) === "[object BlobConstructor]");
const withNativeFile = typeof File === "function" ||
    (typeof File !== "undefined" &&
        toString.call(File) === "[object FileConstructor]");
/**
 * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.
 *
 * @private
 */
function isBinary(obj) {
    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||
        (withNativeBlob && obj instanceof Blob) ||
        (withNativeFile && obj instanceof File));
}
function hasBinary(obj, toJSON) {
    if (!obj || typeof obj !== "object") {
        return false;
    }
    if (Array.isArray(obj)) {
        for (let i = 0, l = obj.length; i < l; i++) {
            if (hasBinary(obj[i])) {
                return true;
            }
        }
        return false;
    }
    if (isBinary(obj)) {
        return true;
    }
    if (obj.toJSON &&
        typeof obj.toJSON === "function" &&
        arguments.length === 1) {
        return hasBinary(obj.toJSON(), true);
    }
    for (const key in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {
            return true;
        }
    }
    return false;
}


/***/ }),

/***/ "./src/orkestra/transitions/css/simple.css":
/*!*************************************************!*\
  !*** ./src/orkestra/transitions/css/simple.css ***!
  \*************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

var api = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !!../../../../node_modules/css-loader/dist/cjs.js!./simple.css */ "./node_modules/css-loader/dist/cjs.js!./src/orkestra/transitions/css/simple.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.id, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),

/***/ "./src/orkestra/ui/plugins/css/custom.css":
/*!************************************************!*\
  !*** ./src/orkestra/ui/plugins/css/custom.css ***!
  \************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

var api = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !!../../../../../node_modules/css-loader/dist/cjs.js!./custom.css */ "./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/custom.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.id, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),

/***/ "./src/orkestra/ui/plugins/css/pipgrid.css":
/*!*************************************************!*\
  !*** ./src/orkestra/ui/plugins/css/pipgrid.css ***!
  \*************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

var api = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !!../../../../../node_modules/css-loader/dist/cjs.js!./pipgrid.css */ "./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/pipgrid.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.id, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),

/***/ "./src/orkestra/ui/plugins/css/tabs.css":
/*!**********************************************!*\
  !*** ./src/orkestra/ui/plugins/css/tabs.css ***!
  \**********************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

var api = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !!../../../../../node_modules/css-loader/dist/cjs.js!./tabs.css */ "./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/tabs.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.id, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),

/***/ "./src/wcs/css/apptable.css":
/*!**********************************!*\
  !*** ./src/wcs/css/apptable.css ***!
  \**********************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

var api = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js!./apptable.css */ "./node_modules/css-loader/dist/cjs.js!./src/wcs/css/apptable.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.id, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),

/***/ "./src/wcs/css/usertable.css":
/*!***********************************!*\
  !*** ./src/wcs/css/usertable.css ***!
  \***********************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

var api = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js!./usertable.css */ "./node_modules/css-loader/dist/cjs.js!./src/wcs/css/usertable.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.id, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";


var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : 0;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./node_modules/tslib/tslib.es6.js":
/*!*****************************************!*\
  !*** ./node_modules/tslib/tslib.es6.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "__extends": function() { return /* binding */ __extends; },
/* harmony export */   "__assign": function() { return /* binding */ __assign; },
/* harmony export */   "__rest": function() { return /* binding */ __rest; },
/* harmony export */   "__decorate": function() { return /* binding */ __decorate; },
/* harmony export */   "__param": function() { return /* binding */ __param; },
/* harmony export */   "__metadata": function() { return /* binding */ __metadata; },
/* harmony export */   "__awaiter": function() { return /* binding */ __awaiter; },
/* harmony export */   "__generator": function() { return /* binding */ __generator; },
/* harmony export */   "__createBinding": function() { return /* binding */ __createBinding; },
/* harmony export */   "__exportStar": function() { return /* binding */ __exportStar; },
/* harmony export */   "__values": function() { return /* binding */ __values; },
/* harmony export */   "__read": function() { return /* binding */ __read; },
/* harmony export */   "__spread": function() { return /* binding */ __spread; },
/* harmony export */   "__spreadArrays": function() { return /* binding */ __spreadArrays; },
/* harmony export */   "__spreadArray": function() { return /* binding */ __spreadArray; },
/* harmony export */   "__await": function() { return /* binding */ __await; },
/* harmony export */   "__asyncGenerator": function() { return /* binding */ __asyncGenerator; },
/* harmony export */   "__asyncDelegator": function() { return /* binding */ __asyncDelegator; },
/* harmony export */   "__asyncValues": function() { return /* binding */ __asyncValues; },
/* harmony export */   "__makeTemplateObject": function() { return /* binding */ __makeTemplateObject; },
/* harmony export */   "__importStar": function() { return /* binding */ __importStar; },
/* harmony export */   "__importDefault": function() { return /* binding */ __importDefault; },
/* harmony export */   "__classPrivateFieldGet": function() { return /* binding */ __classPrivateFieldGet; },
/* harmony export */   "__classPrivateFieldSet": function() { return /* binding */ __classPrivateFieldSet; },
/* harmony export */   "__classPrivateFieldIn": function() { return /* binding */ __classPrivateFieldIn; }
/* harmony export */ });
/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    if (typeof b !== "function" && b !== null)
        throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    }
    return __assign.apply(this, arguments);
}

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
}

function __metadata(metadataKey, metadataValue) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

var __createBinding = Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
        desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
});

function __exportStar(m, o) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);
}

function __values(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
}

function __read(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
}

/** @deprecated */
function __spread() {
    for (var ar = [], i = 0; i < arguments.length; i++)
        ar = ar.concat(__read(arguments[i]));
    return ar;
}

/** @deprecated */
function __spreadArrays() {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
}

function __spreadArray(to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
}

function __await(v) {
    return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var g = generator.apply(thisArg, _arguments || []), i, q = [];
    return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;
    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }
    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
    function fulfill(value) { resume("next", value); }
    function reject(value) { resume("throw", value); }
    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
    var i, p;
    return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; } : f; }
}

function __asyncValues(o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
}

function __makeTemplateObject(cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};

var __setModuleDefault = Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
};

function __importStar(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
}

function __importDefault(mod) {
    return (mod && mod.__esModule) ? mod : { default: mod };
}

function __classPrivateFieldGet(receiver, state, kind, f) {
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
}

function __classPrivateFieldSet(receiver, state, value, kind, f) {
    if (kind === "m") throw new TypeError("Private method is not writable");
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
}

function __classPrivateFieldIn(state, receiver) {
    if (receiver === null || (typeof receiver !== "object" && typeof receiver !== "function")) throw new TypeError("Cannot use 'in' operator on non-object");
    return typeof state === "function" ? receiver === state : state.has(receiver);
}


/***/ }),

/***/ "./node_modules/underscore/modules/_baseCreate.js":
/*!********************************************************!*\
  !*** ./node_modules/underscore/modules/_baseCreate.js ***!
  \********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ baseCreate; }
/* harmony export */ });
/* harmony import */ var _isObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isObject.js */ "./node_modules/underscore/modules/isObject.js");
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");



// Create a naked function reference for surrogate-prototype-swapping.
function ctor() {
  return function(){};
}

// An internal function for creating a new object that inherits from another.
function baseCreate(prototype) {
  if (!(0,_isObject_js__WEBPACK_IMPORTED_MODULE_0__.default)(prototype)) return {};
  if (_setup_js__WEBPACK_IMPORTED_MODULE_1__.nativeCreate) return (0,_setup_js__WEBPACK_IMPORTED_MODULE_1__.nativeCreate)(prototype);
  var Ctor = ctor();
  Ctor.prototype = prototype;
  var result = new Ctor;
  Ctor.prototype = null;
  return result;
}


/***/ }),

/***/ "./node_modules/underscore/modules/_baseIteratee.js":
/*!**********************************************************!*\
  !*** ./node_modules/underscore/modules/_baseIteratee.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ baseIteratee; }
/* harmony export */ });
/* harmony import */ var _identity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./identity.js */ "./node_modules/underscore/modules/identity.js");
/* harmony import */ var _isFunction_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFunction.js */ "./node_modules/underscore/modules/isFunction.js");
/* harmony import */ var _isObject_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isObject.js */ "./node_modules/underscore/modules/isObject.js");
/* harmony import */ var _isArray_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./isArray.js */ "./node_modules/underscore/modules/isArray.js");
/* harmony import */ var _matcher_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./matcher.js */ "./node_modules/underscore/modules/matcher.js");
/* harmony import */ var _property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./property.js */ "./node_modules/underscore/modules/property.js");
/* harmony import */ var _optimizeCb_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./_optimizeCb.js */ "./node_modules/underscore/modules/_optimizeCb.js");








// An internal function to generate callbacks that can be applied to each
// element in a collection, returning the desired result — either `_.identity`,
// an arbitrary callback, a property matcher, or a property accessor.
function baseIteratee(value, context, argCount) {
  if (value == null) return _identity_js__WEBPACK_IMPORTED_MODULE_0__.default;
  if ((0,_isFunction_js__WEBPACK_IMPORTED_MODULE_1__.default)(value)) return (0,_optimizeCb_js__WEBPACK_IMPORTED_MODULE_6__.default)(value, context, argCount);
  if ((0,_isObject_js__WEBPACK_IMPORTED_MODULE_2__.default)(value) && !(0,_isArray_js__WEBPACK_IMPORTED_MODULE_3__.default)(value)) return (0,_matcher_js__WEBPACK_IMPORTED_MODULE_4__.default)(value);
  return (0,_property_js__WEBPACK_IMPORTED_MODULE_5__.default)(value);
}


/***/ }),

/***/ "./node_modules/underscore/modules/_cb.js":
/*!************************************************!*\
  !*** ./node_modules/underscore/modules/_cb.js ***!
  \************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ cb; }
/* harmony export */ });
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");
/* harmony import */ var _baseIteratee_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_baseIteratee.js */ "./node_modules/underscore/modules/_baseIteratee.js");
/* harmony import */ var _iteratee_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./iteratee.js */ "./node_modules/underscore/modules/iteratee.js");




// The function we call internally to generate a callback. It invokes
// `_.iteratee` if overridden, otherwise `baseIteratee`.
function cb(value, context, argCount) {
  if (_underscore_js__WEBPACK_IMPORTED_MODULE_0__.default.iteratee !== _iteratee_js__WEBPACK_IMPORTED_MODULE_2__.default) return _underscore_js__WEBPACK_IMPORTED_MODULE_0__.default.iteratee(value, context);
  return (0,_baseIteratee_js__WEBPACK_IMPORTED_MODULE_1__.default)(value, context, argCount);
}


/***/ }),

/***/ "./node_modules/underscore/modules/_chainResult.js":
/*!*********************************************************!*\
  !*** ./node_modules/underscore/modules/_chainResult.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ chainResult; }
/* harmony export */ });
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");


// Helper function to continue chaining intermediate results.
function chainResult(instance, obj) {
  return instance._chain ? (0,_underscore_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj).chain() : obj;
}


/***/ }),

/***/ "./node_modules/underscore/modules/_collectNonEnumProps.js":
/*!*****************************************************************!*\
  !*** ./node_modules/underscore/modules/_collectNonEnumProps.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ collectNonEnumProps; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _isFunction_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFunction.js */ "./node_modules/underscore/modules/isFunction.js");
/* harmony import */ var _has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_has.js */ "./node_modules/underscore/modules/_has.js");




// Internal helper to create a simple lookup structure.
// `collectNonEnumProps` used to depend on `_.contains`, but this led to
// circular imports. `emulatedSet` is a one-off solution that only works for
// arrays of strings.
function emulatedSet(keys) {
  var hash = {};
  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;
  return {
    contains: function(key) { return hash[key] === true; },
    push: function(key) {
      hash[key] = true;
      return keys.push(key);
    }
  };
}

// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't
// be iterated by `for key in ...` and thus missed. Extends `keys` in place if
// needed.
function collectNonEnumProps(obj, keys) {
  keys = emulatedSet(keys);
  var nonEnumIdx = _setup_js__WEBPACK_IMPORTED_MODULE_0__.nonEnumerableProps.length;
  var constructor = obj.constructor;
  var proto = ((0,_isFunction_js__WEBPACK_IMPORTED_MODULE_1__.default)(constructor) && constructor.prototype) || _setup_js__WEBPACK_IMPORTED_MODULE_0__.ObjProto;

  // Constructor is a special case.
  var prop = 'constructor';
  if ((0,_has_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj, prop) && !keys.contains(prop)) keys.push(prop);

  while (nonEnumIdx--) {
    prop = _setup_js__WEBPACK_IMPORTED_MODULE_0__.nonEnumerableProps[nonEnumIdx];
    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {
      keys.push(prop);
    }
  }
}


/***/ }),

/***/ "./node_modules/underscore/modules/_createAssigner.js":
/*!************************************************************!*\
  !*** ./node_modules/underscore/modules/_createAssigner.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ createAssigner; }
/* harmony export */ });
// An internal function for creating assigner functions.
function createAssigner(keysFunc, defaults) {
  return function(obj) {
    var length = arguments.length;
    if (defaults) obj = Object(obj);
    if (length < 2 || obj == null) return obj;
    for (var index = 1; index < length; index++) {
      var source = arguments[index],
          keys = keysFunc(source),
          l = keys.length;
      for (var i = 0; i < l; i++) {
        var key = keys[i];
        if (!defaults || obj[key] === void 0) obj[key] = source[key];
      }
    }
    return obj;
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/_createEscaper.js":
/*!***********************************************************!*\
  !*** ./node_modules/underscore/modules/_createEscaper.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ createEscaper; }
/* harmony export */ });
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");


// Internal helper to generate functions for escaping and unescaping strings
// to/from HTML interpolation.
function createEscaper(map) {
  var escaper = function(match) {
    return map[match];
  };
  // Regexes for identifying a key that needs to be escaped.
  var source = '(?:' + (0,_keys_js__WEBPACK_IMPORTED_MODULE_0__.default)(map).join('|') + ')';
  var testRegexp = RegExp(source);
  var replaceRegexp = RegExp(source, 'g');
  return function(string) {
    string = string == null ? '' : '' + string;
    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/_createIndexFinder.js":
/*!***************************************************************!*\
  !*** ./node_modules/underscore/modules/_createIndexFinder.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ createIndexFinder; }
/* harmony export */ });
/* harmony import */ var _getLength_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_getLength.js */ "./node_modules/underscore/modules/_getLength.js");
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _isNaN_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isNaN.js */ "./node_modules/underscore/modules/isNaN.js");




// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.
function createIndexFinder(dir, predicateFind, sortedIndex) {
  return function(array, item, idx) {
    var i = 0, length = (0,_getLength_js__WEBPACK_IMPORTED_MODULE_0__.default)(array);
    if (typeof idx == 'number') {
      if (dir > 0) {
        i = idx >= 0 ? idx : Math.max(idx + length, i);
      } else {
        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;
      }
    } else if (sortedIndex && idx && length) {
      idx = sortedIndex(array, item);
      return array[idx] === item ? idx : -1;
    }
    if (item !== item) {
      idx = predicateFind(_setup_js__WEBPACK_IMPORTED_MODULE_1__.slice.call(array, i, length), _isNaN_js__WEBPACK_IMPORTED_MODULE_2__.default);
      return idx >= 0 ? idx + i : -1;
    }
    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {
      if (array[idx] === item) return idx;
    }
    return -1;
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/_createPredicateIndexFinder.js":
/*!************************************************************************!*\
  !*** ./node_modules/underscore/modules/_createPredicateIndexFinder.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ createPredicateIndexFinder; }
/* harmony export */ });
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _getLength_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_getLength.js */ "./node_modules/underscore/modules/_getLength.js");



// Internal function to generate `_.findIndex` and `_.findLastIndex`.
function createPredicateIndexFinder(dir) {
  return function(array, predicate, context) {
    predicate = (0,_cb_js__WEBPACK_IMPORTED_MODULE_0__.default)(predicate, context);
    var length = (0,_getLength_js__WEBPACK_IMPORTED_MODULE_1__.default)(array);
    var index = dir > 0 ? 0 : length - 1;
    for (; index >= 0 && index < length; index += dir) {
      if (predicate(array[index], index, array)) return index;
    }
    return -1;
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/_createReduce.js":
/*!**********************************************************!*\
  !*** ./node_modules/underscore/modules/_createReduce.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ createReduce; }
/* harmony export */ });
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");
/* harmony import */ var _optimizeCb_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_optimizeCb.js */ "./node_modules/underscore/modules/_optimizeCb.js");




// Internal helper to create a reducing function, iterating left or right.
function createReduce(dir) {
  // Wrap code that reassigns argument variables in a separate function than
  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)
  var reducer = function(obj, iteratee, memo, initial) {
    var _keys = !(0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj) && (0,_keys_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj),
        length = (_keys || obj).length,
        index = dir > 0 ? 0 : length - 1;
    if (!initial) {
      memo = obj[_keys ? _keys[index] : index];
      index += dir;
    }
    for (; index >= 0 && index < length; index += dir) {
      var currentKey = _keys ? _keys[index] : index;
      memo = iteratee(memo, obj[currentKey], currentKey, obj);
    }
    return memo;
  };

  return function(obj, iteratee, memo, context) {
    var initial = arguments.length >= 3;
    return reducer(obj, (0,_optimizeCb_js__WEBPACK_IMPORTED_MODULE_2__.default)(iteratee, context, 4), memo, initial);
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/_createSizePropertyCheck.js":
/*!*********************************************************************!*\
  !*** ./node_modules/underscore/modules/_createSizePropertyCheck.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ createSizePropertyCheck; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");


// Common internal logic for `isArrayLike` and `isBufferLike`.
function createSizePropertyCheck(getSizeProperty) {
  return function(collection) {
    var sizeProperty = getSizeProperty(collection);
    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= _setup_js__WEBPACK_IMPORTED_MODULE_0__.MAX_ARRAY_INDEX;
  }
}


/***/ }),

/***/ "./node_modules/underscore/modules/_deepGet.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/_deepGet.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ deepGet; }
/* harmony export */ });
// Internal function to obtain a nested property in `obj` along `path`.
function deepGet(obj, path) {
  var length = path.length;
  for (var i = 0; i < length; i++) {
    if (obj == null) return void 0;
    obj = obj[path[i]];
  }
  return length ? obj : void 0;
}


/***/ }),

/***/ "./node_modules/underscore/modules/_escapeMap.js":
/*!*******************************************************!*\
  !*** ./node_modules/underscore/modules/_escapeMap.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
// Internal list of HTML entities for escaping.
/* harmony default export */ __webpack_exports__["default"] = ({
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#x27;',
  '`': '&#x60;'
});


/***/ }),

/***/ "./node_modules/underscore/modules/_executeBound.js":
/*!**********************************************************!*\
  !*** ./node_modules/underscore/modules/_executeBound.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ executeBound; }
/* harmony export */ });
/* harmony import */ var _baseCreate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_baseCreate.js */ "./node_modules/underscore/modules/_baseCreate.js");
/* harmony import */ var _isObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isObject.js */ "./node_modules/underscore/modules/isObject.js");



// Internal function to execute `sourceFunc` bound to `context` with optional
// `args`. Determines whether to execute a function as a constructor or as a
// normal function.
function executeBound(sourceFunc, boundFunc, context, callingContext, args) {
  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);
  var self = (0,_baseCreate_js__WEBPACK_IMPORTED_MODULE_0__.default)(sourceFunc.prototype);
  var result = sourceFunc.apply(self, args);
  if ((0,_isObject_js__WEBPACK_IMPORTED_MODULE_1__.default)(result)) return result;
  return self;
}


/***/ }),

/***/ "./node_modules/underscore/modules/_flatten.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/_flatten.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ flatten; }
/* harmony export */ });
/* harmony import */ var _getLength_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_getLength.js */ "./node_modules/underscore/modules/_getLength.js");
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _isArray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isArray.js */ "./node_modules/underscore/modules/isArray.js");
/* harmony import */ var _isArguments_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./isArguments.js */ "./node_modules/underscore/modules/isArguments.js");





// Internal implementation of a recursive `flatten` function.
function flatten(input, depth, strict, output) {
  output = output || [];
  if (!depth && depth !== 0) {
    depth = Infinity;
  } else if (depth <= 0) {
    return output.concat(input);
  }
  var idx = output.length;
  for (var i = 0, length = (0,_getLength_js__WEBPACK_IMPORTED_MODULE_0__.default)(input); i < length; i++) {
    var value = input[i];
    if ((0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_1__.default)(value) && ((0,_isArray_js__WEBPACK_IMPORTED_MODULE_2__.default)(value) || (0,_isArguments_js__WEBPACK_IMPORTED_MODULE_3__.default)(value))) {
      // Flatten current level of array or arguments object.
      if (depth > 1) {
        flatten(value, depth - 1, strict, output);
        idx = output.length;
      } else {
        var j = 0, len = value.length;
        while (j < len) output[idx++] = value[j++];
      }
    } else if (!strict) {
      output[idx++] = value;
    }
  }
  return output;
}


/***/ }),

/***/ "./node_modules/underscore/modules/_getByteLength.js":
/*!***********************************************************!*\
  !*** ./node_modules/underscore/modules/_getByteLength.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _shallowProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_shallowProperty.js */ "./node_modules/underscore/modules/_shallowProperty.js");


// Internal helper to obtain the `byteLength` property of an object.
/* harmony default export */ __webpack_exports__["default"] = ((0,_shallowProperty_js__WEBPACK_IMPORTED_MODULE_0__.default)('byteLength'));


/***/ }),

/***/ "./node_modules/underscore/modules/_getLength.js":
/*!*******************************************************!*\
  !*** ./node_modules/underscore/modules/_getLength.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _shallowProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_shallowProperty.js */ "./node_modules/underscore/modules/_shallowProperty.js");


// Internal helper to obtain the `length` property of an object.
/* harmony default export */ __webpack_exports__["default"] = ((0,_shallowProperty_js__WEBPACK_IMPORTED_MODULE_0__.default)('length'));


/***/ }),

/***/ "./node_modules/underscore/modules/_group.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/_group.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ group; }
/* harmony export */ });
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _each_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./each.js */ "./node_modules/underscore/modules/each.js");



// An internal function used for aggregate "group by" operations.
function group(behavior, partition) {
  return function(obj, iteratee, context) {
    var result = partition ? [[], []] : {};
    iteratee = (0,_cb_js__WEBPACK_IMPORTED_MODULE_0__.default)(iteratee, context);
    (0,_each_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj, function(value, index) {
      var key = iteratee(value, index, obj);
      behavior(result, value, key);
    });
    return result;
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/_has.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/_has.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ has; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");


// Internal function to check whether `key` is an own property name of `obj`.
function has(obj, key) {
  return obj != null && _setup_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty.call(obj, key);
}


/***/ }),

/***/ "./node_modules/underscore/modules/_hasObjectTag.js":
/*!**********************************************************!*\
  !*** ./node_modules/underscore/modules/_hasObjectTag.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");


/* harmony default export */ __webpack_exports__["default"] = ((0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('Object'));


/***/ }),

/***/ "./node_modules/underscore/modules/_isArrayLike.js":
/*!*********************************************************!*\
  !*** ./node_modules/underscore/modules/_isArrayLike.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _createSizePropertyCheck_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_createSizePropertyCheck.js */ "./node_modules/underscore/modules/_createSizePropertyCheck.js");
/* harmony import */ var _getLength_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_getLength.js */ "./node_modules/underscore/modules/_getLength.js");



// Internal helper for collection methods to determine whether a collection
// should be iterated as an array or as an object.
// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength
// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094
/* harmony default export */ __webpack_exports__["default"] = ((0,_createSizePropertyCheck_js__WEBPACK_IMPORTED_MODULE_0__.default)(_getLength_js__WEBPACK_IMPORTED_MODULE_1__.default));


/***/ }),

/***/ "./node_modules/underscore/modules/_isBufferLike.js":
/*!**********************************************************!*\
  !*** ./node_modules/underscore/modules/_isBufferLike.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _createSizePropertyCheck_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_createSizePropertyCheck.js */ "./node_modules/underscore/modules/_createSizePropertyCheck.js");
/* harmony import */ var _getByteLength_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_getByteLength.js */ "./node_modules/underscore/modules/_getByteLength.js");



// Internal helper to determine whether we should spend extensive checks against
// `ArrayBuffer` et al.
/* harmony default export */ __webpack_exports__["default"] = ((0,_createSizePropertyCheck_js__WEBPACK_IMPORTED_MODULE_0__.default)(_getByteLength_js__WEBPACK_IMPORTED_MODULE_1__.default));


/***/ }),

/***/ "./node_modules/underscore/modules/_keyInObj.js":
/*!******************************************************!*\
  !*** ./node_modules/underscore/modules/_keyInObj.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ keyInObj; }
/* harmony export */ });
// Internal `_.pick` helper function to determine whether `key` is an enumerable
// property name of `obj`.
function keyInObj(value, key, obj) {
  return key in obj;
}


/***/ }),

/***/ "./node_modules/underscore/modules/_methodFingerprint.js":
/*!***************************************************************!*\
  !*** ./node_modules/underscore/modules/_methodFingerprint.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ie11fingerprint": function() { return /* binding */ ie11fingerprint; },
/* harmony export */   "mapMethods": function() { return /* binding */ mapMethods; },
/* harmony export */   "weakMapMethods": function() { return /* binding */ weakMapMethods; },
/* harmony export */   "setMethods": function() { return /* binding */ setMethods; }
/* harmony export */ });
/* harmony import */ var _getLength_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_getLength.js */ "./node_modules/underscore/modules/_getLength.js");
/* harmony import */ var _isFunction_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFunction.js */ "./node_modules/underscore/modules/isFunction.js");
/* harmony import */ var _allKeys_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./allKeys.js */ "./node_modules/underscore/modules/allKeys.js");




// Since the regular `Object.prototype.toString` type tests don't work for
// some types in IE 11, we use a fingerprinting heuristic instead, based
// on the methods. It's not great, but it's the best we got.
// The fingerprint method lists are defined below.
function ie11fingerprint(methods) {
  var length = (0,_getLength_js__WEBPACK_IMPORTED_MODULE_0__.default)(methods);
  return function(obj) {
    if (obj == null) return false;
    // `Map`, `WeakMap` and `Set` have no enumerable keys.
    var keys = (0,_allKeys_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj);
    if ((0,_getLength_js__WEBPACK_IMPORTED_MODULE_0__.default)(keys)) return false;
    for (var i = 0; i < length; i++) {
      if (!(0,_isFunction_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj[methods[i]])) return false;
    }
    // If we are testing against `WeakMap`, we need to ensure that
    // `obj` doesn't have a `forEach` method in order to distinguish
    // it from a regular `Map`.
    return methods !== weakMapMethods || !(0,_isFunction_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj[forEachName]);
  };
}

// In the interest of compact minification, we write
// each string in the fingerprints only once.
var forEachName = 'forEach',
    hasName = 'has',
    commonInit = ['clear', 'delete'],
    mapTail = ['get', hasName, 'set'];

// `Map`, `WeakMap` and `Set` each have slightly different
// combinations of the above sublists.
var mapMethods = commonInit.concat(forEachName, mapTail),
    weakMapMethods = commonInit.concat(mapTail),
    setMethods = ['add'].concat(commonInit, forEachName, hasName);


/***/ }),

/***/ "./node_modules/underscore/modules/_optimizeCb.js":
/*!********************************************************!*\
  !*** ./node_modules/underscore/modules/_optimizeCb.js ***!
  \********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ optimizeCb; }
/* harmony export */ });
// Internal function that returns an efficient (for current engines) version
// of the passed-in callback, to be repeatedly applied in other Underscore
// functions.
function optimizeCb(func, context, argCount) {
  if (context === void 0) return func;
  switch (argCount == null ? 3 : argCount) {
    case 1: return function(value) {
      return func.call(context, value);
    };
    // The 2-argument case is omitted because we’re not using it.
    case 3: return function(value, index, collection) {
      return func.call(context, value, index, collection);
    };
    case 4: return function(accumulator, value, index, collection) {
      return func.call(context, accumulator, value, index, collection);
    };
  }
  return function() {
    return func.apply(context, arguments);
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/_setup.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/_setup.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VERSION": function() { return /* binding */ VERSION; },
/* harmony export */   "root": function() { return /* binding */ root; },
/* harmony export */   "ArrayProto": function() { return /* binding */ ArrayProto; },
/* harmony export */   "ObjProto": function() { return /* binding */ ObjProto; },
/* harmony export */   "SymbolProto": function() { return /* binding */ SymbolProto; },
/* harmony export */   "push": function() { return /* binding */ push; },
/* harmony export */   "slice": function() { return /* binding */ slice; },
/* harmony export */   "toString": function() { return /* binding */ toString; },
/* harmony export */   "hasOwnProperty": function() { return /* binding */ hasOwnProperty; },
/* harmony export */   "supportsArrayBuffer": function() { return /* binding */ supportsArrayBuffer; },
/* harmony export */   "supportsDataView": function() { return /* binding */ supportsDataView; },
/* harmony export */   "nativeIsArray": function() { return /* binding */ nativeIsArray; },
/* harmony export */   "nativeKeys": function() { return /* binding */ nativeKeys; },
/* harmony export */   "nativeCreate": function() { return /* binding */ nativeCreate; },
/* harmony export */   "nativeIsView": function() { return /* binding */ nativeIsView; },
/* harmony export */   "_isNaN": function() { return /* binding */ _isNaN; },
/* harmony export */   "_isFinite": function() { return /* binding */ _isFinite; },
/* harmony export */   "hasEnumBug": function() { return /* binding */ hasEnumBug; },
/* harmony export */   "nonEnumerableProps": function() { return /* binding */ nonEnumerableProps; },
/* harmony export */   "MAX_ARRAY_INDEX": function() { return /* binding */ MAX_ARRAY_INDEX; }
/* harmony export */ });
// Current version.
var VERSION = '1.13.3';

// Establish the root object, `window` (`self`) in the browser, `global`
// on the server, or `this` in some virtual machines. We use `self`
// instead of `window` for `WebWorker` support.
var root = (typeof self == 'object' && self.self === self && self) ||
          (typeof global == 'object' && global.global === global && global) ||
          Function('return this')() ||
          {};

// Save bytes in the minified (but not gzipped) version:
var ArrayProto = Array.prototype, ObjProto = Object.prototype;
var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;

// Create quick reference variables for speed access to core prototypes.
var push = ArrayProto.push,
    slice = ArrayProto.slice,
    toString = ObjProto.toString,
    hasOwnProperty = ObjProto.hasOwnProperty;

// Modern feature detection.
var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',
    supportsDataView = typeof DataView !== 'undefined';

// All **ECMAScript 5+** native function implementations that we hope to use
// are declared here.
var nativeIsArray = Array.isArray,
    nativeKeys = Object.keys,
    nativeCreate = Object.create,
    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;

// Create references to these builtin functions because we override them.
var _isNaN = isNaN,
    _isFinite = isFinite;

// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.
var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');
var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',
  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];

// The largest integer that can be represented exactly.
var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;


/***/ }),

/***/ "./node_modules/underscore/modules/_shallowProperty.js":
/*!*************************************************************!*\
  !*** ./node_modules/underscore/modules/_shallowProperty.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ shallowProperty; }
/* harmony export */ });
// Internal helper to generate a function to obtain property `key` from `obj`.
function shallowProperty(key) {
  return function(obj) {
    return obj == null ? void 0 : obj[key];
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/_stringTagBug.js":
/*!**********************************************************!*\
  !*** ./node_modules/underscore/modules/_stringTagBug.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "hasStringTagBug": function() { return /* binding */ hasStringTagBug; },
/* harmony export */   "isIE11": function() { return /* binding */ isIE11; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _hasObjectTag_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_hasObjectTag.js */ "./node_modules/underscore/modules/_hasObjectTag.js");



// In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.
// In IE 11, the most common among them, this problem also applies to
// `Map`, `WeakMap` and `Set`.
var hasStringTagBug = (
      _setup_js__WEBPACK_IMPORTED_MODULE_0__.supportsDataView && (0,_hasObjectTag_js__WEBPACK_IMPORTED_MODULE_1__.default)(new DataView(new ArrayBuffer(8)))
    ),
    isIE11 = (typeof Map !== 'undefined' && (0,_hasObjectTag_js__WEBPACK_IMPORTED_MODULE_1__.default)(new Map));


/***/ }),

/***/ "./node_modules/underscore/modules/_tagTester.js":
/*!*******************************************************!*\
  !*** ./node_modules/underscore/modules/_tagTester.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ tagTester; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");


// Internal function for creating a `toString`-based type tester.
function tagTester(name) {
  var tag = '[object ' + name + ']';
  return function(obj) {
    return _setup_js__WEBPACK_IMPORTED_MODULE_0__.toString.call(obj) === tag;
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/_toBufferView.js":
/*!**********************************************************!*\
  !*** ./node_modules/underscore/modules/_toBufferView.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ toBufferView; }
/* harmony export */ });
/* harmony import */ var _getByteLength_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_getByteLength.js */ "./node_modules/underscore/modules/_getByteLength.js");


// Internal function to wrap or shallow-copy an ArrayBuffer,
// typed array or DataView to a new view, reusing the buffer.
function toBufferView(bufferSource) {
  return new Uint8Array(
    bufferSource.buffer || bufferSource,
    bufferSource.byteOffset || 0,
    (0,_getByteLength_js__WEBPACK_IMPORTED_MODULE_0__.default)(bufferSource)
  );
}


/***/ }),

/***/ "./node_modules/underscore/modules/_toPath.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/_toPath.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ toPath; }
/* harmony export */ });
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");
/* harmony import */ var _toPath_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toPath.js */ "./node_modules/underscore/modules/toPath.js");



// Internal wrapper for `_.toPath` to enable minification.
// Similar to `cb` for `_.iteratee`.
function toPath(path) {
  return _underscore_js__WEBPACK_IMPORTED_MODULE_0__.default.toPath(path);
}


/***/ }),

/***/ "./node_modules/underscore/modules/_unescapeMap.js":
/*!*********************************************************!*\
  !*** ./node_modules/underscore/modules/_unescapeMap.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _invert_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./invert.js */ "./node_modules/underscore/modules/invert.js");
/* harmony import */ var _escapeMap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_escapeMap.js */ "./node_modules/underscore/modules/_escapeMap.js");



// Internal list of HTML entities for unescaping.
/* harmony default export */ __webpack_exports__["default"] = ((0,_invert_js__WEBPACK_IMPORTED_MODULE_0__.default)(_escapeMap_js__WEBPACK_IMPORTED_MODULE_1__.default));


/***/ }),

/***/ "./node_modules/underscore/modules/after.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/after.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ after; }
/* harmony export */ });
// Returns a function that will only be executed on and after the Nth call.
function after(times, func) {
  return function() {
    if (--times < 1) {
      return func.apply(this, arguments);
    }
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/allKeys.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/allKeys.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ allKeys; }
/* harmony export */ });
/* harmony import */ var _isObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isObject.js */ "./node_modules/underscore/modules/isObject.js");
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _collectNonEnumProps_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_collectNonEnumProps.js */ "./node_modules/underscore/modules/_collectNonEnumProps.js");




// Retrieve all the enumerable property names of an object.
function allKeys(obj) {
  if (!(0,_isObject_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj)) return [];
  var keys = [];
  for (var key in obj) keys.push(key);
  // Ahem, IE < 9.
  if (_setup_js__WEBPACK_IMPORTED_MODULE_1__.hasEnumBug) (0,_collectNonEnumProps_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj, keys);
  return keys;
}


/***/ }),

/***/ "./node_modules/underscore/modules/before.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/before.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ before; }
/* harmony export */ });
// Returns a function that will only be executed up to (but not including) the
// Nth call.
function before(times, func) {
  var memo;
  return function() {
    if (--times > 0) {
      memo = func.apply(this, arguments);
    }
    if (times <= 1) func = null;
    return memo;
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/bind.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/bind.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");
/* harmony import */ var _isFunction_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFunction.js */ "./node_modules/underscore/modules/isFunction.js");
/* harmony import */ var _executeBound_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_executeBound.js */ "./node_modules/underscore/modules/_executeBound.js");




// Create a function bound to a given object (assigning `this`, and arguments,
// optionally).
/* harmony default export */ __webpack_exports__["default"] = ((0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(func, context, args) {
  if (!(0,_isFunction_js__WEBPACK_IMPORTED_MODULE_1__.default)(func)) throw new TypeError('Bind must be called on a function');
  var bound = (0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(callArgs) {
    return (0,_executeBound_js__WEBPACK_IMPORTED_MODULE_2__.default)(func, bound, context, this, args.concat(callArgs));
  });
  return bound;
}));


/***/ }),

/***/ "./node_modules/underscore/modules/bindAll.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/bindAll.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");
/* harmony import */ var _flatten_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_flatten.js */ "./node_modules/underscore/modules/_flatten.js");
/* harmony import */ var _bind_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bind.js */ "./node_modules/underscore/modules/bind.js");




// Bind a number of an object's methods to that object. Remaining arguments
// are the method names to be bound. Useful for ensuring that all callbacks
// defined on an object belong to it.
/* harmony default export */ __webpack_exports__["default"] = ((0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(obj, keys) {
  keys = (0,_flatten_js__WEBPACK_IMPORTED_MODULE_1__.default)(keys, false, false);
  var index = keys.length;
  if (index < 1) throw new Error('bindAll must be passed function names');
  while (index--) {
    var key = keys[index];
    obj[key] = (0,_bind_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj[key], obj);
  }
  return obj;
}));


/***/ }),

/***/ "./node_modules/underscore/modules/chain.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/chain.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ chain; }
/* harmony export */ });
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");


// Start chaining a wrapped Underscore object.
function chain(obj) {
  var instance = (0,_underscore_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj);
  instance._chain = true;
  return instance;
}


/***/ }),

/***/ "./node_modules/underscore/modules/chunk.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/chunk.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ chunk; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");


// Chunk a single array into multiple arrays, each containing `count` or fewer
// items.
function chunk(array, count) {
  if (count == null || count < 1) return [];
  var result = [];
  var i = 0, length = array.length;
  while (i < length) {
    result.push(_setup_js__WEBPACK_IMPORTED_MODULE_0__.slice.call(array, i, i += count));
  }
  return result;
}


/***/ }),

/***/ "./node_modules/underscore/modules/clone.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/clone.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ clone; }
/* harmony export */ });
/* harmony import */ var _isObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isObject.js */ "./node_modules/underscore/modules/isObject.js");
/* harmony import */ var _isArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isArray.js */ "./node_modules/underscore/modules/isArray.js");
/* harmony import */ var _extend_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./extend.js */ "./node_modules/underscore/modules/extend.js");




// Create a (shallow-cloned) duplicate of an object.
function clone(obj) {
  if (!(0,_isObject_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj)) return obj;
  return (0,_isArray_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj) ? obj.slice() : (0,_extend_js__WEBPACK_IMPORTED_MODULE_2__.default)({}, obj);
}


/***/ }),

/***/ "./node_modules/underscore/modules/compact.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/compact.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ compact; }
/* harmony export */ });
/* harmony import */ var _filter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./filter.js */ "./node_modules/underscore/modules/filter.js");


// Trim out all falsy values from an array.
function compact(array) {
  return (0,_filter_js__WEBPACK_IMPORTED_MODULE_0__.default)(array, Boolean);
}


/***/ }),

/***/ "./node_modules/underscore/modules/compose.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/compose.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ compose; }
/* harmony export */ });
// Returns a function that is the composition of a list of functions, each
// consuming the return value of the function that follows.
function compose() {
  var args = arguments;
  var start = args.length - 1;
  return function() {
    var i = start;
    var result = args[start].apply(this, arguments);
    while (i--) result = args[i].call(this, result);
    return result;
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/constant.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/constant.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ constant; }
/* harmony export */ });
// Predicate-generating function. Often useful outside of Underscore.
function constant(value) {
  return function() {
    return value;
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/contains.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/contains.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ contains; }
/* harmony export */ });
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./values.js */ "./node_modules/underscore/modules/values.js");
/* harmony import */ var _indexOf_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./indexOf.js */ "./node_modules/underscore/modules/indexOf.js");




// Determine if the array or object contains a given item (using `===`).
function contains(obj, item, fromIndex, guard) {
  if (!(0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj)) obj = (0,_values_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj);
  if (typeof fromIndex != 'number' || guard) fromIndex = 0;
  return (0,_indexOf_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj, item, fromIndex) >= 0;
}


/***/ }),

/***/ "./node_modules/underscore/modules/countBy.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/countBy.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _group_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_group.js */ "./node_modules/underscore/modules/_group.js");
/* harmony import */ var _has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_has.js */ "./node_modules/underscore/modules/_has.js");



// Counts instances of an object that group by a certain criterion. Pass
// either a string attribute to count by, or a function that returns the
// criterion.
/* harmony default export */ __webpack_exports__["default"] = ((0,_group_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(result, value, key) {
  if ((0,_has_js__WEBPACK_IMPORTED_MODULE_1__.default)(result, key)) result[key]++; else result[key] = 1;
}));


/***/ }),

/***/ "./node_modules/underscore/modules/create.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/create.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ create; }
/* harmony export */ });
/* harmony import */ var _baseCreate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_baseCreate.js */ "./node_modules/underscore/modules/_baseCreate.js");
/* harmony import */ var _extendOwn_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./extendOwn.js */ "./node_modules/underscore/modules/extendOwn.js");



// Creates an object that inherits from the given prototype object.
// If additional properties are provided then they will be added to the
// created object.
function create(prototype, props) {
  var result = (0,_baseCreate_js__WEBPACK_IMPORTED_MODULE_0__.default)(prototype);
  if (props) (0,_extendOwn_js__WEBPACK_IMPORTED_MODULE_1__.default)(result, props);
  return result;
}


/***/ }),

/***/ "./node_modules/underscore/modules/debounce.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/debounce.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ debounce; }
/* harmony export */ });
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");
/* harmony import */ var _now_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./now.js */ "./node_modules/underscore/modules/now.js");



// When a sequence of calls of the returned function ends, the argument
// function is triggered. The end of a sequence is defined by the `wait`
// parameter. If `immediate` is passed, the argument function will be
// triggered at the beginning of the sequence instead of at the end.
function debounce(func, wait, immediate) {
  var timeout, previous, args, result, context;

  var later = function() {
    var passed = (0,_now_js__WEBPACK_IMPORTED_MODULE_1__.default)() - previous;
    if (wait > passed) {
      timeout = setTimeout(later, wait - passed);
    } else {
      timeout = null;
      if (!immediate) result = func.apply(context, args);
      // This check is needed because `func` can recursively invoke `debounced`.
      if (!timeout) args = context = null;
    }
  };

  var debounced = (0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(_args) {
    context = this;
    args = _args;
    previous = (0,_now_js__WEBPACK_IMPORTED_MODULE_1__.default)();
    if (!timeout) {
      timeout = setTimeout(later, wait);
      if (immediate) result = func.apply(context, args);
    }
    return result;
  });

  debounced.cancel = function() {
    clearTimeout(timeout);
    timeout = args = context = null;
  };

  return debounced;
}


/***/ }),

/***/ "./node_modules/underscore/modules/defaults.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/defaults.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _createAssigner_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_createAssigner.js */ "./node_modules/underscore/modules/_createAssigner.js");
/* harmony import */ var _allKeys_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./allKeys.js */ "./node_modules/underscore/modules/allKeys.js");



// Fill in a given object with default properties.
/* harmony default export */ __webpack_exports__["default"] = ((0,_createAssigner_js__WEBPACK_IMPORTED_MODULE_0__.default)(_allKeys_js__WEBPACK_IMPORTED_MODULE_1__.default, true));


/***/ }),

/***/ "./node_modules/underscore/modules/defer.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/defer.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _partial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./partial.js */ "./node_modules/underscore/modules/partial.js");
/* harmony import */ var _delay_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./delay.js */ "./node_modules/underscore/modules/delay.js");
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");




// Defers a function, scheduling it to run after the current call stack has
// cleared.
/* harmony default export */ __webpack_exports__["default"] = ((0,_partial_js__WEBPACK_IMPORTED_MODULE_0__.default)(_delay_js__WEBPACK_IMPORTED_MODULE_1__.default, _underscore_js__WEBPACK_IMPORTED_MODULE_2__.default, 1));


/***/ }),

/***/ "./node_modules/underscore/modules/delay.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/delay.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");


// Delays a function for the given number of milliseconds, and then calls
// it with the arguments supplied.
/* harmony default export */ __webpack_exports__["default"] = ((0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(func, wait, args) {
  return setTimeout(function() {
    return func.apply(null, args);
  }, wait);
}));


/***/ }),

/***/ "./node_modules/underscore/modules/difference.js":
/*!*******************************************************!*\
  !*** ./node_modules/underscore/modules/difference.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");
/* harmony import */ var _flatten_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_flatten.js */ "./node_modules/underscore/modules/_flatten.js");
/* harmony import */ var _filter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./filter.js */ "./node_modules/underscore/modules/filter.js");
/* harmony import */ var _contains_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./contains.js */ "./node_modules/underscore/modules/contains.js");





// Take the difference between one array and a number of other arrays.
// Only the elements present in just the first array will remain.
/* harmony default export */ __webpack_exports__["default"] = ((0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(array, rest) {
  rest = (0,_flatten_js__WEBPACK_IMPORTED_MODULE_1__.default)(rest, true, true);
  return (0,_filter_js__WEBPACK_IMPORTED_MODULE_2__.default)(array, function(value){
    return !(0,_contains_js__WEBPACK_IMPORTED_MODULE_3__.default)(rest, value);
  });
}));


/***/ }),

/***/ "./node_modules/underscore/modules/each.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/each.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ each; }
/* harmony export */ });
/* harmony import */ var _optimizeCb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_optimizeCb.js */ "./node_modules/underscore/modules/_optimizeCb.js");
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");




// The cornerstone for collection functions, an `each`
// implementation, aka `forEach`.
// Handles raw objects in addition to array-likes. Treats all
// sparse array-likes as if they were dense.
function each(obj, iteratee, context) {
  iteratee = (0,_optimizeCb_js__WEBPACK_IMPORTED_MODULE_0__.default)(iteratee, context);
  var i, length;
  if ((0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj)) {
    for (i = 0, length = obj.length; i < length; i++) {
      iteratee(obj[i], i, obj);
    }
  } else {
    var _keys = (0,_keys_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj);
    for (i = 0, length = _keys.length; i < length; i++) {
      iteratee(obj[_keys[i]], _keys[i], obj);
    }
  }
  return obj;
}


/***/ }),

/***/ "./node_modules/underscore/modules/escape.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/escape.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _createEscaper_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_createEscaper.js */ "./node_modules/underscore/modules/_createEscaper.js");
/* harmony import */ var _escapeMap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_escapeMap.js */ "./node_modules/underscore/modules/_escapeMap.js");



// Function for escaping strings to HTML interpolation.
/* harmony default export */ __webpack_exports__["default"] = ((0,_createEscaper_js__WEBPACK_IMPORTED_MODULE_0__.default)(_escapeMap_js__WEBPACK_IMPORTED_MODULE_1__.default));


/***/ }),

/***/ "./node_modules/underscore/modules/every.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/every.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ every; }
/* harmony export */ });
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");




// Determine whether all of the elements pass a truth test.
function every(obj, predicate, context) {
  predicate = (0,_cb_js__WEBPACK_IMPORTED_MODULE_0__.default)(predicate, context);
  var _keys = !(0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj) && (0,_keys_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj),
      length = (_keys || obj).length;
  for (var index = 0; index < length; index++) {
    var currentKey = _keys ? _keys[index] : index;
    if (!predicate(obj[currentKey], currentKey, obj)) return false;
  }
  return true;
}


/***/ }),

/***/ "./node_modules/underscore/modules/extend.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/extend.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _createAssigner_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_createAssigner.js */ "./node_modules/underscore/modules/_createAssigner.js");
/* harmony import */ var _allKeys_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./allKeys.js */ "./node_modules/underscore/modules/allKeys.js");



// Extend a given object with all the properties in passed-in object(s).
/* harmony default export */ __webpack_exports__["default"] = ((0,_createAssigner_js__WEBPACK_IMPORTED_MODULE_0__.default)(_allKeys_js__WEBPACK_IMPORTED_MODULE_1__.default));


/***/ }),

/***/ "./node_modules/underscore/modules/extendOwn.js":
/*!******************************************************!*\
  !*** ./node_modules/underscore/modules/extendOwn.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _createAssigner_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_createAssigner.js */ "./node_modules/underscore/modules/_createAssigner.js");
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");



// Assigns a given object with all the own properties in the passed-in
// object(s).
// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)
/* harmony default export */ __webpack_exports__["default"] = ((0,_createAssigner_js__WEBPACK_IMPORTED_MODULE_0__.default)(_keys_js__WEBPACK_IMPORTED_MODULE_1__.default));


/***/ }),

/***/ "./node_modules/underscore/modules/filter.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/filter.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ filter; }
/* harmony export */ });
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _each_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./each.js */ "./node_modules/underscore/modules/each.js");



// Return all the elements that pass a truth test.
function filter(obj, predicate, context) {
  var results = [];
  predicate = (0,_cb_js__WEBPACK_IMPORTED_MODULE_0__.default)(predicate, context);
  (0,_each_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj, function(value, index, list) {
    if (predicate(value, index, list)) results.push(value);
  });
  return results;
}


/***/ }),

/***/ "./node_modules/underscore/modules/find.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/find.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ find; }
/* harmony export */ });
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _findIndex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./findIndex.js */ "./node_modules/underscore/modules/findIndex.js");
/* harmony import */ var _findKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./findKey.js */ "./node_modules/underscore/modules/findKey.js");




// Return the first value which passes a truth test.
function find(obj, predicate, context) {
  var keyFinder = (0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj) ? _findIndex_js__WEBPACK_IMPORTED_MODULE_1__.default : _findKey_js__WEBPACK_IMPORTED_MODULE_2__.default;
  var key = keyFinder(obj, predicate, context);
  if (key !== void 0 && key !== -1) return obj[key];
}


/***/ }),

/***/ "./node_modules/underscore/modules/findIndex.js":
/*!******************************************************!*\
  !*** ./node_modules/underscore/modules/findIndex.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _createPredicateIndexFinder_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_createPredicateIndexFinder.js */ "./node_modules/underscore/modules/_createPredicateIndexFinder.js");


// Returns the first index on an array-like that passes a truth test.
/* harmony default export */ __webpack_exports__["default"] = ((0,_createPredicateIndexFinder_js__WEBPACK_IMPORTED_MODULE_0__.default)(1));


/***/ }),

/***/ "./node_modules/underscore/modules/findKey.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/findKey.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ findKey; }
/* harmony export */ });
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");



// Returns the first key on an object that passes a truth test.
function findKey(obj, predicate, context) {
  predicate = (0,_cb_js__WEBPACK_IMPORTED_MODULE_0__.default)(predicate, context);
  var _keys = (0,_keys_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj), key;
  for (var i = 0, length = _keys.length; i < length; i++) {
    key = _keys[i];
    if (predicate(obj[key], key, obj)) return key;
  }
}


/***/ }),

/***/ "./node_modules/underscore/modules/findLastIndex.js":
/*!**********************************************************!*\
  !*** ./node_modules/underscore/modules/findLastIndex.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _createPredicateIndexFinder_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_createPredicateIndexFinder.js */ "./node_modules/underscore/modules/_createPredicateIndexFinder.js");


// Returns the last index on an array-like that passes a truth test.
/* harmony default export */ __webpack_exports__["default"] = ((0,_createPredicateIndexFinder_js__WEBPACK_IMPORTED_MODULE_0__.default)(-1));


/***/ }),

/***/ "./node_modules/underscore/modules/findWhere.js":
/*!******************************************************!*\
  !*** ./node_modules/underscore/modules/findWhere.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ findWhere; }
/* harmony export */ });
/* harmony import */ var _find_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./find.js */ "./node_modules/underscore/modules/find.js");
/* harmony import */ var _matcher_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matcher.js */ "./node_modules/underscore/modules/matcher.js");



// Convenience version of a common use case of `_.find`: getting the first
// object containing specific `key:value` pairs.
function findWhere(obj, attrs) {
  return (0,_find_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj, (0,_matcher_js__WEBPACK_IMPORTED_MODULE_1__.default)(attrs));
}


/***/ }),

/***/ "./node_modules/underscore/modules/first.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/first.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ first; }
/* harmony export */ });
/* harmony import */ var _initial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./initial.js */ "./node_modules/underscore/modules/initial.js");


// Get the first element of an array. Passing **n** will return the first N
// values in the array. The **guard** check allows it to work with `_.map`.
function first(array, n, guard) {
  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];
  if (n == null || guard) return array[0];
  return (0,_initial_js__WEBPACK_IMPORTED_MODULE_0__.default)(array, array.length - n);
}


/***/ }),

/***/ "./node_modules/underscore/modules/flatten.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/flatten.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ flatten; }
/* harmony export */ });
/* harmony import */ var _flatten_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_flatten.js */ "./node_modules/underscore/modules/_flatten.js");


// Flatten out an array, either recursively (by default), or up to `depth`.
// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.
function flatten(array, depth) {
  return (0,_flatten_js__WEBPACK_IMPORTED_MODULE_0__.default)(array, depth, false);
}


/***/ }),

/***/ "./node_modules/underscore/modules/functions.js":
/*!******************************************************!*\
  !*** ./node_modules/underscore/modules/functions.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ functions; }
/* harmony export */ });
/* harmony import */ var _isFunction_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isFunction.js */ "./node_modules/underscore/modules/isFunction.js");


// Return a sorted list of the function names available on the object.
function functions(obj) {
  var names = [];
  for (var key in obj) {
    if ((0,_isFunction_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj[key])) names.push(key);
  }
  return names.sort();
}


/***/ }),

/***/ "./node_modules/underscore/modules/get.js":
/*!************************************************!*\
  !*** ./node_modules/underscore/modules/get.js ***!
  \************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ get; }
/* harmony export */ });
/* harmony import */ var _toPath_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_toPath.js */ "./node_modules/underscore/modules/_toPath.js");
/* harmony import */ var _deepGet_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_deepGet.js */ "./node_modules/underscore/modules/_deepGet.js");
/* harmony import */ var _isUndefined_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isUndefined.js */ "./node_modules/underscore/modules/isUndefined.js");




// Get the value of the (deep) property on `path` from `object`.
// If any property in `path` does not exist or if the value is
// `undefined`, return `defaultValue` instead.
// The `path` is normalized through `_.toPath`.
function get(object, path, defaultValue) {
  var value = (0,_deepGet_js__WEBPACK_IMPORTED_MODULE_1__.default)(object, (0,_toPath_js__WEBPACK_IMPORTED_MODULE_0__.default)(path));
  return (0,_isUndefined_js__WEBPACK_IMPORTED_MODULE_2__.default)(value) ? defaultValue : value;
}


/***/ }),

/***/ "./node_modules/underscore/modules/groupBy.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/groupBy.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _group_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_group.js */ "./node_modules/underscore/modules/_group.js");
/* harmony import */ var _has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_has.js */ "./node_modules/underscore/modules/_has.js");



// Groups the object's values by a criterion. Pass either a string attribute
// to group by, or a function that returns the criterion.
/* harmony default export */ __webpack_exports__["default"] = ((0,_group_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(result, value, key) {
  if ((0,_has_js__WEBPACK_IMPORTED_MODULE_1__.default)(result, key)) result[key].push(value); else result[key] = [value];
}));


/***/ }),

/***/ "./node_modules/underscore/modules/has.js":
/*!************************************************!*\
  !*** ./node_modules/underscore/modules/has.js ***!
  \************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ has; }
/* harmony export */ });
/* harmony import */ var _has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_has.js */ "./node_modules/underscore/modules/_has.js");
/* harmony import */ var _toPath_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_toPath.js */ "./node_modules/underscore/modules/_toPath.js");



// Shortcut function for checking if an object has a given property directly on
// itself (in other words, not on a prototype). Unlike the internal `has`
// function, this public version can also traverse nested properties.
function has(obj, path) {
  path = (0,_toPath_js__WEBPACK_IMPORTED_MODULE_1__.default)(path);
  var length = path.length;
  for (var i = 0; i < length; i++) {
    var key = path[i];
    if (!(0,_has_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj, key)) return false;
    obj = obj[key];
  }
  return !!length;
}


/***/ }),

/***/ "./node_modules/underscore/modules/identity.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/identity.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ identity; }
/* harmony export */ });
// Keep the identity function around for default iteratees.
function identity(value) {
  return value;
}


/***/ }),

/***/ "./node_modules/underscore/modules/index-all.js":
/*!******************************************************!*\
  !*** ./node_modules/underscore/modules/index-all.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* reexport safe */ _index_default_js__WEBPACK_IMPORTED_MODULE_0__.default; },
/* harmony export */   "VERSION": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.VERSION; },
/* harmony export */   "after": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.after; },
/* harmony export */   "all": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.all; },
/* harmony export */   "allKeys": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.allKeys; },
/* harmony export */   "any": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.any; },
/* harmony export */   "assign": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.assign; },
/* harmony export */   "before": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.before; },
/* harmony export */   "bind": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.bind; },
/* harmony export */   "bindAll": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.bindAll; },
/* harmony export */   "chain": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.chain; },
/* harmony export */   "chunk": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.chunk; },
/* harmony export */   "clone": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.clone; },
/* harmony export */   "collect": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.collect; },
/* harmony export */   "compact": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.compact; },
/* harmony export */   "compose": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.compose; },
/* harmony export */   "constant": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.constant; },
/* harmony export */   "contains": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.contains; },
/* harmony export */   "countBy": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.countBy; },
/* harmony export */   "create": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.create; },
/* harmony export */   "debounce": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.debounce; },
/* harmony export */   "defaults": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.defaults; },
/* harmony export */   "defer": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.defer; },
/* harmony export */   "delay": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.delay; },
/* harmony export */   "detect": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.detect; },
/* harmony export */   "difference": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.difference; },
/* harmony export */   "drop": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.drop; },
/* harmony export */   "each": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.each; },
/* harmony export */   "escape": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.escape; },
/* harmony export */   "every": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.every; },
/* harmony export */   "extend": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.extend; },
/* harmony export */   "extendOwn": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.extendOwn; },
/* harmony export */   "filter": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.filter; },
/* harmony export */   "find": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.find; },
/* harmony export */   "findIndex": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.findIndex; },
/* harmony export */   "findKey": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.findKey; },
/* harmony export */   "findLastIndex": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.findLastIndex; },
/* harmony export */   "findWhere": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.findWhere; },
/* harmony export */   "first": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.first; },
/* harmony export */   "flatten": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.flatten; },
/* harmony export */   "foldl": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.foldl; },
/* harmony export */   "foldr": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.foldr; },
/* harmony export */   "forEach": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.forEach; },
/* harmony export */   "functions": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.functions; },
/* harmony export */   "get": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.get; },
/* harmony export */   "groupBy": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.groupBy; },
/* harmony export */   "has": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.has; },
/* harmony export */   "head": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.head; },
/* harmony export */   "identity": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.identity; },
/* harmony export */   "include": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.include; },
/* harmony export */   "includes": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.includes; },
/* harmony export */   "indexBy": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.indexBy; },
/* harmony export */   "indexOf": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.indexOf; },
/* harmony export */   "initial": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.initial; },
/* harmony export */   "inject": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.inject; },
/* harmony export */   "intersection": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.intersection; },
/* harmony export */   "invert": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.invert; },
/* harmony export */   "invoke": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.invoke; },
/* harmony export */   "isArguments": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isArguments; },
/* harmony export */   "isArray": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isArray; },
/* harmony export */   "isArrayBuffer": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isArrayBuffer; },
/* harmony export */   "isBoolean": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isBoolean; },
/* harmony export */   "isDataView": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isDataView; },
/* harmony export */   "isDate": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isDate; },
/* harmony export */   "isElement": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isElement; },
/* harmony export */   "isEmpty": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isEmpty; },
/* harmony export */   "isEqual": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isEqual; },
/* harmony export */   "isError": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isError; },
/* harmony export */   "isFinite": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isFinite; },
/* harmony export */   "isFunction": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isFunction; },
/* harmony export */   "isMap": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isMap; },
/* harmony export */   "isMatch": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isMatch; },
/* harmony export */   "isNaN": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isNaN; },
/* harmony export */   "isNull": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isNull; },
/* harmony export */   "isNumber": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isNumber; },
/* harmony export */   "isObject": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isObject; },
/* harmony export */   "isRegExp": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isRegExp; },
/* harmony export */   "isSet": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isSet; },
/* harmony export */   "isString": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isString; },
/* harmony export */   "isSymbol": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isSymbol; },
/* harmony export */   "isTypedArray": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isTypedArray; },
/* harmony export */   "isUndefined": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isUndefined; },
/* harmony export */   "isWeakMap": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isWeakMap; },
/* harmony export */   "isWeakSet": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.isWeakSet; },
/* harmony export */   "iteratee": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.iteratee; },
/* harmony export */   "keys": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.keys; },
/* harmony export */   "last": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.last; },
/* harmony export */   "lastIndexOf": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.lastIndexOf; },
/* harmony export */   "map": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.map; },
/* harmony export */   "mapObject": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.mapObject; },
/* harmony export */   "matcher": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.matcher; },
/* harmony export */   "matches": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.matches; },
/* harmony export */   "max": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.max; },
/* harmony export */   "memoize": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.memoize; },
/* harmony export */   "methods": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.methods; },
/* harmony export */   "min": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.min; },
/* harmony export */   "mixin": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.mixin; },
/* harmony export */   "negate": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.negate; },
/* harmony export */   "noop": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.noop; },
/* harmony export */   "now": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.now; },
/* harmony export */   "object": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.object; },
/* harmony export */   "omit": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.omit; },
/* harmony export */   "once": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.once; },
/* harmony export */   "pairs": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.pairs; },
/* harmony export */   "partial": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.partial; },
/* harmony export */   "partition": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.partition; },
/* harmony export */   "pick": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.pick; },
/* harmony export */   "pluck": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.pluck; },
/* harmony export */   "property": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.property; },
/* harmony export */   "propertyOf": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.propertyOf; },
/* harmony export */   "random": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.random; },
/* harmony export */   "range": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.range; },
/* harmony export */   "reduce": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.reduce; },
/* harmony export */   "reduceRight": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.reduceRight; },
/* harmony export */   "reject": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.reject; },
/* harmony export */   "rest": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.rest; },
/* harmony export */   "restArguments": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.restArguments; },
/* harmony export */   "result": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.result; },
/* harmony export */   "sample": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.sample; },
/* harmony export */   "select": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.select; },
/* harmony export */   "shuffle": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.shuffle; },
/* harmony export */   "size": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.size; },
/* harmony export */   "some": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.some; },
/* harmony export */   "sortBy": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.sortBy; },
/* harmony export */   "sortedIndex": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.sortedIndex; },
/* harmony export */   "tail": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.tail; },
/* harmony export */   "take": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.take; },
/* harmony export */   "tap": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.tap; },
/* harmony export */   "template": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.template; },
/* harmony export */   "templateSettings": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.templateSettings; },
/* harmony export */   "throttle": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.throttle; },
/* harmony export */   "times": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.times; },
/* harmony export */   "toArray": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.toArray; },
/* harmony export */   "toPath": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.toPath; },
/* harmony export */   "transpose": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.transpose; },
/* harmony export */   "unescape": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.unescape; },
/* harmony export */   "union": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.union; },
/* harmony export */   "uniq": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.uniq; },
/* harmony export */   "unique": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.unique; },
/* harmony export */   "uniqueId": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.uniqueId; },
/* harmony export */   "unzip": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.unzip; },
/* harmony export */   "values": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.values; },
/* harmony export */   "where": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.where; },
/* harmony export */   "without": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.without; },
/* harmony export */   "wrap": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.wrap; },
/* harmony export */   "zip": function() { return /* reexport safe */ _index_js__WEBPACK_IMPORTED_MODULE_1__.zip; }
/* harmony export */ });
/* harmony import */ var _index_default_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-default.js */ "./node_modules/underscore/modules/index-default.js");
/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.js */ "./node_modules/underscore/modules/index.js");
// ESM Exports
// ===========
// This module is the package entry point for ES module users. In other words,
// it is the module they are interfacing with when they import from the whole
// package instead of from a submodule, like this:
//
// ```js
// import { map } from 'underscore';
// ```
//
// The difference with `./index-default`, which is the package entry point for
// CommonJS, AMD and UMD users, is purely technical. In ES modules, named and
// default exports are considered to be siblings, so when you have a default
// export, its properties are not automatically available as named exports. For
// this reason, we re-export the named exports in addition to providing the same
// default export as in `./index-default`.




/***/ }),

/***/ "./node_modules/underscore/modules/index-default.js":
/*!**********************************************************!*\
  !*** ./node_modules/underscore/modules/index-default.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.js */ "./node_modules/underscore/modules/index.js");
// Default Export
// ==============
// In this module, we mix our bundled exports into the `_` object and export
// the result. This is analogous to setting `module.exports = _` in CommonJS.
// Hence, this module is also the entry point of our UMD bundle and the package
// entry point for CommonJS and AMD users. In other words, this is (the source
// of) the module you are interfacing with when you do any of the following:
//
// ```js
// // CommonJS
// var _ = require('underscore');
//
// // AMD
// define(['underscore'], function(_) {...});
//
// // UMD in the browser
// // _ is available as a global variable
// ```



// Add all of the Underscore functions to the wrapper object.
var _ = (0,_index_js__WEBPACK_IMPORTED_MODULE_0__.mixin)(_index_js__WEBPACK_IMPORTED_MODULE_0__);
// Legacy Node.js API.
_._ = _;
// Export the Underscore API.
/* harmony default export */ __webpack_exports__["default"] = (_);


/***/ }),

/***/ "./node_modules/underscore/modules/index.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/index.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VERSION": function() { return /* reexport safe */ _setup_js__WEBPACK_IMPORTED_MODULE_0__.VERSION; },
/* harmony export */   "restArguments": function() { return /* reexport safe */ _restArguments_js__WEBPACK_IMPORTED_MODULE_1__.default; },
/* harmony export */   "isObject": function() { return /* reexport safe */ _isObject_js__WEBPACK_IMPORTED_MODULE_2__.default; },
/* harmony export */   "isNull": function() { return /* reexport safe */ _isNull_js__WEBPACK_IMPORTED_MODULE_3__.default; },
/* harmony export */   "isUndefined": function() { return /* reexport safe */ _isUndefined_js__WEBPACK_IMPORTED_MODULE_4__.default; },
/* harmony export */   "isBoolean": function() { return /* reexport safe */ _isBoolean_js__WEBPACK_IMPORTED_MODULE_5__.default; },
/* harmony export */   "isElement": function() { return /* reexport safe */ _isElement_js__WEBPACK_IMPORTED_MODULE_6__.default; },
/* harmony export */   "isString": function() { return /* reexport safe */ _isString_js__WEBPACK_IMPORTED_MODULE_7__.default; },
/* harmony export */   "isNumber": function() { return /* reexport safe */ _isNumber_js__WEBPACK_IMPORTED_MODULE_8__.default; },
/* harmony export */   "isDate": function() { return /* reexport safe */ _isDate_js__WEBPACK_IMPORTED_MODULE_9__.default; },
/* harmony export */   "isRegExp": function() { return /* reexport safe */ _isRegExp_js__WEBPACK_IMPORTED_MODULE_10__.default; },
/* harmony export */   "isError": function() { return /* reexport safe */ _isError_js__WEBPACK_IMPORTED_MODULE_11__.default; },
/* harmony export */   "isSymbol": function() { return /* reexport safe */ _isSymbol_js__WEBPACK_IMPORTED_MODULE_12__.default; },
/* harmony export */   "isArrayBuffer": function() { return /* reexport safe */ _isArrayBuffer_js__WEBPACK_IMPORTED_MODULE_13__.default; },
/* harmony export */   "isDataView": function() { return /* reexport safe */ _isDataView_js__WEBPACK_IMPORTED_MODULE_14__.default; },
/* harmony export */   "isArray": function() { return /* reexport safe */ _isArray_js__WEBPACK_IMPORTED_MODULE_15__.default; },
/* harmony export */   "isFunction": function() { return /* reexport safe */ _isFunction_js__WEBPACK_IMPORTED_MODULE_16__.default; },
/* harmony export */   "isArguments": function() { return /* reexport safe */ _isArguments_js__WEBPACK_IMPORTED_MODULE_17__.default; },
/* harmony export */   "isFinite": function() { return /* reexport safe */ _isFinite_js__WEBPACK_IMPORTED_MODULE_18__.default; },
/* harmony export */   "isNaN": function() { return /* reexport safe */ _isNaN_js__WEBPACK_IMPORTED_MODULE_19__.default; },
/* harmony export */   "isTypedArray": function() { return /* reexport safe */ _isTypedArray_js__WEBPACK_IMPORTED_MODULE_20__.default; },
/* harmony export */   "isEmpty": function() { return /* reexport safe */ _isEmpty_js__WEBPACK_IMPORTED_MODULE_21__.default; },
/* harmony export */   "isMatch": function() { return /* reexport safe */ _isMatch_js__WEBPACK_IMPORTED_MODULE_22__.default; },
/* harmony export */   "isEqual": function() { return /* reexport safe */ _isEqual_js__WEBPACK_IMPORTED_MODULE_23__.default; },
/* harmony export */   "isMap": function() { return /* reexport safe */ _isMap_js__WEBPACK_IMPORTED_MODULE_24__.default; },
/* harmony export */   "isWeakMap": function() { return /* reexport safe */ _isWeakMap_js__WEBPACK_IMPORTED_MODULE_25__.default; },
/* harmony export */   "isSet": function() { return /* reexport safe */ _isSet_js__WEBPACK_IMPORTED_MODULE_26__.default; },
/* harmony export */   "isWeakSet": function() { return /* reexport safe */ _isWeakSet_js__WEBPACK_IMPORTED_MODULE_27__.default; },
/* harmony export */   "keys": function() { return /* reexport safe */ _keys_js__WEBPACK_IMPORTED_MODULE_28__.default; },
/* harmony export */   "allKeys": function() { return /* reexport safe */ _allKeys_js__WEBPACK_IMPORTED_MODULE_29__.default; },
/* harmony export */   "values": function() { return /* reexport safe */ _values_js__WEBPACK_IMPORTED_MODULE_30__.default; },
/* harmony export */   "pairs": function() { return /* reexport safe */ _pairs_js__WEBPACK_IMPORTED_MODULE_31__.default; },
/* harmony export */   "invert": function() { return /* reexport safe */ _invert_js__WEBPACK_IMPORTED_MODULE_32__.default; },
/* harmony export */   "functions": function() { return /* reexport safe */ _functions_js__WEBPACK_IMPORTED_MODULE_33__.default; },
/* harmony export */   "methods": function() { return /* reexport safe */ _functions_js__WEBPACK_IMPORTED_MODULE_33__.default; },
/* harmony export */   "extend": function() { return /* reexport safe */ _extend_js__WEBPACK_IMPORTED_MODULE_34__.default; },
/* harmony export */   "extendOwn": function() { return /* reexport safe */ _extendOwn_js__WEBPACK_IMPORTED_MODULE_35__.default; },
/* harmony export */   "assign": function() { return /* reexport safe */ _extendOwn_js__WEBPACK_IMPORTED_MODULE_35__.default; },
/* harmony export */   "defaults": function() { return /* reexport safe */ _defaults_js__WEBPACK_IMPORTED_MODULE_36__.default; },
/* harmony export */   "create": function() { return /* reexport safe */ _create_js__WEBPACK_IMPORTED_MODULE_37__.default; },
/* harmony export */   "clone": function() { return /* reexport safe */ _clone_js__WEBPACK_IMPORTED_MODULE_38__.default; },
/* harmony export */   "tap": function() { return /* reexport safe */ _tap_js__WEBPACK_IMPORTED_MODULE_39__.default; },
/* harmony export */   "get": function() { return /* reexport safe */ _get_js__WEBPACK_IMPORTED_MODULE_40__.default; },
/* harmony export */   "has": function() { return /* reexport safe */ _has_js__WEBPACK_IMPORTED_MODULE_41__.default; },
/* harmony export */   "mapObject": function() { return /* reexport safe */ _mapObject_js__WEBPACK_IMPORTED_MODULE_42__.default; },
/* harmony export */   "identity": function() { return /* reexport safe */ _identity_js__WEBPACK_IMPORTED_MODULE_43__.default; },
/* harmony export */   "constant": function() { return /* reexport safe */ _constant_js__WEBPACK_IMPORTED_MODULE_44__.default; },
/* harmony export */   "noop": function() { return /* reexport safe */ _noop_js__WEBPACK_IMPORTED_MODULE_45__.default; },
/* harmony export */   "toPath": function() { return /* reexport safe */ _toPath_js__WEBPACK_IMPORTED_MODULE_46__.default; },
/* harmony export */   "property": function() { return /* reexport safe */ _property_js__WEBPACK_IMPORTED_MODULE_47__.default; },
/* harmony export */   "propertyOf": function() { return /* reexport safe */ _propertyOf_js__WEBPACK_IMPORTED_MODULE_48__.default; },
/* harmony export */   "matcher": function() { return /* reexport safe */ _matcher_js__WEBPACK_IMPORTED_MODULE_49__.default; },
/* harmony export */   "matches": function() { return /* reexport safe */ _matcher_js__WEBPACK_IMPORTED_MODULE_49__.default; },
/* harmony export */   "times": function() { return /* reexport safe */ _times_js__WEBPACK_IMPORTED_MODULE_50__.default; },
/* harmony export */   "random": function() { return /* reexport safe */ _random_js__WEBPACK_IMPORTED_MODULE_51__.default; },
/* harmony export */   "now": function() { return /* reexport safe */ _now_js__WEBPACK_IMPORTED_MODULE_52__.default; },
/* harmony export */   "escape": function() { return /* reexport safe */ _escape_js__WEBPACK_IMPORTED_MODULE_53__.default; },
/* harmony export */   "unescape": function() { return /* reexport safe */ _unescape_js__WEBPACK_IMPORTED_MODULE_54__.default; },
/* harmony export */   "templateSettings": function() { return /* reexport safe */ _templateSettings_js__WEBPACK_IMPORTED_MODULE_55__.default; },
/* harmony export */   "template": function() { return /* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_56__.default; },
/* harmony export */   "result": function() { return /* reexport safe */ _result_js__WEBPACK_IMPORTED_MODULE_57__.default; },
/* harmony export */   "uniqueId": function() { return /* reexport safe */ _uniqueId_js__WEBPACK_IMPORTED_MODULE_58__.default; },
/* harmony export */   "chain": function() { return /* reexport safe */ _chain_js__WEBPACK_IMPORTED_MODULE_59__.default; },
/* harmony export */   "iteratee": function() { return /* reexport safe */ _iteratee_js__WEBPACK_IMPORTED_MODULE_60__.default; },
/* harmony export */   "partial": function() { return /* reexport safe */ _partial_js__WEBPACK_IMPORTED_MODULE_61__.default; },
/* harmony export */   "bind": function() { return /* reexport safe */ _bind_js__WEBPACK_IMPORTED_MODULE_62__.default; },
/* harmony export */   "bindAll": function() { return /* reexport safe */ _bindAll_js__WEBPACK_IMPORTED_MODULE_63__.default; },
/* harmony export */   "memoize": function() { return /* reexport safe */ _memoize_js__WEBPACK_IMPORTED_MODULE_64__.default; },
/* harmony export */   "delay": function() { return /* reexport safe */ _delay_js__WEBPACK_IMPORTED_MODULE_65__.default; },
/* harmony export */   "defer": function() { return /* reexport safe */ _defer_js__WEBPACK_IMPORTED_MODULE_66__.default; },
/* harmony export */   "throttle": function() { return /* reexport safe */ _throttle_js__WEBPACK_IMPORTED_MODULE_67__.default; },
/* harmony export */   "debounce": function() { return /* reexport safe */ _debounce_js__WEBPACK_IMPORTED_MODULE_68__.default; },
/* harmony export */   "wrap": function() { return /* reexport safe */ _wrap_js__WEBPACK_IMPORTED_MODULE_69__.default; },
/* harmony export */   "negate": function() { return /* reexport safe */ _negate_js__WEBPACK_IMPORTED_MODULE_70__.default; },
/* harmony export */   "compose": function() { return /* reexport safe */ _compose_js__WEBPACK_IMPORTED_MODULE_71__.default; },
/* harmony export */   "after": function() { return /* reexport safe */ _after_js__WEBPACK_IMPORTED_MODULE_72__.default; },
/* harmony export */   "before": function() { return /* reexport safe */ _before_js__WEBPACK_IMPORTED_MODULE_73__.default; },
/* harmony export */   "once": function() { return /* reexport safe */ _once_js__WEBPACK_IMPORTED_MODULE_74__.default; },
/* harmony export */   "findKey": function() { return /* reexport safe */ _findKey_js__WEBPACK_IMPORTED_MODULE_75__.default; },
/* harmony export */   "findIndex": function() { return /* reexport safe */ _findIndex_js__WEBPACK_IMPORTED_MODULE_76__.default; },
/* harmony export */   "findLastIndex": function() { return /* reexport safe */ _findLastIndex_js__WEBPACK_IMPORTED_MODULE_77__.default; },
/* harmony export */   "sortedIndex": function() { return /* reexport safe */ _sortedIndex_js__WEBPACK_IMPORTED_MODULE_78__.default; },
/* harmony export */   "indexOf": function() { return /* reexport safe */ _indexOf_js__WEBPACK_IMPORTED_MODULE_79__.default; },
/* harmony export */   "lastIndexOf": function() { return /* reexport safe */ _lastIndexOf_js__WEBPACK_IMPORTED_MODULE_80__.default; },
/* harmony export */   "find": function() { return /* reexport safe */ _find_js__WEBPACK_IMPORTED_MODULE_81__.default; },
/* harmony export */   "detect": function() { return /* reexport safe */ _find_js__WEBPACK_IMPORTED_MODULE_81__.default; },
/* harmony export */   "findWhere": function() { return /* reexport safe */ _findWhere_js__WEBPACK_IMPORTED_MODULE_82__.default; },
/* harmony export */   "each": function() { return /* reexport safe */ _each_js__WEBPACK_IMPORTED_MODULE_83__.default; },
/* harmony export */   "forEach": function() { return /* reexport safe */ _each_js__WEBPACK_IMPORTED_MODULE_83__.default; },
/* harmony export */   "map": function() { return /* reexport safe */ _map_js__WEBPACK_IMPORTED_MODULE_84__.default; },
/* harmony export */   "collect": function() { return /* reexport safe */ _map_js__WEBPACK_IMPORTED_MODULE_84__.default; },
/* harmony export */   "reduce": function() { return /* reexport safe */ _reduce_js__WEBPACK_IMPORTED_MODULE_85__.default; },
/* harmony export */   "foldl": function() { return /* reexport safe */ _reduce_js__WEBPACK_IMPORTED_MODULE_85__.default; },
/* harmony export */   "inject": function() { return /* reexport safe */ _reduce_js__WEBPACK_IMPORTED_MODULE_85__.default; },
/* harmony export */   "reduceRight": function() { return /* reexport safe */ _reduceRight_js__WEBPACK_IMPORTED_MODULE_86__.default; },
/* harmony export */   "foldr": function() { return /* reexport safe */ _reduceRight_js__WEBPACK_IMPORTED_MODULE_86__.default; },
/* harmony export */   "filter": function() { return /* reexport safe */ _filter_js__WEBPACK_IMPORTED_MODULE_87__.default; },
/* harmony export */   "select": function() { return /* reexport safe */ _filter_js__WEBPACK_IMPORTED_MODULE_87__.default; },
/* harmony export */   "reject": function() { return /* reexport safe */ _reject_js__WEBPACK_IMPORTED_MODULE_88__.default; },
/* harmony export */   "every": function() { return /* reexport safe */ _every_js__WEBPACK_IMPORTED_MODULE_89__.default; },
/* harmony export */   "all": function() { return /* reexport safe */ _every_js__WEBPACK_IMPORTED_MODULE_89__.default; },
/* harmony export */   "some": function() { return /* reexport safe */ _some_js__WEBPACK_IMPORTED_MODULE_90__.default; },
/* harmony export */   "any": function() { return /* reexport safe */ _some_js__WEBPACK_IMPORTED_MODULE_90__.default; },
/* harmony export */   "contains": function() { return /* reexport safe */ _contains_js__WEBPACK_IMPORTED_MODULE_91__.default; },
/* harmony export */   "includes": function() { return /* reexport safe */ _contains_js__WEBPACK_IMPORTED_MODULE_91__.default; },
/* harmony export */   "include": function() { return /* reexport safe */ _contains_js__WEBPACK_IMPORTED_MODULE_91__.default; },
/* harmony export */   "invoke": function() { return /* reexport safe */ _invoke_js__WEBPACK_IMPORTED_MODULE_92__.default; },
/* harmony export */   "pluck": function() { return /* reexport safe */ _pluck_js__WEBPACK_IMPORTED_MODULE_93__.default; },
/* harmony export */   "where": function() { return /* reexport safe */ _where_js__WEBPACK_IMPORTED_MODULE_94__.default; },
/* harmony export */   "max": function() { return /* reexport safe */ _max_js__WEBPACK_IMPORTED_MODULE_95__.default; },
/* harmony export */   "min": function() { return /* reexport safe */ _min_js__WEBPACK_IMPORTED_MODULE_96__.default; },
/* harmony export */   "shuffle": function() { return /* reexport safe */ _shuffle_js__WEBPACK_IMPORTED_MODULE_97__.default; },
/* harmony export */   "sample": function() { return /* reexport safe */ _sample_js__WEBPACK_IMPORTED_MODULE_98__.default; },
/* harmony export */   "sortBy": function() { return /* reexport safe */ _sortBy_js__WEBPACK_IMPORTED_MODULE_99__.default; },
/* harmony export */   "groupBy": function() { return /* reexport safe */ _groupBy_js__WEBPACK_IMPORTED_MODULE_100__.default; },
/* harmony export */   "indexBy": function() { return /* reexport safe */ _indexBy_js__WEBPACK_IMPORTED_MODULE_101__.default; },
/* harmony export */   "countBy": function() { return /* reexport safe */ _countBy_js__WEBPACK_IMPORTED_MODULE_102__.default; },
/* harmony export */   "partition": function() { return /* reexport safe */ _partition_js__WEBPACK_IMPORTED_MODULE_103__.default; },
/* harmony export */   "toArray": function() { return /* reexport safe */ _toArray_js__WEBPACK_IMPORTED_MODULE_104__.default; },
/* harmony export */   "size": function() { return /* reexport safe */ _size_js__WEBPACK_IMPORTED_MODULE_105__.default; },
/* harmony export */   "pick": function() { return /* reexport safe */ _pick_js__WEBPACK_IMPORTED_MODULE_106__.default; },
/* harmony export */   "omit": function() { return /* reexport safe */ _omit_js__WEBPACK_IMPORTED_MODULE_107__.default; },
/* harmony export */   "first": function() { return /* reexport safe */ _first_js__WEBPACK_IMPORTED_MODULE_108__.default; },
/* harmony export */   "head": function() { return /* reexport safe */ _first_js__WEBPACK_IMPORTED_MODULE_108__.default; },
/* harmony export */   "take": function() { return /* reexport safe */ _first_js__WEBPACK_IMPORTED_MODULE_108__.default; },
/* harmony export */   "initial": function() { return /* reexport safe */ _initial_js__WEBPACK_IMPORTED_MODULE_109__.default; },
/* harmony export */   "last": function() { return /* reexport safe */ _last_js__WEBPACK_IMPORTED_MODULE_110__.default; },
/* harmony export */   "rest": function() { return /* reexport safe */ _rest_js__WEBPACK_IMPORTED_MODULE_111__.default; },
/* harmony export */   "tail": function() { return /* reexport safe */ _rest_js__WEBPACK_IMPORTED_MODULE_111__.default; },
/* harmony export */   "drop": function() { return /* reexport safe */ _rest_js__WEBPACK_IMPORTED_MODULE_111__.default; },
/* harmony export */   "compact": function() { return /* reexport safe */ _compact_js__WEBPACK_IMPORTED_MODULE_112__.default; },
/* harmony export */   "flatten": function() { return /* reexport safe */ _flatten_js__WEBPACK_IMPORTED_MODULE_113__.default; },
/* harmony export */   "without": function() { return /* reexport safe */ _without_js__WEBPACK_IMPORTED_MODULE_114__.default; },
/* harmony export */   "uniq": function() { return /* reexport safe */ _uniq_js__WEBPACK_IMPORTED_MODULE_115__.default; },
/* harmony export */   "unique": function() { return /* reexport safe */ _uniq_js__WEBPACK_IMPORTED_MODULE_115__.default; },
/* harmony export */   "union": function() { return /* reexport safe */ _union_js__WEBPACK_IMPORTED_MODULE_116__.default; },
/* harmony export */   "intersection": function() { return /* reexport safe */ _intersection_js__WEBPACK_IMPORTED_MODULE_117__.default; },
/* harmony export */   "difference": function() { return /* reexport safe */ _difference_js__WEBPACK_IMPORTED_MODULE_118__.default; },
/* harmony export */   "unzip": function() { return /* reexport safe */ _unzip_js__WEBPACK_IMPORTED_MODULE_119__.default; },
/* harmony export */   "transpose": function() { return /* reexport safe */ _unzip_js__WEBPACK_IMPORTED_MODULE_119__.default; },
/* harmony export */   "zip": function() { return /* reexport safe */ _zip_js__WEBPACK_IMPORTED_MODULE_120__.default; },
/* harmony export */   "object": function() { return /* reexport safe */ _object_js__WEBPACK_IMPORTED_MODULE_121__.default; },
/* harmony export */   "range": function() { return /* reexport safe */ _range_js__WEBPACK_IMPORTED_MODULE_122__.default; },
/* harmony export */   "chunk": function() { return /* reexport safe */ _chunk_js__WEBPACK_IMPORTED_MODULE_123__.default; },
/* harmony export */   "mixin": function() { return /* reexport safe */ _mixin_js__WEBPACK_IMPORTED_MODULE_124__.default; },
/* harmony export */   "default": function() { return /* reexport safe */ _underscore_array_methods_js__WEBPACK_IMPORTED_MODULE_125__.default; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");
/* harmony import */ var _isObject_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isObject.js */ "./node_modules/underscore/modules/isObject.js");
/* harmony import */ var _isNull_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./isNull.js */ "./node_modules/underscore/modules/isNull.js");
/* harmony import */ var _isUndefined_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./isUndefined.js */ "./node_modules/underscore/modules/isUndefined.js");
/* harmony import */ var _isBoolean_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./isBoolean.js */ "./node_modules/underscore/modules/isBoolean.js");
/* harmony import */ var _isElement_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./isElement.js */ "./node_modules/underscore/modules/isElement.js");
/* harmony import */ var _isString_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./isString.js */ "./node_modules/underscore/modules/isString.js");
/* harmony import */ var _isNumber_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./isNumber.js */ "./node_modules/underscore/modules/isNumber.js");
/* harmony import */ var _isDate_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./isDate.js */ "./node_modules/underscore/modules/isDate.js");
/* harmony import */ var _isRegExp_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./isRegExp.js */ "./node_modules/underscore/modules/isRegExp.js");
/* harmony import */ var _isError_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./isError.js */ "./node_modules/underscore/modules/isError.js");
/* harmony import */ var _isSymbol_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./isSymbol.js */ "./node_modules/underscore/modules/isSymbol.js");
/* harmony import */ var _isArrayBuffer_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./isArrayBuffer.js */ "./node_modules/underscore/modules/isArrayBuffer.js");
/* harmony import */ var _isDataView_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./isDataView.js */ "./node_modules/underscore/modules/isDataView.js");
/* harmony import */ var _isArray_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./isArray.js */ "./node_modules/underscore/modules/isArray.js");
/* harmony import */ var _isFunction_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./isFunction.js */ "./node_modules/underscore/modules/isFunction.js");
/* harmony import */ var _isArguments_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./isArguments.js */ "./node_modules/underscore/modules/isArguments.js");
/* harmony import */ var _isFinite_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./isFinite.js */ "./node_modules/underscore/modules/isFinite.js");
/* harmony import */ var _isNaN_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./isNaN.js */ "./node_modules/underscore/modules/isNaN.js");
/* harmony import */ var _isTypedArray_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./isTypedArray.js */ "./node_modules/underscore/modules/isTypedArray.js");
/* harmony import */ var _isEmpty_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./isEmpty.js */ "./node_modules/underscore/modules/isEmpty.js");
/* harmony import */ var _isMatch_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./isMatch.js */ "./node_modules/underscore/modules/isMatch.js");
/* harmony import */ var _isEqual_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./isEqual.js */ "./node_modules/underscore/modules/isEqual.js");
/* harmony import */ var _isMap_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./isMap.js */ "./node_modules/underscore/modules/isMap.js");
/* harmony import */ var _isWeakMap_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./isWeakMap.js */ "./node_modules/underscore/modules/isWeakMap.js");
/* harmony import */ var _isSet_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./isSet.js */ "./node_modules/underscore/modules/isSet.js");
/* harmony import */ var _isWeakSet_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./isWeakSet.js */ "./node_modules/underscore/modules/isWeakSet.js");
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");
/* harmony import */ var _allKeys_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./allKeys.js */ "./node_modules/underscore/modules/allKeys.js");
/* harmony import */ var _values_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./values.js */ "./node_modules/underscore/modules/values.js");
/* harmony import */ var _pairs_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./pairs.js */ "./node_modules/underscore/modules/pairs.js");
/* harmony import */ var _invert_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./invert.js */ "./node_modules/underscore/modules/invert.js");
/* harmony import */ var _functions_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./functions.js */ "./node_modules/underscore/modules/functions.js");
/* harmony import */ var _extend_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./extend.js */ "./node_modules/underscore/modules/extend.js");
/* harmony import */ var _extendOwn_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./extendOwn.js */ "./node_modules/underscore/modules/extendOwn.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./defaults.js */ "./node_modules/underscore/modules/defaults.js");
/* harmony import */ var _create_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./create.js */ "./node_modules/underscore/modules/create.js");
/* harmony import */ var _clone_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./clone.js */ "./node_modules/underscore/modules/clone.js");
/* harmony import */ var _tap_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./tap.js */ "./node_modules/underscore/modules/tap.js");
/* harmony import */ var _get_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./get.js */ "./node_modules/underscore/modules/get.js");
/* harmony import */ var _has_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./has.js */ "./node_modules/underscore/modules/has.js");
/* harmony import */ var _mapObject_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./mapObject.js */ "./node_modules/underscore/modules/mapObject.js");
/* harmony import */ var _identity_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./identity.js */ "./node_modules/underscore/modules/identity.js");
/* harmony import */ var _constant_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./constant.js */ "./node_modules/underscore/modules/constant.js");
/* harmony import */ var _noop_js__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./noop.js */ "./node_modules/underscore/modules/noop.js");
/* harmony import */ var _toPath_js__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./toPath.js */ "./node_modules/underscore/modules/toPath.js");
/* harmony import */ var _property_js__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./property.js */ "./node_modules/underscore/modules/property.js");
/* harmony import */ var _propertyOf_js__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./propertyOf.js */ "./node_modules/underscore/modules/propertyOf.js");
/* harmony import */ var _matcher_js__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./matcher.js */ "./node_modules/underscore/modules/matcher.js");
/* harmony import */ var _times_js__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./times.js */ "./node_modules/underscore/modules/times.js");
/* harmony import */ var _random_js__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./random.js */ "./node_modules/underscore/modules/random.js");
/* harmony import */ var _now_js__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./now.js */ "./node_modules/underscore/modules/now.js");
/* harmony import */ var _escape_js__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./escape.js */ "./node_modules/underscore/modules/escape.js");
/* harmony import */ var _unescape_js__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./unescape.js */ "./node_modules/underscore/modules/unescape.js");
/* harmony import */ var _templateSettings_js__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./templateSettings.js */ "./node_modules/underscore/modules/templateSettings.js");
/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./template.js */ "./node_modules/underscore/modules/template.js");
/* harmony import */ var _result_js__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./result.js */ "./node_modules/underscore/modules/result.js");
/* harmony import */ var _uniqueId_js__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./uniqueId.js */ "./node_modules/underscore/modules/uniqueId.js");
/* harmony import */ var _chain_js__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./chain.js */ "./node_modules/underscore/modules/chain.js");
/* harmony import */ var _iteratee_js__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./iteratee.js */ "./node_modules/underscore/modules/iteratee.js");
/* harmony import */ var _partial_js__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./partial.js */ "./node_modules/underscore/modules/partial.js");
/* harmony import */ var _bind_js__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./bind.js */ "./node_modules/underscore/modules/bind.js");
/* harmony import */ var _bindAll_js__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./bindAll.js */ "./node_modules/underscore/modules/bindAll.js");
/* harmony import */ var _memoize_js__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./memoize.js */ "./node_modules/underscore/modules/memoize.js");
/* harmony import */ var _delay_js__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./delay.js */ "./node_modules/underscore/modules/delay.js");
/* harmony import */ var _defer_js__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./defer.js */ "./node_modules/underscore/modules/defer.js");
/* harmony import */ var _throttle_js__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./throttle.js */ "./node_modules/underscore/modules/throttle.js");
/* harmony import */ var _debounce_js__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./debounce.js */ "./node_modules/underscore/modules/debounce.js");
/* harmony import */ var _wrap_js__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./wrap.js */ "./node_modules/underscore/modules/wrap.js");
/* harmony import */ var _negate_js__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./negate.js */ "./node_modules/underscore/modules/negate.js");
/* harmony import */ var _compose_js__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./compose.js */ "./node_modules/underscore/modules/compose.js");
/* harmony import */ var _after_js__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./after.js */ "./node_modules/underscore/modules/after.js");
/* harmony import */ var _before_js__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./before.js */ "./node_modules/underscore/modules/before.js");
/* harmony import */ var _once_js__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ./once.js */ "./node_modules/underscore/modules/once.js");
/* harmony import */ var _findKey_js__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ./findKey.js */ "./node_modules/underscore/modules/findKey.js");
/* harmony import */ var _findIndex_js__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ./findIndex.js */ "./node_modules/underscore/modules/findIndex.js");
/* harmony import */ var _findLastIndex_js__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ./findLastIndex.js */ "./node_modules/underscore/modules/findLastIndex.js");
/* harmony import */ var _sortedIndex_js__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ./sortedIndex.js */ "./node_modules/underscore/modules/sortedIndex.js");
/* harmony import */ var _indexOf_js__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ./indexOf.js */ "./node_modules/underscore/modules/indexOf.js");
/* harmony import */ var _lastIndexOf_js__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ./lastIndexOf.js */ "./node_modules/underscore/modules/lastIndexOf.js");
/* harmony import */ var _find_js__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ./find.js */ "./node_modules/underscore/modules/find.js");
/* harmony import */ var _findWhere_js__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ./findWhere.js */ "./node_modules/underscore/modules/findWhere.js");
/* harmony import */ var _each_js__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ./each.js */ "./node_modules/underscore/modules/each.js");
/* harmony import */ var _map_js__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ./map.js */ "./node_modules/underscore/modules/map.js");
/* harmony import */ var _reduce_js__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ./reduce.js */ "./node_modules/underscore/modules/reduce.js");
/* harmony import */ var _reduceRight_js__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ./reduceRight.js */ "./node_modules/underscore/modules/reduceRight.js");
/* harmony import */ var _filter_js__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ./filter.js */ "./node_modules/underscore/modules/filter.js");
/* harmony import */ var _reject_js__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! ./reject.js */ "./node_modules/underscore/modules/reject.js");
/* harmony import */ var _every_js__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! ./every.js */ "./node_modules/underscore/modules/every.js");
/* harmony import */ var _some_js__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! ./some.js */ "./node_modules/underscore/modules/some.js");
/* harmony import */ var _contains_js__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! ./contains.js */ "./node_modules/underscore/modules/contains.js");
/* harmony import */ var _invoke_js__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! ./invoke.js */ "./node_modules/underscore/modules/invoke.js");
/* harmony import */ var _pluck_js__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! ./pluck.js */ "./node_modules/underscore/modules/pluck.js");
/* harmony import */ var _where_js__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! ./where.js */ "./node_modules/underscore/modules/where.js");
/* harmony import */ var _max_js__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! ./max.js */ "./node_modules/underscore/modules/max.js");
/* harmony import */ var _min_js__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! ./min.js */ "./node_modules/underscore/modules/min.js");
/* harmony import */ var _shuffle_js__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! ./shuffle.js */ "./node_modules/underscore/modules/shuffle.js");
/* harmony import */ var _sample_js__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! ./sample.js */ "./node_modules/underscore/modules/sample.js");
/* harmony import */ var _sortBy_js__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! ./sortBy.js */ "./node_modules/underscore/modules/sortBy.js");
/* harmony import */ var _groupBy_js__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! ./groupBy.js */ "./node_modules/underscore/modules/groupBy.js");
/* harmony import */ var _indexBy_js__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! ./indexBy.js */ "./node_modules/underscore/modules/indexBy.js");
/* harmony import */ var _countBy_js__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! ./countBy.js */ "./node_modules/underscore/modules/countBy.js");
/* harmony import */ var _partition_js__WEBPACK_IMPORTED_MODULE_103__ = __webpack_require__(/*! ./partition.js */ "./node_modules/underscore/modules/partition.js");
/* harmony import */ var _toArray_js__WEBPACK_IMPORTED_MODULE_104__ = __webpack_require__(/*! ./toArray.js */ "./node_modules/underscore/modules/toArray.js");
/* harmony import */ var _size_js__WEBPACK_IMPORTED_MODULE_105__ = __webpack_require__(/*! ./size.js */ "./node_modules/underscore/modules/size.js");
/* harmony import */ var _pick_js__WEBPACK_IMPORTED_MODULE_106__ = __webpack_require__(/*! ./pick.js */ "./node_modules/underscore/modules/pick.js");
/* harmony import */ var _omit_js__WEBPACK_IMPORTED_MODULE_107__ = __webpack_require__(/*! ./omit.js */ "./node_modules/underscore/modules/omit.js");
/* harmony import */ var _first_js__WEBPACK_IMPORTED_MODULE_108__ = __webpack_require__(/*! ./first.js */ "./node_modules/underscore/modules/first.js");
/* harmony import */ var _initial_js__WEBPACK_IMPORTED_MODULE_109__ = __webpack_require__(/*! ./initial.js */ "./node_modules/underscore/modules/initial.js");
/* harmony import */ var _last_js__WEBPACK_IMPORTED_MODULE_110__ = __webpack_require__(/*! ./last.js */ "./node_modules/underscore/modules/last.js");
/* harmony import */ var _rest_js__WEBPACK_IMPORTED_MODULE_111__ = __webpack_require__(/*! ./rest.js */ "./node_modules/underscore/modules/rest.js");
/* harmony import */ var _compact_js__WEBPACK_IMPORTED_MODULE_112__ = __webpack_require__(/*! ./compact.js */ "./node_modules/underscore/modules/compact.js");
/* harmony import */ var _flatten_js__WEBPACK_IMPORTED_MODULE_113__ = __webpack_require__(/*! ./flatten.js */ "./node_modules/underscore/modules/flatten.js");
/* harmony import */ var _without_js__WEBPACK_IMPORTED_MODULE_114__ = __webpack_require__(/*! ./without.js */ "./node_modules/underscore/modules/without.js");
/* harmony import */ var _uniq_js__WEBPACK_IMPORTED_MODULE_115__ = __webpack_require__(/*! ./uniq.js */ "./node_modules/underscore/modules/uniq.js");
/* harmony import */ var _union_js__WEBPACK_IMPORTED_MODULE_116__ = __webpack_require__(/*! ./union.js */ "./node_modules/underscore/modules/union.js");
/* harmony import */ var _intersection_js__WEBPACK_IMPORTED_MODULE_117__ = __webpack_require__(/*! ./intersection.js */ "./node_modules/underscore/modules/intersection.js");
/* harmony import */ var _difference_js__WEBPACK_IMPORTED_MODULE_118__ = __webpack_require__(/*! ./difference.js */ "./node_modules/underscore/modules/difference.js");
/* harmony import */ var _unzip_js__WEBPACK_IMPORTED_MODULE_119__ = __webpack_require__(/*! ./unzip.js */ "./node_modules/underscore/modules/unzip.js");
/* harmony import */ var _zip_js__WEBPACK_IMPORTED_MODULE_120__ = __webpack_require__(/*! ./zip.js */ "./node_modules/underscore/modules/zip.js");
/* harmony import */ var _object_js__WEBPACK_IMPORTED_MODULE_121__ = __webpack_require__(/*! ./object.js */ "./node_modules/underscore/modules/object.js");
/* harmony import */ var _range_js__WEBPACK_IMPORTED_MODULE_122__ = __webpack_require__(/*! ./range.js */ "./node_modules/underscore/modules/range.js");
/* harmony import */ var _chunk_js__WEBPACK_IMPORTED_MODULE_123__ = __webpack_require__(/*! ./chunk.js */ "./node_modules/underscore/modules/chunk.js");
/* harmony import */ var _mixin_js__WEBPACK_IMPORTED_MODULE_124__ = __webpack_require__(/*! ./mixin.js */ "./node_modules/underscore/modules/mixin.js");
/* harmony import */ var _underscore_array_methods_js__WEBPACK_IMPORTED_MODULE_125__ = __webpack_require__(/*! ./underscore-array-methods.js */ "./node_modules/underscore/modules/underscore-array-methods.js");
// Named Exports
// =============

//     Underscore.js 1.13.3
//     https://underscorejs.org
//     (c) 2009-2022 Jeremy Ashkenas, Julian Gonggrijp, and DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

// Baseline setup.



// Object Functions
// ----------------
// Our most fundamental functions operate on any JavaScript object.
// Most functions in Underscore depend on at least one function in this section.

// A group of functions that check the types of core JavaScript values.
// These are often informally referred to as the "isType" functions.



























// Functions that treat an object as a dictionary of key-value pairs.
















// Utility Functions
// -----------------
// A bit of a grab bag: Predicate-generating functions for use with filters and
// loops, string escaping and templating, create random numbers and unique ids,
// and functions that facilitate Underscore's chaining and iteration conventions.



















// Function (ahem) Functions
// -------------------------
// These functions take a function as an argument and return a new function
// as the result. Also known as higher-order functions.















// Finders
// -------
// Functions that extract (the position of) a single element from an object
// or array based on some criterion.









// Collection Functions
// --------------------
// Functions that work on any collection of elements: either an array, or
// an object of key-value pairs.
























// `_.pick` and `_.omit` are actually object functions, but we put
// them here in order to create a more natural reading order in the
// monolithic build as they depend on `_.contains`.



// Array Functions
// ---------------
// Functions that operate on arrays (and array-likes) only, because they’re
// expressed in terms of operations on an ordered list of values.

















// OOP
// ---
// These modules support the "object-oriented" calling style. See also
// `underscore.js` and `index-default.js`.




/***/ }),

/***/ "./node_modules/underscore/modules/indexBy.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/indexBy.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _group_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_group.js */ "./node_modules/underscore/modules/_group.js");


// Indexes the object's values by a criterion, similar to `_.groupBy`, but for
// when you know that your index values will be unique.
/* harmony default export */ __webpack_exports__["default"] = ((0,_group_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(result, value, key) {
  result[key] = value;
}));


/***/ }),

/***/ "./node_modules/underscore/modules/indexOf.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/indexOf.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _sortedIndex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sortedIndex.js */ "./node_modules/underscore/modules/sortedIndex.js");
/* harmony import */ var _findIndex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./findIndex.js */ "./node_modules/underscore/modules/findIndex.js");
/* harmony import */ var _createIndexFinder_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_createIndexFinder.js */ "./node_modules/underscore/modules/_createIndexFinder.js");




// Return the position of the first occurrence of an item in an array,
// or -1 if the item is not included in the array.
// If the array is large and already in sort order, pass `true`
// for **isSorted** to use binary search.
/* harmony default export */ __webpack_exports__["default"] = ((0,_createIndexFinder_js__WEBPACK_IMPORTED_MODULE_2__.default)(1, _findIndex_js__WEBPACK_IMPORTED_MODULE_1__.default, _sortedIndex_js__WEBPACK_IMPORTED_MODULE_0__.default));


/***/ }),

/***/ "./node_modules/underscore/modules/initial.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/initial.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ initial; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");


// Returns everything but the last entry of the array. Especially useful on
// the arguments object. Passing **n** will return all the values in
// the array, excluding the last N.
function initial(array, n, guard) {
  return _setup_js__WEBPACK_IMPORTED_MODULE_0__.slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));
}


/***/ }),

/***/ "./node_modules/underscore/modules/intersection.js":
/*!*********************************************************!*\
  !*** ./node_modules/underscore/modules/intersection.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ intersection; }
/* harmony export */ });
/* harmony import */ var _getLength_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_getLength.js */ "./node_modules/underscore/modules/_getLength.js");
/* harmony import */ var _contains_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./contains.js */ "./node_modules/underscore/modules/contains.js");



// Produce an array that contains every item shared between all the
// passed-in arrays.
function intersection(array) {
  var result = [];
  var argsLength = arguments.length;
  for (var i = 0, length = (0,_getLength_js__WEBPACK_IMPORTED_MODULE_0__.default)(array); i < length; i++) {
    var item = array[i];
    if ((0,_contains_js__WEBPACK_IMPORTED_MODULE_1__.default)(result, item)) continue;
    var j;
    for (j = 1; j < argsLength; j++) {
      if (!(0,_contains_js__WEBPACK_IMPORTED_MODULE_1__.default)(arguments[j], item)) break;
    }
    if (j === argsLength) result.push(item);
  }
  return result;
}


/***/ }),

/***/ "./node_modules/underscore/modules/invert.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/invert.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ invert; }
/* harmony export */ });
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");


// Invert the keys and values of an object. The values must be serializable.
function invert(obj) {
  var result = {};
  var _keys = (0,_keys_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj);
  for (var i = 0, length = _keys.length; i < length; i++) {
    result[obj[_keys[i]]] = _keys[i];
  }
  return result;
}


/***/ }),

/***/ "./node_modules/underscore/modules/invoke.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/invoke.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");
/* harmony import */ var _isFunction_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFunction.js */ "./node_modules/underscore/modules/isFunction.js");
/* harmony import */ var _map_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map.js */ "./node_modules/underscore/modules/map.js");
/* harmony import */ var _deepGet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./_deepGet.js */ "./node_modules/underscore/modules/_deepGet.js");
/* harmony import */ var _toPath_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./_toPath.js */ "./node_modules/underscore/modules/_toPath.js");






// Invoke a method (with arguments) on every item in a collection.
/* harmony default export */ __webpack_exports__["default"] = ((0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(obj, path, args) {
  var contextPath, func;
  if ((0,_isFunction_js__WEBPACK_IMPORTED_MODULE_1__.default)(path)) {
    func = path;
  } else {
    path = (0,_toPath_js__WEBPACK_IMPORTED_MODULE_4__.default)(path);
    contextPath = path.slice(0, -1);
    path = path[path.length - 1];
  }
  return (0,_map_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj, function(context) {
    var method = func;
    if (!method) {
      if (contextPath && contextPath.length) {
        context = (0,_deepGet_js__WEBPACK_IMPORTED_MODULE_3__.default)(context, contextPath);
      }
      if (context == null) return void 0;
      method = context[path];
    }
    return method == null ? method : method.apply(context, args);
  });
}));


/***/ }),

/***/ "./node_modules/underscore/modules/isArguments.js":
/*!********************************************************!*\
  !*** ./node_modules/underscore/modules/isArguments.js ***!
  \********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");
/* harmony import */ var _has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_has.js */ "./node_modules/underscore/modules/_has.js");



var isArguments = (0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('Arguments');

// Define a fallback version of the method in browsers (ahem, IE < 9), where
// there isn't any inspectable "Arguments" type.
(function() {
  if (!isArguments(arguments)) {
    isArguments = function(obj) {
      return (0,_has_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj, 'callee');
    };
  }
}());

/* harmony default export */ __webpack_exports__["default"] = (isArguments);


/***/ }),

/***/ "./node_modules/underscore/modules/isArray.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/isArray.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");



// Is a given value an array?
// Delegates to ECMA5's native `Array.isArray`.
/* harmony default export */ __webpack_exports__["default"] = (_setup_js__WEBPACK_IMPORTED_MODULE_0__.nativeIsArray || (0,_tagTester_js__WEBPACK_IMPORTED_MODULE_1__.default)('Array'));


/***/ }),

/***/ "./node_modules/underscore/modules/isArrayBuffer.js":
/*!**********************************************************!*\
  !*** ./node_modules/underscore/modules/isArrayBuffer.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");


/* harmony default export */ __webpack_exports__["default"] = ((0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('ArrayBuffer'));


/***/ }),

/***/ "./node_modules/underscore/modules/isBoolean.js":
/*!******************************************************!*\
  !*** ./node_modules/underscore/modules/isBoolean.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ isBoolean; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");


// Is a given value a boolean?
function isBoolean(obj) {
  return obj === true || obj === false || _setup_js__WEBPACK_IMPORTED_MODULE_0__.toString.call(obj) === '[object Boolean]';
}


/***/ }),

/***/ "./node_modules/underscore/modules/isDataView.js":
/*!*******************************************************!*\
  !*** ./node_modules/underscore/modules/isDataView.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");
/* harmony import */ var _isFunction_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFunction.js */ "./node_modules/underscore/modules/isFunction.js");
/* harmony import */ var _isArrayBuffer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isArrayBuffer.js */ "./node_modules/underscore/modules/isArrayBuffer.js");
/* harmony import */ var _stringTagBug_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./_stringTagBug.js */ "./node_modules/underscore/modules/_stringTagBug.js");





var isDataView = (0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('DataView');

// In IE 10 - Edge 13, we need a different heuristic
// to determine whether an object is a `DataView`.
function ie10IsDataView(obj) {
  return obj != null && (0,_isFunction_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj.getInt8) && (0,_isArrayBuffer_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj.buffer);
}

/* harmony default export */ __webpack_exports__["default"] = (_stringTagBug_js__WEBPACK_IMPORTED_MODULE_3__.hasStringTagBug ? ie10IsDataView : isDataView);


/***/ }),

/***/ "./node_modules/underscore/modules/isDate.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/isDate.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");


/* harmony default export */ __webpack_exports__["default"] = ((0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('Date'));


/***/ }),

/***/ "./node_modules/underscore/modules/isElement.js":
/*!******************************************************!*\
  !*** ./node_modules/underscore/modules/isElement.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ isElement; }
/* harmony export */ });
// Is a given value a DOM element?
function isElement(obj) {
  return !!(obj && obj.nodeType === 1);
}


/***/ }),

/***/ "./node_modules/underscore/modules/isEmpty.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/isEmpty.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ isEmpty; }
/* harmony export */ });
/* harmony import */ var _getLength_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_getLength.js */ "./node_modules/underscore/modules/_getLength.js");
/* harmony import */ var _isArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isArray.js */ "./node_modules/underscore/modules/isArray.js");
/* harmony import */ var _isString_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isString.js */ "./node_modules/underscore/modules/isString.js");
/* harmony import */ var _isArguments_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./isArguments.js */ "./node_modules/underscore/modules/isArguments.js");
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");






// Is a given array, string, or object empty?
// An "empty" object has no enumerable own-properties.
function isEmpty(obj) {
  if (obj == null) return true;
  // Skip the more expensive `toString`-based type checks if `obj` has no
  // `.length`.
  var length = (0,_getLength_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj);
  if (typeof length == 'number' && (
    (0,_isArray_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj) || (0,_isString_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj) || (0,_isArguments_js__WEBPACK_IMPORTED_MODULE_3__.default)(obj)
  )) return length === 0;
  return (0,_getLength_js__WEBPACK_IMPORTED_MODULE_0__.default)((0,_keys_js__WEBPACK_IMPORTED_MODULE_4__.default)(obj)) === 0;
}


/***/ }),

/***/ "./node_modules/underscore/modules/isEqual.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/isEqual.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ isEqual; }
/* harmony export */ });
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _getByteLength_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_getByteLength.js */ "./node_modules/underscore/modules/_getByteLength.js");
/* harmony import */ var _isTypedArray_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./isTypedArray.js */ "./node_modules/underscore/modules/isTypedArray.js");
/* harmony import */ var _isFunction_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./isFunction.js */ "./node_modules/underscore/modules/isFunction.js");
/* harmony import */ var _stringTagBug_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./_stringTagBug.js */ "./node_modules/underscore/modules/_stringTagBug.js");
/* harmony import */ var _isDataView_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./isDataView.js */ "./node_modules/underscore/modules/isDataView.js");
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");
/* harmony import */ var _has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./_has.js */ "./node_modules/underscore/modules/_has.js");
/* harmony import */ var _toBufferView_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./_toBufferView.js */ "./node_modules/underscore/modules/_toBufferView.js");











// We use this string twice, so give it a name for minification.
var tagDataView = '[object DataView]';

// Internal recursive comparison function for `_.isEqual`.
function eq(a, b, aStack, bStack) {
  // Identical objects are equal. `0 === -0`, but they aren't identical.
  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).
  if (a === b) return a !== 0 || 1 / a === 1 / b;
  // `null` or `undefined` only equal to itself (strict comparison).
  if (a == null || b == null) return false;
  // `NaN`s are equivalent, but non-reflexive.
  if (a !== a) return b !== b;
  // Exhaust primitive checks
  var type = typeof a;
  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;
  return deepEq(a, b, aStack, bStack);
}

// Internal recursive comparison function for `_.isEqual`.
function deepEq(a, b, aStack, bStack) {
  // Unwrap any wrapped objects.
  if (a instanceof _underscore_js__WEBPACK_IMPORTED_MODULE_0__.default) a = a._wrapped;
  if (b instanceof _underscore_js__WEBPACK_IMPORTED_MODULE_0__.default) b = b._wrapped;
  // Compare `[[Class]]` names.
  var className = _setup_js__WEBPACK_IMPORTED_MODULE_1__.toString.call(a);
  if (className !== _setup_js__WEBPACK_IMPORTED_MODULE_1__.toString.call(b)) return false;
  // Work around a bug in IE 10 - Edge 13.
  if (_stringTagBug_js__WEBPACK_IMPORTED_MODULE_5__.hasStringTagBug && className == '[object Object]' && (0,_isDataView_js__WEBPACK_IMPORTED_MODULE_6__.default)(a)) {
    if (!(0,_isDataView_js__WEBPACK_IMPORTED_MODULE_6__.default)(b)) return false;
    className = tagDataView;
  }
  switch (className) {
    // These types are compared by value.
    case '[object RegExp]':
      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')
    case '[object String]':
      // Primitives and their corresponding object wrappers are equivalent; thus, `"5"` is
      // equivalent to `new String("5")`.
      return '' + a === '' + b;
    case '[object Number]':
      // `NaN`s are equivalent, but non-reflexive.
      // Object(NaN) is equivalent to NaN.
      if (+a !== +a) return +b !== +b;
      // An `egal` comparison is performed for other numeric values.
      return +a === 0 ? 1 / +a === 1 / b : +a === +b;
    case '[object Date]':
    case '[object Boolean]':
      // Coerce dates and booleans to numeric primitive values. Dates are compared by their
      // millisecond representations. Note that invalid dates with millisecond representations
      // of `NaN` are not equivalent.
      return +a === +b;
    case '[object Symbol]':
      return _setup_js__WEBPACK_IMPORTED_MODULE_1__.SymbolProto.valueOf.call(a) === _setup_js__WEBPACK_IMPORTED_MODULE_1__.SymbolProto.valueOf.call(b);
    case '[object ArrayBuffer]':
    case tagDataView:
      // Coerce to typed array so we can fall through.
      return deepEq((0,_toBufferView_js__WEBPACK_IMPORTED_MODULE_9__.default)(a), (0,_toBufferView_js__WEBPACK_IMPORTED_MODULE_9__.default)(b), aStack, bStack);
  }

  var areArrays = className === '[object Array]';
  if (!areArrays && (0,_isTypedArray_js__WEBPACK_IMPORTED_MODULE_3__.default)(a)) {
      var byteLength = (0,_getByteLength_js__WEBPACK_IMPORTED_MODULE_2__.default)(a);
      if (byteLength !== (0,_getByteLength_js__WEBPACK_IMPORTED_MODULE_2__.default)(b)) return false;
      if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;
      areArrays = true;
  }
  if (!areArrays) {
    if (typeof a != 'object' || typeof b != 'object') return false;

    // Objects with different constructors are not equivalent, but `Object`s or `Array`s
    // from different frames are.
    var aCtor = a.constructor, bCtor = b.constructor;
    if (aCtor !== bCtor && !((0,_isFunction_js__WEBPACK_IMPORTED_MODULE_4__.default)(aCtor) && aCtor instanceof aCtor &&
                             (0,_isFunction_js__WEBPACK_IMPORTED_MODULE_4__.default)(bCtor) && bCtor instanceof bCtor)
                        && ('constructor' in a && 'constructor' in b)) {
      return false;
    }
  }
  // Assume equality for cyclic structures. The algorithm for detecting cyclic
  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.

  // Initializing stack of traversed objects.
  // It's done here since we only need them for objects and arrays comparison.
  aStack = aStack || [];
  bStack = bStack || [];
  var length = aStack.length;
  while (length--) {
    // Linear search. Performance is inversely proportional to the number of
    // unique nested structures.
    if (aStack[length] === a) return bStack[length] === b;
  }

  // Add the first object to the stack of traversed objects.
  aStack.push(a);
  bStack.push(b);

  // Recursively compare objects and arrays.
  if (areArrays) {
    // Compare array lengths to determine if a deep comparison is necessary.
    length = a.length;
    if (length !== b.length) return false;
    // Deep compare the contents, ignoring non-numeric properties.
    while (length--) {
      if (!eq(a[length], b[length], aStack, bStack)) return false;
    }
  } else {
    // Deep compare objects.
    var _keys = (0,_keys_js__WEBPACK_IMPORTED_MODULE_7__.default)(a), key;
    length = _keys.length;
    // Ensure that both objects contain the same number of properties before comparing deep equality.
    if ((0,_keys_js__WEBPACK_IMPORTED_MODULE_7__.default)(b).length !== length) return false;
    while (length--) {
      // Deep compare each member
      key = _keys[length];
      if (!((0,_has_js__WEBPACK_IMPORTED_MODULE_8__.default)(b, key) && eq(a[key], b[key], aStack, bStack))) return false;
    }
  }
  // Remove the first object from the stack of traversed objects.
  aStack.pop();
  bStack.pop();
  return true;
}

// Perform a deep comparison to check if two objects are equal.
function isEqual(a, b) {
  return eq(a, b);
}


/***/ }),

/***/ "./node_modules/underscore/modules/isError.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/isError.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");


/* harmony default export */ __webpack_exports__["default"] = ((0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('Error'));


/***/ }),

/***/ "./node_modules/underscore/modules/isFinite.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/isFinite.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ isFinite; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _isSymbol_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isSymbol.js */ "./node_modules/underscore/modules/isSymbol.js");



// Is a given object a finite number?
function isFinite(obj) {
  return !(0,_isSymbol_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj) && (0,_setup_js__WEBPACK_IMPORTED_MODULE_0__._isFinite)(obj) && !isNaN(parseFloat(obj));
}


/***/ }),

/***/ "./node_modules/underscore/modules/isFunction.js":
/*!*******************************************************!*\
  !*** ./node_modules/underscore/modules/isFunction.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");



var isFunction = (0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('Function');

// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old
// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).
var nodelist = _setup_js__WEBPACK_IMPORTED_MODULE_1__.root.document && _setup_js__WEBPACK_IMPORTED_MODULE_1__.root.document.childNodes;
if ( true && typeof Int8Array != 'object' && typeof nodelist != 'function') {
  isFunction = function(obj) {
    return typeof obj == 'function' || false;
  };
}

/* harmony default export */ __webpack_exports__["default"] = (isFunction);


/***/ }),

/***/ "./node_modules/underscore/modules/isMap.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/isMap.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");
/* harmony import */ var _stringTagBug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_stringTagBug.js */ "./node_modules/underscore/modules/_stringTagBug.js");
/* harmony import */ var _methodFingerprint_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_methodFingerprint.js */ "./node_modules/underscore/modules/_methodFingerprint.js");




/* harmony default export */ __webpack_exports__["default"] = (_stringTagBug_js__WEBPACK_IMPORTED_MODULE_1__.isIE11 ? (0,_methodFingerprint_js__WEBPACK_IMPORTED_MODULE_2__.ie11fingerprint)(_methodFingerprint_js__WEBPACK_IMPORTED_MODULE_2__.mapMethods) : (0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('Map'));


/***/ }),

/***/ "./node_modules/underscore/modules/isMatch.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/isMatch.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ isMatch; }
/* harmony export */ });
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");


// Returns whether an object has a given set of `key:value` pairs.
function isMatch(object, attrs) {
  var _keys = (0,_keys_js__WEBPACK_IMPORTED_MODULE_0__.default)(attrs), length = _keys.length;
  if (object == null) return !length;
  var obj = Object(object);
  for (var i = 0; i < length; i++) {
    var key = _keys[i];
    if (attrs[key] !== obj[key] || !(key in obj)) return false;
  }
  return true;
}


/***/ }),

/***/ "./node_modules/underscore/modules/isNaN.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/isNaN.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ isNaN; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _isNumber_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isNumber.js */ "./node_modules/underscore/modules/isNumber.js");



// Is the given value `NaN`?
function isNaN(obj) {
  return (0,_isNumber_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj) && (0,_setup_js__WEBPACK_IMPORTED_MODULE_0__._isNaN)(obj);
}


/***/ }),

/***/ "./node_modules/underscore/modules/isNull.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/isNull.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ isNull; }
/* harmony export */ });
// Is a given value equal to null?
function isNull(obj) {
  return obj === null;
}


/***/ }),

/***/ "./node_modules/underscore/modules/isNumber.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/isNumber.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");


/* harmony default export */ __webpack_exports__["default"] = ((0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('Number'));


/***/ }),

/***/ "./node_modules/underscore/modules/isObject.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/isObject.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ isObject; }
/* harmony export */ });
// Is a given variable an object?
function isObject(obj) {
  var type = typeof obj;
  return type === 'function' || (type === 'object' && !!obj);
}


/***/ }),

/***/ "./node_modules/underscore/modules/isRegExp.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/isRegExp.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");


/* harmony default export */ __webpack_exports__["default"] = ((0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('RegExp'));


/***/ }),

/***/ "./node_modules/underscore/modules/isSet.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/isSet.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");
/* harmony import */ var _stringTagBug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_stringTagBug.js */ "./node_modules/underscore/modules/_stringTagBug.js");
/* harmony import */ var _methodFingerprint_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_methodFingerprint.js */ "./node_modules/underscore/modules/_methodFingerprint.js");




/* harmony default export */ __webpack_exports__["default"] = (_stringTagBug_js__WEBPACK_IMPORTED_MODULE_1__.isIE11 ? (0,_methodFingerprint_js__WEBPACK_IMPORTED_MODULE_2__.ie11fingerprint)(_methodFingerprint_js__WEBPACK_IMPORTED_MODULE_2__.setMethods) : (0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('Set'));


/***/ }),

/***/ "./node_modules/underscore/modules/isString.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/isString.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");


/* harmony default export */ __webpack_exports__["default"] = ((0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('String'));


/***/ }),

/***/ "./node_modules/underscore/modules/isSymbol.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/isSymbol.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");


/* harmony default export */ __webpack_exports__["default"] = ((0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('Symbol'));


/***/ }),

/***/ "./node_modules/underscore/modules/isTypedArray.js":
/*!*********************************************************!*\
  !*** ./node_modules/underscore/modules/isTypedArray.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _isDataView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isDataView.js */ "./node_modules/underscore/modules/isDataView.js");
/* harmony import */ var _constant_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constant.js */ "./node_modules/underscore/modules/constant.js");
/* harmony import */ var _isBufferLike_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./_isBufferLike.js */ "./node_modules/underscore/modules/_isBufferLike.js");





// Is a given value a typed array?
var typedArrayPattern = /\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;
function isTypedArray(obj) {
  // `ArrayBuffer.isView` is the most future-proof, so use it when available.
  // Otherwise, fall back on the above regular expression.
  return _setup_js__WEBPACK_IMPORTED_MODULE_0__.nativeIsView ? ((0,_setup_js__WEBPACK_IMPORTED_MODULE_0__.nativeIsView)(obj) && !(0,_isDataView_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj)) :
                (0,_isBufferLike_js__WEBPACK_IMPORTED_MODULE_3__.default)(obj) && typedArrayPattern.test(_setup_js__WEBPACK_IMPORTED_MODULE_0__.toString.call(obj));
}

/* harmony default export */ __webpack_exports__["default"] = (_setup_js__WEBPACK_IMPORTED_MODULE_0__.supportsArrayBuffer ? isTypedArray : (0,_constant_js__WEBPACK_IMPORTED_MODULE_2__.default)(false));


/***/ }),

/***/ "./node_modules/underscore/modules/isUndefined.js":
/*!********************************************************!*\
  !*** ./node_modules/underscore/modules/isUndefined.js ***!
  \********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ isUndefined; }
/* harmony export */ });
// Is a given variable undefined?
function isUndefined(obj) {
  return obj === void 0;
}


/***/ }),

/***/ "./node_modules/underscore/modules/isWeakMap.js":
/*!******************************************************!*\
  !*** ./node_modules/underscore/modules/isWeakMap.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");
/* harmony import */ var _stringTagBug_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_stringTagBug.js */ "./node_modules/underscore/modules/_stringTagBug.js");
/* harmony import */ var _methodFingerprint_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_methodFingerprint.js */ "./node_modules/underscore/modules/_methodFingerprint.js");




/* harmony default export */ __webpack_exports__["default"] = (_stringTagBug_js__WEBPACK_IMPORTED_MODULE_1__.isIE11 ? (0,_methodFingerprint_js__WEBPACK_IMPORTED_MODULE_2__.ie11fingerprint)(_methodFingerprint_js__WEBPACK_IMPORTED_MODULE_2__.weakMapMethods) : (0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('WeakMap'));


/***/ }),

/***/ "./node_modules/underscore/modules/isWeakSet.js":
/*!******************************************************!*\
  !*** ./node_modules/underscore/modules/isWeakSet.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tagTester_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_tagTester.js */ "./node_modules/underscore/modules/_tagTester.js");


/* harmony default export */ __webpack_exports__["default"] = ((0,_tagTester_js__WEBPACK_IMPORTED_MODULE_0__.default)('WeakSet'));


/***/ }),

/***/ "./node_modules/underscore/modules/iteratee.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/iteratee.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ iteratee; }
/* harmony export */ });
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");
/* harmony import */ var _baseIteratee_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_baseIteratee.js */ "./node_modules/underscore/modules/_baseIteratee.js");



// External wrapper for our callback generator. Users may customize
// `_.iteratee` if they want additional predicate/iteratee shorthand styles.
// This abstraction hides the internal-only `argCount` argument.
function iteratee(value, context) {
  return (0,_baseIteratee_js__WEBPACK_IMPORTED_MODULE_1__.default)(value, context, Infinity);
}
_underscore_js__WEBPACK_IMPORTED_MODULE_0__.default.iteratee = iteratee;


/***/ }),

/***/ "./node_modules/underscore/modules/keys.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/keys.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ keys; }
/* harmony export */ });
/* harmony import */ var _isObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isObject.js */ "./node_modules/underscore/modules/isObject.js");
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_has.js */ "./node_modules/underscore/modules/_has.js");
/* harmony import */ var _collectNonEnumProps_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./_collectNonEnumProps.js */ "./node_modules/underscore/modules/_collectNonEnumProps.js");





// Retrieve the names of an object's own properties.
// Delegates to **ECMAScript 5**'s native `Object.keys`.
function keys(obj) {
  if (!(0,_isObject_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj)) return [];
  if (_setup_js__WEBPACK_IMPORTED_MODULE_1__.nativeKeys) return (0,_setup_js__WEBPACK_IMPORTED_MODULE_1__.nativeKeys)(obj);
  var keys = [];
  for (var key in obj) if ((0,_has_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj, key)) keys.push(key);
  // Ahem, IE < 9.
  if (_setup_js__WEBPACK_IMPORTED_MODULE_1__.hasEnumBug) (0,_collectNonEnumProps_js__WEBPACK_IMPORTED_MODULE_3__.default)(obj, keys);
  return keys;
}


/***/ }),

/***/ "./node_modules/underscore/modules/last.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/last.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ last; }
/* harmony export */ });
/* harmony import */ var _rest_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rest.js */ "./node_modules/underscore/modules/rest.js");


// Get the last element of an array. Passing **n** will return the last N
// values in the array.
function last(array, n, guard) {
  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];
  if (n == null || guard) return array[array.length - 1];
  return (0,_rest_js__WEBPACK_IMPORTED_MODULE_0__.default)(array, Math.max(0, array.length - n));
}


/***/ }),

/***/ "./node_modules/underscore/modules/lastIndexOf.js":
/*!********************************************************!*\
  !*** ./node_modules/underscore/modules/lastIndexOf.js ***!
  \********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _findLastIndex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./findLastIndex.js */ "./node_modules/underscore/modules/findLastIndex.js");
/* harmony import */ var _createIndexFinder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_createIndexFinder.js */ "./node_modules/underscore/modules/_createIndexFinder.js");



// Return the position of the last occurrence of an item in an array,
// or -1 if the item is not included in the array.
/* harmony default export */ __webpack_exports__["default"] = ((0,_createIndexFinder_js__WEBPACK_IMPORTED_MODULE_1__.default)(-1, _findLastIndex_js__WEBPACK_IMPORTED_MODULE_0__.default));


/***/ }),

/***/ "./node_modules/underscore/modules/map.js":
/*!************************************************!*\
  !*** ./node_modules/underscore/modules/map.js ***!
  \************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ map; }
/* harmony export */ });
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");




// Return the results of applying the iteratee to each element.
function map(obj, iteratee, context) {
  iteratee = (0,_cb_js__WEBPACK_IMPORTED_MODULE_0__.default)(iteratee, context);
  var _keys = !(0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj) && (0,_keys_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj),
      length = (_keys || obj).length,
      results = Array(length);
  for (var index = 0; index < length; index++) {
    var currentKey = _keys ? _keys[index] : index;
    results[index] = iteratee(obj[currentKey], currentKey, obj);
  }
  return results;
}


/***/ }),

/***/ "./node_modules/underscore/modules/mapObject.js":
/*!******************************************************!*\
  !*** ./node_modules/underscore/modules/mapObject.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ mapObject; }
/* harmony export */ });
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");



// Returns the results of applying the `iteratee` to each element of `obj`.
// In contrast to `_.map` it returns an object.
function mapObject(obj, iteratee, context) {
  iteratee = (0,_cb_js__WEBPACK_IMPORTED_MODULE_0__.default)(iteratee, context);
  var _keys = (0,_keys_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj),
      length = _keys.length,
      results = {};
  for (var index = 0; index < length; index++) {
    var currentKey = _keys[index];
    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);
  }
  return results;
}


/***/ }),

/***/ "./node_modules/underscore/modules/matcher.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/matcher.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ matcher; }
/* harmony export */ });
/* harmony import */ var _extendOwn_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./extendOwn.js */ "./node_modules/underscore/modules/extendOwn.js");
/* harmony import */ var _isMatch_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isMatch.js */ "./node_modules/underscore/modules/isMatch.js");



// Returns a predicate for checking whether an object has a given set of
// `key:value` pairs.
function matcher(attrs) {
  attrs = (0,_extendOwn_js__WEBPACK_IMPORTED_MODULE_0__.default)({}, attrs);
  return function(obj) {
    return (0,_isMatch_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj, attrs);
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/max.js":
/*!************************************************!*\
  !*** ./node_modules/underscore/modules/max.js ***!
  \************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ max; }
/* harmony export */ });
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./values.js */ "./node_modules/underscore/modules/values.js");
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _each_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./each.js */ "./node_modules/underscore/modules/each.js");





// Return the maximum element (or element-based computation).
function max(obj, iteratee, context) {
  var result = -Infinity, lastComputed = -Infinity,
      value, computed;
  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {
    obj = (0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj) ? obj : (0,_values_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj);
    for (var i = 0, length = obj.length; i < length; i++) {
      value = obj[i];
      if (value != null && value > result) {
        result = value;
      }
    }
  } else {
    iteratee = (0,_cb_js__WEBPACK_IMPORTED_MODULE_2__.default)(iteratee, context);
    (0,_each_js__WEBPACK_IMPORTED_MODULE_3__.default)(obj, function(v, index, list) {
      computed = iteratee(v, index, list);
      if (computed > lastComputed || (computed === -Infinity && result === -Infinity)) {
        result = v;
        lastComputed = computed;
      }
    });
  }
  return result;
}


/***/ }),

/***/ "./node_modules/underscore/modules/memoize.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/memoize.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ memoize; }
/* harmony export */ });
/* harmony import */ var _has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_has.js */ "./node_modules/underscore/modules/_has.js");


// Memoize an expensive function by storing its results.
function memoize(func, hasher) {
  var memoize = function(key) {
    var cache = memoize.cache;
    var address = '' + (hasher ? hasher.apply(this, arguments) : key);
    if (!(0,_has_js__WEBPACK_IMPORTED_MODULE_0__.default)(cache, address)) cache[address] = func.apply(this, arguments);
    return cache[address];
  };
  memoize.cache = {};
  return memoize;
}


/***/ }),

/***/ "./node_modules/underscore/modules/min.js":
/*!************************************************!*\
  !*** ./node_modules/underscore/modules/min.js ***!
  \************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ min; }
/* harmony export */ });
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./values.js */ "./node_modules/underscore/modules/values.js");
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _each_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./each.js */ "./node_modules/underscore/modules/each.js");





// Return the minimum element (or element-based computation).
function min(obj, iteratee, context) {
  var result = Infinity, lastComputed = Infinity,
      value, computed;
  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {
    obj = (0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj) ? obj : (0,_values_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj);
    for (var i = 0, length = obj.length; i < length; i++) {
      value = obj[i];
      if (value != null && value < result) {
        result = value;
      }
    }
  } else {
    iteratee = (0,_cb_js__WEBPACK_IMPORTED_MODULE_2__.default)(iteratee, context);
    (0,_each_js__WEBPACK_IMPORTED_MODULE_3__.default)(obj, function(v, index, list) {
      computed = iteratee(v, index, list);
      if (computed < lastComputed || (computed === Infinity && result === Infinity)) {
        result = v;
        lastComputed = computed;
      }
    });
  }
  return result;
}


/***/ }),

/***/ "./node_modules/underscore/modules/mixin.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/mixin.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ mixin; }
/* harmony export */ });
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");
/* harmony import */ var _each_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./each.js */ "./node_modules/underscore/modules/each.js");
/* harmony import */ var _functions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./functions.js */ "./node_modules/underscore/modules/functions.js");
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _chainResult_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./_chainResult.js */ "./node_modules/underscore/modules/_chainResult.js");






// Add your own custom functions to the Underscore object.
function mixin(obj) {
  (0,_each_js__WEBPACK_IMPORTED_MODULE_1__.default)((0,_functions_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj), function(name) {
    var func = _underscore_js__WEBPACK_IMPORTED_MODULE_0__.default[name] = obj[name];
    _underscore_js__WEBPACK_IMPORTED_MODULE_0__.default.prototype[name] = function() {
      var args = [this._wrapped];
      _setup_js__WEBPACK_IMPORTED_MODULE_3__.push.apply(args, arguments);
      return (0,_chainResult_js__WEBPACK_IMPORTED_MODULE_4__.default)(this, func.apply(_underscore_js__WEBPACK_IMPORTED_MODULE_0__.default, args));
    };
  });
  return _underscore_js__WEBPACK_IMPORTED_MODULE_0__.default;
}


/***/ }),

/***/ "./node_modules/underscore/modules/negate.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/negate.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ negate; }
/* harmony export */ });
// Returns a negated version of the passed-in predicate.
function negate(predicate) {
  return function() {
    return !predicate.apply(this, arguments);
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/noop.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/noop.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ noop; }
/* harmony export */ });
// Predicate-generating function. Often useful outside of Underscore.
function noop(){}


/***/ }),

/***/ "./node_modules/underscore/modules/now.js":
/*!************************************************!*\
  !*** ./node_modules/underscore/modules/now.js ***!
  \************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
// A (possibly faster) way to get the current timestamp as an integer.
/* harmony default export */ __webpack_exports__["default"] = (Date.now || function() {
  return new Date().getTime();
});


/***/ }),

/***/ "./node_modules/underscore/modules/object.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/object.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ object; }
/* harmony export */ });
/* harmony import */ var _getLength_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_getLength.js */ "./node_modules/underscore/modules/_getLength.js");


// Converts lists into objects. Pass either a single array of `[key, value]`
// pairs, or two parallel arrays of the same length -- one of keys, and one of
// the corresponding values. Passing by pairs is the reverse of `_.pairs`.
function object(list, values) {
  var result = {};
  for (var i = 0, length = (0,_getLength_js__WEBPACK_IMPORTED_MODULE_0__.default)(list); i < length; i++) {
    if (values) {
      result[list[i]] = values[i];
    } else {
      result[list[i][0]] = list[i][1];
    }
  }
  return result;
}


/***/ }),

/***/ "./node_modules/underscore/modules/omit.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/omit.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");
/* harmony import */ var _isFunction_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFunction.js */ "./node_modules/underscore/modules/isFunction.js");
/* harmony import */ var _negate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./negate.js */ "./node_modules/underscore/modules/negate.js");
/* harmony import */ var _map_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./map.js */ "./node_modules/underscore/modules/map.js");
/* harmony import */ var _flatten_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./_flatten.js */ "./node_modules/underscore/modules/_flatten.js");
/* harmony import */ var _contains_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./contains.js */ "./node_modules/underscore/modules/contains.js");
/* harmony import */ var _pick_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./pick.js */ "./node_modules/underscore/modules/pick.js");








// Return a copy of the object without the disallowed properties.
/* harmony default export */ __webpack_exports__["default"] = ((0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(obj, keys) {
  var iteratee = keys[0], context;
  if ((0,_isFunction_js__WEBPACK_IMPORTED_MODULE_1__.default)(iteratee)) {
    iteratee = (0,_negate_js__WEBPACK_IMPORTED_MODULE_2__.default)(iteratee);
    if (keys.length > 1) context = keys[1];
  } else {
    keys = (0,_map_js__WEBPACK_IMPORTED_MODULE_3__.default)((0,_flatten_js__WEBPACK_IMPORTED_MODULE_4__.default)(keys, false, false), String);
    iteratee = function(value, key) {
      return !(0,_contains_js__WEBPACK_IMPORTED_MODULE_5__.default)(keys, key);
    };
  }
  return (0,_pick_js__WEBPACK_IMPORTED_MODULE_6__.default)(obj, iteratee, context);
}));


/***/ }),

/***/ "./node_modules/underscore/modules/once.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/once.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _partial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./partial.js */ "./node_modules/underscore/modules/partial.js");
/* harmony import */ var _before_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./before.js */ "./node_modules/underscore/modules/before.js");



// Returns a function that will be executed at most one time, no matter how
// often you call it. Useful for lazy initialization.
/* harmony default export */ __webpack_exports__["default"] = ((0,_partial_js__WEBPACK_IMPORTED_MODULE_0__.default)(_before_js__WEBPACK_IMPORTED_MODULE_1__.default, 2));


/***/ }),

/***/ "./node_modules/underscore/modules/pairs.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/pairs.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ pairs; }
/* harmony export */ });
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");


// Convert an object into a list of `[key, value]` pairs.
// The opposite of `_.object` with one argument.
function pairs(obj) {
  var _keys = (0,_keys_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj);
  var length = _keys.length;
  var pairs = Array(length);
  for (var i = 0; i < length; i++) {
    pairs[i] = [_keys[i], obj[_keys[i]]];
  }
  return pairs;
}


/***/ }),

/***/ "./node_modules/underscore/modules/partial.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/partial.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");
/* harmony import */ var _executeBound_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_executeBound.js */ "./node_modules/underscore/modules/_executeBound.js");
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");




// Partially apply a function by creating a version that has had some of its
// arguments pre-filled, without changing its dynamic `this` context. `_` acts
// as a placeholder by default, allowing any combination of arguments to be
// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.
var partial = (0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(func, boundArgs) {
  var placeholder = partial.placeholder;
  var bound = function() {
    var position = 0, length = boundArgs.length;
    var args = Array(length);
    for (var i = 0; i < length; i++) {
      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];
    }
    while (position < arguments.length) args.push(arguments[position++]);
    return (0,_executeBound_js__WEBPACK_IMPORTED_MODULE_1__.default)(func, bound, this, this, args);
  };
  return bound;
});

partial.placeholder = _underscore_js__WEBPACK_IMPORTED_MODULE_2__.default;
/* harmony default export */ __webpack_exports__["default"] = (partial);


/***/ }),

/***/ "./node_modules/underscore/modules/partition.js":
/*!******************************************************!*\
  !*** ./node_modules/underscore/modules/partition.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _group_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_group.js */ "./node_modules/underscore/modules/_group.js");


// Split a collection into two arrays: one whose elements all pass the given
// truth test, and one whose elements all do not pass the truth test.
/* harmony default export */ __webpack_exports__["default"] = ((0,_group_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(result, value, pass) {
  result[pass ? 0 : 1].push(value);
}, true));


/***/ }),

/***/ "./node_modules/underscore/modules/pick.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/pick.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");
/* harmony import */ var _isFunction_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isFunction.js */ "./node_modules/underscore/modules/isFunction.js");
/* harmony import */ var _optimizeCb_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_optimizeCb.js */ "./node_modules/underscore/modules/_optimizeCb.js");
/* harmony import */ var _allKeys_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./allKeys.js */ "./node_modules/underscore/modules/allKeys.js");
/* harmony import */ var _keyInObj_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./_keyInObj.js */ "./node_modules/underscore/modules/_keyInObj.js");
/* harmony import */ var _flatten_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./_flatten.js */ "./node_modules/underscore/modules/_flatten.js");







// Return a copy of the object only containing the allowed properties.
/* harmony default export */ __webpack_exports__["default"] = ((0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(obj, keys) {
  var result = {}, iteratee = keys[0];
  if (obj == null) return result;
  if ((0,_isFunction_js__WEBPACK_IMPORTED_MODULE_1__.default)(iteratee)) {
    if (keys.length > 1) iteratee = (0,_optimizeCb_js__WEBPACK_IMPORTED_MODULE_2__.default)(iteratee, keys[1]);
    keys = (0,_allKeys_js__WEBPACK_IMPORTED_MODULE_3__.default)(obj);
  } else {
    iteratee = _keyInObj_js__WEBPACK_IMPORTED_MODULE_4__.default;
    keys = (0,_flatten_js__WEBPACK_IMPORTED_MODULE_5__.default)(keys, false, false);
    obj = Object(obj);
  }
  for (var i = 0, length = keys.length; i < length; i++) {
    var key = keys[i];
    var value = obj[key];
    if (iteratee(value, key, obj)) result[key] = value;
  }
  return result;
}));


/***/ }),

/***/ "./node_modules/underscore/modules/pluck.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/pluck.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ pluck; }
/* harmony export */ });
/* harmony import */ var _map_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map.js */ "./node_modules/underscore/modules/map.js");
/* harmony import */ var _property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./property.js */ "./node_modules/underscore/modules/property.js");



// Convenience version of a common use case of `_.map`: fetching a property.
function pluck(obj, key) {
  return (0,_map_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj, (0,_property_js__WEBPACK_IMPORTED_MODULE_1__.default)(key));
}


/***/ }),

/***/ "./node_modules/underscore/modules/property.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/property.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ property; }
/* harmony export */ });
/* harmony import */ var _deepGet_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_deepGet.js */ "./node_modules/underscore/modules/_deepGet.js");
/* harmony import */ var _toPath_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_toPath.js */ "./node_modules/underscore/modules/_toPath.js");



// Creates a function that, when passed an object, will traverse that object’s
// properties down the given `path`, specified as an array of keys or indices.
function property(path) {
  path = (0,_toPath_js__WEBPACK_IMPORTED_MODULE_1__.default)(path);
  return function(obj) {
    return (0,_deepGet_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj, path);
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/propertyOf.js":
/*!*******************************************************!*\
  !*** ./node_modules/underscore/modules/propertyOf.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ propertyOf; }
/* harmony export */ });
/* harmony import */ var _noop_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./noop.js */ "./node_modules/underscore/modules/noop.js");
/* harmony import */ var _get_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./get.js */ "./node_modules/underscore/modules/get.js");



// Generates a function for a given object that returns a given property.
function propertyOf(obj) {
  if (obj == null) return _noop_js__WEBPACK_IMPORTED_MODULE_0__.default;
  return function(path) {
    return (0,_get_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj, path);
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/random.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/random.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ random; }
/* harmony export */ });
// Return a random integer between `min` and `max` (inclusive).
function random(min, max) {
  if (max == null) {
    max = min;
    min = 0;
  }
  return min + Math.floor(Math.random() * (max - min + 1));
}


/***/ }),

/***/ "./node_modules/underscore/modules/range.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/range.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ range; }
/* harmony export */ });
// Generate an integer Array containing an arithmetic progression. A port of
// the native Python `range()` function. See
// [the Python documentation](https://docs.python.org/library/functions.html#range).
function range(start, stop, step) {
  if (stop == null) {
    stop = start || 0;
    start = 0;
  }
  if (!step) {
    step = stop < start ? -1 : 1;
  }

  var length = Math.max(Math.ceil((stop - start) / step), 0);
  var range = Array(length);

  for (var idx = 0; idx < length; idx++, start += step) {
    range[idx] = start;
  }

  return range;
}


/***/ }),

/***/ "./node_modules/underscore/modules/reduce.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/reduce.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _createReduce_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_createReduce.js */ "./node_modules/underscore/modules/_createReduce.js");


// **Reduce** builds up a single result from a list of values, aka `inject`,
// or `foldl`.
/* harmony default export */ __webpack_exports__["default"] = ((0,_createReduce_js__WEBPACK_IMPORTED_MODULE_0__.default)(1));


/***/ }),

/***/ "./node_modules/underscore/modules/reduceRight.js":
/*!********************************************************!*\
  !*** ./node_modules/underscore/modules/reduceRight.js ***!
  \********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _createReduce_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_createReduce.js */ "./node_modules/underscore/modules/_createReduce.js");


// The right-associative version of reduce, also known as `foldr`.
/* harmony default export */ __webpack_exports__["default"] = ((0,_createReduce_js__WEBPACK_IMPORTED_MODULE_0__.default)(-1));


/***/ }),

/***/ "./node_modules/underscore/modules/reject.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/reject.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ reject; }
/* harmony export */ });
/* harmony import */ var _filter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./filter.js */ "./node_modules/underscore/modules/filter.js");
/* harmony import */ var _negate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./negate.js */ "./node_modules/underscore/modules/negate.js");
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");




// Return all the elements for which a truth test fails.
function reject(obj, predicate, context) {
  return (0,_filter_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj, (0,_negate_js__WEBPACK_IMPORTED_MODULE_1__.default)((0,_cb_js__WEBPACK_IMPORTED_MODULE_2__.default)(predicate)), context);
}


/***/ }),

/***/ "./node_modules/underscore/modules/rest.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/rest.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ rest; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");


// Returns everything but the first entry of the `array`. Especially useful on
// the `arguments` object. Passing an **n** will return the rest N values in the
// `array`.
function rest(array, n, guard) {
  return _setup_js__WEBPACK_IMPORTED_MODULE_0__.slice.call(array, n == null || guard ? 1 : n);
}


/***/ }),

/***/ "./node_modules/underscore/modules/restArguments.js":
/*!**********************************************************!*\
  !*** ./node_modules/underscore/modules/restArguments.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ restArguments; }
/* harmony export */ });
// Some functions take a variable number of arguments, or a few expected
// arguments at the beginning and then a variable number of values to operate
// on. This helper accumulates all remaining arguments past the function’s
// argument length (or an explicit `startIndex`), into an array that becomes
// the last argument. Similar to ES6’s "rest parameter".
function restArguments(func, startIndex) {
  startIndex = startIndex == null ? func.length - 1 : +startIndex;
  return function() {
    var length = Math.max(arguments.length - startIndex, 0),
        rest = Array(length),
        index = 0;
    for (; index < length; index++) {
      rest[index] = arguments[index + startIndex];
    }
    switch (startIndex) {
      case 0: return func.call(this, rest);
      case 1: return func.call(this, arguments[0], rest);
      case 2: return func.call(this, arguments[0], arguments[1], rest);
    }
    var args = Array(startIndex + 1);
    for (index = 0; index < startIndex; index++) {
      args[index] = arguments[index];
    }
    args[startIndex] = rest;
    return func.apply(this, args);
  };
}


/***/ }),

/***/ "./node_modules/underscore/modules/result.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/result.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ result; }
/* harmony export */ });
/* harmony import */ var _isFunction_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isFunction.js */ "./node_modules/underscore/modules/isFunction.js");
/* harmony import */ var _toPath_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_toPath.js */ "./node_modules/underscore/modules/_toPath.js");



// Traverses the children of `obj` along `path`. If a child is a function, it
// is invoked with its parent as context. Returns the value of the final
// child, or `fallback` if any child is undefined.
function result(obj, path, fallback) {
  path = (0,_toPath_js__WEBPACK_IMPORTED_MODULE_1__.default)(path);
  var length = path.length;
  if (!length) {
    return (0,_isFunction_js__WEBPACK_IMPORTED_MODULE_0__.default)(fallback) ? fallback.call(obj) : fallback;
  }
  for (var i = 0; i < length; i++) {
    var prop = obj == null ? void 0 : obj[path[i]];
    if (prop === void 0) {
      prop = fallback;
      i = length; // Ensure we don't continue iterating.
    }
    obj = (0,_isFunction_js__WEBPACK_IMPORTED_MODULE_0__.default)(prop) ? prop.call(obj) : prop;
  }
  return obj;
}


/***/ }),

/***/ "./node_modules/underscore/modules/sample.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/sample.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ sample; }
/* harmony export */ });
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./values.js */ "./node_modules/underscore/modules/values.js");
/* harmony import */ var _getLength_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_getLength.js */ "./node_modules/underscore/modules/_getLength.js");
/* harmony import */ var _random_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./random.js */ "./node_modules/underscore/modules/random.js");
/* harmony import */ var _toArray_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./toArray.js */ "./node_modules/underscore/modules/toArray.js");






// Sample **n** random values from a collection using the modern version of the
// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher–Yates_shuffle).
// If **n** is not specified, returns a single random element.
// The internal `guard` argument allows it to work with `_.map`.
function sample(obj, n, guard) {
  if (n == null || guard) {
    if (!(0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj)) obj = (0,_values_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj);
    return obj[(0,_random_js__WEBPACK_IMPORTED_MODULE_3__.default)(obj.length - 1)];
  }
  var sample = (0,_toArray_js__WEBPACK_IMPORTED_MODULE_4__.default)(obj);
  var length = (0,_getLength_js__WEBPACK_IMPORTED_MODULE_2__.default)(sample);
  n = Math.max(Math.min(n, length), 0);
  var last = length - 1;
  for (var index = 0; index < n; index++) {
    var rand = (0,_random_js__WEBPACK_IMPORTED_MODULE_3__.default)(index, last);
    var temp = sample[index];
    sample[index] = sample[rand];
    sample[rand] = temp;
  }
  return sample.slice(0, n);
}


/***/ }),

/***/ "./node_modules/underscore/modules/shuffle.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/shuffle.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ shuffle; }
/* harmony export */ });
/* harmony import */ var _sample_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sample.js */ "./node_modules/underscore/modules/sample.js");


// Shuffle a collection.
function shuffle(obj) {
  return (0,_sample_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj, Infinity);
}


/***/ }),

/***/ "./node_modules/underscore/modules/size.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/size.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ size; }
/* harmony export */ });
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");



// Return the number of elements in a collection.
function size(obj) {
  if (obj == null) return 0;
  return (0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj) ? obj.length : (0,_keys_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj).length;
}


/***/ }),

/***/ "./node_modules/underscore/modules/some.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/some.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ some; }
/* harmony export */ });
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");




// Determine if at least one element in the object passes a truth test.
function some(obj, predicate, context) {
  predicate = (0,_cb_js__WEBPACK_IMPORTED_MODULE_0__.default)(predicate, context);
  var _keys = !(0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_1__.default)(obj) && (0,_keys_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj),
      length = (_keys || obj).length;
  for (var index = 0; index < length; index++) {
    var currentKey = _keys ? _keys[index] : index;
    if (predicate(obj[currentKey], currentKey, obj)) return true;
  }
  return false;
}


/***/ }),

/***/ "./node_modules/underscore/modules/sortBy.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/sortBy.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ sortBy; }
/* harmony export */ });
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _pluck_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pluck.js */ "./node_modules/underscore/modules/pluck.js");
/* harmony import */ var _map_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map.js */ "./node_modules/underscore/modules/map.js");




// Sort the object's values by a criterion produced by an iteratee.
function sortBy(obj, iteratee, context) {
  var index = 0;
  iteratee = (0,_cb_js__WEBPACK_IMPORTED_MODULE_0__.default)(iteratee, context);
  return (0,_pluck_js__WEBPACK_IMPORTED_MODULE_1__.default)((0,_map_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj, function(value, key, list) {
    return {
      value: value,
      index: index++,
      criteria: iteratee(value, key, list)
    };
  }).sort(function(left, right) {
    var a = left.criteria;
    var b = right.criteria;
    if (a !== b) {
      if (a > b || a === void 0) return 1;
      if (a < b || b === void 0) return -1;
    }
    return left.index - right.index;
  }), 'value');
}


/***/ }),

/***/ "./node_modules/underscore/modules/sortedIndex.js":
/*!********************************************************!*\
  !*** ./node_modules/underscore/modules/sortedIndex.js ***!
  \********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ sortedIndex; }
/* harmony export */ });
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _getLength_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_getLength.js */ "./node_modules/underscore/modules/_getLength.js");



// Use a comparator function to figure out the smallest index at which
// an object should be inserted so as to maintain order. Uses binary search.
function sortedIndex(array, obj, iteratee, context) {
  iteratee = (0,_cb_js__WEBPACK_IMPORTED_MODULE_0__.default)(iteratee, context, 1);
  var value = iteratee(obj);
  var low = 0, high = (0,_getLength_js__WEBPACK_IMPORTED_MODULE_1__.default)(array);
  while (low < high) {
    var mid = Math.floor((low + high) / 2);
    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;
  }
  return low;
}


/***/ }),

/***/ "./node_modules/underscore/modules/tap.js":
/*!************************************************!*\
  !*** ./node_modules/underscore/modules/tap.js ***!
  \************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ tap; }
/* harmony export */ });
// Invokes `interceptor` with the `obj` and then returns `obj`.
// The primary purpose of this method is to "tap into" a method chain, in
// order to perform operations on intermediate results within the chain.
function tap(obj, interceptor) {
  interceptor(obj);
  return obj;
}


/***/ }),

/***/ "./node_modules/underscore/modules/template.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/template.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ template; }
/* harmony export */ });
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaults.js */ "./node_modules/underscore/modules/defaults.js");
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");
/* harmony import */ var _templateSettings_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./templateSettings.js */ "./node_modules/underscore/modules/templateSettings.js");




// When customizing `_.templateSettings`, if you don't want to define an
// interpolation, evaluation or escaping regex, we need one that is
// guaranteed not to match.
var noMatch = /(.)^/;

// Certain characters need to be escaped so that they can be put into a
// string literal.
var escapes = {
  "'": "'",
  '\\': '\\',
  '\r': 'r',
  '\n': 'n',
  '\u2028': 'u2028',
  '\u2029': 'u2029'
};

var escapeRegExp = /\\|'|\r|\n|\u2028|\u2029/g;

function escapeChar(match) {
  return '\\' + escapes[match];
}

// In order to prevent third-party code injection through
// `_.templateSettings.variable`, we test it against the following regular
// expression. It is intentionally a bit more liberal than just matching valid
// identifiers, but still prevents possible loopholes through defaults or
// destructuring assignment.
var bareIdentifier = /^\s*(\w|\$)+\s*$/;

// JavaScript micro-templating, similar to John Resig's implementation.
// Underscore templating handles arbitrary delimiters, preserves whitespace,
// and correctly escapes quotes within interpolated code.
// NB: `oldSettings` only exists for backwards compatibility.
function template(text, settings, oldSettings) {
  if (!settings && oldSettings) settings = oldSettings;
  settings = (0,_defaults_js__WEBPACK_IMPORTED_MODULE_0__.default)({}, settings, _underscore_js__WEBPACK_IMPORTED_MODULE_1__.default.templateSettings);

  // Combine delimiters into one regular expression via alternation.
  var matcher = RegExp([
    (settings.escape || noMatch).source,
    (settings.interpolate || noMatch).source,
    (settings.evaluate || noMatch).source
  ].join('|') + '|$', 'g');

  // Compile the template source, escaping string literals appropriately.
  var index = 0;
  var source = "__p+='";
  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {
    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);
    index = offset + match.length;

    if (escape) {
      source += "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'";
    } else if (interpolate) {
      source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'";
    } else if (evaluate) {
      source += "';\n" + evaluate + "\n__p+='";
    }

    // Adobe VMs need the match returned to produce the correct offset.
    return match;
  });
  source += "';\n";

  var argument = settings.variable;
  if (argument) {
    // Insure against third-party code injection. (CVE-2021-23358)
    if (!bareIdentifier.test(argument)) throw new Error(
      'variable is not a bare identifier: ' + argument
    );
  } else {
    // If a variable is not specified, place data values in local scope.
    source = 'with(obj||{}){\n' + source + '}\n';
    argument = 'obj';
  }

  source = "var __t,__p='',__j=Array.prototype.join," +
    "print=function(){__p+=__j.call(arguments,'');};\n" +
    source + 'return __p;\n';

  var render;
  try {
    render = new Function(argument, '_', source);
  } catch (e) {
    e.source = source;
    throw e;
  }

  var template = function(data) {
    return render.call(this, data, _underscore_js__WEBPACK_IMPORTED_MODULE_1__.default);
  };

  // Provide the compiled source as a convenience for precompilation.
  template.source = 'function(' + argument + '){\n' + source + '}';

  return template;
}


/***/ }),

/***/ "./node_modules/underscore/modules/templateSettings.js":
/*!*************************************************************!*\
  !*** ./node_modules/underscore/modules/templateSettings.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");


// By default, Underscore uses ERB-style template delimiters. Change the
// following template settings to use alternative delimiters.
/* harmony default export */ __webpack_exports__["default"] = (_underscore_js__WEBPACK_IMPORTED_MODULE_0__.default.templateSettings = {
  evaluate: /<%([\s\S]+?)%>/g,
  interpolate: /<%=([\s\S]+?)%>/g,
  escape: /<%-([\s\S]+?)%>/g
});


/***/ }),

/***/ "./node_modules/underscore/modules/throttle.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/throttle.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ throttle; }
/* harmony export */ });
/* harmony import */ var _now_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./now.js */ "./node_modules/underscore/modules/now.js");


// Returns a function, that, when invoked, will only be triggered at most once
// during a given window of time. Normally, the throttled function will run
// as much as it can, without ever going more than once per `wait` duration;
// but if you'd like to disable the execution on the leading edge, pass
// `{leading: false}`. To disable execution on the trailing edge, ditto.
function throttle(func, wait, options) {
  var timeout, context, args, result;
  var previous = 0;
  if (!options) options = {};

  var later = function() {
    previous = options.leading === false ? 0 : (0,_now_js__WEBPACK_IMPORTED_MODULE_0__.default)();
    timeout = null;
    result = func.apply(context, args);
    if (!timeout) context = args = null;
  };

  var throttled = function() {
    var _now = (0,_now_js__WEBPACK_IMPORTED_MODULE_0__.default)();
    if (!previous && options.leading === false) previous = _now;
    var remaining = wait - (_now - previous);
    context = this;
    args = arguments;
    if (remaining <= 0 || remaining > wait) {
      if (timeout) {
        clearTimeout(timeout);
        timeout = null;
      }
      previous = _now;
      result = func.apply(context, args);
      if (!timeout) context = args = null;
    } else if (!timeout && options.trailing !== false) {
      timeout = setTimeout(later, remaining);
    }
    return result;
  };

  throttled.cancel = function() {
    clearTimeout(timeout);
    previous = 0;
    timeout = context = args = null;
  };

  return throttled;
}


/***/ }),

/***/ "./node_modules/underscore/modules/times.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/times.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ times; }
/* harmony export */ });
/* harmony import */ var _optimizeCb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_optimizeCb.js */ "./node_modules/underscore/modules/_optimizeCb.js");


// Run a function **n** times.
function times(n, iteratee, context) {
  var accum = Array(Math.max(0, n));
  iteratee = (0,_optimizeCb_js__WEBPACK_IMPORTED_MODULE_0__.default)(iteratee, context, 1);
  for (var i = 0; i < n; i++) accum[i] = iteratee(i);
  return accum;
}


/***/ }),

/***/ "./node_modules/underscore/modules/toArray.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/toArray.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ toArray; }
/* harmony export */ });
/* harmony import */ var _isArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isArray.js */ "./node_modules/underscore/modules/isArray.js");
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _isString_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isString.js */ "./node_modules/underscore/modules/isString.js");
/* harmony import */ var _isArrayLike_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./_isArrayLike.js */ "./node_modules/underscore/modules/_isArrayLike.js");
/* harmony import */ var _map_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./map.js */ "./node_modules/underscore/modules/map.js");
/* harmony import */ var _identity_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./identity.js */ "./node_modules/underscore/modules/identity.js");
/* harmony import */ var _values_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./values.js */ "./node_modules/underscore/modules/values.js");








// Safely create a real, live array from anything iterable.
var reStrSymbol = /[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;
function toArray(obj) {
  if (!obj) return [];
  if ((0,_isArray_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj)) return _setup_js__WEBPACK_IMPORTED_MODULE_1__.slice.call(obj);
  if ((0,_isString_js__WEBPACK_IMPORTED_MODULE_2__.default)(obj)) {
    // Keep surrogate pair characters together.
    return obj.match(reStrSymbol);
  }
  if ((0,_isArrayLike_js__WEBPACK_IMPORTED_MODULE_3__.default)(obj)) return (0,_map_js__WEBPACK_IMPORTED_MODULE_4__.default)(obj, _identity_js__WEBPACK_IMPORTED_MODULE_5__.default);
  return (0,_values_js__WEBPACK_IMPORTED_MODULE_6__.default)(obj);
}


/***/ }),

/***/ "./node_modules/underscore/modules/toPath.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/toPath.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ toPath; }
/* harmony export */ });
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");
/* harmony import */ var _isArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isArray.js */ "./node_modules/underscore/modules/isArray.js");



// Normalize a (deep) property `path` to array.
// Like `_.iteratee`, this function can be customized.
function toPath(path) {
  return (0,_isArray_js__WEBPACK_IMPORTED_MODULE_1__.default)(path) ? path : [path];
}
_underscore_js__WEBPACK_IMPORTED_MODULE_0__.default.toPath = toPath;


/***/ }),

/***/ "./node_modules/underscore/modules/underscore-array-methods.js":
/*!*********************************************************************!*\
  !*** ./node_modules/underscore/modules/underscore-array-methods.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _underscore_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./underscore.js */ "./node_modules/underscore/modules/underscore.js");
/* harmony import */ var _each_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./each.js */ "./node_modules/underscore/modules/each.js");
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");
/* harmony import */ var _chainResult_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./_chainResult.js */ "./node_modules/underscore/modules/_chainResult.js");





// Add all mutator `Array` functions to the wrapper.
(0,_each_js__WEBPACK_IMPORTED_MODULE_1__.default)(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {
  var method = _setup_js__WEBPACK_IMPORTED_MODULE_2__.ArrayProto[name];
  _underscore_js__WEBPACK_IMPORTED_MODULE_0__.default.prototype[name] = function() {
    var obj = this._wrapped;
    if (obj != null) {
      method.apply(obj, arguments);
      if ((name === 'shift' || name === 'splice') && obj.length === 0) {
        delete obj[0];
      }
    }
    return (0,_chainResult_js__WEBPACK_IMPORTED_MODULE_3__.default)(this, obj);
  };
});

// Add all accessor `Array` functions to the wrapper.
(0,_each_js__WEBPACK_IMPORTED_MODULE_1__.default)(['concat', 'join', 'slice'], function(name) {
  var method = _setup_js__WEBPACK_IMPORTED_MODULE_2__.ArrayProto[name];
  _underscore_js__WEBPACK_IMPORTED_MODULE_0__.default.prototype[name] = function() {
    var obj = this._wrapped;
    if (obj != null) obj = method.apply(obj, arguments);
    return (0,_chainResult_js__WEBPACK_IMPORTED_MODULE_3__.default)(this, obj);
  };
});

/* harmony default export */ __webpack_exports__["default"] = (_underscore_js__WEBPACK_IMPORTED_MODULE_0__.default);


/***/ }),

/***/ "./node_modules/underscore/modules/underscore.js":
/*!*******************************************************!*\
  !*** ./node_modules/underscore/modules/underscore.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _; }
/* harmony export */ });
/* harmony import */ var _setup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_setup.js */ "./node_modules/underscore/modules/_setup.js");


// If Underscore is called as a function, it returns a wrapped object that can
// be used OO-style. This wrapper holds altered versions of all functions added
// through `_.mixin`. Wrapped objects may be chained.
function _(obj) {
  if (obj instanceof _) return obj;
  if (!(this instanceof _)) return new _(obj);
  this._wrapped = obj;
}

_.VERSION = _setup_js__WEBPACK_IMPORTED_MODULE_0__.VERSION;

// Extracts the result from a wrapped and chained object.
_.prototype.value = function() {
  return this._wrapped;
};

// Provide unwrapping proxies for some methods used in engine operations
// such as arithmetic and JSON stringification.
_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;

_.prototype.toString = function() {
  return String(this._wrapped);
};


/***/ }),

/***/ "./node_modules/underscore/modules/unescape.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/unescape.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _createEscaper_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_createEscaper.js */ "./node_modules/underscore/modules/_createEscaper.js");
/* harmony import */ var _unescapeMap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_unescapeMap.js */ "./node_modules/underscore/modules/_unescapeMap.js");



// Function for unescaping strings from HTML interpolation.
/* harmony default export */ __webpack_exports__["default"] = ((0,_createEscaper_js__WEBPACK_IMPORTED_MODULE_0__.default)(_unescapeMap_js__WEBPACK_IMPORTED_MODULE_1__.default));


/***/ }),

/***/ "./node_modules/underscore/modules/union.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/union.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");
/* harmony import */ var _uniq_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./uniq.js */ "./node_modules/underscore/modules/uniq.js");
/* harmony import */ var _flatten_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_flatten.js */ "./node_modules/underscore/modules/_flatten.js");




// Produce an array that contains the union: each distinct element from all of
// the passed-in arrays.
/* harmony default export */ __webpack_exports__["default"] = ((0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(arrays) {
  return (0,_uniq_js__WEBPACK_IMPORTED_MODULE_1__.default)((0,_flatten_js__WEBPACK_IMPORTED_MODULE_2__.default)(arrays, true, true));
}));


/***/ }),

/***/ "./node_modules/underscore/modules/uniq.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/uniq.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ uniq; }
/* harmony export */ });
/* harmony import */ var _isBoolean_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isBoolean.js */ "./node_modules/underscore/modules/isBoolean.js");
/* harmony import */ var _cb_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_cb.js */ "./node_modules/underscore/modules/_cb.js");
/* harmony import */ var _getLength_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_getLength.js */ "./node_modules/underscore/modules/_getLength.js");
/* harmony import */ var _contains_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./contains.js */ "./node_modules/underscore/modules/contains.js");





// Produce a duplicate-free version of the array. If the array has already
// been sorted, you have the option of using a faster algorithm.
// The faster algorithm will not work with an iteratee if the iteratee
// is not a one-to-one function, so providing an iteratee will disable
// the faster algorithm.
function uniq(array, isSorted, iteratee, context) {
  if (!(0,_isBoolean_js__WEBPACK_IMPORTED_MODULE_0__.default)(isSorted)) {
    context = iteratee;
    iteratee = isSorted;
    isSorted = false;
  }
  if (iteratee != null) iteratee = (0,_cb_js__WEBPACK_IMPORTED_MODULE_1__.default)(iteratee, context);
  var result = [];
  var seen = [];
  for (var i = 0, length = (0,_getLength_js__WEBPACK_IMPORTED_MODULE_2__.default)(array); i < length; i++) {
    var value = array[i],
        computed = iteratee ? iteratee(value, i, array) : value;
    if (isSorted && !iteratee) {
      if (!i || seen !== computed) result.push(value);
      seen = computed;
    } else if (iteratee) {
      if (!(0,_contains_js__WEBPACK_IMPORTED_MODULE_3__.default)(seen, computed)) {
        seen.push(computed);
        result.push(value);
      }
    } else if (!(0,_contains_js__WEBPACK_IMPORTED_MODULE_3__.default)(result, value)) {
      result.push(value);
    }
  }
  return result;
}


/***/ }),

/***/ "./node_modules/underscore/modules/uniqueId.js":
/*!*****************************************************!*\
  !*** ./node_modules/underscore/modules/uniqueId.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ uniqueId; }
/* harmony export */ });
// Generate a unique integer id (unique within the entire client session).
// Useful for temporary DOM ids.
var idCounter = 0;
function uniqueId(prefix) {
  var id = ++idCounter + '';
  return prefix ? prefix + id : id;
}


/***/ }),

/***/ "./node_modules/underscore/modules/unzip.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/unzip.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ unzip; }
/* harmony export */ });
/* harmony import */ var _max_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./max.js */ "./node_modules/underscore/modules/max.js");
/* harmony import */ var _getLength_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_getLength.js */ "./node_modules/underscore/modules/_getLength.js");
/* harmony import */ var _pluck_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pluck.js */ "./node_modules/underscore/modules/pluck.js");




// Complement of zip. Unzip accepts an array of arrays and groups
// each array's elements on shared indices.
function unzip(array) {
  var length = (array && (0,_max_js__WEBPACK_IMPORTED_MODULE_0__.default)(array, _getLength_js__WEBPACK_IMPORTED_MODULE_1__.default).length) || 0;
  var result = Array(length);

  for (var index = 0; index < length; index++) {
    result[index] = (0,_pluck_js__WEBPACK_IMPORTED_MODULE_2__.default)(array, index);
  }
  return result;
}


/***/ }),

/***/ "./node_modules/underscore/modules/values.js":
/*!***************************************************!*\
  !*** ./node_modules/underscore/modules/values.js ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ values; }
/* harmony export */ });
/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./keys.js */ "./node_modules/underscore/modules/keys.js");


// Retrieve the values of an object's properties.
function values(obj) {
  var _keys = (0,_keys_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj);
  var length = _keys.length;
  var values = Array(length);
  for (var i = 0; i < length; i++) {
    values[i] = obj[_keys[i]];
  }
  return values;
}


/***/ }),

/***/ "./node_modules/underscore/modules/where.js":
/*!**************************************************!*\
  !*** ./node_modules/underscore/modules/where.js ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ where; }
/* harmony export */ });
/* harmony import */ var _filter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./filter.js */ "./node_modules/underscore/modules/filter.js");
/* harmony import */ var _matcher_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matcher.js */ "./node_modules/underscore/modules/matcher.js");



// Convenience version of a common use case of `_.filter`: selecting only
// objects containing specific `key:value` pairs.
function where(obj, attrs) {
  return (0,_filter_js__WEBPACK_IMPORTED_MODULE_0__.default)(obj, (0,_matcher_js__WEBPACK_IMPORTED_MODULE_1__.default)(attrs));
}


/***/ }),

/***/ "./node_modules/underscore/modules/without.js":
/*!****************************************************!*\
  !*** ./node_modules/underscore/modules/without.js ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");
/* harmony import */ var _difference_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./difference.js */ "./node_modules/underscore/modules/difference.js");



// Return a version of the array that does not contain the specified value(s).
/* harmony default export */ __webpack_exports__["default"] = ((0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(function(array, otherArrays) {
  return (0,_difference_js__WEBPACK_IMPORTED_MODULE_1__.default)(array, otherArrays);
}));


/***/ }),

/***/ "./node_modules/underscore/modules/wrap.js":
/*!*************************************************!*\
  !*** ./node_modules/underscore/modules/wrap.js ***!
  \*************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ wrap; }
/* harmony export */ });
/* harmony import */ var _partial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./partial.js */ "./node_modules/underscore/modules/partial.js");


// Returns the first function passed as an argument to the second,
// allowing you to adjust arguments, run code before and after, and
// conditionally execute the original function.
function wrap(func, wrapper) {
  return (0,_partial_js__WEBPACK_IMPORTED_MODULE_0__.default)(wrapper, func);
}


/***/ }),

/***/ "./node_modules/underscore/modules/zip.js":
/*!************************************************!*\
  !*** ./node_modules/underscore/modules/zip.js ***!
  \************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _restArguments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./restArguments.js */ "./node_modules/underscore/modules/restArguments.js");
/* harmony import */ var _unzip_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./unzip.js */ "./node_modules/underscore/modules/unzip.js");



// Zip together multiple lists into a single array -- elements that share
// an index go together.
/* harmony default export */ __webpack_exports__["default"] = ((0,_restArguments_js__WEBPACK_IMPORTED_MODULE_0__.default)(_unzip_js__WEBPACK_IMPORTED_MODULE_1__.default));


/***/ }),

/***/ "./node_modules/web-dialog/index.js":
/*!******************************************!*\
  !*** ./node_modules/web-dialog/index.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebDialog": function() { return /* reexport safe */ _web_dialog_js__WEBPACK_IMPORTED_MODULE_1__.WebDialog; },
/* harmony export */   "getDialogCount": function() { return /* reexport safe */ _util_js__WEBPACK_IMPORTED_MODULE_2__.getDialogCount; },
/* harmony export */   "setDialogCount": function() { return /* reexport safe */ _util_js__WEBPACK_IMPORTED_MODULE_2__.setDialogCount; },
/* harmony export */   "traverseActiveElements": function() { return /* reexport safe */ _util_js__WEBPACK_IMPORTED_MODULE_2__.traverseActiveElements; },
/* harmony export */   "openDialog": function() { return /* reexport safe */ _open_dialog_js__WEBPACK_IMPORTED_MODULE_3__.openDialog; }
/* harmony export */ });
/* harmony import */ var _a11y_focus_trap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @a11y/focus-trap */ "./node_modules/@a11y/focus-trap/index.js");
/* harmony import */ var _web_dialog_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./web-dialog.js */ "./node_modules/web-dialog/web-dialog.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util.js */ "./node_modules/web-dialog/util.js");
/* harmony import */ var _open_dialog_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./open-dialog.js */ "./node_modules/web-dialog/open-dialog.js");






/***/ }),

/***/ "./node_modules/web-dialog/open-dialog.js":
/*!************************************************!*\
  !*** ./node_modules/web-dialog/open-dialog.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "openDialog": function() { return /* binding */ openDialog; }
/* harmony export */ });
/* harmony import */ var _a11y_focus_trap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @a11y/focus-trap */ "./node_modules/@a11y/focus-trap/index.js");
/* harmony import */ var _web_dialog_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./web-dialog.js */ "./node_modules/web-dialog/web-dialog.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util.js */ "./node_modules/web-dialog/util.js");




/**
 * Opens a dialog and appends it to the container.
 * @param $content
 * @param $container
 * @param center
 * @param initialize
 */
function openDialog({ $content, $container = document.body, center = false, initialize = (() => new _web_dialog_js__WEBPACK_IMPORTED_MODULE_1__.WebDialog()) } = {}) {
    // Construct the dialog.
    const $dialog = initialize();
    // Set the relevant properties of the dialog.
    if (center != null) {
        $dialog.center = center;
    }
    // Attach the content to the dialog.
    if ($content != null) {
        if (typeof $content === "function") {
            $content($dialog);
        }
        else {
            $dialog.appendChild($content);
        }
    }
    // Create a resolver that resolves when the dialog closes.
    const resolver = new Promise(res => {
        $dialog.addEventListener("close", (e) => {
            $dialog.remove();
            res(e.detail);
        }, { once: true });
    });
    // Append the dialog to the container and open it.
    $container.appendChild($dialog);
    $dialog.show();
    return { $dialog, resolver };
}




/***/ }),

/***/ "./node_modules/web-dialog/util.js":
/*!*****************************************!*\
  !*** ./node_modules/web-dialog/util.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getDialogCount": function() { return /* binding */ getDialogCount; },
/* harmony export */   "setDialogCount": function() { return /* binding */ setDialogCount; },
/* harmony export */   "traverseActiveElements": function() { return /* binding */ traverseActiveElements; }
/* harmony export */ });
/**
 * Returns the data dialog count for an element.
 * @param $elem
 */
function getDialogCount($elem) {
    return Number($elem.getAttribute(`data-dialog-count`)) || 0;
}
/**
 * Sets the data dialog count for an element.
 * @param $elem
 * @param count
 */
function setDialogCount($elem, count) {
    $elem.setAttribute(`data-dialog-count`, count.toString());
}
/**
 * Traverses the tree of active elements down the shadow tree.
 * @param activeElement
 */
function traverseActiveElements(activeElement = document.activeElement) {
    if (activeElement != null && activeElement.shadowRoot != null && activeElement.shadowRoot.activeElement != null) {
        return traverseActiveElements(activeElement.shadowRoot.activeElement);
    }
    return activeElement;
}




/***/ }),

/***/ "./node_modules/web-dialog/web-dialog.js":
/*!***********************************************!*\
  !*** ./node_modules/web-dialog/web-dialog.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebDialog": function() { return /* binding */ WebDialog; }
/* harmony export */ });
/* harmony import */ var _a11y_focus_trap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @a11y/focus-trap */ "./node_modules/@a11y/focus-trap/index.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ "./node_modules/web-dialog/util.js");



var styles = `*{box-sizing:border-box}:host{padding:var(--dialog-container-padding,5vw 24px);z-index:var(--dialog-z-index,12345678);outline:none}#backdrop,:host{position:fixed;top:0;left:0;bottom:0;right:0}:host,:host([center]) #dialog{overflow-x:var(--dialog-overflow-x,hidden);overflow-y:var(--dialog-overflow-y,auto);overscroll-behavior:contain;-webkit-overflow-scrolling:touch}:host([center]){display:flex;align-items:center;justify-content:center;overflow:hidden}:host([center]) #dialog{max-height:var(--dialog-max-height,100%)}:host(:not(:defined)),:host(:not([open])){display:none}#backdrop{background:var(--dialog-backdrop-bg,rgba(0,0,0,.6));animation:fadeIn var(--dialog-animation-duration,.1s) var(--dialog-animation-easing,ease-out);z-index:-1}#dialog{animation:scaleIn var(--dialog-animation-duration,.1s) var(--dialog-animation-easing,ease-out);border-radius:var(--dialog-border-radius,12px);box-shadow:var(--dialog-box-shadow,0 2px 10px -5px rgba(0,0,0,.6));max-width:var(--dialog-max-width,700px);width:var(--dialog-width,100%);padding:var(--dialog-padding,24px);max-height:var(--dialog-max-height,unset);height:var(--dialog-height,auto);color:var(--dialog-color,currentColor);background:var(--dialog-bg,#fff);z-index:1;position:relative;display:flex;flex-direction:column;margin:0 auto;border:none}::slotted(article),article{flex-grow:1;overflow-y:auto;-webkit-overflow-scrolling:touch}::slotted(footer),::slotted(header),footer,header{flex-shrink:0}@keyframes scaleIn{0%{transform:scale(.9) translateY(30px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}`;

const template = document.createElement("template");
template.innerHTML = `
  <style>${styles}</style>
  <div id="backdrop" part="backdrop"></div>
  <focus-trap id="dialog" part="dialog">
    <slot></slot>
  </focus-trap>
`;
/**
 * A dialog web component that can be used to display highly interruptive messages.
 * @fires open - This event is fired when the dialog opens.
 * @fires close - This event is fired when the dialog closes.
 * @fires closing - This event is fired before the dialog is closed by clicking escape or on the backdrop. The event is cancellable which means `event.preventDefault()` can cancel the closing of the dialog.
 * @cssprop --dialog-container-padding - Padding of the host container of the dialog.
 * @cssprop --dialog-z-index - Z-index of the dialog.
 * @cssprop --dialog-overflow-x - Overflow of the x-axis.
 * @cssprop --dialog-overflow-y - Overflow of the y-axis.
 * @cssprop --dialog-max-height - Max height of the dialog.
 * @cssprop --dialog-height - Height of the dialog.
 * @cssprop --dialog-backdrop-bg - Background of the backdrop.
 * @cssprop --dialog-animation-duration - Duration of the dialog animation.
 * @cssprop --dialog-animation-easing - Easing of the dialog animation.
 * @cssprop --dialog-border-radius - Border radius of the dialog.
 * @cssprop --dialog-box-shadow - Box shadow of the dialog.
 * @cssprop --dialog-max-width - Max width of the dialog.
 * @cssprop --dialog-width - Width of the dialog.
 * @cssprop --dialog-padding - Padding of the dialog.
 * @cssprop --dialog-color - Color of the dialog.
 * @cssprop --dialog-bg - Background of the dialog.
 * @csspart backdrop - Backdrop part.
 * @csspart dialog - Dialog part.
 */
class WebDialog extends HTMLElement {
    /**
     * Attaches the shadow root.
     */
    constructor() {
        super();
        this.$scrollContainer = document.documentElement;
        this.$previousActiveElement = null;
        const shadow = this.attachShadow({ mode: "open" });
        shadow.appendChild(template.content.cloneNode(true));
        this.$dialog = shadow.querySelector("#dialog");
        this.$backdrop = shadow.querySelector("#backdrop");
        this.onBackdropClick = this.onBackdropClick.bind(this);
        this.onKeyDown = this.onKeyDown.bind(this);
        // Set aria attributes
        this.setAttribute("aria-modal", "true");
        this.$dialog.setAttribute("role", "alertdialog");
    }
    static get observedAttributes() {
        return ["open", "center"];
    }
    /**
     * Whether the dialog is opened.
     * @attr
     */
    get open() {
        return this.hasAttribute("open");
    }
    set open(value) {
        value ? this.setAttribute("open", "") : this.removeAttribute("open");
    }
    /**
     * Whether the dialog is centered on the page.
     * @attr
     */
    get center() {
        return this.hasAttribute("center");
    }
    set center(value) {
        value ? this.setAttribute("center", "") : this.removeAttribute("center");
    }
    /**
     * Attaches event listeners when connected.
     */
    connectedCallback() {
        this.$backdrop.addEventListener("click", this.onBackdropClick);
    }
    /**
     * Removes event listeners when disconnected.
     */
    disconnectedCallback() {
        this.$backdrop.removeEventListener("click", this.onBackdropClick);
        // If the dialog is open when it is removed from the DOM
        // we need to cleanup the event listeners and side effects.
        if (this.open) {
            this.didClose();
        }
    }
    /**
     * Shows the dialog.
     */
    show() {
        this.open = true;
    }
    /**
     * Closes the dialog with a result.
     * @param result
     */
    close(result) {
        this.result = result;
        this.open = false;
    }
    /**
     * Closes the dialog when the backdrop is clicked.
     */
    onBackdropClick() {
        if (this.assertClosing()) {
            this.close();
        }
    }
    /**
     * Closes the dialog when escape is pressed.
     */
    onKeyDown(e) {
        switch (e.code) {
            case "Escape":
                if (this.assertClosing()) {
                    this.close();
                    // If there are more dialogs, we don't want to close those also :-)
                    e.stopImmediatePropagation();
                }
                break;
        }
    }
    /**
     * Dispatches an event that, if asserts whether the dialog can be closed.
     * If "preventDefault()" is called on the event, assertClosing will return true
     * if the event was not cancelled. It will return false if the event was cancelled.
     */
    assertClosing() {
        return this.dispatchEvent(new CustomEvent("closing", { cancelable: true }));
    }
    /**
     * Setup the dialog after it has opened.
     */
    didOpen() {
        // Save the current active element so we have a way of restoring the focus when the dialog is closed.
        this.$previousActiveElement = (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.traverseActiveElements)(document.activeElement);
        // Focus the first element in the focus trap.
        // Wait for the dialog to show its content before we try to focus inside it.
        // We request an animation frame to make sure the content is now visible.
        requestAnimationFrame(() => {
            this.$dialog.focusFirstElement();
        });
        // Make the dialog focusable
        this.tabIndex = 0;
        // Block the scrolling on the scroll container to avoid the outside content to scroll.
        this.$scrollContainer.style.overflow = `hidden`;
        // Listen for key down events to close the dialog when escape is pressed.
        this.addEventListener("keydown", this.onKeyDown, { capture: true, passive: true });
        // Increment the dialog count with one to keep track of how many dialogs are currently nested.
        (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.setDialogCount)(this.$scrollContainer, (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.getDialogCount)(this.$scrollContainer) + 1);
        // Dispatch an event so the rest of the world knows the dialog opened.
        this.dispatchEvent(new CustomEvent("open"));
    }
    /**
     * Clean up the dialog after it has closed.
     */
    didClose() {
        // Remove the listener listening for key events
        this.removeEventListener("keydown", this.onKeyDown, { capture: true });
        // Decrement the dialog count with one to keep track of how many dialogs are currently nested.
        (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.setDialogCount)(this.$scrollContainer, Math.max(0, (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.getDialogCount)(this.$scrollContainer) - 1));
        // If there are now 0 active dialogs we unblock the scrolling from the scroll container.
        // This is because we know that no other dialogs are currently nested within the scroll container.
        if ((0,_util_js__WEBPACK_IMPORTED_MODULE_1__.getDialogCount)(this.$scrollContainer) <= 0) {
            this.$scrollContainer.style.overflow = ``;
        }
        // Make the dialog unfocusable.
        this.tabIndex = -1;
        // Restore previous active element.
        if (this.$previousActiveElement != null) {
            this.$previousActiveElement.focus();
            this.$previousActiveElement = null;
        }
        // Dispatch an event so the rest of the world knows the dialog closed.
        // If a result has been set, the result is added to the detail property of the event.
        this.dispatchEvent(new CustomEvent("close", { detail: this.result }));
    }
    /**
     * Reacts when an observed attribute changes.
     */
    attributeChangedCallback(name, newValue, oldValue) {
        switch (name) {
            case "open":
                this.open ? this.didOpen() : this.didClose();
                break;
        }
    }
}
customElements.define("web-dialog", WebDialog);




/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/adapter_core.js":
/*!************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/adapter_core.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _adapter_factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adapter_factory.js */ "./node_modules/webrtc-adapter/src/js/adapter_factory.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */





const adapter =
  (0,_adapter_factory_js__WEBPACK_IMPORTED_MODULE_0__.adapterFactory)({window: typeof window === 'undefined' ? undefined : window});
/* harmony default export */ __webpack_exports__["default"] = (adapter);


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/adapter_factory.js":
/*!***************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/adapter_factory.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "adapterFactory": function() { return /* binding */ adapterFactory; }
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/* harmony import */ var _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chrome/chrome_shim */ "./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js");
/* harmony import */ var _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./firefox/firefox_shim */ "./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js");
/* harmony import */ var _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./safari/safari_shim */ "./node_modules/webrtc-adapter/src/js/safari/safari_shim.js");
/* harmony import */ var _common_shim__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common_shim */ "./node_modules/webrtc-adapter/src/js/common_shim.js");
/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sdp */ "./node_modules/sdp/sdp.js");
/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(sdp__WEBPACK_IMPORTED_MODULE_5__);
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */


  // Browser shims.






// Shimming starts here.
function adapterFactory({window} = {}, options = {
  shimChrome: true,
  shimFirefox: true,
  shimSafari: true,
}) {
  // Utils.
  const logging = _utils__WEBPACK_IMPORTED_MODULE_0__.log;
  const browserDetails = _utils__WEBPACK_IMPORTED_MODULE_0__.detectBrowser(window);

  const adapter = {
    browserDetails,
    commonShim: _common_shim__WEBPACK_IMPORTED_MODULE_4__,
    extractVersion: _utils__WEBPACK_IMPORTED_MODULE_0__.extractVersion,
    disableLog: _utils__WEBPACK_IMPORTED_MODULE_0__.disableLog,
    disableWarnings: _utils__WEBPACK_IMPORTED_MODULE_0__.disableWarnings,
    // Expose sdp as a convenience. For production apps include directly.
    sdp: sdp__WEBPACK_IMPORTED_MODULE_5__,
  };

  // Shim browser if found.
  switch (browserDetails.browser) {
    case 'chrome':
      if (!_chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__ || !_chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimPeerConnection ||
          !options.shimChrome) {
        logging('Chrome shim is not included in this adapter release.');
        return adapter;
      }
      if (browserDetails.version === null) {
        logging('Chrome shim can not determine version, not shimming.');
        return adapter;
      }
      logging('adapter.js shimming chrome.');
      // Export to the adapter global object visible in the browser.
      adapter.browserShim = _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__;

      // Must be called before shimPeerConnection.
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimAddIceCandidateNullOrEmpty(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimParameterlessSetLocalDescription(window, browserDetails);

      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimGetUserMedia(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimMediaStream(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimPeerConnection(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimOnTrack(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimAddTrackRemoveTrack(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimGetSendersWithDtmf(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimGetStats(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimSenderReceiverGetStats(window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.fixNegotiationNeeded(window, browserDetails);

      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidate(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimConnectionState(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimMaxMessageSize(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimSendThrowTypeError(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.removeExtmapAllowMixed(window, browserDetails);
      break;
    case 'firefox':
      if (!_firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__ || !_firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimPeerConnection ||
          !options.shimFirefox) {
        logging('Firefox shim is not included in this adapter release.');
        return adapter;
      }
      logging('adapter.js shimming firefox.');
      // Export to the adapter global object visible in the browser.
      adapter.browserShim = _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__;

      // Must be called before shimPeerConnection.
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimAddIceCandidateNullOrEmpty(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimParameterlessSetLocalDescription(window, browserDetails);

      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimGetUserMedia(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimPeerConnection(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimOnTrack(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimRemoveStream(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimSenderGetStats(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimReceiverGetStats(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimRTCDataChannel(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimAddTransceiver(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimGetParameters(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimCreateOffer(window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimCreateAnswer(window, browserDetails);

      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidate(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimConnectionState(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimMaxMessageSize(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimSendThrowTypeError(window, browserDetails);
      break;
    case 'safari':
      if (!_safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__ || !options.shimSafari) {
        logging('Safari shim is not included in this adapter release.');
        return adapter;
      }
      logging('adapter.js shimming safari.');
      // Export to the adapter global object visible in the browser.
      adapter.browserShim = _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__;

      // Must be called before shimCallbackAPI.
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimAddIceCandidateNullOrEmpty(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimParameterlessSetLocalDescription(window, browserDetails);

      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimRTCIceServerUrls(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimCreateOfferLegacy(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimCallbacksAPI(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimLocalStreamsAPI(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimRemoteStreamsAPI(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimTrackEventTransceiver(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimGetUserMedia(window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimAudioContext(window, browserDetails);

      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidate(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimMaxMessageSize(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimSendThrowTypeError(window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_4__.removeExtmapAllowMixed(window, browserDetails);
      break;
    default:
      logging('Unsupported browser!');
      break;
  }

  return adapter;
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js":
/*!******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimGetUserMedia": function() { return /* reexport safe */ _getusermedia__WEBPACK_IMPORTED_MODULE_1__.shimGetUserMedia; },
/* harmony export */   "shimGetDisplayMedia": function() { return /* reexport safe */ _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__.shimGetDisplayMedia; },
/* harmony export */   "shimMediaStream": function() { return /* binding */ shimMediaStream; },
/* harmony export */   "shimOnTrack": function() { return /* binding */ shimOnTrack; },
/* harmony export */   "shimGetSendersWithDtmf": function() { return /* binding */ shimGetSendersWithDtmf; },
/* harmony export */   "shimGetStats": function() { return /* binding */ shimGetStats; },
/* harmony export */   "shimSenderReceiverGetStats": function() { return /* binding */ shimSenderReceiverGetStats; },
/* harmony export */   "shimAddTrackRemoveTrackWithNative": function() { return /* binding */ shimAddTrackRemoveTrackWithNative; },
/* harmony export */   "shimAddTrackRemoveTrack": function() { return /* binding */ shimAddTrackRemoveTrack; },
/* harmony export */   "shimPeerConnection": function() { return /* binding */ shimPeerConnection; },
/* harmony export */   "fixNegotiationNeeded": function() { return /* binding */ fixNegotiationNeeded; }
/* harmony export */ });
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ "./node_modules/webrtc-adapter/src/js/utils.js");
/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getusermedia */ "./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js");
/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getdisplaymedia */ "./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
 /* eslint-env node */






function shimMediaStream(window) {
  window.MediaStream = window.MediaStream || window.webkitMediaStream;
}

function shimOnTrack(window) {
  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in
      window.RTCPeerConnection.prototype)) {
    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {
      get() {
        return this._ontrack;
      },
      set(f) {
        if (this._ontrack) {
          this.removeEventListener('track', this._ontrack);
        }
        this.addEventListener('track', this._ontrack = f);
      },
      enumerable: true,
      configurable: true
    });
    const origSetRemoteDescription =
        window.RTCPeerConnection.prototype.setRemoteDescription;
    window.RTCPeerConnection.prototype.setRemoteDescription =
      function setRemoteDescription() {
        if (!this._ontrackpoly) {
          this._ontrackpoly = (e) => {
            // onaddstream does not fire when a track is added to an existing
            // stream. But stream.onaddtrack is implemented so we use that.
            e.stream.addEventListener('addtrack', te => {
              let receiver;
              if (window.RTCPeerConnection.prototype.getReceivers) {
                receiver = this.getReceivers()
                  .find(r => r.track && r.track.id === te.track.id);
              } else {
                receiver = {track: te.track};
              }

              const event = new Event('track');
              event.track = te.track;
              event.receiver = receiver;
              event.transceiver = {receiver};
              event.streams = [e.stream];
              this.dispatchEvent(event);
            });
            e.stream.getTracks().forEach(track => {
              let receiver;
              if (window.RTCPeerConnection.prototype.getReceivers) {
                receiver = this.getReceivers()
                  .find(r => r.track && r.track.id === track.id);
              } else {
                receiver = {track};
              }
              const event = new Event('track');
              event.track = track;
              event.receiver = receiver;
              event.transceiver = {receiver};
              event.streams = [e.stream];
              this.dispatchEvent(event);
            });
          };
          this.addEventListener('addstream', this._ontrackpoly);
        }
        return origSetRemoteDescription.apply(this, arguments);
      };
  } else {
    // even if RTCRtpTransceiver is in window, it is only used and
    // emitted in unified-plan. Unfortunately this means we need
    // to unconditionally wrap the event.
    _utils_js__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'track', e => {
      if (!e.transceiver) {
        Object.defineProperty(e, 'transceiver',
          {value: {receiver: e.receiver}});
      }
      return e;
    });
  }
}

function shimGetSendersWithDtmf(window) {
  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.
  if (typeof window === 'object' && window.RTCPeerConnection &&
      !('getSenders' in window.RTCPeerConnection.prototype) &&
      'createDTMFSender' in window.RTCPeerConnection.prototype) {
    const shimSenderWithDtmf = function(pc, track) {
      return {
        track,
        get dtmf() {
          if (this._dtmf === undefined) {
            if (track.kind === 'audio') {
              this._dtmf = pc.createDTMFSender(track);
            } else {
              this._dtmf = null;
            }
          }
          return this._dtmf;
        },
        _pc: pc
      };
    };

    // augment addTrack when getSenders is not available.
    if (!window.RTCPeerConnection.prototype.getSenders) {
      window.RTCPeerConnection.prototype.getSenders = function getSenders() {
        this._senders = this._senders || [];
        return this._senders.slice(); // return a copy of the internal state.
      };
      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;
      window.RTCPeerConnection.prototype.addTrack =
        function addTrack(track, stream) {
          let sender = origAddTrack.apply(this, arguments);
          if (!sender) {
            sender = shimSenderWithDtmf(this, track);
            this._senders.push(sender);
          }
          return sender;
        };

      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;
      window.RTCPeerConnection.prototype.removeTrack =
        function removeTrack(sender) {
          origRemoveTrack.apply(this, arguments);
          const idx = this._senders.indexOf(sender);
          if (idx !== -1) {
            this._senders.splice(idx, 1);
          }
        };
    }
    const origAddStream = window.RTCPeerConnection.prototype.addStream;
    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {
      this._senders = this._senders || [];
      origAddStream.apply(this, [stream]);
      stream.getTracks().forEach(track => {
        this._senders.push(shimSenderWithDtmf(this, track));
      });
    };

    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;
    window.RTCPeerConnection.prototype.removeStream =
      function removeStream(stream) {
        this._senders = this._senders || [];
        origRemoveStream.apply(this, [stream]);

        stream.getTracks().forEach(track => {
          const sender = this._senders.find(s => s.track === track);
          if (sender) { // remove sender
            this._senders.splice(this._senders.indexOf(sender), 1);
          }
        });
      };
  } else if (typeof window === 'object' && window.RTCPeerConnection &&
             'getSenders' in window.RTCPeerConnection.prototype &&
             'createDTMFSender' in window.RTCPeerConnection.prototype &&
             window.RTCRtpSender &&
             !('dtmf' in window.RTCRtpSender.prototype)) {
    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;
    window.RTCPeerConnection.prototype.getSenders = function getSenders() {
      const senders = origGetSenders.apply(this, []);
      senders.forEach(sender => sender._pc = this);
      return senders;
    };

    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {
      get() {
        if (this._dtmf === undefined) {
          if (this.track.kind === 'audio') {
            this._dtmf = this._pc.createDTMFSender(this.track);
          } else {
            this._dtmf = null;
          }
        }
        return this._dtmf;
      }
    });
  }
}

function shimGetStats(window) {
  if (!window.RTCPeerConnection) {
    return;
  }

  const origGetStats = window.RTCPeerConnection.prototype.getStats;
  window.RTCPeerConnection.prototype.getStats = function getStats() {
    const [selector, onSucc, onErr] = arguments;

    // If selector is a function then we are in the old style stats so just
    // pass back the original getStats format to avoid breaking old users.
    if (arguments.length > 0 && typeof selector === 'function') {
      return origGetStats.apply(this, arguments);
    }

    // When spec-style getStats is supported, return those when called with
    // either no arguments or the selector argument is null.
    if (origGetStats.length === 0 && (arguments.length === 0 ||
        typeof selector !== 'function')) {
      return origGetStats.apply(this, []);
    }

    const fixChromeStats_ = function(response) {
      const standardReport = {};
      const reports = response.result();
      reports.forEach(report => {
        const standardStats = {
          id: report.id,
          timestamp: report.timestamp,
          type: {
            localcandidate: 'local-candidate',
            remotecandidate: 'remote-candidate'
          }[report.type] || report.type
        };
        report.names().forEach(name => {
          standardStats[name] = report.stat(name);
        });
        standardReport[standardStats.id] = standardStats;
      });

      return standardReport;
    };

    // shim getStats with maplike support
    const makeMapStats = function(stats) {
      return new Map(Object.keys(stats).map(key => [key, stats[key]]));
    };

    if (arguments.length >= 2) {
      const successCallbackWrapper_ = function(response) {
        onSucc(makeMapStats(fixChromeStats_(response)));
      };

      return origGetStats.apply(this, [successCallbackWrapper_,
        selector]);
    }

    // promise-support
    return new Promise((resolve, reject) => {
      origGetStats.apply(this, [
        function(response) {
          resolve(makeMapStats(fixChromeStats_(response)));
        }, reject]);
    }).then(onSucc, onErr);
  };
}

function shimSenderReceiverGetStats(window) {
  if (!(typeof window === 'object' && window.RTCPeerConnection &&
      window.RTCRtpSender && window.RTCRtpReceiver)) {
    return;
  }

  // shim sender stats.
  if (!('getStats' in window.RTCRtpSender.prototype)) {
    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;
    if (origGetSenders) {
      window.RTCPeerConnection.prototype.getSenders = function getSenders() {
        const senders = origGetSenders.apply(this, []);
        senders.forEach(sender => sender._pc = this);
        return senders;
      };
    }

    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;
    if (origAddTrack) {
      window.RTCPeerConnection.prototype.addTrack = function addTrack() {
        const sender = origAddTrack.apply(this, arguments);
        sender._pc = this;
        return sender;
      };
    }
    window.RTCRtpSender.prototype.getStats = function getStats() {
      const sender = this;
      return this._pc.getStats().then(result =>
        /* Note: this will include stats of all senders that
         *   send a track with the same id as sender.track as
         *   it is not possible to identify the RTCRtpSender.
         */
        _utils_js__WEBPACK_IMPORTED_MODULE_0__.filterStats(result, sender.track, true));
    };
  }

  // shim receiver stats.
  if (!('getStats' in window.RTCRtpReceiver.prototype)) {
    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;
    if (origGetReceivers) {
      window.RTCPeerConnection.prototype.getReceivers =
        function getReceivers() {
          const receivers = origGetReceivers.apply(this, []);
          receivers.forEach(receiver => receiver._pc = this);
          return receivers;
        };
    }
    _utils_js__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'track', e => {
      e.receiver._pc = e.srcElement;
      return e;
    });
    window.RTCRtpReceiver.prototype.getStats = function getStats() {
      const receiver = this;
      return this._pc.getStats().then(result =>
        _utils_js__WEBPACK_IMPORTED_MODULE_0__.filterStats(result, receiver.track, false));
    };
  }

  if (!('getStats' in window.RTCRtpSender.prototype &&
      'getStats' in window.RTCRtpReceiver.prototype)) {
    return;
  }

  // shim RTCPeerConnection.getStats(track).
  const origGetStats = window.RTCPeerConnection.prototype.getStats;
  window.RTCPeerConnection.prototype.getStats = function getStats() {
    if (arguments.length > 0 &&
        arguments[0] instanceof window.MediaStreamTrack) {
      const track = arguments[0];
      let sender;
      let receiver;
      let err;
      this.getSenders().forEach(s => {
        if (s.track === track) {
          if (sender) {
            err = true;
          } else {
            sender = s;
          }
        }
      });
      this.getReceivers().forEach(r => {
        if (r.track === track) {
          if (receiver) {
            err = true;
          } else {
            receiver = r;
          }
        }
        return r.track === track;
      });
      if (err || (sender && receiver)) {
        return Promise.reject(new DOMException(
          'There are more than one sender or receiver for the track.',
          'InvalidAccessError'));
      } else if (sender) {
        return sender.getStats();
      } else if (receiver) {
        return receiver.getStats();
      }
      return Promise.reject(new DOMException(
        'There is no sender or receiver for the track.',
        'InvalidAccessError'));
    }
    return origGetStats.apply(this, arguments);
  };
}

function shimAddTrackRemoveTrackWithNative(window) {
  // shim addTrack/removeTrack with native variants in order to make
  // the interactions with legacy getLocalStreams behave as in other browsers.
  // Keeps a mapping stream.id => [stream, rtpsenders...]
  window.RTCPeerConnection.prototype.getLocalStreams =
    function getLocalStreams() {
      this._shimmedLocalStreams = this._shimmedLocalStreams || {};
      return Object.keys(this._shimmedLocalStreams)
        .map(streamId => this._shimmedLocalStreams[streamId][0]);
    };

  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;
  window.RTCPeerConnection.prototype.addTrack =
    function addTrack(track, stream) {
      if (!stream) {
        return origAddTrack.apply(this, arguments);
      }
      this._shimmedLocalStreams = this._shimmedLocalStreams || {};

      const sender = origAddTrack.apply(this, arguments);
      if (!this._shimmedLocalStreams[stream.id]) {
        this._shimmedLocalStreams[stream.id] = [stream, sender];
      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {
        this._shimmedLocalStreams[stream.id].push(sender);
      }
      return sender;
    };

  const origAddStream = window.RTCPeerConnection.prototype.addStream;
  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {
    this._shimmedLocalStreams = this._shimmedLocalStreams || {};

    stream.getTracks().forEach(track => {
      const alreadyExists = this.getSenders().find(s => s.track === track);
      if (alreadyExists) {
        throw new DOMException('Track already exists.',
            'InvalidAccessError');
      }
    });
    const existingSenders = this.getSenders();
    origAddStream.apply(this, arguments);
    const newSenders = this.getSenders()
      .filter(newSender => existingSenders.indexOf(newSender) === -1);
    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);
  };

  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;
  window.RTCPeerConnection.prototype.removeStream =
    function removeStream(stream) {
      this._shimmedLocalStreams = this._shimmedLocalStreams || {};
      delete this._shimmedLocalStreams[stream.id];
      return origRemoveStream.apply(this, arguments);
    };

  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;
  window.RTCPeerConnection.prototype.removeTrack =
    function removeTrack(sender) {
      this._shimmedLocalStreams = this._shimmedLocalStreams || {};
      if (sender) {
        Object.keys(this._shimmedLocalStreams).forEach(streamId => {
          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);
          if (idx !== -1) {
            this._shimmedLocalStreams[streamId].splice(idx, 1);
          }
          if (this._shimmedLocalStreams[streamId].length === 1) {
            delete this._shimmedLocalStreams[streamId];
          }
        });
      }
      return origRemoveTrack.apply(this, arguments);
    };
}

function shimAddTrackRemoveTrack(window, browserDetails) {
  if (!window.RTCPeerConnection) {
    return;
  }
  // shim addTrack and removeTrack.
  if (window.RTCPeerConnection.prototype.addTrack &&
      browserDetails.version >= 65) {
    return shimAddTrackRemoveTrackWithNative(window);
  }

  // also shim pc.getLocalStreams when addTrack is shimmed
  // to return the original streams.
  const origGetLocalStreams = window.RTCPeerConnection.prototype
      .getLocalStreams;
  window.RTCPeerConnection.prototype.getLocalStreams =
    function getLocalStreams() {
      const nativeStreams = origGetLocalStreams.apply(this);
      this._reverseStreams = this._reverseStreams || {};
      return nativeStreams.map(stream => this._reverseStreams[stream.id]);
    };

  const origAddStream = window.RTCPeerConnection.prototype.addStream;
  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {
    this._streams = this._streams || {};
    this._reverseStreams = this._reverseStreams || {};

    stream.getTracks().forEach(track => {
      const alreadyExists = this.getSenders().find(s => s.track === track);
      if (alreadyExists) {
        throw new DOMException('Track already exists.',
            'InvalidAccessError');
      }
    });
    // Add identity mapping for consistency with addTrack.
    // Unless this is being used with a stream from addTrack.
    if (!this._reverseStreams[stream.id]) {
      const newStream = new window.MediaStream(stream.getTracks());
      this._streams[stream.id] = newStream;
      this._reverseStreams[newStream.id] = stream;
      stream = newStream;
    }
    origAddStream.apply(this, [stream]);
  };

  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;
  window.RTCPeerConnection.prototype.removeStream =
    function removeStream(stream) {
      this._streams = this._streams || {};
      this._reverseStreams = this._reverseStreams || {};

      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);
      delete this._reverseStreams[(this._streams[stream.id] ?
          this._streams[stream.id].id : stream.id)];
      delete this._streams[stream.id];
    };

  window.RTCPeerConnection.prototype.addTrack =
    function addTrack(track, stream) {
      if (this.signalingState === 'closed') {
        throw new DOMException(
          'The RTCPeerConnection\'s signalingState is \'closed\'.',
          'InvalidStateError');
      }
      const streams = [].slice.call(arguments, 1);
      if (streams.length !== 1 ||
          !streams[0].getTracks().find(t => t === track)) {
        // this is not fully correct but all we can manage without
        // [[associated MediaStreams]] internal slot.
        throw new DOMException(
          'The adapter.js addTrack polyfill only supports a single ' +
          ' stream which is associated with the specified track.',
          'NotSupportedError');
      }

      const alreadyExists = this.getSenders().find(s => s.track === track);
      if (alreadyExists) {
        throw new DOMException('Track already exists.',
            'InvalidAccessError');
      }

      this._streams = this._streams || {};
      this._reverseStreams = this._reverseStreams || {};
      const oldStream = this._streams[stream.id];
      if (oldStream) {
        // this is using odd Chrome behaviour, use with caution:
        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815
        // Note: we rely on the high-level addTrack/dtmf shim to
        // create the sender with a dtmf sender.
        oldStream.addTrack(track);

        // Trigger ONN async.
        Promise.resolve().then(() => {
          this.dispatchEvent(new Event('negotiationneeded'));
        });
      } else {
        const newStream = new window.MediaStream([track]);
        this._streams[stream.id] = newStream;
        this._reverseStreams[newStream.id] = stream;
        this.addStream(newStream);
      }
      return this.getSenders().find(s => s.track === track);
    };

  // replace the internal stream id with the external one and
  // vice versa.
  function replaceInternalStreamId(pc, description) {
    let sdp = description.sdp;
    Object.keys(pc._reverseStreams || []).forEach(internalId => {
      const externalStream = pc._reverseStreams[internalId];
      const internalStream = pc._streams[externalStream.id];
      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),
          externalStream.id);
    });
    return new RTCSessionDescription({
      type: description.type,
      sdp
    });
  }
  function replaceExternalStreamId(pc, description) {
    let sdp = description.sdp;
    Object.keys(pc._reverseStreams || []).forEach(internalId => {
      const externalStream = pc._reverseStreams[internalId];
      const internalStream = pc._streams[externalStream.id];
      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),
          internalStream.id);
    });
    return new RTCSessionDescription({
      type: description.type,
      sdp
    });
  }
  ['createOffer', 'createAnswer'].forEach(function(method) {
    const nativeMethod = window.RTCPeerConnection.prototype[method];
    const methodObj = {[method]() {
      const args = arguments;
      const isLegacyCall = arguments.length &&
          typeof arguments[0] === 'function';
      if (isLegacyCall) {
        return nativeMethod.apply(this, [
          (description) => {
            const desc = replaceInternalStreamId(this, description);
            args[0].apply(null, [desc]);
          },
          (err) => {
            if (args[1]) {
              args[1].apply(null, err);
            }
          }, arguments[2]
        ]);
      }
      return nativeMethod.apply(this, arguments)
      .then(description => replaceInternalStreamId(this, description));
    }};
    window.RTCPeerConnection.prototype[method] = methodObj[method];
  });

  const origSetLocalDescription =
      window.RTCPeerConnection.prototype.setLocalDescription;
  window.RTCPeerConnection.prototype.setLocalDescription =
    function setLocalDescription() {
      if (!arguments.length || !arguments[0].type) {
        return origSetLocalDescription.apply(this, arguments);
      }
      arguments[0] = replaceExternalStreamId(this, arguments[0]);
      return origSetLocalDescription.apply(this, arguments);
    };

  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier

  const origLocalDescription = Object.getOwnPropertyDescriptor(
      window.RTCPeerConnection.prototype, 'localDescription');
  Object.defineProperty(window.RTCPeerConnection.prototype,
      'localDescription', {
        get() {
          const description = origLocalDescription.get.apply(this);
          if (description.type === '') {
            return description;
          }
          return replaceInternalStreamId(this, description);
        }
      });

  window.RTCPeerConnection.prototype.removeTrack =
    function removeTrack(sender) {
      if (this.signalingState === 'closed') {
        throw new DOMException(
          'The RTCPeerConnection\'s signalingState is \'closed\'.',
          'InvalidStateError');
      }
      // We can not yet check for sender instanceof RTCRtpSender
      // since we shim RTPSender. So we check if sender._pc is set.
      if (!sender._pc) {
        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +
            'does not implement interface RTCRtpSender.', 'TypeError');
      }
      const isLocal = sender._pc === this;
      if (!isLocal) {
        throw new DOMException('Sender was not created by this connection.',
            'InvalidAccessError');
      }

      // Search for the native stream the senders track belongs to.
      this._streams = this._streams || {};
      let stream;
      Object.keys(this._streams).forEach(streamid => {
        const hasTrack = this._streams[streamid].getTracks()
          .find(track => sender.track === track);
        if (hasTrack) {
          stream = this._streams[streamid];
        }
      });

      if (stream) {
        if (stream.getTracks().length === 1) {
          // if this is the last track of the stream, remove the stream. This
          // takes care of any shimmed _senders.
          this.removeStream(this._reverseStreams[stream.id]);
        } else {
          // relying on the same odd chrome behaviour as above.
          stream.removeTrack(sender.track);
        }
        this.dispatchEvent(new Event('negotiationneeded'));
      }
    };
}

function shimPeerConnection(window, browserDetails) {
  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {
    // very basic support for old versions.
    window.RTCPeerConnection = window.webkitRTCPeerConnection;
  }
  if (!window.RTCPeerConnection) {
    return;
  }

  // shim implicit creation of RTCSessionDescription/RTCIceCandidate
  if (browserDetails.version < 53) {
    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']
        .forEach(function(method) {
          const nativeMethod = window.RTCPeerConnection.prototype[method];
          const methodObj = {[method]() {
            arguments[0] = new ((method === 'addIceCandidate') ?
                window.RTCIceCandidate :
                window.RTCSessionDescription)(arguments[0]);
            return nativeMethod.apply(this, arguments);
          }};
          window.RTCPeerConnection.prototype[method] = methodObj[method];
        });
  }
}

// Attempt to fix ONN in plan-b mode.
function fixNegotiationNeeded(window, browserDetails) {
  _utils_js__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {
    const pc = e.target;
    if (browserDetails.version < 72 || (pc.getConfiguration &&
        pc.getConfiguration().sdpSemantics === 'plan-b')) {
      if (pc.signalingState !== 'stable') {
        return;
      }
    }
    return e;
  });
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js":
/*!**********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimGetDisplayMedia": function() { return /* binding */ shimGetDisplayMedia; }
/* harmony export */ });
/*
 *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */

function shimGetDisplayMedia(window, getSourceId) {
  if (window.navigator.mediaDevices &&
    'getDisplayMedia' in window.navigator.mediaDevices) {
    return;
  }
  if (!(window.navigator.mediaDevices)) {
    return;
  }
  // getSourceId is a function that returns a promise resolving with
  // the sourceId of the screen/window/tab to be shared.
  if (typeof getSourceId !== 'function') {
    console.error('shimGetDisplayMedia: getSourceId argument is not ' +
        'a function');
    return;
  }
  window.navigator.mediaDevices.getDisplayMedia =
    function getDisplayMedia(constraints) {
      return getSourceId(constraints)
        .then(sourceId => {
          const widthSpecified = constraints.video && constraints.video.width;
          const heightSpecified = constraints.video &&
            constraints.video.height;
          const frameRateSpecified = constraints.video &&
            constraints.video.frameRate;
          constraints.video = {
            mandatory: {
              chromeMediaSource: 'desktop',
              chromeMediaSourceId: sourceId,
              maxFrameRate: frameRateSpecified || 3
            }
          };
          if (widthSpecified) {
            constraints.video.mandatory.maxWidth = widthSpecified;
          }
          if (heightSpecified) {
            constraints.video.mandatory.maxHeight = heightSpecified;
          }
          return window.navigator.mediaDevices.getUserMedia(constraints);
        });
    };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js":
/*!*******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimGetUserMedia": function() { return /* binding */ shimGetUserMedia; }
/* harmony export */ });
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */


const logging = _utils_js__WEBPACK_IMPORTED_MODULE_0__.log;

function shimGetUserMedia(window, browserDetails) {
  const navigator = window && window.navigator;

  if (!navigator.mediaDevices) {
    return;
  }

  const constraintsToChrome_ = function(c) {
    if (typeof c !== 'object' || c.mandatory || c.optional) {
      return c;
    }
    const cc = {};
    Object.keys(c).forEach(key => {
      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {
        return;
      }
      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};
      if (r.exact !== undefined && typeof r.exact === 'number') {
        r.min = r.max = r.exact;
      }
      const oldname_ = function(prefix, name) {
        if (prefix) {
          return prefix + name.charAt(0).toUpperCase() + name.slice(1);
        }
        return (name === 'deviceId') ? 'sourceId' : name;
      };
      if (r.ideal !== undefined) {
        cc.optional = cc.optional || [];
        let oc = {};
        if (typeof r.ideal === 'number') {
          oc[oldname_('min', key)] = r.ideal;
          cc.optional.push(oc);
          oc = {};
          oc[oldname_('max', key)] = r.ideal;
          cc.optional.push(oc);
        } else {
          oc[oldname_('', key)] = r.ideal;
          cc.optional.push(oc);
        }
      }
      if (r.exact !== undefined && typeof r.exact !== 'number') {
        cc.mandatory = cc.mandatory || {};
        cc.mandatory[oldname_('', key)] = r.exact;
      } else {
        ['min', 'max'].forEach(mix => {
          if (r[mix] !== undefined) {
            cc.mandatory = cc.mandatory || {};
            cc.mandatory[oldname_(mix, key)] = r[mix];
          }
        });
      }
    });
    if (c.advanced) {
      cc.optional = (cc.optional || []).concat(c.advanced);
    }
    return cc;
  };

  const shimConstraints_ = function(constraints, func) {
    if (browserDetails.version >= 61) {
      return func(constraints);
    }
    constraints = JSON.parse(JSON.stringify(constraints));
    if (constraints && typeof constraints.audio === 'object') {
      const remap = function(obj, a, b) {
        if (a in obj && !(b in obj)) {
          obj[b] = obj[a];
          delete obj[a];
        }
      };
      constraints = JSON.parse(JSON.stringify(constraints));
      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');
      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');
      constraints.audio = constraintsToChrome_(constraints.audio);
    }
    if (constraints && typeof constraints.video === 'object') {
      // Shim facingMode for mobile & surface pro.
      let face = constraints.video.facingMode;
      face = face && ((typeof face === 'object') ? face : {ideal: face});
      const getSupportedFacingModeLies = browserDetails.version < 66;

      if ((face && (face.exact === 'user' || face.exact === 'environment' ||
                    face.ideal === 'user' || face.ideal === 'environment')) &&
          !(navigator.mediaDevices.getSupportedConstraints &&
            navigator.mediaDevices.getSupportedConstraints().facingMode &&
            !getSupportedFacingModeLies)) {
        delete constraints.video.facingMode;
        let matches;
        if (face.exact === 'environment' || face.ideal === 'environment') {
          matches = ['back', 'rear'];
        } else if (face.exact === 'user' || face.ideal === 'user') {
          matches = ['front'];
        }
        if (matches) {
          // Look for matches in label, or use last cam for back (typical).
          return navigator.mediaDevices.enumerateDevices()
          .then(devices => {
            devices = devices.filter(d => d.kind === 'videoinput');
            let dev = devices.find(d => matches.some(match =>
              d.label.toLowerCase().includes(match)));
            if (!dev && devices.length && matches.includes('back')) {
              dev = devices[devices.length - 1]; // more likely the back cam
            }
            if (dev) {
              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :
                                                        {ideal: dev.deviceId};
            }
            constraints.video = constraintsToChrome_(constraints.video);
            logging('chrome: ' + JSON.stringify(constraints));
            return func(constraints);
          });
        }
      }
      constraints.video = constraintsToChrome_(constraints.video);
    }
    logging('chrome: ' + JSON.stringify(constraints));
    return func(constraints);
  };

  const shimError_ = function(e) {
    if (browserDetails.version >= 64) {
      return e;
    }
    return {
      name: {
        PermissionDeniedError: 'NotAllowedError',
        PermissionDismissedError: 'NotAllowedError',
        InvalidStateError: 'NotAllowedError',
        DevicesNotFoundError: 'NotFoundError',
        ConstraintNotSatisfiedError: 'OverconstrainedError',
        TrackStartError: 'NotReadableError',
        MediaDeviceFailedDueToShutdown: 'NotAllowedError',
        MediaDeviceKillSwitchOn: 'NotAllowedError',
        TabCaptureError: 'AbortError',
        ScreenCaptureError: 'AbortError',
        DeviceCaptureError: 'AbortError'
      }[e.name] || e.name,
      message: e.message,
      constraint: e.constraint || e.constraintName,
      toString() {
        return this.name + (this.message && ': ') + this.message;
      }
    };
  };

  const getUserMedia_ = function(constraints, onSuccess, onError) {
    shimConstraints_(constraints, c => {
      navigator.webkitGetUserMedia(c, onSuccess, e => {
        if (onError) {
          onError(shimError_(e));
        }
      });
    });
  };
  navigator.getUserMedia = getUserMedia_.bind(navigator);

  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia
  // function which returns a Promise, it does not accept spec-style
  // constraints.
  if (navigator.mediaDevices.getUserMedia) {
    const origGetUserMedia = navigator.mediaDevices.getUserMedia.
        bind(navigator.mediaDevices);
    navigator.mediaDevices.getUserMedia = function(cs) {
      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {
        if (c.audio && !stream.getAudioTracks().length ||
            c.video && !stream.getVideoTracks().length) {
          stream.getTracks().forEach(track => {
            track.stop();
          });
          throw new DOMException('', 'NotFoundError');
        }
        return stream;
      }, e => Promise.reject(shimError_(e))));
    };
  }
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/common_shim.js":
/*!***********************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/common_shim.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimRTCIceCandidate": function() { return /* binding */ shimRTCIceCandidate; },
/* harmony export */   "shimMaxMessageSize": function() { return /* binding */ shimMaxMessageSize; },
/* harmony export */   "shimSendThrowTypeError": function() { return /* binding */ shimSendThrowTypeError; },
/* harmony export */   "shimConnectionState": function() { return /* binding */ shimConnectionState; },
/* harmony export */   "removeExtmapAllowMixed": function() { return /* binding */ removeExtmapAllowMixed; },
/* harmony export */   "shimAddIceCandidateNullOrEmpty": function() { return /* binding */ shimAddIceCandidateNullOrEmpty; },
/* harmony export */   "shimParameterlessSetLocalDescription": function() { return /* binding */ shimParameterlessSetLocalDescription; }
/* harmony export */ });
/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sdp */ "./node_modules/sdp/sdp.js");
/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sdp__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */





function shimRTCIceCandidate(window) {
  // foundation is arbitrarily chosen as an indicator for full support for
  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface
  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in
      window.RTCIceCandidate.prototype)) {
    return;
  }

  const NativeRTCIceCandidate = window.RTCIceCandidate;
  window.RTCIceCandidate = function RTCIceCandidate(args) {
    // Remove the a= which shouldn't be part of the candidate string.
    if (typeof args === 'object' && args.candidate &&
        args.candidate.indexOf('a=') === 0) {
      args = JSON.parse(JSON.stringify(args));
      args.candidate = args.candidate.substr(2);
    }

    if (args.candidate && args.candidate.length) {
      // Augment the native candidate with the parsed fields.
      const nativeCandidate = new NativeRTCIceCandidate(args);
      const parsedCandidate = sdp__WEBPACK_IMPORTED_MODULE_0___default().parseCandidate(args.candidate);
      const augmentedCandidate = Object.assign(nativeCandidate,
          parsedCandidate);

      // Add a serializer that does not serialize the extra attributes.
      augmentedCandidate.toJSON = function toJSON() {
        return {
          candidate: augmentedCandidate.candidate,
          sdpMid: augmentedCandidate.sdpMid,
          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,
          usernameFragment: augmentedCandidate.usernameFragment,
        };
      };
      return augmentedCandidate;
    }
    return new NativeRTCIceCandidate(args);
  };
  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;

  // Hook up the augmented candidate in onicecandidate and
  // addEventListener('icecandidate', ...)
  _utils__WEBPACK_IMPORTED_MODULE_1__.wrapPeerConnectionEvent(window, 'icecandidate', e => {
    if (e.candidate) {
      Object.defineProperty(e, 'candidate', {
        value: new window.RTCIceCandidate(e.candidate),
        writable: 'false'
      });
    }
    return e;
  });
}

function shimMaxMessageSize(window, browserDetails) {
  if (!window.RTCPeerConnection) {
    return;
  }

  if (!('sctp' in window.RTCPeerConnection.prototype)) {
    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {
      get() {
        return typeof this._sctp === 'undefined' ? null : this._sctp;
      }
    });
  }

  const sctpInDescription = function(description) {
    if (!description || !description.sdp) {
      return false;
    }
    const sections = sdp__WEBPACK_IMPORTED_MODULE_0___default().splitSections(description.sdp);
    sections.shift();
    return sections.some(mediaSection => {
      const mLine = sdp__WEBPACK_IMPORTED_MODULE_0___default().parseMLine(mediaSection);
      return mLine && mLine.kind === 'application'
          && mLine.protocol.indexOf('SCTP') !== -1;
    });
  };

  const getRemoteFirefoxVersion = function(description) {
    // TODO: Is there a better solution for detecting Firefox?
    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);
    if (match === null || match.length < 2) {
      return -1;
    }
    const version = parseInt(match[1], 10);
    // Test for NaN (yes, this is ugly)
    return version !== version ? -1 : version;
  };

  const getCanSendMaxMessageSize = function(remoteIsFirefox) {
    // Every implementation we know can send at least 64 KiB.
    // Note: Although Chrome is technically able to send up to 256 KiB, the
    //       data does not reach the other peer reliably.
    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419
    let canSendMaxMessageSize = 65536;
    if (browserDetails.browser === 'firefox') {
      if (browserDetails.version < 57) {
        if (remoteIsFirefox === -1) {
          // FF < 57 will send in 16 KiB chunks using the deprecated PPID
          // fragmentation.
          canSendMaxMessageSize = 16384;
        } else {
          // However, other FF (and RAWRTC) can reassemble PPID-fragmented
          // messages. Thus, supporting ~2 GiB when sending.
          canSendMaxMessageSize = 2147483637;
        }
      } else if (browserDetails.version < 60) {
        // Currently, all FF >= 57 will reset the remote maximum message size
        // to the default value when a data channel is created at a later
        // stage. :(
        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831
        canSendMaxMessageSize =
          browserDetails.version === 57 ? 65535 : 65536;
      } else {
        // FF >= 60 supports sending ~2 GiB
        canSendMaxMessageSize = 2147483637;
      }
    }
    return canSendMaxMessageSize;
  };

  const getMaxMessageSize = function(description, remoteIsFirefox) {
    // Note: 65536 bytes is the default value from the SDP spec. Also,
    //       every implementation we know supports receiving 65536 bytes.
    let maxMessageSize = 65536;

    // FF 57 has a slightly incorrect default remote max message size, so
    // we need to adjust it here to avoid a failure when sending.
    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697
    if (browserDetails.browser === 'firefox'
         && browserDetails.version === 57) {
      maxMessageSize = 65535;
    }

    const match = sdp__WEBPACK_IMPORTED_MODULE_0___default().matchPrefix(description.sdp,
      'a=max-message-size:');
    if (match.length > 0) {
      maxMessageSize = parseInt(match[0].substr(19), 10);
    } else if (browserDetails.browser === 'firefox' &&
                remoteIsFirefox !== -1) {
      // If the maximum message size is not present in the remote SDP and
      // both local and remote are Firefox, the remote peer can receive
      // ~2 GiB.
      maxMessageSize = 2147483637;
    }
    return maxMessageSize;
  };

  const origSetRemoteDescription =
      window.RTCPeerConnection.prototype.setRemoteDescription;
  window.RTCPeerConnection.prototype.setRemoteDescription =
    function setRemoteDescription() {
      this._sctp = null;
      // Chrome decided to not expose .sctp in plan-b mode.
      // As usual, adapter.js has to do an 'ugly worakaround'
      // to cover up the mess.
      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {
        const {sdpSemantics} = this.getConfiguration();
        if (sdpSemantics === 'plan-b') {
          Object.defineProperty(this, 'sctp', {
            get() {
              return typeof this._sctp === 'undefined' ? null : this._sctp;
            },
            enumerable: true,
            configurable: true,
          });
        }
      }

      if (sctpInDescription(arguments[0])) {
        // Check if the remote is FF.
        const isFirefox = getRemoteFirefoxVersion(arguments[0]);

        // Get the maximum message size the local peer is capable of sending
        const canSendMMS = getCanSendMaxMessageSize(isFirefox);

        // Get the maximum message size of the remote peer.
        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);

        // Determine final maximum message size
        let maxMessageSize;
        if (canSendMMS === 0 && remoteMMS === 0) {
          maxMessageSize = Number.POSITIVE_INFINITY;
        } else if (canSendMMS === 0 || remoteMMS === 0) {
          maxMessageSize = Math.max(canSendMMS, remoteMMS);
        } else {
          maxMessageSize = Math.min(canSendMMS, remoteMMS);
        }

        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'
        // attribute.
        const sctp = {};
        Object.defineProperty(sctp, 'maxMessageSize', {
          get() {
            return maxMessageSize;
          }
        });
        this._sctp = sctp;
      }

      return origSetRemoteDescription.apply(this, arguments);
    };
}

function shimSendThrowTypeError(window) {
  if (!(window.RTCPeerConnection &&
      'createDataChannel' in window.RTCPeerConnection.prototype)) {
    return;
  }

  // Note: Although Firefox >= 57 has a native implementation, the maximum
  //       message size can be reset for all data channels at a later stage.
  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831

  function wrapDcSend(dc, pc) {
    const origDataChannelSend = dc.send;
    dc.send = function send() {
      const data = arguments[0];
      const length = data.length || data.size || data.byteLength;
      if (dc.readyState === 'open' &&
          pc.sctp && length > pc.sctp.maxMessageSize) {
        throw new TypeError('Message too large (can send a maximum of ' +
          pc.sctp.maxMessageSize + ' bytes)');
      }
      return origDataChannelSend.apply(dc, arguments);
    };
  }
  const origCreateDataChannel =
    window.RTCPeerConnection.prototype.createDataChannel;
  window.RTCPeerConnection.prototype.createDataChannel =
    function createDataChannel() {
      const dataChannel = origCreateDataChannel.apply(this, arguments);
      wrapDcSend(dataChannel, this);
      return dataChannel;
    };
  _utils__WEBPACK_IMPORTED_MODULE_1__.wrapPeerConnectionEvent(window, 'datachannel', e => {
    wrapDcSend(e.channel, e.target);
    return e;
  });
}


/* shims RTCConnectionState by pretending it is the same as iceConnectionState.
 * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12
 * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect
 * since DTLS failures would be hidden. See
 * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827
 * for the Firefox tracking bug.
 */
function shimConnectionState(window) {
  if (!window.RTCPeerConnection ||
      'connectionState' in window.RTCPeerConnection.prototype) {
    return;
  }
  const proto = window.RTCPeerConnection.prototype;
  Object.defineProperty(proto, 'connectionState', {
    get() {
      return {
        completed: 'connected',
        checking: 'connecting'
      }[this.iceConnectionState] || this.iceConnectionState;
    },
    enumerable: true,
    configurable: true
  });
  Object.defineProperty(proto, 'onconnectionstatechange', {
    get() {
      return this._onconnectionstatechange || null;
    },
    set(cb) {
      if (this._onconnectionstatechange) {
        this.removeEventListener('connectionstatechange',
            this._onconnectionstatechange);
        delete this._onconnectionstatechange;
      }
      if (cb) {
        this.addEventListener('connectionstatechange',
            this._onconnectionstatechange = cb);
      }
    },
    enumerable: true,
    configurable: true
  });

  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {
    const origMethod = proto[method];
    proto[method] = function() {
      if (!this._connectionstatechangepoly) {
        this._connectionstatechangepoly = e => {
          const pc = e.target;
          if (pc._lastConnectionState !== pc.connectionState) {
            pc._lastConnectionState = pc.connectionState;
            const newEvent = new Event('connectionstatechange', e);
            pc.dispatchEvent(newEvent);
          }
          return e;
        };
        this.addEventListener('iceconnectionstatechange',
          this._connectionstatechangepoly);
      }
      return origMethod.apply(this, arguments);
    };
  });
}

function removeExtmapAllowMixed(window, browserDetails) {
  /* remove a=extmap-allow-mixed for webrtc.org < M71 */
  if (!window.RTCPeerConnection) {
    return;
  }
  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {
    return;
  }
  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {
    return;
  }
  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;
  window.RTCPeerConnection.prototype.setRemoteDescription =
  function setRemoteDescription(desc) {
    if (desc && desc.sdp && desc.sdp.indexOf('\na=extmap-allow-mixed') !== -1) {
      const sdp = desc.sdp.split('\n').filter((line) => {
        return line.trim() !== 'a=extmap-allow-mixed';
      }).join('\n');
      // Safari enforces read-only-ness of RTCSessionDescription fields.
      if (window.RTCSessionDescription &&
          desc instanceof window.RTCSessionDescription) {
        arguments[0] = new window.RTCSessionDescription({
          type: desc.type,
          sdp,
        });
      } else {
        desc.sdp = sdp;
      }
    }
    return nativeSRD.apply(this, arguments);
  };
}

function shimAddIceCandidateNullOrEmpty(window, browserDetails) {
  // Support for addIceCandidate(null or undefined)
  // as well as addIceCandidate({candidate: "", ...})
  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582
  // Note: must be called before other polyfills which change the signature.
  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {
    return;
  }
  const nativeAddIceCandidate =
      window.RTCPeerConnection.prototype.addIceCandidate;
  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {
    return;
  }
  window.RTCPeerConnection.prototype.addIceCandidate =
    function addIceCandidate() {
      if (!arguments[0]) {
        if (arguments[1]) {
          arguments[1].apply(null);
        }
        return Promise.resolve();
      }
      // Firefox 68+ emits and processes {candidate: "", ...}, ignore
      // in older versions.
      // Native support for ignoring exists for Chrome M77+.
      // Safari ignores as well, exact version unknown but works in the same
      // version that also ignores addIceCandidate(null).
      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)
           || (browserDetails.browser === 'firefox'
               && browserDetails.version < 68)
           || (browserDetails.browser === 'safari'))
          && arguments[0] && arguments[0].candidate === '') {
        return Promise.resolve();
      }
      return nativeAddIceCandidate.apply(this, arguments);
    };
}

// Note: Make sure to call this ahead of APIs that modify
// setLocalDescription.length
function shimParameterlessSetLocalDescription(window, browserDetails) {
  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {
    return;
  }
  const nativeSetLocalDescription =
      window.RTCPeerConnection.prototype.setLocalDescription;
  if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {
    return;
  }
  window.RTCPeerConnection.prototype.setLocalDescription =
    function setLocalDescription() {
      let desc = arguments[0] || {};
      if (typeof desc !== 'object' || (desc.type && desc.sdp)) {
        return nativeSetLocalDescription.apply(this, arguments);
      }
      // The remaining steps should technically happen when SLD comes off the
      // RTCPeerConnection's operations chain (not ahead of going on it), but
      // this is too difficult to shim. Instead, this shim only covers the
      // common case where the operations chain is empty. This is imperfect, but
      // should cover many cases. Rationale: Even if we can't reduce the glare
      // window to zero on imperfect implementations, there's value in tapping
      // into the perfect negotiation pattern that several browsers support.
      desc = {type: desc.type, sdp: desc.sdp};
      if (!desc.type) {
        switch (this.signalingState) {
          case 'stable':
          case 'have-local-offer':
          case 'have-remote-pranswer':
            desc.type = 'offer';
            break;
          default:
            desc.type = 'answer';
            break;
        }
      }
      if (desc.sdp || (desc.type !== 'offer' && desc.type !== 'answer')) {
        return nativeSetLocalDescription.apply(this, [desc]);
      }
      const func = desc.type === 'offer' ? this.createOffer : this.createAnswer;
      return func.apply(this)
        .then(d => nativeSetLocalDescription.apply(this, [d]));
    };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimGetUserMedia": function() { return /* reexport safe */ _getusermedia__WEBPACK_IMPORTED_MODULE_1__.shimGetUserMedia; },
/* harmony export */   "shimGetDisplayMedia": function() { return /* reexport safe */ _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__.shimGetDisplayMedia; },
/* harmony export */   "shimOnTrack": function() { return /* binding */ shimOnTrack; },
/* harmony export */   "shimPeerConnection": function() { return /* binding */ shimPeerConnection; },
/* harmony export */   "shimSenderGetStats": function() { return /* binding */ shimSenderGetStats; },
/* harmony export */   "shimReceiverGetStats": function() { return /* binding */ shimReceiverGetStats; },
/* harmony export */   "shimRemoveStream": function() { return /* binding */ shimRemoveStream; },
/* harmony export */   "shimRTCDataChannel": function() { return /* binding */ shimRTCDataChannel; },
/* harmony export */   "shimAddTransceiver": function() { return /* binding */ shimAddTransceiver; },
/* harmony export */   "shimGetParameters": function() { return /* binding */ shimGetParameters; },
/* harmony export */   "shimCreateOffer": function() { return /* binding */ shimCreateOffer; },
/* harmony export */   "shimCreateAnswer": function() { return /* binding */ shimCreateAnswer; }
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getusermedia */ "./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js");
/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getdisplaymedia */ "./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */






function shimOnTrack(window) {
  if (typeof window === 'object' && window.RTCTrackEvent &&
      ('receiver' in window.RTCTrackEvent.prototype) &&
      !('transceiver' in window.RTCTrackEvent.prototype)) {
    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {
      get() {
        return {receiver: this.receiver};
      }
    });
  }
}

function shimPeerConnection(window, browserDetails) {
  if (typeof window !== 'object' ||
      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {
    return; // probably media.peerconnection.enabled=false in about:config
  }
  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {
    // very basic support for old versions.
    window.RTCPeerConnection = window.mozRTCPeerConnection;
  }

  if (browserDetails.version < 53) {
    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.
    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']
        .forEach(function(method) {
          const nativeMethod = window.RTCPeerConnection.prototype[method];
          const methodObj = {[method]() {
            arguments[0] = new ((method === 'addIceCandidate') ?
                window.RTCIceCandidate :
                window.RTCSessionDescription)(arguments[0]);
            return nativeMethod.apply(this, arguments);
          }};
          window.RTCPeerConnection.prototype[method] = methodObj[method];
        });
  }

  const modernStatsTypes = {
    inboundrtp: 'inbound-rtp',
    outboundrtp: 'outbound-rtp',
    candidatepair: 'candidate-pair',
    localcandidate: 'local-candidate',
    remotecandidate: 'remote-candidate'
  };

  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;
  window.RTCPeerConnection.prototype.getStats = function getStats() {
    const [selector, onSucc, onErr] = arguments;
    return nativeGetStats.apply(this, [selector || null])
      .then(stats => {
        if (browserDetails.version < 53 && !onSucc) {
          // Shim only promise getStats with spec-hyphens in type names
          // Leave callback version alone; misc old uses of forEach before Map
          try {
            stats.forEach(stat => {
              stat.type = modernStatsTypes[stat.type] || stat.type;
            });
          } catch (e) {
            if (e.name !== 'TypeError') {
              throw e;
            }
            // Avoid TypeError: "type" is read-only, in old versions. 34-43ish
            stats.forEach((stat, i) => {
              stats.set(i, Object.assign({}, stat, {
                type: modernStatsTypes[stat.type] || stat.type
              }));
            });
          }
        }
        return stats;
      })
      .then(onSucc, onErr);
  };
}

function shimSenderGetStats(window) {
  if (!(typeof window === 'object' && window.RTCPeerConnection &&
      window.RTCRtpSender)) {
    return;
  }
  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {
    return;
  }
  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;
  if (origGetSenders) {
    window.RTCPeerConnection.prototype.getSenders = function getSenders() {
      const senders = origGetSenders.apply(this, []);
      senders.forEach(sender => sender._pc = this);
      return senders;
    };
  }

  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;
  if (origAddTrack) {
    window.RTCPeerConnection.prototype.addTrack = function addTrack() {
      const sender = origAddTrack.apply(this, arguments);
      sender._pc = this;
      return sender;
    };
  }
  window.RTCRtpSender.prototype.getStats = function getStats() {
    return this.track ? this._pc.getStats(this.track) :
        Promise.resolve(new Map());
  };
}

function shimReceiverGetStats(window) {
  if (!(typeof window === 'object' && window.RTCPeerConnection &&
      window.RTCRtpSender)) {
    return;
  }
  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {
    return;
  }
  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;
  if (origGetReceivers) {
    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {
      const receivers = origGetReceivers.apply(this, []);
      receivers.forEach(receiver => receiver._pc = this);
      return receivers;
    };
  }
  _utils__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'track', e => {
    e.receiver._pc = e.srcElement;
    return e;
  });
  window.RTCRtpReceiver.prototype.getStats = function getStats() {
    return this._pc.getStats(this.track);
  };
}

function shimRemoveStream(window) {
  if (!window.RTCPeerConnection ||
      'removeStream' in window.RTCPeerConnection.prototype) {
    return;
  }
  window.RTCPeerConnection.prototype.removeStream =
    function removeStream(stream) {
      _utils__WEBPACK_IMPORTED_MODULE_0__.deprecated('removeStream', 'removeTrack');
      this.getSenders().forEach(sender => {
        if (sender.track && stream.getTracks().includes(sender.track)) {
          this.removeTrack(sender);
        }
      });
    };
}

function shimRTCDataChannel(window) {
  // rename DataChannel to RTCDataChannel (native fix in FF60):
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851
  if (window.DataChannel && !window.RTCDataChannel) {
    window.RTCDataChannel = window.DataChannel;
  }
}

function shimAddTransceiver(window) {
  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647
  // Firefox ignores the init sendEncodings options passed to addTransceiver
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918
  if (!(typeof window === 'object' && window.RTCPeerConnection)) {
    return;
  }
  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;
  if (origAddTransceiver) {
    window.RTCPeerConnection.prototype.addTransceiver =
      function addTransceiver() {
        this.setParametersPromises = [];
        const initParameters = arguments[1];
        const shouldPerformCheck = initParameters &&
                                  'sendEncodings' in initParameters;
        if (shouldPerformCheck) {
          // If sendEncodings params are provided, validate grammar
          initParameters.sendEncodings.forEach((encodingParam) => {
            if ('rid' in encodingParam) {
              const ridRegex = /^[a-z0-9]{0,16}$/i;
              if (!ridRegex.test(encodingParam.rid)) {
                throw new TypeError('Invalid RID value provided.');
              }
            }
            if ('scaleResolutionDownBy' in encodingParam) {
              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {
                throw new RangeError('scale_resolution_down_by must be >= 1.0');
              }
            }
            if ('maxFramerate' in encodingParam) {
              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {
                throw new RangeError('max_framerate must be >= 0.0');
              }
            }
          });
        }
        const transceiver = origAddTransceiver.apply(this, arguments);
        if (shouldPerformCheck) {
          // Check if the init options were applied. If not we do this in an
          // asynchronous way and save the promise reference in a global object.
          // This is an ugly hack, but at the same time is way more robust than
          // checking the sender parameters before and after the createOffer
          // Also note that after the createoffer we are not 100% sure that
          // the params were asynchronously applied so we might miss the
          // opportunity to recreate offer.
          const {sender} = transceiver;
          const params = sender.getParameters();
          if (!('encodings' in params) ||
              // Avoid being fooled by patched getParameters() below.
              (params.encodings.length === 1 &&
               Object.keys(params.encodings[0]).length === 0)) {
            params.encodings = initParameters.sendEncodings;
            sender.sendEncodings = initParameters.sendEncodings;
            this.setParametersPromises.push(sender.setParameters(params)
              .then(() => {
                delete sender.sendEncodings;
              }).catch(() => {
                delete sender.sendEncodings;
              })
            );
          }
        }
        return transceiver;
      };
  }
}

function shimGetParameters(window) {
  if (!(typeof window === 'object' && window.RTCRtpSender)) {
    return;
  }
  const origGetParameters = window.RTCRtpSender.prototype.getParameters;
  if (origGetParameters) {
    window.RTCRtpSender.prototype.getParameters =
      function getParameters() {
        const params = origGetParameters.apply(this, arguments);
        if (!('encodings' in params)) {
          params.encodings = [].concat(this.sendEncodings || [{}]);
        }
        return params;
      };
  }
}

function shimCreateOffer(window) {
  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647
  // Firefox ignores the init sendEncodings options passed to addTransceiver
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918
  if (!(typeof window === 'object' && window.RTCPeerConnection)) {
    return;
  }
  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;
  window.RTCPeerConnection.prototype.createOffer = function createOffer() {
    if (this.setParametersPromises && this.setParametersPromises.length) {
      return Promise.all(this.setParametersPromises)
      .then(() => {
        return origCreateOffer.apply(this, arguments);
      })
      .finally(() => {
        this.setParametersPromises = [];
      });
    }
    return origCreateOffer.apply(this, arguments);
  };
}

function shimCreateAnswer(window) {
  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647
  // Firefox ignores the init sendEncodings options passed to addTransceiver
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918
  if (!(typeof window === 'object' && window.RTCPeerConnection)) {
    return;
  }
  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;
  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {
    if (this.setParametersPromises && this.setParametersPromises.length) {
      return Promise.all(this.setParametersPromises)
      .then(() => {
        return origCreateAnswer.apply(this, arguments);
      })
      .finally(() => {
        this.setParametersPromises = [];
      });
    }
    return origCreateAnswer.apply(this, arguments);
  };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js":
/*!***********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimGetDisplayMedia": function() { return /* binding */ shimGetDisplayMedia; }
/* harmony export */ });
/*
 *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */


function shimGetDisplayMedia(window, preferredMediaSource) {
  if (window.navigator.mediaDevices &&
    'getDisplayMedia' in window.navigator.mediaDevices) {
    return;
  }
  if (!(window.navigator.mediaDevices)) {
    return;
  }
  window.navigator.mediaDevices.getDisplayMedia =
    function getDisplayMedia(constraints) {
      if (!(constraints && constraints.video)) {
        const err = new DOMException('getDisplayMedia without video ' +
            'constraints is undefined');
        err.name = 'NotFoundError';
        // from https://heycam.github.io/webidl/#idl-DOMException-error-names
        err.code = 8;
        return Promise.reject(err);
      }
      if (constraints.video === true) {
        constraints.video = {mediaSource: preferredMediaSource};
      } else {
        constraints.video.mediaSource = preferredMediaSource;
      }
      return window.navigator.mediaDevices.getUserMedia(constraints);
    };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimGetUserMedia": function() { return /* binding */ shimGetUserMedia; }
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */




function shimGetUserMedia(window, browserDetails) {
  const navigator = window && window.navigator;
  const MediaStreamTrack = window && window.MediaStreamTrack;

  navigator.getUserMedia = function(constraints, onSuccess, onError) {
    // Replace Firefox 44+'s deprecation warning with unprefixed version.
    _utils__WEBPACK_IMPORTED_MODULE_0__.deprecated('navigator.getUserMedia',
        'navigator.mediaDevices.getUserMedia');
    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);
  };

  if (!(browserDetails.version > 55 &&
      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {
    const remap = function(obj, a, b) {
      if (a in obj && !(b in obj)) {
        obj[b] = obj[a];
        delete obj[a];
      }
    };

    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.
        bind(navigator.mediaDevices);
    navigator.mediaDevices.getUserMedia = function(c) {
      if (typeof c === 'object' && typeof c.audio === 'object') {
        c = JSON.parse(JSON.stringify(c));
        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');
        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');
      }
      return nativeGetUserMedia(c);
    };

    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {
      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;
      MediaStreamTrack.prototype.getSettings = function() {
        const obj = nativeGetSettings.apply(this, arguments);
        remap(obj, 'mozAutoGainControl', 'autoGainControl');
        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');
        return obj;
      };
    }

    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {
      const nativeApplyConstraints =
        MediaStreamTrack.prototype.applyConstraints;
      MediaStreamTrack.prototype.applyConstraints = function(c) {
        if (this.kind === 'audio' && typeof c === 'object') {
          c = JSON.parse(JSON.stringify(c));
          remap(c, 'autoGainControl', 'mozAutoGainControl');
          remap(c, 'noiseSuppression', 'mozNoiseSuppression');
        }
        return nativeApplyConstraints.apply(this, [c]);
      };
    }
  }
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/safari/safari_shim.js":
/*!******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/safari/safari_shim.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "shimLocalStreamsAPI": function() { return /* binding */ shimLocalStreamsAPI; },
/* harmony export */   "shimRemoteStreamsAPI": function() { return /* binding */ shimRemoteStreamsAPI; },
/* harmony export */   "shimCallbacksAPI": function() { return /* binding */ shimCallbacksAPI; },
/* harmony export */   "shimGetUserMedia": function() { return /* binding */ shimGetUserMedia; },
/* harmony export */   "shimConstraints": function() { return /* binding */ shimConstraints; },
/* harmony export */   "shimRTCIceServerUrls": function() { return /* binding */ shimRTCIceServerUrls; },
/* harmony export */   "shimTrackEventTransceiver": function() { return /* binding */ shimTrackEventTransceiver; },
/* harmony export */   "shimCreateOfferLegacy": function() { return /* binding */ shimCreateOfferLegacy; },
/* harmony export */   "shimAudioContext": function() { return /* binding */ shimAudioContext; }
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */



function shimLocalStreamsAPI(window) {
  if (typeof window !== 'object' || !window.RTCPeerConnection) {
    return;
  }
  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {
    window.RTCPeerConnection.prototype.getLocalStreams =
      function getLocalStreams() {
        if (!this._localStreams) {
          this._localStreams = [];
        }
        return this._localStreams;
      };
  }
  if (!('addStream' in window.RTCPeerConnection.prototype)) {
    const _addTrack = window.RTCPeerConnection.prototype.addTrack;
    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {
      if (!this._localStreams) {
        this._localStreams = [];
      }
      if (!this._localStreams.includes(stream)) {
        this._localStreams.push(stream);
      }
      // Try to emulate Chrome's behaviour of adding in audio-video order.
      // Safari orders by track id.
      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,
        stream));
      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,
        stream));
    };

    window.RTCPeerConnection.prototype.addTrack =
      function addTrack(track, ...streams) {
        if (streams) {
          streams.forEach((stream) => {
            if (!this._localStreams) {
              this._localStreams = [stream];
            } else if (!this._localStreams.includes(stream)) {
              this._localStreams.push(stream);
            }
          });
        }
        return _addTrack.apply(this, arguments);
      };
  }
  if (!('removeStream' in window.RTCPeerConnection.prototype)) {
    window.RTCPeerConnection.prototype.removeStream =
      function removeStream(stream) {
        if (!this._localStreams) {
          this._localStreams = [];
        }
        const index = this._localStreams.indexOf(stream);
        if (index === -1) {
          return;
        }
        this._localStreams.splice(index, 1);
        const tracks = stream.getTracks();
        this.getSenders().forEach(sender => {
          if (tracks.includes(sender.track)) {
            this.removeTrack(sender);
          }
        });
      };
  }
}

function shimRemoteStreamsAPI(window) {
  if (typeof window !== 'object' || !window.RTCPeerConnection) {
    return;
  }
  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {
    window.RTCPeerConnection.prototype.getRemoteStreams =
      function getRemoteStreams() {
        return this._remoteStreams ? this._remoteStreams : [];
      };
  }
  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {
    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {
      get() {
        return this._onaddstream;
      },
      set(f) {
        if (this._onaddstream) {
          this.removeEventListener('addstream', this._onaddstream);
          this.removeEventListener('track', this._onaddstreampoly);
        }
        this.addEventListener('addstream', this._onaddstream = f);
        this.addEventListener('track', this._onaddstreampoly = (e) => {
          e.streams.forEach(stream => {
            if (!this._remoteStreams) {
              this._remoteStreams = [];
            }
            if (this._remoteStreams.includes(stream)) {
              return;
            }
            this._remoteStreams.push(stream);
            const event = new Event('addstream');
            event.stream = stream;
            this.dispatchEvent(event);
          });
        });
      }
    });
    const origSetRemoteDescription =
      window.RTCPeerConnection.prototype.setRemoteDescription;
    window.RTCPeerConnection.prototype.setRemoteDescription =
      function setRemoteDescription() {
        const pc = this;
        if (!this._onaddstreampoly) {
          this.addEventListener('track', this._onaddstreampoly = function(e) {
            e.streams.forEach(stream => {
              if (!pc._remoteStreams) {
                pc._remoteStreams = [];
              }
              if (pc._remoteStreams.indexOf(stream) >= 0) {
                return;
              }
              pc._remoteStreams.push(stream);
              const event = new Event('addstream');
              event.stream = stream;
              pc.dispatchEvent(event);
            });
          });
        }
        return origSetRemoteDescription.apply(pc, arguments);
      };
  }
}

function shimCallbacksAPI(window) {
  if (typeof window !== 'object' || !window.RTCPeerConnection) {
    return;
  }
  const prototype = window.RTCPeerConnection.prototype;
  const origCreateOffer = prototype.createOffer;
  const origCreateAnswer = prototype.createAnswer;
  const setLocalDescription = prototype.setLocalDescription;
  const setRemoteDescription = prototype.setRemoteDescription;
  const addIceCandidate = prototype.addIceCandidate;

  prototype.createOffer =
    function createOffer(successCallback, failureCallback) {
      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];
      const promise = origCreateOffer.apply(this, [options]);
      if (!failureCallback) {
        return promise;
      }
      promise.then(successCallback, failureCallback);
      return Promise.resolve();
    };

  prototype.createAnswer =
    function createAnswer(successCallback, failureCallback) {
      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];
      const promise = origCreateAnswer.apply(this, [options]);
      if (!failureCallback) {
        return promise;
      }
      promise.then(successCallback, failureCallback);
      return Promise.resolve();
    };

  let withCallback = function(description, successCallback, failureCallback) {
    const promise = setLocalDescription.apply(this, [description]);
    if (!failureCallback) {
      return promise;
    }
    promise.then(successCallback, failureCallback);
    return Promise.resolve();
  };
  prototype.setLocalDescription = withCallback;

  withCallback = function(description, successCallback, failureCallback) {
    const promise = setRemoteDescription.apply(this, [description]);
    if (!failureCallback) {
      return promise;
    }
    promise.then(successCallback, failureCallback);
    return Promise.resolve();
  };
  prototype.setRemoteDescription = withCallback;

  withCallback = function(candidate, successCallback, failureCallback) {
    const promise = addIceCandidate.apply(this, [candidate]);
    if (!failureCallback) {
      return promise;
    }
    promise.then(successCallback, failureCallback);
    return Promise.resolve();
  };
  prototype.addIceCandidate = withCallback;
}

function shimGetUserMedia(window) {
  const navigator = window && window.navigator;

  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    // shim not needed in Safari 12.1
    const mediaDevices = navigator.mediaDevices;
    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);
    navigator.mediaDevices.getUserMedia = (constraints) => {
      return _getUserMedia(shimConstraints(constraints));
    };
  }

  if (!navigator.getUserMedia && navigator.mediaDevices &&
    navigator.mediaDevices.getUserMedia) {
    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {
      navigator.mediaDevices.getUserMedia(constraints)
      .then(cb, errcb);
    }.bind(navigator);
  }
}

function shimConstraints(constraints) {
  if (constraints && constraints.video !== undefined) {
    return Object.assign({},
      constraints,
      {video: _utils__WEBPACK_IMPORTED_MODULE_0__.compactObject(constraints.video)}
    );
  }

  return constraints;
}

function shimRTCIceServerUrls(window) {
  if (!window.RTCPeerConnection) {
    return;
  }
  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls
  const OrigPeerConnection = window.RTCPeerConnection;
  window.RTCPeerConnection =
    function RTCPeerConnection(pcConfig, pcConstraints) {
      if (pcConfig && pcConfig.iceServers) {
        const newIceServers = [];
        for (let i = 0; i < pcConfig.iceServers.length; i++) {
          let server = pcConfig.iceServers[i];
          if (!server.hasOwnProperty('urls') &&
              server.hasOwnProperty('url')) {
            _utils__WEBPACK_IMPORTED_MODULE_0__.deprecated('RTCIceServer.url', 'RTCIceServer.urls');
            server = JSON.parse(JSON.stringify(server));
            server.urls = server.url;
            delete server.url;
            newIceServers.push(server);
          } else {
            newIceServers.push(pcConfig.iceServers[i]);
          }
        }
        pcConfig.iceServers = newIceServers;
      }
      return new OrigPeerConnection(pcConfig, pcConstraints);
    };
  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;
  // wrap static methods. Currently just generateCertificate.
  if ('generateCertificate' in OrigPeerConnection) {
    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {
      get() {
        return OrigPeerConnection.generateCertificate;
      }
    });
  }
}

function shimTrackEventTransceiver(window) {
  // Add event.transceiver member over deprecated event.receiver
  if (typeof window === 'object' && window.RTCTrackEvent &&
      'receiver' in window.RTCTrackEvent.prototype &&
      !('transceiver' in window.RTCTrackEvent.prototype)) {
    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {
      get() {
        return {receiver: this.receiver};
      }
    });
  }
}

function shimCreateOfferLegacy(window) {
  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;
  window.RTCPeerConnection.prototype.createOffer =
    function createOffer(offerOptions) {
      if (offerOptions) {
        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {
          // support bit values
          offerOptions.offerToReceiveAudio =
            !!offerOptions.offerToReceiveAudio;
        }
        const audioTransceiver = this.getTransceivers().find(transceiver =>
          transceiver.receiver.track.kind === 'audio');
        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {
          if (audioTransceiver.direction === 'sendrecv') {
            if (audioTransceiver.setDirection) {
              audioTransceiver.setDirection('sendonly');
            } else {
              audioTransceiver.direction = 'sendonly';
            }
          } else if (audioTransceiver.direction === 'recvonly') {
            if (audioTransceiver.setDirection) {
              audioTransceiver.setDirection('inactive');
            } else {
              audioTransceiver.direction = 'inactive';
            }
          }
        } else if (offerOptions.offerToReceiveAudio === true &&
            !audioTransceiver) {
          this.addTransceiver('audio', {direction: 'recvonly'});
        }

        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {
          // support bit values
          offerOptions.offerToReceiveVideo =
            !!offerOptions.offerToReceiveVideo;
        }
        const videoTransceiver = this.getTransceivers().find(transceiver =>
          transceiver.receiver.track.kind === 'video');
        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {
          if (videoTransceiver.direction === 'sendrecv') {
            if (videoTransceiver.setDirection) {
              videoTransceiver.setDirection('sendonly');
            } else {
              videoTransceiver.direction = 'sendonly';
            }
          } else if (videoTransceiver.direction === 'recvonly') {
            if (videoTransceiver.setDirection) {
              videoTransceiver.setDirection('inactive');
            } else {
              videoTransceiver.direction = 'inactive';
            }
          }
        } else if (offerOptions.offerToReceiveVideo === true &&
            !videoTransceiver) {
          this.addTransceiver('video', {direction: 'recvonly'});
        }
      }
      return origCreateOffer.apply(this, arguments);
    };
}

function shimAudioContext(window) {
  if (typeof window !== 'object' || window.AudioContext) {
    return;
  }
  window.AudioContext = window.webkitAudioContext;
}



/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/utils.js":
/*!*****************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/utils.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "extractVersion": function() { return /* binding */ extractVersion; },
/* harmony export */   "wrapPeerConnectionEvent": function() { return /* binding */ wrapPeerConnectionEvent; },
/* harmony export */   "disableLog": function() { return /* binding */ disableLog; },
/* harmony export */   "disableWarnings": function() { return /* binding */ disableWarnings; },
/* harmony export */   "log": function() { return /* binding */ log; },
/* harmony export */   "deprecated": function() { return /* binding */ deprecated; },
/* harmony export */   "detectBrowser": function() { return /* binding */ detectBrowser; },
/* harmony export */   "compactObject": function() { return /* binding */ compactObject; },
/* harmony export */   "walkStats": function() { return /* binding */ walkStats; },
/* harmony export */   "filterStats": function() { return /* binding */ filterStats; }
/* harmony export */ });
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
 /* eslint-env node */


let logDisabled_ = true;
let deprecationWarnings_ = true;

/**
 * Extract browser version out of the provided user agent string.
 *
 * @param {!string} uastring userAgent string.
 * @param {!string} expr Regular expression used as match criteria.
 * @param {!number} pos position in the version string to be returned.
 * @return {!number} browser version.
 */
function extractVersion(uastring, expr, pos) {
  const match = uastring.match(expr);
  return match && match.length >= pos && parseInt(match[pos], 10);
}

// Wraps the peerconnection event eventNameToWrap in a function
// which returns the modified event object (or false to prevent
// the event).
function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {
  if (!window.RTCPeerConnection) {
    return;
  }
  const proto = window.RTCPeerConnection.prototype;
  const nativeAddEventListener = proto.addEventListener;
  proto.addEventListener = function(nativeEventName, cb) {
    if (nativeEventName !== eventNameToWrap) {
      return nativeAddEventListener.apply(this, arguments);
    }
    const wrappedCallback = (e) => {
      const modifiedEvent = wrapper(e);
      if (modifiedEvent) {
        if (cb.handleEvent) {
          cb.handleEvent(modifiedEvent);
        } else {
          cb(modifiedEvent);
        }
      }
    };
    this._eventMap = this._eventMap || {};
    if (!this._eventMap[eventNameToWrap]) {
      this._eventMap[eventNameToWrap] = new Map();
    }
    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);
    return nativeAddEventListener.apply(this, [nativeEventName,
      wrappedCallback]);
  };

  const nativeRemoveEventListener = proto.removeEventListener;
  proto.removeEventListener = function(nativeEventName, cb) {
    if (nativeEventName !== eventNameToWrap || !this._eventMap
        || !this._eventMap[eventNameToWrap]) {
      return nativeRemoveEventListener.apply(this, arguments);
    }
    if (!this._eventMap[eventNameToWrap].has(cb)) {
      return nativeRemoveEventListener.apply(this, arguments);
    }
    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);
    this._eventMap[eventNameToWrap].delete(cb);
    if (this._eventMap[eventNameToWrap].size === 0) {
      delete this._eventMap[eventNameToWrap];
    }
    if (Object.keys(this._eventMap).length === 0) {
      delete this._eventMap;
    }
    return nativeRemoveEventListener.apply(this, [nativeEventName,
      unwrappedCb]);
  };

  Object.defineProperty(proto, 'on' + eventNameToWrap, {
    get() {
      return this['_on' + eventNameToWrap];
    },
    set(cb) {
      if (this['_on' + eventNameToWrap]) {
        this.removeEventListener(eventNameToWrap,
            this['_on' + eventNameToWrap]);
        delete this['_on' + eventNameToWrap];
      }
      if (cb) {
        this.addEventListener(eventNameToWrap,
            this['_on' + eventNameToWrap] = cb);
      }
    },
    enumerable: true,
    configurable: true
  });
}

function disableLog(bool) {
  if (typeof bool !== 'boolean') {
    return new Error('Argument type: ' + typeof bool +
        '. Please use a boolean.');
  }
  logDisabled_ = bool;
  return (bool) ? 'adapter.js logging disabled' :
      'adapter.js logging enabled';
}

/**
 * Disable or enable deprecation warnings
 * @param {!boolean} bool set to true to disable warnings.
 */
function disableWarnings(bool) {
  if (typeof bool !== 'boolean') {
    return new Error('Argument type: ' + typeof bool +
        '. Please use a boolean.');
  }
  deprecationWarnings_ = !bool;
  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');
}

function log() {
  if (typeof window === 'object') {
    if (logDisabled_) {
      return;
    }
    if (typeof console !== 'undefined' && typeof console.log === 'function') {
      console.log.apply(console, arguments);
    }
  }
}

/**
 * Shows a deprecation warning suggesting the modern and spec-compatible API.
 */
function deprecated(oldMethod, newMethod) {
  if (!deprecationWarnings_) {
    return;
  }
  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +
      ' instead.');
}

/**
 * Browser detector.
 *
 * @return {object} result containing browser and version
 *     properties.
 */
function detectBrowser(window) {
  // Returned result object.
  const result = {browser: null, version: null};

  // Fail early if it's not a browser
  if (typeof window === 'undefined' || !window.navigator) {
    result.browser = 'Not a browser.';
    return result;
  }

  const {navigator} = window;

  if (navigator.mozGetUserMedia) { // Firefox.
    result.browser = 'firefox';
    result.version = extractVersion(navigator.userAgent,
        /Firefox\/(\d+)\./, 1);
  } else if (navigator.webkitGetUserMedia ||
      (window.isSecureContext === false && window.webkitRTCPeerConnection &&
       !window.RTCIceGatherer)) {
    // Chrome, Chromium, Webview, Opera.
    // Version matches Chrome/WebRTC version.
    // Chrome 74 removed webkitGetUserMedia on http as well so we need the
    // more complicated fallback to webkitRTCPeerConnection.
    result.browser = 'chrome';
    result.version = extractVersion(navigator.userAgent,
        /Chrom(e|ium)\/(\d+)\./, 2);
  } else if (window.RTCPeerConnection &&
      navigator.userAgent.match(/AppleWebKit\/(\d+)\./)) { // Safari.
    result.browser = 'safari';
    result.version = extractVersion(navigator.userAgent,
        /AppleWebKit\/(\d+)\./, 1);
    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&
        'currentDirection' in window.RTCRtpTransceiver.prototype;
  } else { // Default fallthrough: not supported.
    result.browser = 'Not a supported browser.';
    return result;
  }

  return result;
}

/**
 * Checks if something is an object.
 *
 * @param {*} val The something you want to check.
 * @return true if val is an object, false otherwise.
 */
function isObject(val) {
  return Object.prototype.toString.call(val) === '[object Object]';
}

/**
 * Remove all empty objects and undefined values
 * from a nested object -- an enhanced and vanilla version
 * of Lodash's `compact`.
 */
function compactObject(data) {
  if (!isObject(data)) {
    return data;
  }

  return Object.keys(data).reduce(function(accumulator, key) {
    const isObj = isObject(data[key]);
    const value = isObj ? compactObject(data[key]) : data[key];
    const isEmptyObject = isObj && !Object.keys(value).length;
    if (value === undefined || isEmptyObject) {
      return accumulator;
    }
    return Object.assign(accumulator, {[key]: value});
  }, {});
}

/* iterates the stats graph recursively. */
function walkStats(stats, base, resultSet) {
  if (!base || resultSet.has(base.id)) {
    return;
  }
  resultSet.set(base.id, base);
  Object.keys(base).forEach(name => {
    if (name.endsWith('Id')) {
      walkStats(stats, stats.get(base[name]), resultSet);
    } else if (name.endsWith('Ids')) {
      base[name].forEach(id => {
        walkStats(stats, stats.get(id), resultSet);
      });
    }
  });
}

/* filter getStats for a sender/receiver track. */
function filterStats(result, track, outbound) {
  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';
  const filteredResult = new Map();
  if (track === null) {
    return filteredResult;
  }
  const trackStats = [];
  result.forEach(value => {
    if (value.type === 'track' &&
        value.trackIdentifier === track.id) {
      trackStats.push(value);
    }
  });
  trackStats.forEach(trackStat => {
    result.forEach(stats => {
      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {
        walkStats(result, stats, filteredResult);
      }
    });
  });
  return filteredResult;
}



/***/ }),

/***/ "./src/orkestra/agentcontext.js":
/*!**************************************!*\
  !*** ./src/orkestra/agentcontext.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/ */ "./src/orkestra/utils/index.js");


    var AgentContext = function () {
        var self = {};
        var log =  _utils___WEBPACK_IMPORTED_MODULE_0__.Logger.getLogger('AgentContext');

        var _contextItems = {}; // Map key to {currentValue:null, callbacks:[], on:func, off:func}
        var _change_callbacks = [];
        var _capabilities = {};

        var _agent_update_handlers = [];

        var _agent_change_cb = function () {
            for (var i = 0; i < _agent_update_handlers.length; i++) {
                try {
                    _agent_update_handlers[i].call(self);
                } catch (err) {
                    log.error("Error in meta-update", err);
                }
            }
        }
        var setCapability = function (what, state) {
            _capabilities[what] = state;
            _agent_change_cb();
            _doCallbacks.call(self, "keychange", what);
        }

        var _addContextElements = function (instrumentMap) {
            for (var k in instrumentMap) {

                if (!instrumentMap.hasOwnProperty(k)) {
                    continue;
                }
                _contextItems[k] = {
                    currentValue: instrumentMap[k].val || "undefined",
                    callbacks: [],
                    on: instrumentMap[k].on,
                    off: instrumentMap[k].off
                };

                if (instrumentMap[k].init) {
                    instrumentMap[k].init.call(self);
                }else {
                    _doCallbacks.call(self, "keychange", k);
                }
            };
            _agent_change_cb();
            return self;
        }

        var keys = function () {
            var res = [];
            for (let k in _contextItems) {
                res.push(k);
            }
            return res;
        }

        // callbacks
        var _doCallbacks = function (what, e, handler) {
            if (what === "keychange") {
                for (var i = 0; i < _change_callbacks.length; i++) {
                    try {
                        _change_callbacks[i].call(self, e);
                    } catch (err) {
                        log.error("Error in keychange handler:" + e);
                    }
                }
                return;
            }
            if (!_contextItems.hasOwnProperty(what)) throw "Unsupported event " + what;
            var h;
            for (var i = 0; i < _contextItems[what].callbacks.length; i++) {
                h = _contextItems[what].callbacks[i];
                if (handler === undefined) {
                    // all handlers to be invoked, except those with pending immeditate
                    if (h._immediate_pending) {
                        continue;
                    }
                } else {
                    // only given handler to be called
                    if (h === handler) handler._immediate_pending = false;
                    else {
                        continue;
                    }
                }
                try {
                    h.call(self, e);
                } catch (e) {
                    log.error("Error in " + what + ": " + h + ": " + e);
                }
            }
        };

        // unregister callback
        var off = function (what, handler) {
            if (what === "keychange") {
                _change_callbacks.splice(_change_callbacks.indexOf(handler), e);
                return;
            }
            if (what === "agentchange") {
                if (_agent_update_handlers.indexOf(handler) == -1) {
                    throw "Callback not registered";
                }
                _agent_update_handlers.splice(agent_update_handlers.indexOf(handler), 1);
                return;
            }
            if (!_contextItems.hasOwnProperty(what)) throw "Unknown parameter " + what;
            if (_contextItems[what].callbacks !== undefined) {
                var index = _contextItems[what].callbacks.indexOf(handler);
                if (index > -1) {
                    _contextItems[what].callbacks.splice(index, 1);
                }

                if (_contextItems[what].callbacks.length === 0 &&
                    _contextItems[what].off) {
                    log.debug("Turning " + what + " off");
                    _contextItems[what].off.call(self);
                }
            }
            return self;
        };

        var on = function (what, handler, agentid) {
            if (what === "keychange") {
                _change_callbacks.push(handler);
                handler.call(keys());
                return;
            }
            if (what === "agentchange") {
                log.info("*** Registered agentchange");
                _agent_update_handlers.push(handler);
                try {
                    handler.call(self);
                } catch (err) {
                    console.log("Error in agentchange handler", err);
                }
                return;
            }
            if (!handler || typeof handler !== "function") throw "Illegal handler";
            if (!_contextItems.hasOwnProperty(what)) { 
                console.warn("Unsupported event " + what)
                return
            }
            var index = _contextItems[what].callbacks.indexOf(handler);
            if (index === -1) {
                if (_contextItems[what].callbacks == 0) {
                    // Turn on?
                    if (self.requestHandler.call(self, what, agentid || "self") === true) {
                        if (_contextItems[what].on) {
                            log.info("Turning " + what + " on");
                            _contextItems[what].on.call(self);
                        }
                    }
                }
                // register handler
                _contextItems[what].callbacks.push(handler);
                // flag handler
                handler._immediate_pending = true;
                // do immediate callback
                //setTimeout(function () {
                    _doCallbacks(what, {
                        key: what,
                        value: _contextItems[what].currentValue
                    }, handler);
                //}, 15);
            }
            return self;
        };


        var setItem = function (what, value) {
            if (!_contextItems.hasOwnProperty(what)) {
                i = [];
                i[what] = {
                    val: value
                };
                _addContextElements(i);
            }

            _contextItems[what].currentValue = value;

            // Do callbacks on it
            _doCallbacks(what, {
                key: what,
                value: value
            });
            return self;
        }


        var getItem = function (what) {
            if (!_contextItems.hasOwnProperty(what)) {
                throw "Unknown item " + what;
            }
            return _contextItems[what].currentValue;
        }

        self.loadContextElements = _addContextElements;
        self.load = _addContextElements;
        self.keys = keys;
        self.on = on;
        self.off = off;
        self.setCapability = setCapability;
        self.getCapability = function(what) {
            return _capabilities[what];
        }
        self.capabilities = function () {
            return _capabilities
        };

        self.setItem = setItem;
        self.getItem = getItem;

        self.requestHandler = function (what, agentid) {
            log.info("Allowing " + what + " by " + agentid);
            return true
        };
        return self;
    }

 /* harmony default export */ __webpack_exports__["default"] = (AgentContext);


/***/ }),

/***/ "./src/orkestra/applicationcontext.js":
/*!********************************************!*\
  !*** ./src/orkestra/applicationcontext.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ApplicationContext": function() { return /* binding */ ApplicationContext; }
/* harmony export */ });
/* harmony import */ var _agentcontext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./agentcontext */ "./src/orkestra/agentcontext.js");
/* harmony import */ var _sharedstate_es6__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sharedstate.es6 */ "./src/orkestra/sharedstate.es6.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/dist/esm5/internal/Observable.js");
/* harmony import */ var _utils___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/ */ "./src/orkestra/utils/index.js");




    // The Application context is based on a shared state object
    var ApplicationContext = function (url, options) {
        var readyObserver = new rxjs__WEBPACK_IMPORTED_MODULE_3__.Subject();
        var readyObservable = new rxjs__WEBPACK_IMPORTED_MODULE_4__.Observable((observer) => { readyObserver = observer });
        var log =  _utils___WEBPACK_IMPORTED_MODULE_2__.Logger.getLogger('ApplicationContext');

        function clone(obj) {
            if (null == obj || "object" != typeof obj) return obj;
            var copy = obj.constructor();
            for (var attr in obj) {
                if (obj.hasOwnProperty(attr)) copy[attr] = clone(obj[attr]);
            }
            return copy;
        }
        if (!_agentcontext__WEBPACK_IMPORTED_MODULE_0__.default) {
            throw "Missing flexcontrol agentContext, please load the correct js files"
        }
        var _the_self = (0,_agentcontext__WEBPACK_IMPORTED_MODULE_0__.default)();

        options = options || {};
        var self = {};
        var _agents = {}; // We have a separate agent mapping of agent Context
        if (_sharedstate_es6__WEBPACK_IMPORTED_MODULE_1__.default === undefined) {
            throw "Missing flexcontrol shared state, please include the correct js files";
        }

        var remoteAgentContext = function (__agentid) {
            var self = {};
            var _handlers = {
                "agentchange": []
            };
            self.agentid = __agentid;
            var _last_capabilities = [];

            _sharedstate.on("change", (e) =>  {
                if (e.key.indexOf("__val__" + self.agentid) == 0) {
                    // Updated values for my stuff
                    if (_handlers[e.key] && _handlers[e.key].length > 0) {
                        for (var i = 0; i < _handlers[e.key].length; i++) {
                            try {
                                _handlers[e.key][i].call(self.publicAPI, e);
                            } catch (err) {
                                log.error("Error in callback: " + what);
                            }
                        }
                    }
                }
            });

            var keys = function () {
                var meta = _sharedstate.getItem("__meta__" + self.agentid);
                if (!meta) return [];
                if(typeof(meta)=="string") meta=JSON.parse(meta);
                return meta.keys;
            };

            var capabilities = function () {
                var meta = _sharedstate.getItem("__meta__" + self.agentid);
                if (!meta) return [];
                return meta.capabilities;
            }

            var on = function (what, handler) {
                if (what == "agentchange") {
                    _handlers["agentchange"].push(handler);
                    return;
                }

                if (keys().indexOf(what) == -1) {
                    throw "Unknown parameter " + what;
                }
                var subscriptions = _sharedstate.getItem("__metasub__" + _sharedstate.agentid) || [];
                var item = self.agentid + "_" + what;

                if (subscriptions.indexOf(item) == -1) {
                    subscriptions.push(item);
                    _sharedstate.setItem("__metasub__" + _sharedstate.agentid, subscriptions);
                }
                // Remember the handler
                if (_handlers[what] === undefined) {
                    _handlers[what] = [];
                }
                _handlers[what].push(handler);

                // check if we have a value already
                var value = _sharedstate.getItem('__val__' + item);
                if (value) {
                    handler.call(self.publicAPI, what, value);
                }
            };

            var off = function (what, handler) {
                if (what == "agentchange") {
                    _handlers[what].splice(_handlers[what].indexOf(handler), 1);
                    return;
                }
                if (keys().indexOf(what) == -1) {
                    throw "Unknown parameter " + what;
                }
                var subscriptions = clone(_sharedstate.getItem("__metasub__" + _sharedstate.agentid));
                var item = self.agentid + "_" + what;

                if (subscriptions.indexOf(item) > -1) {
                    subscriptions.splice(subscriptions.indexOf(item), 1);
                    _sharedstate.setItem("__metasub__" + _sharedstate.agentid, subscriptions);
                } else {
                    throw "Not subscribed to " + what;
                }
                // TODO: Clean up _handlers[what]
                if (!_handlers[what]) {
                    log.warn("*** Warning: Missing handler for " + what);
                    return;

                }
                _handlers[what].splice(_handlers[what].indexOf(item), 1);
            };

            var update_meta = function (meta) {
                var diff = {
                    "added": {},
                    "altered": {},
                    "removed": []
                };
                for (var capability in _last_capabilities) {
                    if (meta.capabilities[capability] === undefined) {
                        diff.removed.push(capability);
                    }
                }
                for (var capability in meta.capabilities) {
                    if (_last_capabilities[capability] === undefined) {
                        diff.added[capability] = meta.capabilities[capability];
                    } else if (_last_capabilities[capability] != meta.capabilities[capability]) {
                        diff.altered[capability] = meta.capabilities[capability];
                    }
                }
                _last_capabilities = meta.capabilities;

                for (var i = 0; i < _handlers["agentchange"].length; i++) {
                    try {
                        _handlers["agentchange"][i].call(self.publicAPI, {
                            diff: diff
                        });
                    } catch (err) {
                        log.error("Error in meta-update", err);
                    }
                }
            }

            var update_value = function (_aid, _key, _value) {
                if (_handlers[_key] === undefined) {
                    return;
                }
                for (var i = 0; i < _handlers[_key].length; i++) {
                    try {
                        _handlers[_key][i].call(self.publicAPI, _key, _value);
                    } catch (err) {
                        log.error("Error in update: ", err);
                    }
                }
            };

            var setItem = function (key, value) {
                _sharedstate.setItem("__val__" + self.agentid + "_" + key, value);
            }
            var getItem = function (key) {
                return _sharedstate.getItem("__val__" + self.agentid + "_" + key);
            }
            self.update_value = update_value;
            self.handlers = _handlers;
            self.update_meta = update_meta;

            let publicAPI = {};
            publicAPI.agentid = self.agentid;
            publicAPI.keys = keys;
            publicAPI.on = on;
            publicAPI.off = off;
            publicAPI.setItem = setItem;
            publicAPI.getItem = getItem;
            publicAPI.capabilities = capabilities;


            self.publicAPI = publicAPI;

            return self;
        }


        // Handle updates
        var _sub_param2agent = [] // Remote subscriptions, parameter -> [agentid, ...]
        var _sub_agent2param = {}; // Remote agent -> [parameter, ...]
        var _sub_param2handler = {};
        var _currentAgentState = {}; // For diffs
        var _last_capabilities = {}; // For annouce diffs
        var _globalVars = {}; // For the global variables

        var _update_subscriptions = function (_aid2, _subs) {
            if (getAgent(_aid2) == undefined) {
                log.warn("Subscription update for unknown node", _aid2);
                setTimeout(()=>{
                  if (getAgent(_aid2) !== undefined){
                  _update_subscriptions(_aid2, _subs)
                  _subs = _subs || _sharedstate.getItem("__metasub__" + _aid2);
                  if (!_subs) {
                      return;
                  }
                  var handlers = getAgent(_aid2).handlers;
                  var thesubs = _sub_agent2param[_aid2] || [];
                  for (var i = 0; i < _subs.length; i++) {
                      var target_agent = _subs[i].substr(0, _subs[i].indexOf("_"));
                      var target_param = _subs[i].substr(_subs[i].indexOf("_") + 1);
                      if (target_agent === _sharedstate.agentid) {
                          // See if this agent already subscribes to my parameter, otherwise add it
                          if (thesubs.indexOf(target_param) > -1) {
                              // Aready subscribed to this one
                              continue;
                          }
                          if (_sub_param2agent[target_param] === undefined) {
                              _sub_param2agent[target_param] = [];
                          }
                          _sub_param2agent[target_param].push(_aid2);
                          if (!_sub_param2handler[target_param] || _sub_param2handler[target_param].length == 0) {
                              _sub_param2handler[target_param] = function (e) {
                                  _sharedstate.setItem("__val__" + _sharedstate.agentid + "_" + e.key, e.value);
                              }
                          }
                          _the_self.on(target_param, _sub_param2handler[target_param]);
                      }
                  }
                  // see if there was an unsubscribe
                  for (var i = 0; i < thesubs.length; i++) {
                      if (_sub_param2agent.indexOf(thesubs[i]) == -1) {
                          var target_agent = thesubs[i].substr(0, thesubs[i].indexOf("_"));
                          var target_param = thesubs[i].substr(thesubs[i].indexOf("_") + 1);
                          if (target_agent != _sharedstate.agentid) {
                              continue;
                          }
                          if (_sub_param2agent[target_param] != undefined) {
                              _sub_param2agent[target_param].splice(_sub_param2agent[target_param].indexOf(thesubs[i]), 1);
                              if (_sub_param2agent[target_param].length == 0) {
                                  // Only unsub if no more agents listen to this
                                  // TO CHECK IT: OFF  WITHOUT REASON
                                  //_the_self.off(target_param, _sub_param2handler[target_param]);
                              }
                          } else {
                              log.warn(" *** Warning, unsub but don't have handler");
                          }
                          // TODO: Clean up if nobody uses it any more
                          // if _sub_param2agent[target_param].length == 0
                      }
                  }
                  _sub_agent2param[_aid2] = _subs;
                }

                },0);
                return;
            }
            _subs = _subs || _sharedstate.getItem("__metasub__" + _aid2);
            if (!_subs) {
                return;
            }
            var handlers = getAgent(_aid2).handlers;
            var thesubs = _sub_agent2param[_aid2] || [];
            for (var i = 0; i < _subs.length; i++) {
                var target_agent = _subs[i].substr(0, _subs[i].indexOf("_"));
                var target_param = _subs[i].substr(_subs[i].indexOf("_") + 1);
                if (target_agent === _sharedstate.agentid) {
                    // See if this agent already subscribes to my parameter, otherwise add it
                    if (thesubs.indexOf(target_param) > -1) {
                        // Aready subscribed to this one
                        continue;
                    }
                    if (_sub_param2agent[target_param] === undefined) {
                        _sub_param2agent[target_param] = [];
                    }
                    _sub_param2agent[target_param].push(_aid2);
                    if (!_sub_param2handler[target_param] || _sub_param2handler[target_param].length == 0) {
                        _sub_param2handler[target_param] = function (e) {
                            _sharedstate.setItem("__val__" + _sharedstate.agentid + "_" + e.key, e.value);
                        }
                    }
                    _the_self.on(target_param, _sub_param2handler[target_param]);
                }
            }
            // see if there was an unsubscribe
            for (var i = 0; i < thesubs.length; i++) {
                if (_sub_param2agent.indexOf(thesubs[i]) == -1) {
                    var target_agent = thesubs[i].substr(0, thesubs[i].indexOf("_"));
                    var target_param = thesubs[i].substr(thesubs[i].indexOf("_") + 1);
                    if (target_agent != _sharedstate.agentid) {
                        continue;
                    }
                    if (_sub_param2agent[target_param] != undefined) {
                        _sub_param2agent[target_param].splice(_sub_param2agent[target_param].indexOf(thesubs[i]), 1);
                        if (_sub_param2agent[target_param].length == 0) {
                            // Only unsub if no more agents listen to this
                            // TO CHECK IT: OFF  WITHOUT REASON
                            //_the_self.off(target_param, _sub_param2handler[target_param]);
                        }
                    } else {
                        log.warn(" *** Warning, unsub but don't have handler");
                    }
                    // TODO: Clean up if nobody uses it any more
                    // if _sub_param2agent[target_param].length == 0
                }
            }
            _sub_agent2param[_aid2] = _subs;
        }

        var _update_value = function (_aid, _key, _val) {
            var ra = getAgent(_aid);
            if (ra) {
                ra.update_value(_aid, _key, _val);
            }
        }

        var _cbs = [];
        var _globalCbs = [];
        var on = function (what, handler) {
            if (what == "agentchange") {
                _cbs.push(handler);
            } else {
                if (!_globalCbs[what]) {
                    _globalCbs[what] = [];
                }
                _globalCbs[what].push(handler);
            }

        }

        var off = function (what, handler) {
            if (what == "agentchange") {
                if (_cbs.indexOf(handler) == -1) {
                    throw "Handler not registered";
                }
                _cbs.splice(_cbs.indexOf(handler), 1);
            } else {
                if (_globalCbs[what].indexOf(handler) == -1) {
                    throw "Handler not registered";
                }
                _globalCbs[what].splice(_globalCbs[what].indexOf(handler), 1);
            }

        }


        var _doCallbacks = function (what, e) {
            if (what == "agentchange") {
                if (!e.agentContext) {
                    delete _currentAgentState[e.agentid];
                    log.info(_currentAgentState);
                } else if (_currentAgentState[e.agentid] == undefined) {
                    _currentAgentState[e.agentid] = {
                        capabilities: {},
                        keys: []
                    };
                }

                // Create diff
                e.diff = {
                    capabilities: {},
                    keys: []
                };
                if (e.agentContext) {

                    var cs = e.agentContext.capabilities();
                    for (var c in cs) {
                        if (cs.hasOwnProperty(c)) {
                            if (!_currentAgentState[e.agentid].capabilities) {
                                _currentAgentState[e.agentid].capabilities = {};
                            }
                            if (_currentAgentState[e.agentid].capabilities[c] != cs[c]) {
                                e.diff.capabilities[c] = cs[c];
                            }
                        }
                    }
                    // Also check keys
                    var keys = e.agentContext.keys()
                    for (var i = 0; i < keys.length; i++) {
                        if (_currentAgentState[e.agentid].keys.indexOf(keys[i]) == -1) {
                            e.diff.keys.push(keys[i]);
                        }
                    }

                    _currentAgentState[e.agentid] = {
                        capabilities: cs,
                        keys: keys
                    };

                }
                for (var i = 0; i < _cbs.length; i++) {
                    try {
                        _cbs[i].call(self, e);
                    } catch (err) {
                        log.error("Error in agentchange callback: ", err);
                        log.error("cb:", _cbs[i]);
                    }
                }
            } else {
                for (var i = 0, len = _globalCbs[what].length; i < len; i++) {
                    try {
                        _globalCbs[what][i].call(self, e);
                    } catch (err) {
                        log.error("Error in agentchange callback: ", err);
                        log.error("cb:", _globalCbs[what][i]);
                    }
                }
            }

        };

        options.autoPresence = true;

        var __ready = false;
        var _sharedstate = (0,_sharedstate_es6__WEBPACK_IMPORTED_MODULE_1__.default)(url, options)
            .on("readystatechange", function (s) {
                if (s === _sharedstate.STATE.OPEN) {
                    readyObserver.next("ready");
                    __ready = true;
		    // Register
                    let meta = {
                        keys: _the_self.keys(),
                        capabilities: _the_self.capabilities()
                    };

                    _sharedstate.setItem("__meta__" + _sharedstate.agentid, meta);
                    _sharedstate.setItem("__metasub__" + _sharedstate.agentid, []);
                    _sharedstate.setPresence("online");

                    // Also check for new parameters being added
                    // ABosl - moved here to only test if _sharedstate == open
                    _the_self.on("keychange", function (e) {
                        // Update my meta description too
                        var meta = {
                            keys: _the_self.keys(),
                            capabilities: _the_self.capabilities()
                        };
                        _sharedstate.setItem("__meta__" + _sharedstate.agentid, meta);
                    });

                    _sharedstate.on("presence", function (event) {

                        var _agentid = event.key;
                        var _state = event.value;
                        if (event.value == "offline") {
                            if (_agents.hasOwnProperty(_agentid)) {
                                // Clean up this node

                                _agents[_agentid] = null;
                                delete _agents[_agentid];
                                _doCallbacks("agentchange", {
                                    agentid: _agentid,
                                    agentContext: null
                                });

                            }
                            // TODO: Also clean up other state that should be removed?
                            /*
                            if (options.autoremove == true) {
                              this.removeItem("__meta__" + _agentid)
                              this.removeItem("__metasub__" + _agentid)
                              this.delAgent(_agentid);
                            }
                            */

                        } else {
                            if (event.value == "online") {
                                if (!_agents[_agentid]) {
                                    _agents[_agentid] = remoteAgentContext(_agentid);
                                }

                                var diff = {
                                    "added": {},
                                    "altered": {},
                                    "removed": []
                                };
                                var new_capabilities = _agents[_agentid].publicAPI.capabilities();
                                if (_last_capabilities[_agentid] != undefined) {
                                    for (var capability in _last_capabilities[_agentid]) {
                                        log.debug(capability);
                                        if (new_capabilities[capability] === undefined) {
                                            diff.removed.push(capability);
                                        }
                                    }
                                } else {
                                    _last_capabilities[_agentid] = [];
                                }

                                for (var capability in new_capabilities) {
                                    if (_last_capabilities[_agentid][capability] === undefined) {
                                        diff.added[capability] = new_capabilities[capability];
                                    } else if (_last_capabilities[_agentid][capability] != new_capabilities[capability]) {
                                        diff.altered[capability] = new_capabilities[capability];
                                    }
                                }

                                _last_capabilities[_agentid] = new_capabilities;
                                let inter = setInterval(()=>{
                                    if (getAgent(_agentid) != undefined){
                                         clearInterval(inter);
                                        _update_subscriptions(_agentid);
                                        _doCallbacks("agentchange", {
                                            agentid: _agentid,
                                            agentContext: _agents[_agentid].publicAPI,
                                            diff: diff
                                        });
                                    }



                            },15);
                            }

                        }
                        //_agents[_agentid].
                    })
                }
            })
            .on("change", function (e) {
                if (e.key.indexOf("__meta__") > -1) {
                    var _agentid = e.key.substr(8);
                    var a = _agents[_agentid];
                    if (a) {
                        a.update_meta(e.value);
                        _doCallbacks("agentchange", {
                            agentid: _agentid,
                            agentContext: _agents[_agentid].publicAPI
                        });
                    } else {
                        if (options.autoremove == true) {
                            _sharedstate.removeItem("__meta__" + _agentid);
                            _sharedstate.removeItem("__metasub__" + _agentid);
                        }
                    }
                } else if (e.key.indexOf("__metasub__") > -1) {
                    let _agentid = e.key.substr(11);

                      let inter2 = setInterval(()=>{
                        if (getAgent(_agentid)!=undefined){
                            clearInterval(inter2);
                            _update_subscriptions(_agentid, e.value);
                        }
                    },15)





                } else if (e.key.indexOf("__val__") > -1) {
                    var x = e.key.substr(7).split("_");
                    x.splice(x.length-1);
                    let _agentid = x.join("_");
                    x = e.key.substr(7).split("_");
                    var _key = x.splice(x.length-1)[0];
                    _update_value(_agentid, _key, e.value);

		} else if (e.key.indexOf('__global__') > -1) {
                    log.debug('globalVar', e.key, e.value);
                    var _what = e.key.substr(10);
                    if (_globalCbs[_what]) {
                        _doCallbacks(_what, {
                            key: _what,
                            value: e.value
                        });
                    } else {
                        const [newAppAttrCallback] = _globalCbs['default']
                        newAppAttrCallback.call(self, {
                            key: _what,
                            value: e.value
                        });
                    }
                } else {
                    log.warb("Unknown Change:" + JSON.stringify(e));
                }
            });




        var getAgent = function (aid) {
            return _agents[aid];
        }

        var getAgents = function () {
            if (_agents[_sharedstate.agentid] == undefined) {
                _agents[_sharedstate.agentid] = remoteAgentContext(_sharedstate.agentid);
            }
            var agents = {
                self: _agents[_sharedstate.agentid].publicAPI
            };
            for (var a in _agents) {
                if (a == _sharedstate.agentid) continue;
                if (_agents[_sharedstate.agentid]) {
                    agents[a] = _agents[a].publicAPI;
                }
            }
            return agents;
        }
        var _ready = function (){

          return  __ready;
        }
        var addAgent = function(agent) {
          // TODO: Check argument!
          if (_agents[agent.agentid] != undefined) {
            throw new Error("Already have agent '" + agent.agentid + "'");
          }
          _agents[agent.agentid] = agent;
          _doCallbacks("agentchange", {
            agentid: agent.agentid,
            agentContext: agent,
            diff: {"added":agent.capabilities()}
          });
        };

        var removeAgent = function(agent) {
          if (_agents[agent.agentid] != agent) {
            throw new Error("Failed to remove agent '" + agent.agentid + "'");
          }
          delete _agents[agent.agentid];
          _doCallbacks("agentchange", {
              agentid: agent.agentid,
              agentContext: null
          });
        };


        var setItem = function (key, value) {
            if (typeof key !="undefined" && typeof value!="undefined") {
                _sharedstate.setItem('__global__' + key, value);
            }
        };

        var getKeys = function () {
            var allKeys = _sharedstate.keys();
            var globalVars = [];
            for (var i = 0, len = allKeys.length; i < len; i++) {
                if (allKeys[i].indexOf('__global__') > -1) {
                    globalVars.push(allKeys[i].substr(10));
                }
            }
            return globalVars;
        };

        var getItem = function (key) {
            return _sharedstate.getItem('__global__' + key);
        };

        // API
        self.getAgents = getAgents;
        self.on = on;
        self.off = off;
        self.me = _the_self;
        self.ready = _ready;
        //API for Global Variables
        self.setItem = setItem;
        self.getItem = getItem;
        self.keys = getKeys;
        self.onready = readyObservable;
        // API for locally discovered agents - should only be used for node discovery frameworks
        self.addAgent = addAgent
        self.removeAgent = removeAgent;
        return self;
    }




/***/ }),

/***/ "./src/orkestra/instruments/index.js":
/*!*******************************************!*\
  !*** ./src/orkestra/instruments/index.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DeviceProfile": function() { return /* reexport safe */ _instruments_js__WEBPACK_IMPORTED_MODULE_0__.DeviceProfile; },
/* harmony export */   "TextData": function() { return /* reexport safe */ _instruments_js__WEBPACK_IMPORTED_MODULE_0__.TextData; },
/* harmony export */   "MasterSlaveProfile": function() { return /* reexport safe */ _instruments_js__WEBPACK_IMPORTED_MODULE_0__.MasterSlaveProfile; },
/* harmony export */   "KeyPress": function() { return /* reexport safe */ _instruments_js__WEBPACK_IMPORTED_MODULE_0__.KeyPress; },
/* harmony export */   "UserProfile": function() { return /* reexport safe */ _instruments_js__WEBPACK_IMPORTED_MODULE_0__.UserProfile; },
/* harmony export */   "UserData": function() { return /* reexport safe */ _instruments_js__WEBPACK_IMPORTED_MODULE_0__.UserData; },
/* harmony export */   "ComponentsStatus": function() { return /* reexport safe */ _instruments_js__WEBPACK_IMPORTED_MODULE_0__.ComponentsStatus; },
/* harmony export */   "Message": function() { return /* reexport safe */ _instruments_js__WEBPACK_IMPORTED_MODULE_0__.Message; }
/* harmony export */ });
/* harmony import */ var _instruments_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./instruments.js */ "./src/orkestra/instruments/instruments.js");



/***/ }),

/***/ "./src/orkestra/instruments/instruments.js":
/*!*************************************************!*\
  !*** ./src/orkestra/instruments/instruments.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DeviceProfile": function() { return /* binding */ DeviceProfile; },
/* harmony export */   "TextData": function() { return /* binding */ TextData; },
/* harmony export */   "MasterSlaveProfile": function() { return /* binding */ MasterSlaveProfile; },
/* harmony export */   "UserProfile": function() { return /* binding */ UserProfile; },
/* harmony export */   "UserData": function() { return /* binding */ UserData; },
/* harmony export */   "KeyPress": function() { return /* binding */ KeyPress; },
/* harmony export */   "ComponentsStatus": function() { return /* binding */ ComponentsStatus; },
/* harmony export */   "Message": function() { return /* binding */ Message; }
/* harmony export */ });
function DeviceProfile(url){

      let deviceProfile = {
       init:function(){
         this.setCapability("deviceProfile", "supported");
       },
       on:function(){
         if (url) url +="checkDevice?agent="+navigator.userAgent;
         else url = "https://"+window.location.host+"/checkDevice?agent="+navigator.userAgent
         fetch(url).then((e)=>{
             e.json().then((data)=>{
               this.setItem('deviceProfile', data.deviceType);

             })

         });
       },
       off:function(){

       }
     }
   return {"deviceProfile":deviceProfile};
}
function TextData(element){

      let text = {
       init:function(){
          this.setCapability("textShare", "supported");

       },
       on:function(){
          element.addEventListener('change',(txt)=>{
                this.setItem('textShare', element.value);
          })
          //this.setCapability("deviceProfile", "supported");
       },
       off:function(){
         element.removeEventListener('change',(txt)=>{
               this.setItem('textShare', element.value);
         })
       }
     }
   return {"textShare":text};
}
function MasterSlaveProfile(me){

      let ms = {
       init:function(){
          this.setCapability("masterSlave", "supported");
        //  this.setItem('masterSlave', me.master || true);
       },
       on:function(){
          // element.addEventListener('change',(txt)=>{
          //       this.setItem('textShare', element.value);
          // })
          this.setItem('masterSlave', (me.master === undefined || me.master === true)?true:false);

       },
       off:function(){

       }
     }
   return {"masterSlave":ms};
}
function UserProfile(me){

      let up = {
       init:function(){
          this.setCapability("userProfile", "supported");
        //  this.setItem('masterSlave', me.master || true);
       },
       on:function(){
          // element.addEventListener('change',(txt)=>{
          //       this.setItem('textShare', element.value);
          // })
          this.setItem('userProfile', me.options.profile || '');

       },
       off:function(){

       }
     }
   return {"userProfile":up};
}
function UserData(url){

      let userData = {
       init:function(){
         this.setCapability("userData", "supported");


       },
       on:function(){
         setTimeout(()=>{
         let data = this.getItem('userData') !="undefined" ? this.getItem('userData'): {};
         this.setItem('userData',data);
        },0)
       },
       off:function(){

       }
     }
   return {"userData":userData};
}

function KeyPress(){

      let ms = {
       init:function(){
          this.setCapability("keyPress", "supported");
          //this.setItem('keyPress', "");
       },
       on:function(){
          // element.addEventListener('change',(txt)=>{
          //       this.setItem('textShare', element.value);
          // })
          document.addEventListener('keypress',(txt)=>{
                this.setItem('keyPress', txt.key);
          })

       },
       off:function(){
         document.removeEventListener('keypress',(txt)=>{
               this.setItem('keyPress', txt.key);
       })
     }
   }
   return {"keyPress":ms};
}
function ComponentsStatus(me){

  let ms = {
   init:function(){
      this.setCapability("componentsStatus", "supported");
    },
   on:function(){
    let compStatus = this.getItem("componentsStatus");
    if (compStatus.length === 0)
    this.setItem('componentsStatus', []);

   },
   off:function(){

   }
 }
return {"componentsStatus":ms};
}
function Message(msg){

  let m = {
   init:function(){
      this.setCapability("message", "supported");
      this.setItem('message', msg || 'undefined');
   },
   on:function(){

      this.setItem('message', msg || 'undefined');

   },
   off:function(){

   }
 }
 return {"message":m};
}


/***/ }),

/***/ "./src/orkestra/mappingservice.js":
/*!****************************************!*\
  !*** ./src/orkestra/mappingservice.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MappingService": function() { return /* binding */ MappingService; }
/* harmony export */ });
/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io-client */ "./node_modules/socket.io-client/build/esm/index.js");
/* harmony import */ var _utils___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/ */ "./src/orkestra/utils/index.js");



    /**
     *
     */
    var MappingService = function (url, options) {
        var log =  _utils___WEBPACK_IMPORTED_MODULE_1__.Logger.getLogger('MappingService');

        var _connection = null;
        var self = {};

        // READY STATE for Shared State
        var STATE = Object.freeze({
            CONNECTING: "connecting",
            OPEN: "open",
            CLOSED: "closed"
        });

        if (typeof url === 'object') {
            var options = url;
            url = {};
        
        }

        // Event Handlers
        var _callbacks = {
            'readystatechange': []
        };
        /* <!-- defaults */
        if (!options) {
            var options = {};
        }

        if (!options.maxTimeout){
            options.maxTimeout = 2000;
        }

        options.forceNew = true;
        options.multiplex = false;
	    options.transport =["websocket","polling"]
        var connectURL = url || {};
        /* defaults --> */

        var waitingUserPromises = [];
        var waitingGroupPromises = [];

        /* <!-- internal functions */
        var _init = function () {

            _connection = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_0__.default)(connectURL, options);
            _connection.on('connect', onConnect);
            readystate.set('connecting');
            _connection.on('mapping', onMapping)
            if (_connection.connected === true) {
                onConnect();
            }

        };

        var onConnect = function () {
            readystate.set('open');
        };

        var onMapping = function (response) {
            var host = url;

            if (typeof url === 'object' || !url) {
                var host = window.location.protocol + '//' + window.location.host + '/';
            }

            if (!response.group) {
                var result = {}
                if (response.user) {
                    result.user = host + response.user;
                }
                if (response.app) {
                    result.app = host + response.app;
                }
                if (response.userApp) {
                    result.userApp = host + response.userApp;
                }


                if (waitingUserPromises.length > 0) {
                    promise = waitingUserPromises.pop();
                    promise(result);
                }
            } else {
                var result = {
                    group: host + response.group
                }
                if (waitingGroupPromises.length > 0) {
                    let promise = waitingGroupPromises.pop();
                    promise(result);
                }
            }
        };

        /*
			Internal method for invoking callback handlers

			Handler is only supplied if on one specific callback is to used.
			This is helpful for supporting "immediate events", i.e. events given directly
			after handler is registered - on("change", handler);

			If handler is not supplied, this means that all callbacks are to be fired.
			This function is also sensitive to whether an "immediate event" has already been fired
			or not. See callback registration below.
        */
        var _do_callbacks = function (what, e, handler) {
            if (!_callbacks.hasOwnProperty(what)) throw "Unsupported event " + what;
            var h;
            for (let i = 0; i < _callbacks[what].length; i++) {
                h = _callbacks[what][i];
                if (handler === undefined) {
                    // all handlers to be invoked, except those with pending immeditate
                    if (h._immediate_pending) {
                        continue;
                    }
                } else {
                    // only given handler to be called
                    if (h === handler) handler._immediate_pending = false;
                    else {
                        continue;
                    }
                }
                try {
                    h.call(self, e);
                } catch (e) {
                    _error("Error in " + what + ": " + h + ": " + e);
                }
            }
        };

        /*
			READYSTATE

			encapsulate protected property _readystate by wrapping
			getter and setter logic around it.
			Closure ensures that all state transfers must go through set function.
			Possibility to implement verification on all attempted state transferes
			Event

  		*/
        var readystate = function () {
            var _readystate = STATE["CONNECTING"];
            // accessors
            return {
                set: function (new_state) {
                    // check new state value
                    let found = false;
                    for (let key in STATE) {
                        if (!STATE.hasOwnProperty(key)) continue;
                        if (STATE[key] === new_state) found = true;
                    }
                    if (!found) throw "Illegal state value " + new_state;
                    // check state transition
                    if (_readystate === STATE["CLOSED"]) return; // never leave final state
                    // perform state transition
                    if (new_state !== _readystate) {
                        _readystate = new_state;
                        // trigger events
                        _do_callbacks("readystatechange", new_state);
                    }
                },
                get: function () {
                    return _readystate;
                }
            };
        }();

        var getUserMapping = function (appId, scopeList) {
            if (appId && Array.isArray(scopeList)) {
                var request = {
                    appId: appId
                };
                for (var i = 0, len = scopeList.length; i < len; i++) {
                    if (scopeList[i] === 'user') {
                        request.user = true;
                    }
                    if (scopeList[i] === 'app') {
                        request.app = true;
                    }
                    if (scopeList[i] === 'userApp') {
                        request.userApp = true;
                    }
                }
                if (options.userId) {
                    request.userId = options.userId;
                }
                _connection.emit('getMapping', request);
            } else {
                throw 'appId or scopeList undefined';
            }
            return new Promise(function (fulfill, reject) {
                waitingUserPromises.push(function (data) {
                    fulfill(data);
                });
                setTimeout(function () {
                    reject({
                        error: 'timeout-mappinservice'
                    })
                }, options.maxTimeout);
            });
        };

        var getGroupMapping = function (groupId) {
            if (groupId) {
                var request = {
                    groupId: groupId
                };
                _connection.emit('getMapping', request);
            } else {
                throw 'groupId undefined';
            }
            return new Promise(function (fulfill, reject) {
                waitingGroupPromises.push(function (data) {
                    fulfill(data);
                });
                log.info("set timeout",options.maxTimeout);
                setTimeout(function () {
                    reject({
                        error: 'timeout-mappinservice2'
                    })
                }, options.maxTimeout);
            });
        };

        /**
         * registers a function on event, function gets called immediatly
         * @method on
         * @param {string} what change || presence || readystatechange
         * @param {function} handler the function to call on event
         * @returns {Object} SharedState
         * @memberof SharedState
         */
        /*
		    register callback

			The complexity of this method arise from the fact that we are to give
			an "immediate callback" to the given handler.

			In addition, I do not want to do so directly within the on() method.

			As a programmer I would like to ensure that initialisation of an object
			is completed BEFORE the object needs to process any callbacks from the
			external world. This can be problematic if the object depends on events
			from multiple other objects. For example, the internal initialisation code
			needs to register handlers on external objects a and b.

			a.on("event", internal_handler_a);
			b.on("event", internal_handler_b);

			However, if object a gives an callback immediately within on, this callback
			will be processed BEFORE we have completed initialisation, i.e., any code
			subsequent to a.on).

			It is quite possible to make this be correct still, but I find nested handler
			invocation complicated to think about, and I prefer to avoid the problem.
			Therefore I like instead to make life easier by delaying "immediate callbacks"
			using

			setTimeout(_do_callbacks("event", e, handler), 0);

			This however introduces two new problems. First, if you do :

			o.on("event", handler);
			o.off("event", handler);

			you will get the "immediate callback" after off(), which is not what you
			expect. This is avoided by checking that the given handler is indeed still
			registered when executing _do_callbacks(). Alternatively one could cancel the
			timeout within off().

			Second, with the handler included in _callbacks[what] it is possible to receive
			event callbacks before the delayed "immediate callback" is actually invoked.
			This breaks the expectation the the "immediate callback" is the first callback.
			This problem is avoided by flagging the callback handler with ".immediate_pending"
			and dropping notifications that arrive before the "immediate_callback has executed".
			Note however that the effect of this dropped notification is not lost. The effects
			are taken into account when we calculate the "initial state" to be reported by the
			"immediate callback". Crucially, we do this not in the on() method, but when the
			delayed "immediate callback" actually is processed.
	    */

        var on = function (what, handler) {
            if (!handler || typeof handler !== "function") throw "Illegal handler";
            if (!_callbacks.hasOwnProperty(what)) throw "Unsupported event " + what;
            var index = _callbacks[what].indexOf(handler);
            if (index === -1) {
                // register handler
                _callbacks[what].push(handler);
                // flag handler
                handler._immediate_pending = true;
                // do immediate callback
                setTimeout(function () {
                    switch (what) {
                    case 'readystatechange':
                        _do_callbacks("readystatechange", readystate.get(), handler);
                        break;
                    }
                }, 0);
            }
            return self;
        };

        /**
         * deregisters a function on event
         * @method off
         * @param {string} what change || presence || readystatechange
         * @param {function} handler the function to call on event
         * @returns {Object} SharedState
         * @memberof SharedState
         */
        // unregister callback
        var off = function (what, handler) {
            if (_callbacks[what] !== undefined) {
                var index = _callbacks[what].indexOf(handler);
                if (index > -1) {
                    _callbacks[what].splice(index, 1);
                }
            }
            return self;
        };

        /* API functions --> */


        /* <!-- public */
        self.__defineGetter__("readyState", readystate.get);
        self.__defineGetter__("STATE", function () {
            return STATE;
        });


        self.getUserMapping = getUserMapping;
        self.getGroupMapping = getGroupMapping;

        self.on = on;
        self.off = off;

        /* public --> */

        _init();

        return self;
    }



/***/ }),

/***/ "./src/orkestra/motion/motion.js":
/*!***************************************!*\
  !*** ./src/orkestra/motion/motion.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Motion": function() { return /* binding */ Motion; },
/* harmony export */   "ObjectSync": function() { return /* reexport safe */ _src_ObjectSync_js__WEBPACK_IMPORTED_MODULE_4__.ObjectSync; }
/* harmony export */ });
/* harmony import */ var _src_TimingObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/TimingObject.js */ "./src/orkestra/motion/src/TimingObject.js");
/* harmony import */ var _src_SocketTimingProvider_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/SocketTimingProvider.js */ "./src/orkestra/motion/src/SocketTimingProvider.js");
/* harmony import */ var _src_TimingMediaController_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/TimingMediaController.js */ "./src/orkestra/motion/src/TimingMediaController.js");
/* harmony import */ var _src_StateVector_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/StateVector.js */ "./src/orkestra/motion/src/StateVector.js");
/* harmony import */ var _src_ObjectSync_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/ObjectSync.js */ "./src/orkestra/motion/src/ObjectSync.js");
/* harmony import */ var _src_utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./src/utils.js */ "./src/orkestra/motion/src/utils.js");
/* harmony import */ var _src_event_target_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./src/event-target.js */ "./src/orkestra/motion/src/event-target.js");









    var Motion = function(url,channel){

      /**********************************************************************
      No need to deal with time, position and velocity measures that are
      below 1ms, so round all floats to 3 decimals.
      **********************************************************************/
      var roundFloat = function (nb) {
        return Math.round(nb * 1000) / 1000;
      };


      /**********************************************************************
      Set up the logger, using a custom DOM element appender
      **********************************************************************/



      /**********************************************************************
      Pointers to useful DOM elements
      **********************************************************************/


      /**********************************************************************
      Display timing object and video positions
      **********************************************************************/
      var maxDiff = {
        position: 0,
        velocity: 0
      };
      var controller = undefined;
      var timing = undefined;
      var tnpTime = 0;
      /**********************************************************************
      Create the timing object associated with the online timing service
      **********************************************************************/
      var start = function (){
        let domain = _src_utils_js__WEBPACK_IMPORTED_MODULE_5__.Utils.getHostName(url);
        var timingProvider = new _src_SocketTimingProvider_js__WEBPACK_IMPORTED_MODULE_1__.SocketTimingProvider('wss://'+domain+':8080/'+(channel || 'test'));

	  timing = new _src_TimingObject_js__WEBPACK_IMPORTED_MODULE_0__.TimingObject();
          timing.srcObject = timingProvider;
          controller = new _src_TimingMediaController_js__WEBPACK_IMPORTED_MODULE_2__.TimingMediaController(timing);

        }
        var addMedia = function(media,offset){
          controller.addMediaElement(media,offset);
          controller.addEventListener('readystatechange', function (evt) {

            if (evt.value === 'open') {
              API.dispatchEvent({type:'motionReady',value:evt.target.currentTime});
            }
          });

          return controller;
        }
        var removeMedia = function(media){
          controller.removeMediaElement(media);
        }
        /**********************************************************************
        Enable commands when timing object is connected
        **********************************************************************/
        var getController = function (){
          return controller;
        }
        var getTiming = function (){
          return timing;
        }

         var API = {
          addObject:addMedia,
          removeObject:removeMedia,
          getController:getController,
          start:start,
          ready:false,
          timing:getTiming,
          live:false,
          ObjectSync:_src_ObjectSync_js__WEBPACK_IMPORTED_MODULE_4__.ObjectSync,
          initTime:0
        }


        API.removeEventListener = (0,_src_event_target_js__WEBPACK_IMPORTED_MODULE_6__.EventTarget)().removeEventListener;
        API.addEventListener = (0,_src_event_target_js__WEBPACK_IMPORTED_MODULE_6__.EventTarget)().addEventListener;
        API.dispatchEvent = (0,_src_event_target_js__WEBPACK_IMPORTED_MODULE_6__.EventTarget)().dispatchEvent;
        return API;
      }





/***/ }),

/***/ "./src/orkestra/motion/src/AbstractSyncClock.js":
/*!******************************************************!*\
  !*** ./src/orkestra/motion/src/AbstractSyncClock.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractSyncClock": function() { return /* binding */ AbstractSyncClock; }
/* harmony export */ });
/* harmony import */ var _event_target__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./event-target */ "./src/orkestra/motion/src/event-target.js");
/**
 * @file A synchronized clock converts a local timestamp into the corresponding
 * value of a reference clock it is synchronized with.
 *
 * This is an abstract base class that returns a dummy clock synchronized with
 * itself (but note readyState remains at "connecting", hence the class should
 * not be used directly)
 */

// Ensure "define" is defined in node.js in the absence of require.js
// See: https://github.com/jrburke/amdefine


  

  /**
   * Default constructor for a synchronized clock
   *
   * @class
   * @param {Number} initialSkew The initial clock skew
   * @param {Number} initialDelta The initial static delta
   */
  var AbstractSyncClock = function (initialSkew, initialDelta) {
    var self = this;

    /**
     * The current estimation of the skew with the reference clock, in ms
     */
    var skew = initialSkew || 0.0;

    /**
     * Some agreed fixed delta delay, in ms.
     */
    var delta = initialDelta || 0.0;

    /**
     * The ready state of the synchronized clock
     */
    var readyState = 'connecting';

    /**
     * Define the "readyState", "skew" and "delta" properties. Note that
     * setting these properties may trigger "readystatechange" and "change"
     * events.
     */
    Object.defineProperties(this, {
      readyState: {
        get: function () {
          return readyState;
        },
        set: function (state) {
          if (state !== readyState) {
            readyState = state;

            // Dispatch the event on next loop to give code that wants to
            // listen to the initial change to "open" time to attach an event
            // listener (locally synchronized clocks typically set the
            // readyState property to "open" directly within the constructor)
            setTimeout(function () {
              self.dispatchEvent({
                type: 'readystatechange',
                value: state
              });
            }, 0);
          }
        }
      },
      delta: {
        get: function () {
          return delta;
        },
        set: function (value) {
          var previousDelta = delta;
          delta = value;
          if (previousDelta === delta) {

          }
          else {

            self.dispatchEvent({
              type: 'change'
            });
          }
        }
      },
      skew: {
        get: function () {
          return skew;
        },
        set: function (value) {
          var previousSkew = skew;
          skew = value;
          if (readyState !== 'open') {

          }
          else if (previousSkew === skew) {

          }
          else {

            self.dispatchEvent({
              type: 'change'
            });
          }
        }
      }
    });
  };


  // Synchronized clocks implement EventTarget
  AbstractSyncClock.prototype.addEventListener = (0,_event_target__WEBPACK_IMPORTED_MODULE_0__.EventTarget)().addEventListener;
  AbstractSyncClock.prototype.removeEventListener = (0,_event_target__WEBPACK_IMPORTED_MODULE_0__.EventTarget)().removeEventListener;
  AbstractSyncClock.prototype.dispatchEvent = (0,_event_target__WEBPACK_IMPORTED_MODULE_0__.EventTarget)().dispatchEvent;


  /**
   * Returns the time at the reference clock that corresponds to the local
   * time provided (both in milliseconds since 1 January 1970 00:00:00 UTC)
   *
   * @function
   * @param {Number} localTime The local time in milliseconds
   * @returns {Number} The corresponding time on the reference clock
   */
  AbstractSyncClock.prototype.getTime = function (localTime) {
    return localTime + this.skew - this.delta;
  };


  /**
   * Returns the number of milliseconds elapsed since
   * 1 January 1970 00:00:00 UTC on the reference clock
   *
   * @function
   * @returns {Number} The current timestamp
   */
  AbstractSyncClock.prototype.now = function () {
    return this.getTime(Date.now());
  };

  /**
   * Stops synchronization with the reference clock.
   *
   * In derived classes, this should typically be used to stop background
   * synchronization mechanisms.
   *
   * @function
   */
  AbstractSyncClock.prototype.close = function () {
    if ((this.readyState === 'closing') ||
        (this.readyState === 'closed')) {
      return;
    }
    this.readyState = 'closing';
    this.readyState = 'closed';
  };




/***/ }),

/***/ "./src/orkestra/motion/src/AbstractTimingProvider.js":
/*!***********************************************************!*\
  !*** ./src/orkestra/motion/src/AbstractTimingProvider.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AbstractTimingProvider": function() { return /* binding */ AbstractTimingProvider; }
/* harmony export */ });
/* harmony import */ var _event_target_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./event-target.js */ "./src/orkestra/motion/src/event-target.js");
/* harmony import */ var _StateVector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StateVector.js */ "./src/orkestra/motion/src/StateVector.js");
/* harmony import */ var _Interval_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Interval.js */ "./src/orkestra/motion/src/Interval.js");
/**
 * @file A timing provider object is a local object that interfaces with an
 * online timing service.
 *
 * This is an abstract base class that returns a dummy timing provider object.
 * Concrete implementations should derive this class or implement the
 * same interface. The constructor may be different in derived classes.
 */

// Ensure "define" is defined in node.js in the absence of require.js
// See: https://github.com/jrburke/amdefine



  
  
  


  /**
   * Creates a timing provider
   *
   * @class
   * @param {StateVector} vector The initial motion vector
   * @param {Interval} range The initial range if one is to be defined
   */
  var AbstractTimingProvider = function (vector, range) {
    this.range = new _Interval_js__WEBPACK_IMPORTED_MODULE_2__.Interval(range);

    var currentVector = new _StateVector_js__WEBPACK_IMPORTED_MODULE_1__.StateVector(vector);
    var readyState = 'connecting';
    var self = this;
    Object.defineProperties(this, {
      readyState: {
        get: function () {
          return readyState;
        },
        set: function (state) {
          if (state !== readyState) {
            readyState = state;

            setTimeout(function () {
              // Dispatch the event on next loop to give code that wants to
              // listen to the initial change to "open" time to attach an event
              // listener (local timing provider objects typically set the
              // readyState property to "open" directly within the constructor)
              self.dispatchEvent({
                type: 'readystatechange',
                value: state
              });
            }, 0);
          }
        }
      },
      vector: {
        get: function () {
          return currentVector;
        },
        set: function (vector) {
          var previousVector = currentVector;
          currentVector = vector;
          if (previousVector.compareTo(currentVector) === 0) {

          }
          else {

            self.dispatchEvent({
              type: 'change',
              value: currentVector
            });
          }
        }
      }
    });

  };


  // Timing providers implement EventTarget
  AbstractTimingProvider.prototype.addEventListener = (0,_event_target_js__WEBPACK_IMPORTED_MODULE_0__.EventTarget)().addEventListener;
  AbstractTimingProvider.prototype.removeEventListener = (0,_event_target_js__WEBPACK_IMPORTED_MODULE_0__.EventTarget)().removeEventListener;
  AbstractTimingProvider.prototype.dispatchEvent = (0,_event_target_js__WEBPACK_IMPORTED_MODULE_0__.EventTarget)().dispatchEvent;


  /**
   * Returns a new StateVector that represents the motion's position,
   * velocity and acceleration at the current local time.
   *
   * @function
   * @returns {StateVector} A new StateVector object that represents
   *   the motion's position, velocity and acceleration at the current local
   *   time.
   */
  AbstractTimingProvider.prototype.query = function () {
    var timestamp = Date.now() / 1000.0;
    var currentVector = new _StateVector_js__WEBPACK_IMPORTED_MODULE_1__.StateVector({
      position: this.vector.computePosition(timestamp),
      velocity: this.vector.computeVelocity(timestamp),
      acceleration: this.vector.computeAcceleration(timestamp),
      timestamp: timestamp
    });

    return currentVector;
  };


  /**
   * Sends an update command to the online timing service.
   *
   * @function
   * @param {Object} vector The new motion vector
   * @param {Number} vector.position The new motion position.
   *   If null, the position at the current time is used.
   * @param {Number} vector.velocity The new velocity.
   *   If null, the velocity at the current time is used.
   * @param {Number} vector.acceleration The new acceleration.
   *   If null, the acceleration at the current time is used.
   * @returns {Promise} The promise to get an updated StateVector that
   *   represents the updated motion on the server once the update command
   *   has been processed by the server.
   *   The promise is rejected if the connection with the online timing service
   *   is not possible for some reason (no connection, timing object on the
   *   server was deleted, timeout, permission issue).
   */
  AbstractTimingProvider.prototype.update = function (vector) {
    vector = new _StateVector_js__WEBPACK_IMPORTED_MODULE_1__.StateVector(vector || {});

    return new Promise(function (resolve, reject) {
      var err = new Error('Abstract "update" method called');

      reject(err);
    });
  };


  /**
   * Closes the timing provider object, releasing any resource that the
   * object might use.
   *
   * Note that a closed timing provider object cannot be re-used.
   *
   * @function
   */
  AbstractTimingProvider.prototype.close = function () {
    if ((this.readyState === 'closing') ||
        (this.readyState === 'closed')) {
      return;
    }
    this.readyState = 'closing';
    this.readyState = 'closed';
  };


  // Expose the class to the outer world



/***/ }),

/***/ "./src/orkestra/motion/src/Interval.js":
/*!*********************************************!*\
  !*** ./src/orkestra/motion/src/Interval.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Interval": function() { return /* binding */ Interval; }
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./src/orkestra/motion/src/utils.js");
/**
 * @file Defines an interval
 */

// Ensure "define" is defined in node.js in the absence of require.js
// See: https://github.com/jrburke/amdefine

  

  /**
   * Creates an interval
   *
   * @class
   * @param {Object} range The range
   * @param {Number} range.low Lower bound of the interval
   * @param {Number} range.high Higher bound of the interval
   * @param {Boolean} range.lowInclude Whether to include the lower bound
   * @param {Boolean} range.highInclude Whether to include the higher bound
   */
  var Interval = function (range) {
    range = range || {};

    this.low = range.low;
    this.lowInclude = range.lowInclude;
    this.high = range.high;
    this.highInclude = range.highInclude;

    // Ensure low <= high
    if (_utils__WEBPACK_IMPORTED_MODULE_0__.Utils.isNumber(this.low) &&
        _utils__WEBPACK_IMPORTED_MODULE_0__.Utils.isNumber(this.high) &&
        (this.low > this.high)) {
      range.low = this.high;
      range.lowInclude = this.highInclude;
      this.high = this.low;
      this.highInclude = this.lowInclude;
      this.low = range.low;
      this.lowInclude = range.lowInclude;
    }


  };


  /**
   * Returns true if interval covers the given value.
   *
   * @function
   * @param {Number} value Value to check
   * @returns {Boolean} true if interval covers the value
   */
  Interval.prototype.covers = function (value) {
    return (!this.low ||
        (this.low < value) ||
        ((this.low === value) && this.lowInclude)) &&
      (!this.high ||
        (this.high > value) ||
        ((this.high === value) && this.highInclude));
  };


  /**
   * Returns true if low is equal to high
   *
   * @function
   * @returns true if low is equal to high
   */
  Interval.prototype.isSingular = function () {
    return this.low === this.high;
  };


  // Expose the Interval class to the outer world



/***/ }),

/***/ "./src/orkestra/motion/src/LocalTimingProvider.js":
/*!********************************************************!*\
  !*** ./src/orkestra/motion/src/LocalTimingProvider.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LocalTimingProvider": function() { return /* binding */ LocalTimingProvider; }
/* harmony export */ });
/* harmony import */ var _AbstractTimingProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractTimingProvider */ "./src/orkestra/motion/src/AbstractTimingProvider.js");
/* harmony import */ var _StateVector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StateVector */ "./src/orkestra/motion/src/StateVector.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./src/orkestra/motion/src/utils.js");
/**
 * @file A timing provider object associated with the local clock.
 *
 * Timing objects that are not associated with any other timing provider object
 * are automatically associated with an instance of that class.
 */

// Ensure "define" is defined in node.js in the absence of require.js
// See: https://github.com/jrburke/amdefine


  //var Promise = require('promise');
  
  
  


  /**
   * Creates a timing provider
   *
   * @class
   */
  var LocalTimingProvider = function (vector, range) {
    _AbstractTimingProvider__WEBPACK_IMPORTED_MODULE_0__.AbstractTimingProvider.call(this, vector, range);
    this.readyState = 'open';

  };
  LocalTimingProvider.prototype = new _AbstractTimingProvider__WEBPACK_IMPORTED_MODULE_0__.AbstractTimingProvider();


  /**
   * Sends an update command to the online timing service.
   *
   * @function
   * @param {Object} vector The new motion vector
   * @param {Number} vector.position The new motion position.
   *   If null, the position at the current time is used.
   * @param {Number} vector.velocity The new velocity.
   *   If null, the velocity at the current time is used.
   * @param {Number} vector.acceleration The new acceleration.
   *   If null, the acceleration at the current time is used.
   * @returns {Promise} The promise to get an updated StateVector that
   *   represents the updated motion on the server once the update command
   *   has been processed by the server.
   *   The promise is rejected if the connection with the online timing service
   *   is not possible for some reason (no connection, timing object on the
   *   server was deleted, timeout, permission issue).
   */
  LocalTimingProvider.prototype.update = function (vector) {
    vector = vector || {};

    var timestamp = Date.now() / 1000.0;
    var newVector = {
      position: (_utils__WEBPACK_IMPORTED_MODULE_2__.Utils.isNull(vector.position) ?
        this.vector.computePosition(timestamp) :
        vector.position),
      velocity: (_utils__WEBPACK_IMPORTED_MODULE_2__.Utils.isNull(vector.velocity) ?
        this.vector.computeVelocity(timestamp) :
        vector.velocity),
      acceleration: (_utils__WEBPACK_IMPORTED_MODULE_2__.Utils.isNull(vector.acceleration) ?
        this.vector.computeAcceleration(timestamp) :
        vector.acceleration),
      timestamp: timestamp
    };
    this.vector = new _StateVector__WEBPACK_IMPORTED_MODULE_1__.StateVector(newVector);


    return new Promise(function (resolve, reject) {

      resolve(newVector);
    });
  };


  // Expose the class to the outer worlç



/***/ }),

/***/ "./src/orkestra/motion/src/ObjectSync.js":
/*!***********************************************!*\
  !*** ./src/orkestra/motion/src/ObjectSync.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ObjectSync": function() { return /* binding */ ObjectSync; }
/* harmony export */ });
class ObjectSync {
  constructor(){
    this.currentTime=0.0;
    this.playbackRate=1.0;
    this.paused=true;
    this.offset=0;
  }

  pause (){
    // TODO pause
    console.log("TODO");
  }
  play (){
    // TODO play
    console.log("TODO");
  }
  seekTo (time){
    // TODO play
    console.log("TODO");
  }
  setPlaybackRate(rate){
    this.playbackRate = rate;
  }
  incPlayBacRate(){
    this.playbackRate+=0.3;
  }
  decPlayBacRate(){
    this.playbackRate-=0.3;
  }
}



/***/ }),

/***/ "./src/orkestra/motion/src/SocketSyncClock.js":
/*!****************************************************!*\
  !*** ./src/orkestra/motion/src/SocketSyncClock.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SocketSyncClock": function() { return /* binding */ SocketSyncClock; }
/* harmony export */ });
/* harmony import */ var _AbstractSyncClock__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractSyncClock */ "./src/orkestra/motion/src/AbstractSyncClock.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./src/orkestra/motion/src/utils.js");
/**
 * @file A clock synchronized with an online server clock over some WebSocket
 * communication channel.
 *
 * This clock has an initialization period during it sends a batch of "sync"
 * requets to the server to compute the minimum roundtrip duration and a
 * realistic threshold for that roundtrip duration.
 *
 * The threshold is used afterward to reject sync messages that spend too much
 * time in the network (or in the client or server waiting to be processed),
 * as these messages would otherwise lead to a poor skew estimate.
 *
 * Note that this clock is not necessarily monotonic.
 *
 * This implementation borrows idea from the Media State Vector
 * paper and/or the "Probabilistic clock synchronization" paper at:
 * http://motioncorporation.com/publications/mediastatevector2012.pdf
 * http://www.cs.utexas.edu/users/lorenzo/corsi/cs380d/papers/Cristian.pdf
 *
 * TODO: also consider building a monotonically increasing clock
 * (meaning one that cannot "jump" backward and jumps forward gradually)
 */

// Ensure "define" is defined in node.js in the absence of require.js
// See: https://github.com/jrburke/amdefine


  
  



  // Web Sockets ready state constants
  var CONNECTING = 0;
  var OPEN = 1;
  var CLOSING = 2;
  var CLOSED = 3;

  // Number of exchanges to make with the server to compute the first skew
  var initialAttempts = 10;

  // Interval between two exchanges during initialization (in ms)
  var initialInterval = 10;

  // Maximum number of attempts before giving up
  var maxAttempts = 10;

  // Interval between two attempts when the clock is open (in ms)
  var attemptInterval = 500;

  // Interval between two synchronization batches (in ms)
  var batchInterval = 10000;

  // Minimum roundtrip threshold (in ms)
  var minRoundtripThreshold = 5;


  /**
   * Creates a Socket synchronization clock
   *
   * @class
   * @param {String} url The URL of the remote timing object for which we
   *   want to synchronize the clock (only used to check permissions)
   * @param {WebSocket} socket A Web socket to use as communication channel.
   */
  var SocketSyncClock = function (url, socket) {
    // Initialize the base class with default data
    _AbstractSyncClock__WEBPACK_IMPORTED_MODULE_0__.AbstractSyncClock.call(this);

    var self = this;


    /**
     * The Web Socket that will be used to exchange sync information with
     * the online server
     */
    this.socket = socket;


    /**
     * Minimum round trip detected so far (in ms)
     */
    var roundtripMin = 1000;


    /**
     * Current round trip threshold above which the "sync"
     * request is considered to be a failure (in ms)
     *
     * NB: this threshold must always be higher than the minimum round trip
     */
    var roundtripThreshold = 1000;


    /**
     * Number of "sync" attempts in the current batch so far.
     * The clock will attempt up to maxAttempts attempts in a row
     * each time it wants to synchronize
     */
    var attempts = 0;


    /**
     * Valid responses received from the server for the current batch
     */
    var initialSyncMessages = [];


    /**
     * ID of the attempt response we are currently waiting for
     */
    var attemptId = null;


    /**
     * The attempt timeout
     */
    var attemptTimeout = null;


    /**
     * Timeout to detect when the server fails to respond in time
     */
    var timeoutTimeout = null;


    if (socket.readyState === OPEN) {

      sendSyncRequest();
    }
    else if (socket.readyState === CLOSED) {

      this.readyState = 'closed';
    }

    var errorHandler = function (err) {

      // TODO: properly deal with network errors
      return true;
    };

    var openHandler = function () {

      sendSyncRequest();
      return true;
    };

    var closeHandler = function () {

      self.close();
      return true;
    };

    var messageHandler = function (evt) {
      var msg = null;
      var received = Date.now();
      var skew = 0;

      if (typeof evt.data !== 'string') {

        return true;
      }

      try {
        msg = JSON.parse(evt.data) || {};
      }
      catch (err) {

        return true;
      }

      if (msg.type !== 'sync') {

        return true;
      }

      if (!msg.client || !msg.server ||
          !_utils__WEBPACK_IMPORTED_MODULE_1__.Utils.isNumber(msg.client.sent) ||
          !_utils__WEBPACK_IMPORTED_MODULE_1__.Utils.isNumber(msg.server.received) ||
          !_utils__WEBPACK_IMPORTED_MODULE_1__.Utils.isNumber(msg.server.sent)) {

        return true;
      }

      if (msg.id !== attemptId) {

        return true;
      }

      // Message is for us
      attempts += 1;

      // Compute round trip duration
      var roundtripDuration = received - msg.client.sent;

      // Check round trip duration
      if ((self.readyState !== 'connecting') &&
          (roundtripDuration > roundtripThreshold)) {

        return false;
      }

      if (timeoutTimeout) {
        // Cancel the timeout set to detect server timeouts.
        clearTimeout(timeoutTimeout);
        timeoutTimeout = null;
      }
      else {
        // A timeout already occurred
        // (should have normally be trapped by the check on round trip
        // duration, but timeout scheduling and the event loop are not
        // an exact science)

        return false;
      }

      // During initialization, simply store the response,
      // we'll process things afterwards
      if (self.readyState === 'connecting') {

        initialSyncMessages.push({
          received: received,
          roundtrip: roundtripDuration,
          msg: msg
        });
        if (attempts >= initialAttempts) {
          initialize();
          scheduleNextBatch();
        }
        else {
          scheduleNextAttempt();
        }
        return false;
      }

      // Adjust the minimum round trip and threshold if needed
      if (roundtripDuration < roundtripMin) {
        roundtripThreshold = Math.ceil(
          roundtripThreshold * (roundtripDuration / roundtripMin));
        if (roundtripThreshold < minRoundtripThreshold) {
          roundtripThreshold = minRoundtripThreshold;
        }
        roundtripMin = roundtripDuration;
      }


      // Sync message can be directly applied
      skew = ((msg.server.sent + msg.server.received) -
          (msg.client.sent + received)) / 2.0;
      if (Math.abs(skew - self.skew) < 1) {
        skew = self.skew;
      }
      else {
        skew = Math.round(skew);
      }

      // Save the new skew
      // (this triggers a "change" event if value changed)
      self.skew = skew;

      // No need to schedule another attempt,
      // let's simply schedule the next sync batch of attempts
      scheduleNextBatch();

      return false;
    };

    // NB: calling "addEventListener" does not work in a Node.js environment
    // because the WebSockets library used only supports basic "onXXX"
    // constructs. The code below works around that limitation but note that
    // only works provided the clock is associated with the socket *after* the
    // timing provider object!
    var previousErrorHandler = this.socket.onerror;
    var previousOpenHandler = this.socket.onopen;
    var previousCloseHandler = this.socket.onclose;
    var previousMessageHandler = this.socket.onmessage;
    if (this.socket.addEventListener) {
      this.socket.addEventListener('error', errorHandler);
      this.socket.addEventListener('open', openHandler);
      this.socket.addEventListener('close', closeHandler);
      this.socket.addEventListener('message', messageHandler);
    }
    else {
      this.socket.onerror = function (evt) {
        var propagate = errorHandler(evt);
        if (propagate && previousErrorHandler) {
          previousErrorHandler(evt);
        }
      };
      this.socket.onopen = function (evt) {
        var propagate = openHandler(evt);
        if (propagate && previousOpenHandler) {
          previousOpenHandler(evt);
        }
      };
      this.socket.onclose = function (evt) {
        var propagate = closeHandler(evt);
        if (propagate && previousCloseHandler) {
          previousCloseHandler(evt);
        }
      };
      this.socket.onmessage = function (evt) {
        var propagate = messageHandler(evt);
        if (propagate && previousMessageHandler) {
          previousMessageHandler(evt);
        }
      };
    }


    /**
     * Helper function to send a "sync" request to the socket server
     */
    var sendSyncRequest = function () {

      attemptId = url + '#' + Date.now();
      self.socket.send(_utils__WEBPACK_IMPORTED_MODULE_1__.Utils.stringify({
        type: 'sync',
        id: attemptId,
        client: {
          sent: Date.now()
        }
      }));
      attemptTimeout = null;

      timeoutTimeout = setTimeout(function () {
        attempts += 1;
        timeoutTimeout = null;

        if (attempts >= maxAttempts) {
          if (self.readyState === 'connecting') {
            initialize();
          }
          else {
            roundtripThreshold = Math.ceil(roundtripThreshold * 1.20);

          }
          scheduleNextBatch();
        }
        else {
          scheduleNextAttempt();
        }
      }, roundtripThreshold);
    };


    /**
     * Helper function to schedule the next sync attempt
     *
     * @function
     */
    var scheduleNextAttempt = function () {
      var interval = (self.readyState === 'connecting') ?
        initialInterval :
        attemptInterval;
      if (timeoutTimeout) {
        clearTimeout(timeoutTimeout);
        timeoutTimeout = null;
      }
      if (attemptTimeout) {
        clearTimeout(attemptTimeout);
        attemptTimeout = null;
      }
      attemptTimeout = setTimeout(sendSyncRequest, interval);
    };


    /**
     * Helper function to schedule the next batch of sync attempts
     *
     * @function
     */
    var scheduleNextBatch = function () {
      if (timeoutTimeout) {
        clearTimeout(timeoutTimeout);
        timeoutTimeout = null;
      }
      if (attemptTimeout) {
        clearTimeout(attemptTimeout);
        attemptTimeout = null;
      }
      attempts = 0;
      attemptTimeout = setTimeout(sendSyncRequest, batchInterval);
    };


    /**
     * Helper function that computes the initial skew based on the
     * sync messages received so far and adjust the roundtrip threshold
     * accordingly.
     *
     * The function also sets the clock's ready state to "open".
     *
     * @function
     */
    var initialize = function () {
      var msg = null;
      var skew = null;
      var received = 0;
      var pos = 0;



      // Sort messages received according to round trip
      initialSyncMessages.sort(function (a, b) {
        return a.roundtrip - b.roundtrip;
      });

      // Use the first message to compute the initial skew
      if (initialSyncMessages.length > 0) {
        msg = initialSyncMessages[0].msg;
        received = initialSyncMessages[0].received;
        roundtripMin = initialSyncMessages[0].roundtrip;

        if (_utils__WEBPACK_IMPORTED_MODULE_1__.Utils.isNumber(msg.delta)) {
          self.delta = msg.delta;
        }

        skew = ((msg.server.sent + msg.server.received) -
            (msg.client.sent + received)) / 2.0;
        if (Math.abs(skew - self.skew) < 1) {
          skew = self.skew;
        }
        else {
          skew = Math.round(skew);
        }
        self.skew = skew;
      }

      // Adjust the threshold to preserve at least half of the sync messages
      // that should have been received.
      pos = Math.ceil(initialAttempts / 2) - 1;
      if (pos >= initialSyncMessages.length) {
        pos = initialSyncMessages.length - 1;
      }
      if (pos >= 0) {
        roundtripThreshold = initialSyncMessages[pos].roundtrip;
      }

      // Ensure the threshold is not too low compared to the
      // known minimum roundtrip duration
      if (roundtripThreshold < roundtripMin * 1.30) {
        roundtripThreshold = Math.ceil(roundtripMin * 1.30);
      }
      if (roundtripThreshold < minRoundtripThreshold) {
        roundtripThreshold = minRoundtripThreshold;
      }

      // Clock is ready

      self.readyState = 'open';
      initialSyncMessages = [];
    };


    /**
     * Method that stops the background synchronization
     */
    this.stopSync = function () {
      if (attemptTimeout) {
        clearTimeout(attemptTimeout);
        attemptTimeout = null;
      }
      if (timeoutTimeout) {
        clearTimeout(timeoutTimeout);
        timeoutTimeout = null;
      }
    };


  };
  SocketSyncClock.prototype = new _AbstractSyncClock__WEBPACK_IMPORTED_MODULE_0__.AbstractSyncClock();


  /**
   * Stops synchronizing the clock with the reference clock
   *
   * Note that a closed synchronized clock object cannot be re-used.
   *
   * @function
   */
  SocketSyncClock.prototype.close = function () {
    if ((this.readyState === 'closing') ||
        (this.readyState === 'closed')) {
      return;
    }
    this.readyState = 'closing';
    this.stopSync();
    this.socket = null;
    this.readyState = 'closed';
  };


  // Expose the class to the outer world
  


/***/ }),

/***/ "./src/orkestra/motion/src/SocketTimingProvider.js":
/*!*********************************************************!*\
  !*** ./src/orkestra/motion/src/SocketTimingProvider.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SocketTimingProvider": function() { return /* binding */ SocketTimingProvider; }
/* harmony export */ });
/* harmony import */ var _AbstractTimingProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AbstractTimingProvider */ "./src/orkestra/motion/src/AbstractTimingProvider.js");
/* harmony import */ var _StateVector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StateVector */ "./src/orkestra/motion/src/StateVector.js");
/* harmony import */ var _SocketSyncClock__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SocketSyncClock */ "./src/orkestra/motion/src/SocketSyncClock.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./src/orkestra/motion/src/utils.js");
/**
 * @file A timing provider object associated with an online timing server
 * using WebSockets.
 *
 * The socket timing provider object can send 3 different types of commands to
 * the WebSockets server:
 * - info: to retrieve the current media state vector (only done to initialize
 *   the object to the right settings)
 * - update: to update the media state vector
 * - sync: to synchronize local clock with remote clock
 *
 * The socket timing provider object can receive 3 different types of responses:
 * - info: Information about the timing object on the server
 * - change: an update event, meaning the underlying vector was changed
 * - sync: response to the sync command
 *
 * The socket timing provider object does not handle the creation and deletion
 * of the online timing object it is associated with on the server. This should
 * be done in separate factory methods.
 *
 * The socket timing provider object computes an approximation of the skew
 * between the local clock and the server clock on a regular basis (several
 * times per minute). It adjusts the timestamp of change events received from
 * the server automatically based on that computation.
 *
 * The socket timing provider object tries to trigger change events only when
 * appropriate meaning it will queue events that it believes need to be
 * triggered in the future.
 */

// Ensure "define" is defined in node.js in the absence of require.js
// See: https://github.com/jrburke/amdefine



  
  
  
  


  var W3CWebSocket = null;

  W3CWebSocket = window.WebSocket;

    // W3CWebSocket = window.WebSocket;

  // Web Sockets ready state constants
  var CONNECTING = 0;
  var OPEN = 1;
  var CLOSING = 2;
  var CLOSED = 3;


  /**
   * Creates a timing provider
   *
   * @class
   * @param {String} url The Web socket URL of the remote timing object
   * @param {WebSocket} socket An opened Web socket to use as communication
   *   channel. The parameter is optional, the object will create the
   *   communication channel if not given.
   * @param {AbstractSyncClock} clock A clock to use for synchronization with
   *   the online server clock. If not given, a clock that uses the underlying
   *   WebSocket will be created and used.
   */
  var SocketTimingProvider = function (url, socket, clock) {
    var self = this;

    /**
     * The URL of the online object, it is used as
     * identifier in exchanges with the backend server
     */
    this.url = url;

    /**
     * The current vector as returned by the server.
     *
     * Updating the property through the setter automatically updates
     * the exposed vector as well, converting the server timestamp into
     * a local timestamp based on the underlying synchronized clock's readings
     */
    var serverVector = null;
    Object.defineProperty(this, 'serverVector', {
      get: function () {
        return serverVector;
      },
      set: function (vector) {
        var now = Date.now();
        serverVector = vector;
        self.vector = new _StateVector__WEBPACK_IMPORTED_MODULE_1__.StateVector({
          position: vector.position,
          velocity: vector.velocity,
          acceleration: vector.acceleration,
          timestamp: vector.timestamp + (now - self.clock.getTime(now)) / 1000.0
        });
      }
    });

    /**
     * List of "change" events already received from the server but
     * whose estimated timestamps lie in the future
     */
    var pendingChanges = [];

    /**
     * The ID of the timeout used to trigger the first of the remaining
     * pending change events to process
     */
    var pendingTimeoutId = null;

    /**
     * Helper function that schedules the propagation of the next pending
     * change. Note that the function calls itself as long as there are
     * pending changes to schedule.
     *
     * The function should be called whenever the synchronized clock reports
     * changes on its skew evaluation, since that affects the time at which
     * pending changes need to be executed.
     */
    var scheduleNextPendingChange = function () {
      stopSchedulingPendingChanges();
      if (pendingChanges.length === 0) {
        return;
      }

      var now = Date.now();
      var vector = pendingChanges[0];
      var localTimestamp = (vector.timestamp * 1000.0) +
        now - self.clock.getTime(now);

      var applyNextPendingChange = function () {
        // Since we cannot control when this function runs precisely,
        // note we may have to skip over the first few changes. We'll
        // only trigger the change that is closest to now

        var now = Date.now();
        var vector = pendingChanges.shift();
        var nextVector = null;
        var localTimestamp = 0.0;
        while (pendingChanges.length > 0) {
          nextVector = pendingChanges[0];
          localTimestamp = nextVector.timestamp * 1000.0 +
            now - self.clock.getTime(now);
          if (localTimestamp > now) {
            break;
          }
          vector = pendingChanges.shift();
        }

        self.serverVector = vector;
        scheduleNextPendingChange();
      };

      if (localTimestamp > now) {
        pendingTimeoutId = setTimeout(
          applyNextPendingChange,
          localTimestamp - now);
      }
      else {
        applyNextPendingChange();
      }
    };


    /**
     * Helper function that stops the pending changes scheduler
     *
     * @function
     */
    var stopSchedulingPendingChanges = function () {

      if (pendingTimeoutId) {
        clearTimeout(pendingTimeoutId);
        pendingTimeoutId = null;
      }
    };


    /**
     * Helper function that processes the "info" message from the
     * socket server when the clock is ready.
     *
     * @function
     */
    var processInfoWhenPossible = function (msg) {
      // This should really just happen during initialization
      if (self.readyState !== 'connecting') {

        return;
      }

      // If clock is not yet ready, schedule processing for when it is
      // (note that this function should only really be called once but
      // not a big deal if we receive more than one info message from the
      // server)
      if (self.clock.readyState !== 'open') {
        self.clock.addEventListener('readystatechange', function () {
          if (self.clock.readyState === 'open') {
            processInfoWhenPossible(msg);
          }
        });
        return;
      }

      if (self.clock.delta) {
        // The info will be applied right away, but if the server imposes
        // some delta to all clients (to improve synchronization), it
        // should be applied to the timestamp received.
        msg.vector.timestamp -= (self.clock.delta / 1000.0);
      }
      self.serverVector = new _StateVector__WEBPACK_IMPORTED_MODULE_1__.StateVector(msg.vector);

      // TODO: set the range as well when feature is implemented

      // The timing provider object should now be fully operational
      self.readyState = 'open';
    };


    // Initialize the base class with default data
    _AbstractTimingProvider__WEBPACK_IMPORTED_MODULE_0__.AbstractTimingProvider.call(this);

    // Connect to the Web socket
    if (socket) {
      this.socket = socket;
      this.socketProvided = true;
    }
    else {
      this.socket = new W3CWebSocket(url, 'echo-protocol');
      this.socketProvided = false;
    }

    this.socket.onerror = function (err) {
      console.log("error",err);
      // TODO: implement a connection recovery mechanism
    };

    this.socket.onopen = function () {
	     console.warn("socket open");
      self.socket.send(_utils__WEBPACK_IMPORTED_MODULE_3__.Utils.stringify({
        type: 'info',
        id: url
      }));
    };

    this.socket.onclose = function() {
     console.warn("socket closed");
      self.close();
    };
    window.onbeforeunload = function() {
      self.onclose = function () {}; // disable onclose handler first
      self.close();
    };

    this.socket.onmessage = function (evt) {
      var msg = null;
      var vector = null;
      var now = Date.now();
      var localTimestamp = 0;

      if (typeof evt.data === 'string') {
        try {
          msg = JSON.parse(evt.data) || {};
        }
        catch (err) {

          return;
        }

        if (msg.id !== url) {

          return;
        }

        switch (msg.type) {
        case 'info':
          // Info received from the socket server but note that the clock may
          // not yet be synchronized with that of the server, let's wait for
          // that.

          processInfoWhenPossible(msg);
          break;

        case 'change':
          if (self.readyState !== 'open') {

            return;
          }

          // TODO: not sure what to do when the server sends an update with
          // a timestamp that lies in the past of the current vector we have,
          // ignoring for now
          if (msg.vector.timestamp < self.serverVector.timestamp) {

            return;
          }

          // Create a new Media state vector from the one received
          vector = new _StateVector__WEBPACK_IMPORTED_MODULE_1__.StateVector(msg.vector);

          // Determine whether the change event is to be applied now or to be
          // queued up for later
          localTimestamp = vector.timestamp * 1000.0 +
              now - self.clock.getTime(now);
          if (localTimestamp < now) {

            self.serverVector = vector;
          }
          else {

            pendingChanges.push(vector);
            pendingChanges.sort(function (a, b) {
              return a.timestamp - b.timestamp;
            });
            scheduleNextPendingChange();
          }
          break;
        }
      }
    };

    // Create the clock
    if (clock) {
      this.clock = clock;
    }
    else {
      this.clock = new _SocketSyncClock__WEBPACK_IMPORTED_MODULE_2__.SocketSyncClock(url, this.socket);
      this.clock.addEventListener('change', function () {
        if (self.readyState !== 'open') {
          return;
        }

        scheduleNextPendingChange();
      });
    }




    // Check the initial state of the socket connection
    if (this.socket.readyState === OPEN) {

      this.socket.send(_utils__WEBPACK_IMPORTED_MODULE_3__.Utils.stringify({
        type: 'info',
        id: url
      }));
    }
    else if (this.socket.readyState === CLOSED) {

      self.close();
    }

  };
  SocketTimingProvider.prototype = new _AbstractTimingProvider__WEBPACK_IMPORTED_MODULE_0__.AbstractTimingProvider();


  /**
   * Sends an update command to the online timing service.
   *
   * @function
   * @param {Object} vector The new motion vector
   * @param {Number} vector.position The new motion position.
   *   If null, the position at the current time is used.
   * @param {Number} vector.velocity The new velocity.
   *   If null, the velocity at the current time is used.
   * @param {Number} vector.acceleration The new acceleration.
   *   If null, the acceleration at the current time is used.
   * @returns {Promise} The promise to get an updated StateVector that
   *   represents the updated motion on the server once the update command
   *   has been processed by the server.
   *   The promise is rejected if the connection with the online timing service
   *   is not possible for some reason (no connection, timing object on the
   *   server was deleted, timeout, permission issue).
   */
  SocketTimingProvider.prototype.update = function (vector) {
    vector = vector || {};


    if (this.readyState !== 'open') {
      return new Promise(function (resolve, reject) {

        reject(new Error('Underlying socket was closed'));
      });
    }
    this.socket.send(_utils__WEBPACK_IMPORTED_MODULE_3__.Utils.stringify({
      type: 'update',
      id: this.url,
      vector: vector
    }));

    return new Promise(function (resolve, reject) {
      // TODO: To be able to resolve the promise, we would need to know
      // when the server has received and processed the request. This
      // requires an ack that does not yet exist. Also, should the promise
      // only be resolved when the update is actually done (which may take
      // place after some time and may actually not take place at all?)
      resolve();
    });
  };


  /**
   * Closes the timing provider object, releasing any resource that the
   * object might use.
   *
   * Note that a closed timing provider object cannot be re-used.
   *
   * @function
   */
  SocketTimingProvider.prototype.close = function () {
    if ((this.readyState === 'closing') ||
        (this.readyState === 'closed')) {
      return;
    }
    this.readyState = 'closing';
    this.clock.close();
    if (!this.socketProvided && (this.socket.readyState !== CLOSED)) {
      this.socket.close();
    }
    this.socket = null;
    this.readyState = 'closed';
  };


  // Expose the class to the outer world



/***/ }),

/***/ "./src/orkestra/motion/src/StateVector.js":
/*!************************************************!*\
  !*** ./src/orkestra/motion/src/StateVector.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StateVector": function() { return /* binding */ StateVector; }
/* harmony export */ });
/**
 * @file A State Vector is an object that describes uni-dimensional
 * motion in real time.
 *
 * The motion is described by four real numbers [p, v, a, t] representing
 * the position (p), velocity (v), and acceleration (a) at time (t).
 *
 * The time (t) is expressed in seconds. The position unit is entirely up to
 * the application. The velocity is in position units per second, and the
 * acceleration in position units per second squared.
 */

// Ensure "define" is defined in node.js in the absence of require.js
// See: https://github.com/jrburke/amdefine

/* Default constructor for a state vector
   *
   * @class
   * @param {Object} vector The initial motion vector
   * @param {Number} vector.position The initial position (0.0 if null)
   * @param {Number} vector.velocity The initial velocity (0.0 if null)
   * @param {Number} vector.acceleration The initial acceleration (0.0 if null)
   * @param {Number} vector.timestamp The initial time in seconds (now if null)
   */
  var StateVector = function (vector) {
    vector = vector || {};

    /**
     * The position of the motion along its axis.
     *
     * The position unit may be anything.
     */
    this.position = vector.position || 0.0;

    /**
     * The velocity of the motion in position units per second.
     */
    this.velocity = vector.velocity || 0.0;

    /**
     * The acceleration of the motion in position units per second squared.
     */
    this.acceleration = vector.acceleration || 0.0;

    /**
     * The local time in milliseconds when the position, velocity and
     * acceleration are evaluated.
     */
    this.timestamp = vector.timestamp || (Date.now() / 1000.0);


  };


  /**
   * Computes the position along the uni-dimensional axis at the given time
   *
   * @function
   * @param {Number} timestamp The reference time in seconds
   */
  StateVector.prototype.computePosition = function (timestamp) {
    var elapsed = timestamp - this.timestamp;
    var result = this.position +
      this.velocity * elapsed +
      0.5 * this.acceleration * elapsed * elapsed;

    return result;
  };


  /**
   * Computes the velocity along the uni-dimensional axis at the given time
   *
   * @function
   * @param {Number} timestamp The reference time in seconds
   */
  StateVector.prototype.computeVelocity = function (timestamp) {
    var elapsed = timestamp - this.timestamp;
    var result = this.velocity +
      this.acceleration * elapsed;
    return result;
  };


  /**
   * Computes the acceleration along the uni-dimensional axis at the given time
   *
   * Note that this function merely exists for symmetry with computePosition and
   * computeAcceleration. In practice, this function merely returns the vector's
   * acceleration which is unaffected by time.
   *
   * @function
   * @param {Number} timestamp The reference time in seconds
   */
  StateVector.prototype.computeAcceleration = function (timestamp) {
    return this.acceleration;
  };


  /**
   * Compares this vector with the specified vector for order. Returns a
   * negative integer, zero, or a positive integer as this vector is less than,
   * equal to, or greater than the specified object.
   *
   * Note that the notions of "less than" or "greater than" do not necessarily
   * mean much when comparing motions. In practice, the specified vector is
   * evaluated at the timestamp of this vector. Position is compared first.
   * If equal, velocity is compared next. If equal, acceleration is compared.
   *
   * TODO: the function probably returns differences in cases where it should
   * not because of the limited precision of floating numbers. Fix that.
   *
   * @function
   * @param {StateVector} vector The vector to compare
   * @returns {Integer} The comparison result
   */
  StateVector.prototype.compareTo = function (vector) {
    var timestamp = this.timestamp;
    var value = 0.0;

    value = vector.computePosition(timestamp);
    if (this.position < value) {
      return -1;
    }
    else if (this.position > value) {
      return 1;
    }

    value = vector.computeVelocity(timestamp);
    if (this.velocity < value) {
      return -1;
    }
    else if (this.velocity > value) {
      return 1;
    }

    value = vector.computeAcceleration(timestamp);
    if (this.acceleration < value) {
      return -1;
    }
    else if (this.acceleration > value) {
      return 1;
    }

    return 0;
  };


  /**
   * Overrides toString to return a meaningful string serialization of the
   * object for logging
   *
   * @function
   * @returns {String} A human-readable serialization of the vector
   */
  StateVector.prototype.toString = function () {
    return '(position=' + this.position +
      ', velocity=' + this.velocity +
      ', acceleration=' + this.acceleration +
      ', timestamp=' + this.timestamp + ')';
  };


  // Expose the Media State Vector constructor



/***/ }),

/***/ "./src/orkestra/motion/src/TimingMediaController.js":
/*!**********************************************************!*\
  !*** ./src/orkestra/motion/src/TimingMediaController.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TimingMediaController": function() { return /* binding */ TimingMediaController; }
/* harmony export */ });
/* harmony import */ var _event_target__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./event-target */ "./src/orkestra/motion/src/event-target.js");
/* harmony import */ var _TimingObject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TimingObject */ "./src/orkestra/motion/src/TimingObject.js");
/* harmony import */ var _StateVector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StateVector */ "./src/orkestra/motion/src/StateVector.js");
/**
 * @file A timing media controller takes inputs from a timing object and
 * harnesses one or more HTML media elements (audio, video, media controller)
 * accordingly.
 *
 * A timing media controller exposes usual media element controls such as
 * "play", "pause" methods as well as "currentTime" and "playbackRate"
 * attributes. Internally, calling these methods or setting these attributes
 * update the timing object's state vector, which should in turn affect the
 * HTML media elements that the timing media controller harnesses.
 *
 * Said differently, commands sent to a timing media controller are not
 * directly applied to the HTML media elements under control. Everything goes
 * through the timing object to enable cross-device synchronization effects.
 *
 * TODO: add logic to handle buffering hiccups in media elements.
 * TODO: add logic to remove elements from the list of controlled elements.
 */

// Ensure "define" is defined in node.js in the absence of require.js
// See: https://github.com/jrburke/amdefine


  
  
  


  /**
   * Constructor of a timing media controller
   *
   * @class
   * @param {TimingObject} timing The timing object attached to the controller
   * @param {Object} options controller settings
   */
  var TimingMediaController = function (timing, options) {
    var self = this;
    options = options || {};

    if (!timing || (!timing instanceof _TimingObject__WEBPACK_IMPORTED_MODULE_1__.TimingObject)) {
      throw new Error('No timing object provided');
    }

    /**
     * The timing media controller's internal settings
     */
    var settings = {
      // Media elements are considered in sync with the timing object if the
      // difference between the position they report and the position of the
      // timing object is below that threshold (in seconds).
      minDiff: options.minDiff || 0.040,

      // Maximum delay for catching up (in seconds).
      // If the code cannot meet the maxDelay constraint,
      // it will have the media element directly seek to the right position.
      maxDelay: options.maxDelay || 0.8,

      // Amortization period (in seconds).
      // The amortization period is used when adjustments are made to
      // the playback rate of the video.
      amortPeriod: options.amortPeriod || 1.0
    };


    /**
     * The list of Media elements controlled by this timing media controller.
     *
     * For each media element, the controller maintains a state vector
     * representation of the element's position and velocity, a drift rate
     * to adjust the playback rate, whether we asked the media element to
     * seek or not, and whether there is an amortization period running for
     * the element
     *
     * {
     *   vector: {},
     *   driftRate: 0.0,
     *   seeked: false,
     *   amortization: false,
     *   element: {}
     * }
     */
    var controlledElements = [];


    /**
     * The timing object's state vector last time we checked it.
     * This variable is used in particular at the end of the amortization
     * period to compute the media element's drift rate
     */
    var timingVector = null;


    /**
     * Pointer to the amortization period timeout.
     * The controller uses only one amortization period for all media elements
     * under control.
     */
    var amortTimeout = null;


    Object.defineProperties(this, {
      /**
       * Report the state of the underlying timing object
       *
       * TODO: should that also take into account the state of the controlled
       * elements? Hard to find a proper definition though
       */
      readyState: {
        get: function () {
          return timingProvider.readyState;
        }
      },


      /**
       * The currentTime attribute returns the position that all controlled
       * media elements should be at, in other words the position of the
       * timing media controller when this method is called.
       *
       * On setting, the timing object's state vector is updated with the
       * provided value, which will (asynchronously) affect all controlled
       * media elements.
       *
       * Note that getting "currentTime" right after setting it may not return
       * the value that was just set.
       */
      currentTime: {
        get: function () {
          return timing.currentPosition;
        },
        set: function (value) {
          timing.update(value, null);
        }
      },


      /**
       * The current playback rate of the controller (controlled media elements
       * may have a slightly different playback rate since the role of the
       * controller is precisely to adjust their playback rate to ensure they
       * keep up with the controller's position.
       *
       * On setting, the timing object's state vector is updated with the
       * provided value, which will (asynchronously) affect all controlled
       * media elements.
       *
       * Note that getting "playbackRate" right after setting it may not return
       * the value that was just set.
       */
      playbackRate: {
        get: function () {
          return timing.currentVelocity;
        },
        set: function (value) {
          timing.update(null, value);
        }
      }
    });


    /**
     * Start playing the controlled elements
     *
     * @function
     */
    this.play = function () {
      timing.update(null, 1.0,null);
    };


    /**
     * Pause playback
     *
     * @function
     */
    this.pause = function () {
      timing.update(null, 0.0,null);

    };
    this.reset = function (vel) {
      timing.update(0.0,vel,null);
    };
    this.seek = function (time,vel) {
      timing.update(time, vel,null);
    };
    this.incPlayBacRate = function (){
      this.playbackRate+=0.3;
    }
    this.decPlayBacRate = function(){
      this.playbackRate-=0.3;
    }
    /**
     * Add a media element to the list of elements controlled by this
     * controller
     *
     * @function
     * @param {MediaElement} element The media element to associate with the
     *  controller.
     */
    this.addMediaElement = function (element,offset) {
      var found = false;
    if (element) {

      console.log("OFFSET",offset/1000);
      element._offset = offset/1000;
      controlledElements.forEach(function (wrappedEl) {
        if (wrappedEl.element === element) {

          found = true;
        }
      });
      if (found) {
        return;
      }
      controlledElements.push({
        element: element,
        vector: null,
        driftRate: 0.0,
        seeked: false,
        amortization: false
      });
      }
    };
    this.removeMediaElement = function (element) {
      var found = false;
      controlledElements = controlledElements.filter(function (wrappedEl) {
        if (wrappedEl.element === element) {
            return false;
        }
        else return true;
      });


    };

    /**
     * Helper function that cancels a running amortization period
     */
    var cancelAmortizationPeriod = function () {
      if (!amortTimeout) {
        return;
      }
      clearTimeout(amortTimeout);
      amortTimeout = null;
      controlledElements.forEach(function (wrappedEl) {
        wrappedEl.amortization = false;
        wrappedEl.seeked = false;
      });
    };


    /**
     * Helper function to stop the playback adjustment once the amortization
     * period is over.
     */
    var stopAmortizationPeriod = function () {
      var now = Date.now() / 1000.0;
      amortTimeout = null;

      controlledElements.forEach(function (wrappedEl) {
        // Nothing to do if element was not part of amortization period
        if (!wrappedEl.amortization) {
          return;
        }
        wrappedEl.amortization = false;

        // Don't adjust playback rate and drift rate if video was seeked
        // or if element was not part of that amortization period.
        if (wrappedEl.seeked) {

          wrappedEl.seeked = false;
          return;
        }

        // Compute the difference between the position the video should be and
        // the position it is reported to be at.
        var diff = wrappedEl.vector.computePosition(now) - wrappedEl.element.currentTime;

        // Compute the new video drift rate
        wrappedEl.driftRate = 0.002;

        // Switch back to the current vector's velocity,
        // adjusted with the newly computed drift rate
        wrappedEl.vector.velocity = timingVector.velocity + wrappedEl.driftRate;
        wrappedEl.element.playbackRate = wrappedEl.vector.velocity;


      });
    };



    /**
     * React to timing object's changes, harnessing the controlled
     * elements to align them with the timing object's position and velocity
     */
    var onTimingChange = function () {
      cancelAmortizationPeriod();
      controlElements();
    };


    /**
     * Ensure media elements are aligned with the current timing object's
     * state vector
     */
    var controlElements = function () {
      // Do not adjust anything during an amortization period
      if (amortTimeout) {
        return;
      }

      // Get new readings from Timing object
      timingVector = timing.query();

      controlledElements.forEach(controlElement);

      var amortNeeded = false;
      controlledElements.forEach(function (wrappedEl) {
        if (wrappedEl.amortization) {
          amortNeeded = true;
        }
      });

      if (amortNeeded) {

        amortTimeout = setTimeout(stopAmortizationPeriod, settings.amortPeriod * 1000);
      }

      // Queue a task to fire a simple event named "timeupdate"
      setTimeout(function () {
        self.dispatchEvent({
          type: 'timeupdate'
        }, 0);
      });
    };


    /**
     * Ensure the given media element (wrapped in info structure) is aligned
     * with the current timing object's state vector
     */
    var controlElement = function (wrappedEl) {
      var element = wrappedEl.element;
      var diff = 0.0;
      var futurePos = 0.0;
    //  console.log("driftRate",wrappedEl.driftRate);

      if ((timingVector.velocity === 0.0) &&
          (timingVector.acceleration === 0.0)) {
        //logger.info('stop element and seek to right position');
        element.pause();
        element.currentTime=timingVector.position;
        wrappedEl.vector = new _StateVector__WEBPACK_IMPORTED_MODULE_2__.StateVector(timingVector);
      }
      else if (element.paused ) {
      //  logger.info('play video');
        wrappedEl.vector = new _StateVector__WEBPACK_IMPORTED_MODULE_2__.StateVector({
          position: timingVector.position,
          velocity: timingVector.velocity + wrappedEl.driftRate,
          acceleration: 0.0,
          timestamp: timingVector.timestamp
        });

        wrappedEl.seeked = true;
        wrappedEl.amortization = true;
        element.currentTime = wrappedEl.vector.position-element._offset;
        element.playbackRate = wrappedEl.vector.velocity;
        element.play();


      }
      else {
        var vel = wrappedEl.vector ? wrappedEl.vector.velocity: 0.95;
        wrappedEl.vector = new _StateVector__WEBPACK_IMPORTED_MODULE_2__.StateVector({
          position: element.currentTime,
          velocity:vel,
        });
        diff = timingVector.position - wrappedEl.vector.position - element._offset;
      //  console.log("diff",diff,"vel",wrappedEl.vector.velocity,"timing vel",timingVector.velocity,"offset",element._offset);
        if (Math.abs(diff) < settings.minDiff) {

        }
        else if (Math.abs(diff) > settings.maxDelay) {
          console.log("DIFF",diff);
          wrappedEl.vector.position = timingVector.position;
          wrappedEl.vector.velocity = timingVector.velocity + wrappedEl.driftRate;
          wrappedEl.seeked = true;
          wrappedEl.amortization = false;
          element.currentTime = wrappedEl.vector.position-element._offset;
          element.playbackRate = wrappedEl.vector.velocity;
        }
        else {
          futurePos = timingVector.computePosition(
            timingVector.timestamp + settings.amortPeriod);
          wrappedEl.vector.velocity =
            wrappedEl.driftRate +
            (futurePos - wrappedEl.vector.position) / settings.amortPeriod;
          wrappedEl.amortization = false;
          element.playbackRate=wrappedEl.vector.velocity;
        //  logger.info('new playbackrate={}', wrappedEl.vector.velocity);
        }
      }

    };


    /**********************************************************************
    Listen to the timing object
    **********************************************************************/

    timing.addEventListener('timeupdate', controlElements);
    timing.addEventListener('change', onTimingChange);


    timing.addEventListener('readystatechange', function (evt) {
      self.dispatchEvent(evt);
    });



  };


  // TimingMediaController implements EventTarget
  TimingMediaController.prototype.addEventListener = (0,_event_target__WEBPACK_IMPORTED_MODULE_0__.EventTarget)().addEventListener;
  TimingMediaController.prototype.removeEventListener = (0,_event_target__WEBPACK_IMPORTED_MODULE_0__.EventTarget)().removeEventListener;
  TimingMediaController.prototype.dispatchEvent = (0,_event_target__WEBPACK_IMPORTED_MODULE_0__.EventTarget)().dispatchEvent;





/***/ }),

/***/ "./src/orkestra/motion/src/TimingObject.js":
/*!*************************************************!*\
  !*** ./src/orkestra/motion/src/TimingObject.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TimingObject": function() { return /* binding */ TimingObject; }
/* harmony export */ });
/* harmony import */ var _event_target__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./event-target */ "./src/orkestra/motion/src/event-target.js");
/* harmony import */ var _LocalTimingProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./LocalTimingProvider */ "./src/orkestra/motion/src/LocalTimingProvider.js");
/**
 * @file A timing object exposes methods to control a motion along some
 * uni-dimensional axis.
 *
 * A timing object is either in master mode whereby the motion is controlled
 * directly and associated with the local clock, or in slave mode whereby the
 * motion is synchronized with an online timing service.
 *
 * Question: What is the preferred way to create a timing object instance on
 * the server in a model where we plug a third-party library? Should a timing
 * object have a URN for instance?
 */

// Ensure "define" is defined in node.js in the absence of require.js
// See: https://github.com/jrburke/amdefine


  
  


  /**
   * Constructor of the timing object
   *
   * @class
   * @param {StateVector} vector The initial motion vector
   * @param {Interval} range The initial range if one is to be defined
   */
  var TimingObject = function (vector, range) {
    var self = this;

    /**
     * Helper methods to start/stop dispatching time update events
     * (only triggered when the object is moving)
     *
     * Note that setInterval is bound to the event loop and thus
     * the precision of the timing update depends on the overall
     * event loop "congestion".
     *
     * TODO: note that the object cannot be garbage collected as long as
     * "timeupdate" events are being dispatched. Not sure that there is
     * much we can do here.
     *
     * TODO: the code triggers the first event after 200ms. Should it rather
     * trigger the first event right away?
     */
    var timeupdateInterval = null;
    var startDispatchingTimeUpdateEvents = function () {
      var frequency = 10;
      if (timeupdateInterval) { return; }

      timeupdateInterval = setInterval(function () {

        self.dispatchEvent({
          type: 'timeupdate'
        });
      }, Math.round(1000 / frequency));
    };
    var stopDispatchingTimeUpdateEvents = function () {
      if (!timeupdateInterval) { return; }
      clearInterval(timeupdateInterval);
      timeupdateInterval = null;
    };


    /**
     * All "change" events received from the timing provider will be
     * propagated on this object
     */
    var changeListener = function (evt) {
      var vector = evt.value || {
        velocity: 0.0,
        acceleration: 0.0
      };
      if ((vector.velocity !== 0.0) || (vector.acceleration !== 0.0)) {
        startDispatchingTimeUpdateEvents();
      }
      else {
        stopDispatchingTimeUpdateEvents();
      }
      self.dispatchEvent(evt);
    };
    var readystatechangeListener = function (evt) {
      if (evt.value === 'closed') {
        stopDispatchingTimeUpdateEvents();
      }
      self.dispatchEvent(evt);
    };


    /**
     * Determine whether the timing object is managed locally or through
     * a third-party timing provider
     */
    var master = true;


    /**
     * Timing provider object associated with this timing object,
     * along with a couple of internal helper functions to associate/dissociate
     * this timing object with a timing provider object.
     */
    var timingProvider = null;

    var associateWithTimingProvider = function (provider) {
      var previousProvider = timingProvider;
      dissociateFromTimingProvider(previousProvider);

      timingProvider = provider;
      provider.addEventListener('change', changeListener);
      provider.addEventListener('readystatechange', readystatechangeListener);
      if (previousProvider && (provider.readyState === 'open')) {
        if (previousProvider.vector.compareTo(provider.vector) !== 0) {
          changeListener({
            type: 'change',
            value: provider.query()
          });
        }
      }
    };

    var dissociateFromTimingProvider = function (provider) {
      if (provider) {
        provider.removeEventListener('change', changeListener);
        provider.removeEventListener('readystatechange', readystatechangeListener);
      }
    };


    /**
     * Returns a new StateVector that represents the motion's position,
     * velocity and acceleration at the current local time.
     *
     * @function
     * @returns {StateVector} A new StateVector object that represents
     *   the motion's position, velocity and acceleration at the current local
     *   time.
     */
    this.query = function () {
      var vector = timingProvider.query();
      return vector;
    };


    /**
     * Updates the internal motion.
     *
     * If the timing object is attached to the local clock, the update operation
     * happens synchronously. If not, the update operation is asynchronous as
     * the method then relays the command to the online timing service
     * associated with this timing object.
     *
     * The "change" event is triggered when the update operation has completed.
     *
     * @function
     * @param {Number} position The new motion position. If null, the position
     *  at the current time is used.
     * @param {Number} velocity The new velocity. If null, the velocity at the
     *  current time is used.
     * @param {Number} acceleration The new acceleration. If null, the
     *  acceleration at the current time is used.
     */
    this.update = function (position, velocity, acceleration) {
      return timingProvider.update({
        position: position,
        velocity: velocity,
        acceleration: acceleration
      });
    };


    /**
     * Returns true when the object is moving, in other words when velocity
     * or acceleration is different from 0.0, else False
     *
     * @function
     */
    this.isMoving = function () {

      var vector = timingProvider.query();
      var result = (vector.velocity !== 0.0) || (vector.acceleration !== 0.0);

      return result;
    };


    /**
     * Define the "srcObject" and "readyState" properties
     */
    Object.defineProperties(this, {
      /**
       * The readyState attribute returns the ready state of the underlying
       * timing provider object
       */
      readyState: {
        get: function () {
          return timingProvider.readyState;
        }
      },

      /**
       * On getting, "srcObject" returns a pointer to the current timing
       * provider instance associated with the timing object, or null if
       * the timing object is managed locally.
       *
       * On setting, "srcObject" associates the timing object with the given
       * timing provider instance. If null, the timing object goes back to
       * being locally managed.
       */
      srcObject: {
        get: function () {
          // Do not return anything if the timing object is managed locally
          if (master) {
            return null;
          }
          else {
            return timingProvider;
          }
        },
        set: function (provider) {
          var previousProvider = timingProvider;
          var vector = null;
          if (provider) {
            // The caller wants to associate the timing object with a
            // third-party timing provider.
            // (this may trigger a "change" event if vector exposed by
            // the timing provider is different from the one we used
            // to have)
            master = false;
            associateWithTimingProvider(provider);

          }
          else {
            // The caller wants to remove the association with a third-party
            // timing provider. The object gets back to being locally managed
            if (master) {
              // The timing object is already locally managed,
              // no need to change anything
            }
            else {
              // Associate with a new local timing provider
              // (this should not trigger a "change" event since
              // vector does not change internally)
              master = true;
              provider = new _LocalTimingProvider__WEBPACK_IMPORTED_MODULE_1__.LocalTimingProvider(
                previousProvider.query(),
                previousProvider.range
              );
              associateWithTimingProvider(provider);

            }
          }
        }
      },


      /**
       * Returns the position evaluated at the time when the attribute is read
       */
      currentPosition: {
        get: function () {
          return timingProvider.query().position;
        }
      },

      /**
       * Returns the velocity evaluated at the time when the attribute is read
       */
      currentVelocity: {
        get: function () {
          return timingProvider.query().velocity;
        }
      },

      /**
       * Returns the acceleration evaluated at the time when the attribute is
       * read.
       */
      currentAcceleration: {
        get: function () {
          return timingProvider.query().acceleration;
        }
      }
    });

    // TODO: implement "range"
    // TODO: implement "vector", "previousVector" properties (is that needed?)
    // TODO: implement on... event properties

    // Newly created timing object instances are associated with a local timing
    // provider to start with. Set the "srcObject" property to change that
    // behavior afterwards.
    associateWithTimingProvider(new _LocalTimingProvider__WEBPACK_IMPORTED_MODULE_1__.LocalTimingProvider(vector, range));

  };


  // TimingObject implements EventTarget
  TimingObject.prototype.addEventListener = (0,_event_target__WEBPACK_IMPORTED_MODULE_0__.EventTarget)().addEventListener;
  TimingObject.prototype.removeEventListener = (0,_event_target__WEBPACK_IMPORTED_MODULE_0__.EventTarget)().removeEventListener;
  TimingObject.prototype.dispatchEvent = (0,_event_target__WEBPACK_IMPORTED_MODULE_0__.EventTarget)().dispatchEvent;


  // Expose the class to the outer world
  


/***/ }),

/***/ "./src/orkestra/motion/src/event-target.js":
/*!*************************************************!*\
  !*** ./src/orkestra/motion/src/event-target.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EventTarget": function() { return /* binding */ EventTarget; }
/* harmony export */ });
/*! (C) WebReflection - Mit Style License */
var EventTarget=function(){"use strict";function o(e,t,i){n.value=i,r(e,t,n),n.value=null}function u(e,t,n){var r;s.call(e,t)?r=e[t]:o(e,t,r=[]),i.call(r,n)<0&&r.push(n)}function a(e,t,n){var r,i,o;if(s.call(e,t)){n.target=e,r=e[t].slice(0);for(o=0;o<r.length;o++)i=r[o],typeof i=="function"?i.call(e,n):typeof i.handleEvent=="function"&&i.handleEvent(n)}}function f(e,t,n){var r,o;s.call(e,t)&&(r=e[t],o=i.call(r,n),-1<o&&(r.splice(o,1),r.length||delete e[t]))}var e="@@",t={},n={configurable:!0,value:null},r=Object.defineProperty||function(t,n,r){t[n]=r.value},i=[].indexOf||function(t){var n=this.length;while(n--&&this[n]!==t);return n},s=t.hasOwnProperty;return o(t,"addEventListener",function(n,r){u(this,e+n,r)}),o(t,"dispatchEvent",function(n){a(this,e+n.type,n)}),o(t,"removeEventListener",function(n,r){f(this,e+n,r)}),t};



/***/ }),

/***/ "./src/orkestra/motion/src/utils.js":
/*!******************************************!*\
  !*** ./src/orkestra/motion/src/utils.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Utils": function() { return /* binding */ Utils; }
/* harmony export */ });
/**
 * @file A few useful utility functions
 */

var Utils = {
   toString : Object.prototype.toString,

  /**
   * Returns true when parameter is null
   *
   * @function
   * @param {*} obj Object to check
   * @returns {Boolean} true if object is null, false otherwise
   */
  isNull : function (obj) {
    return obj === null;
  },


  /**
   * Returns true when parameter is a number
   *
   * @function
   * @param {*} obj Object to check
   * @returns {Boolean} true if object is a number, false otherwise
   */
  isNumber : function (obj) {
    return toString.call(obj) === '[object Number]';
  },


  /**
   * Serialize object as a JSON string
   *
   * @function
   * @param {Object} obj The object to serialize as JSON string
   * @return {String} The serialized JSON string
   */
   stringify : function (obj) {
    return JSON.stringify(obj, null, 2);
  },
  getHostName:function(url){
    var a = document.createElement('a');
    a.href = "http://" + url;
    return a.hostname;
  }


  // Expose helper functions to the outer world

}



/***/ }),

/***/ "./src/orkestra/orkestra.js":
/*!**********************************!*\
  !*** ./src/orkestra/orkestra.js ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EVENT": function() { return /* binding */ EVENT; },
/* harmony export */   "Orkestra": function() { return /* binding */ Orkestra; }
/* harmony export */ });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/dist/esm5/internal/Observable.js");
/* harmony import */ var _applicationcontext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./applicationcontext */ "./src/orkestra/applicationcontext.js");
/* harmony import */ var _mappingservice__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mappingservice */ "./src/orkestra/mappingservice.js");
/* harmony import */ var _instruments___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./instruments/ */ "./src/orkestra/instruments/index.js");
/* harmony import */ var _motion_motion__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./motion/motion */ "./src/orkestra/motion/motion.js");
/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./user */ "./src/orkestra/user.js");
/* harmony import */ var _ui_UI__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui/UI */ "./src/orkestra/ui/UI.js");
/* harmony import */ var _utils___WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/ */ "./src/orkestra/utils/index.js");










var log ;

const EVENT = {
  AGENT_CHANGE: 'agent_change',
  AGENT_LEFT: 'agent_left',
  AGENT_JOIN: 'agent_join',
  CAP_CHANGE: 'capability_change',
  TIMELINE_EVENT: 'timeline_change'
}

class Orkestra {

  constructor(options) {
    this.options = options;
    if (options.debug && options.debug !== false) {
     
      log = _utils___WEBPACK_IMPORTED_MODULE_6__.Logger.getLogger('Orkestra');
      _utils___WEBPACK_IMPORTED_MODULE_6__.Logger.setLogLevel(log.levels.TRACE,'Orkestra');
      if (options.debug=="all") this.addDebugger();
    }
    else {
      log = _utils___WEBPACK_IMPORTED_MODULE_6__.Logger.getLogger('Orkestra');
      _utils___WEBPACK_IMPORTED_MODULE_6__.Logger.setLogLevel(log.levels.SILENT,'Orkestra');
      
    }
    this.userObserver = new rxjs__WEBPACK_IMPORTED_MODULE_7__.Subject();
    this.userPrivObserver = new rxjs__WEBPACK_IMPORTED_MODULE_7__.Subject();
    this.timeObserver = new rxjs__WEBPACK_IMPORTED_MODULE_7__.Subject();
    this.appObserver = new rxjs__WEBPACK_IMPORTED_MODULE_7__.Subject();
    this.readyObserver = new rxjs__WEBPACK_IMPORTED_MODULE_7__.Subject();
    this.readyPrivObserver = new rxjs__WEBPACK_IMPORTED_MODULE_7__.Subject();
    this.userPrivObservable = new rxjs__WEBPACK_IMPORTED_MODULE_8__.Observable((observer) => { this.userPrivObserver.subscribe(observer); });
    this.userObservable = new rxjs__WEBPACK_IMPORTED_MODULE_8__.Observable((observer) => { this.userObserver.subscribe(observer); });
    this.appObservable = new rxjs__WEBPACK_IMPORTED_MODULE_8__.Observable((observer) => { this.appObserver.subscribe(observer) });
    this.timerObservable = new rxjs__WEBPACK_IMPORTED_MODULE_8__.Observable((observer) => { this.timeObserver.subscribe(observer); });
    this.readyObservable = new rxjs__WEBPACK_IMPORTED_MODULE_8__.Observable((observer) => { this.readyObserver = observer });
    this.readyPrivObservable = new rxjs__WEBPACK_IMPORTED_MODULE_8__.Observable((observer) => { this.readyPrivObserver = observer });
    this.serviceObservable = new rxjs__WEBPACK_IMPORTED_MODULE_8__.Observable((observer) => { this.serviceObserver = observer });
    options.agentid = options.agentid ? options.agentid : _utils___WEBPACK_IMPORTED_MODULE_6__.Hash.genRanHex(8);
    this.master = options.master;
    this.users = new Map();
    this.users_priv = new Map();
    this.appCtx = null;
    this.ruleEngineEnabled = false;
    this.privateChannel = options.privateChannel;
    this.appData = new Object();
    this._ui = (0,_ui_UI__WEBPACK_IMPORTED_MODULE_5__.UI)(this);
    this.rulesEnabled = false;
    this.eventLogs = [];
    this.eventLogs2 = [];
    this.servicesSubs = [];
    this.transitionsCbs = [];
    // Whether if private channel enable not listen for global user context changes
    if (this.privateChannel === true) {
      let agentid = options.agentid || -1;
      let user = new _user__WEBPACK_IMPORTED_MODULE_4__.User(agentid, "me", options.profile || "slave", {});
      this.users_priv.set(user.name, user);
    }
    if (options.agentid == "debugger") {
      this.rulesEnabled = false;
      this.debugger = {}
      this.debugger.agentid = "debugger";

    }
    else
      if (this.master === true) {
        let agentid = options.agentid || -1;
        let admin = new _user__WEBPACK_IMPORTED_MODULE_4__.User(agentid, "me", options.profile || "master", {});
        this.users.set(admin.name, admin);
      }
      else {
        if (this.master === undefined) {
          let agentid = options.agentid || -1;
          let user = new _user__WEBPACK_IMPORTED_MODULE_4__.User(agentid, "me", options.profile || "broadcast", {});
          this.users.set(user.name, user);
        }
        else {
          let agentid = options.agentid || -1;
          let user = new _user__WEBPACK_IMPORTED_MODULE_4__.User(agentid, "me", options.profile || "slave", {});
          this.users.set(user.name, user);

        }
      }

    let mappServ;

    if (options.url) {
      this.mappServ = (0,_mappingservice__WEBPACK_IMPORTED_MODULE_1__.MappingService)(options.url, { maxTimeout: 8000 });
      this.privMappServ = (0,_mappingservice__WEBPACK_IMPORTED_MODULE_1__.MappingService)(options.url, { maxTimeout: 8000 });
    }
    else
      this.mappServ = (0,_mappingservice__WEBPACK_IMPORTED_MODULE_1__.MappingService)({ maxTimeout: 8000 });
    this.setPublicConnection(options);
    if (this.privateChannel === true)
      this.setPrivateConnection(options);
   

  }
  onReady(){
    return this.readyObservable;
  }
  setPublicConnection(options) {
    if (options.channel ==="") return;
    this.mappServ.getGroupMapping(options.channel).then((channel) => {
      this.appCtx = (0,_applicationcontext__WEBPACK_IMPORTED_MODULE_0__.ApplicationContext)(channel.group, { autoPresence: true, autoClean: true, agentid: options.agentid });
      log.info("SharedState URL", channel.group);
      log.info("Public connection init", new Date());
      this.appCtx.onready.subscribe((e) => {

        log.info("Public connection ready", new Date());
        this.timerObservable.subscribe(evt => {
          this.rules && this.rules.forEach((r, i) => {
            if (!r.options.listenEvent || r.options.listenEvent.indexOf("timeline") != -1) {
              if (this.transitionsCbs.length>0){
                let trans= this.transitionsCbs.find((x)=>{if(x.enable===true) return true;})
                if (trans) trans.plugin.render();
                setTimeout(()=>{
                  let event_ = { type: EVENT.TIMELINE_EVENT, time: evt.target.currentTime, data: r.options.data };
                  this.resolveConflict([{ priority: 0, decision: r.cb(event_, this._ui.components, this.users, this.options) }]);
                  this._ui.uiRender(evt, "timeupdate");
                },500)  
              }
              else{
                  let event_ = { type: EVENT.TIMELINE_EVENT, time: evt.target.currentTime, data: r.options.data };
                  this.resolveConflict([{ priority: 0, decision: r.cb(event_, this._ui.components, this.users, this.options) }]);
                  this._ui.uiRender(evt, "timeupdate");
              }
            
            }
          });

        })
        this.userObservable.subscribe(evt => {
          let d = [];
          if ( this.isRuleEngineEnable() && this.getMyAgentId() == evt.data.agentid)  return;
          if (evt.data.key == "componentsStatus" && this.getMyAgentId() != evt.data.agentid) return;
          this.rules && this.rules.forEach((r, i) => {
            d.push({ priority: i, decision: r.cb(evt, this._ui.components,this.getUsersForRules(this.users), _utils___WEBPACK_IMPORTED_MODULE_6__.Obj.combine(this.options,r.options))});
          });
          if (evt.data.key == "componentsStatus"  && (evt.data.value.from == this.getMyAgentId())) this.resolveConflictLocally(d);
          else if (!evt.data.value || evt.data.value.from != "me") this.resolveConflict(d);
          this._ui.uiRender(evt, "userCtx");
        });
        this.appObservable.subscribe(evt => {
          var d = [];
          if (this.users.get("me")) {
            this.rules && this.rules.forEach((r, i) => {
              d.push({ priority: i, decision: r.cb(evt, this._ui.components, this.getUsersForRules(this.users), _utils___WEBPACK_IMPORTED_MODULE_6__.Obj.combine(this.options,r.options)) });
            });
            this.resolveConflict(d);
            this._ui.uiRender(evt, "appCtx");
          }
        });
        this.appCtx.on('agentchange', (chg) => {
          this.onAgentChange(chg);
        });
        setTimeout(() => {
          this.appCtx.me.load((0,_instruments___WEBPACK_IMPORTED_MODULE_2__.ComponentsStatus)(this));
          this.appCtx.me.load((0,_instruments___WEBPACK_IMPORTED_MODULE_2__.UserProfile)(this));
          this.appCtx.me.load((0,_instruments___WEBPACK_IMPORTED_MODULE_2__.MasterSlaveProfile)(this));
          this.appCtx.me.load((0,_instruments___WEBPACK_IMPORTED_MODULE_2__.UserData)(this));
          this.appCtx.me.load((0,_instruments___WEBPACK_IMPORTED_MODULE_2__.Message)(this));
          this.appCtx.me.load((0,_instruments___WEBPACK_IMPORTED_MODULE_2__.DeviceProfile)(options.url));

          setTimeout(() => {this.readyObserver.next({ status: 'ready' });},1000);
        }, 0);

        this.appCtx.keys().forEach((key) => {
          if (typeof options.listenAll == "undefined" || options.listenAll === true)
            this.appCtx.on(key, this.onAppAttrChange.bind(this));
            log.info("KEYS",key)
        });
        this.appCtx.keys().forEach(key => {
          if (typeof options.listenAll == "undefined" || options.listenAll === true) {
            this.appData[key] = this.appCtx.getItem(key);
            this.appObserver.next({ key: key, value: this.appData[key] })
          }
        })

        this.appCtx.on('default', this.onNewAppAttr.bind(this))
      });

    })
  }
  setPrivateConnection(options) {
    this.privGroup = _utils___WEBPACK_IMPORTED_MODULE_6__.URI.getUrlVar('group');
    if (!this.privGroup) {
      this.privGroup = _utils___WEBPACK_IMPORTED_MODULE_6__.URI.createToken();
    }
    this.privMappServ.getGroupMapping(options.channel + "_" + this.privGroup).then((channel) => {
      this.appCtxPriv = (0,_applicationcontext__WEBPACK_IMPORTED_MODULE_0__.ApplicationContext)(channel.group, { autoPresence: true, autoClean: true });
      console.info("SharedState URL", channel.group);
      console.info("Services connection init", new Date());
      this.appCtxPriv.onready.subscribe((ev) => {

        console.info("Private connection ready", new Date());

        this.userPrivObservable.subscribe(evt => {
          var d = [];
          this.rules && this.rules.forEach((r, i) => {
            d.push({ priority: i, decision: r.cb(evt, this._ui.components, this.users_priv, this.options) });
          });
          this.resolveConflict(d);
          this._ui.uiRender(evt, "userCtx");
        });
        //  this.readyPrivObserver.next({status:'ready'});

        this.appCtxPriv.on('agentchange', (chg) => {
          this.onAgentPrivChange(chg);
        });
        setTimeout(() => {
          this.appCtxPriv.me.load((0,_instruments___WEBPACK_IMPORTED_MODULE_2__.DeviceProfile)(options.url));
          this.appCtxPriv.me.load((0,_instruments___WEBPACK_IMPORTED_MODULE_2__.MasterSlaveProfile)(this));
          this.appCtxPriv.me.load((0,_instruments___WEBPACK_IMPORTED_MODULE_2__.UserProfile)(this))
        }, 500);




      });

    })
  }
  useServiceHub(name){
    return new Promise((resolve, reject) =>{
    this.serviceHubName = name;
    if (this.appCtxServices && this.appCtxServices.ready) {
       resolve();
       return;
    }
    this.privMappServ.getGroupMapping("services_" + name).then((channel) => {
      if (this.appCtxServices && this.appCtxServices.ready) {resolve();return;};
      this.appCtxServices = (0,_applicationcontext__WEBPACK_IMPORTED_MODULE_0__.ApplicationContext)(channel.group, { autoPresence: true, autoClean: true });
      console.info("SharedState Service URL", channel.group);
      console.info("Services connection init", new Date());
      this.appCtxServices.onready.subscribe((ev) => {
        let serviceHub = this.appCtxServices.getItem(this.serviceHubName) || undefined;
        if (typeof serviceHub==="undefined") this.appCtxServices.setItem(this.serviceHubName,[]);
        this.appCtxServices.on(this.serviceHubName, this.onServiceHubChange.bind(this));
        setTimeout(()=>{this.onServiceHubChange({value:serviceHub,data:serviceHub});},1000);
        resolve();
        /** clear cache**/
        setInterval(()=>{
           if (this.users.size==1) {
            let serviceHub1 = this.appCtxServices.getItem(this.serviceHubName);
            let tnp = serviceHub.filter(s=>{
               if (s.indexOf(this.users.get("me").agentid)==-1) return true;
            })
            if (tnp.length>0) {
              serviceHub = serviceHub.filter(s=>{
                if (s.indexOf(this.users.get("me").agentid)!=-1) return true;
              })  
              this.appCtxServices.setItem(this.serviceHubName,serviceHub)
            }
            log.debug("serviceHub",serviceHub1)
           }
        },25000)
        });

      })
    })
  }
  onServiceHubChange(evt){
    log.debug("Service change",evt);
     evt.value.forEach((k)=>{
        if (this.servicesSubs.map(x=>{return x.name}).indexOf(k)!=-1) this.appCtxServices.on(k,this.onServiceChange.bind(this));
    });
    setTimeout(()=>{this.serviceObserver.next({event:"update",data:evt});},2500);
  }
  onServiceChange(evt){
    log.debug("data change",evt);
    this.servicesSubs.forEach((subs)=>{
        if (subs.name === evt.key){
          if (evt.value.io==subs.io) subs.cb(evt);
        }
    });

  }
  subscribeToService(name,cb,io){
    let exists = this.servicesSubs.find(x=>{
        if (x.name == name && io == x.io) return true;
    })
    if (!exists) this.servicesSubs.push({name:name,cb:cb,io:io});
   
  }
  publishService(name){
    let service = name;
    let services = this.appCtxServices.getItem(this.serviceHubName) || [];
    if (services.indexOf(name) === -1) services.push(name);
    this.appCtxServices.setItem(this.serviceHubName,services);
  }
  unPublishService(name){
    let services = this.appCtxServices.getItem(this.serviceHubName) || [];
    services = services.filter((n)=>{
       return n !== name;
    });
    this.appCtxServices.setItem(this.serviceHubName,services);
  }
  cleanServiceHub(name){
    return this.appCtxServices.setItem(this.serviceHubName,[]);
  }
  sendServiceData(serviceName,data){
    this.appCtxServices.setItem(serviceName,data);
  }
  getServices(name){
    return this.appCtxServices.getItem(this.serviceHubName) || [];
  }
  getAgentKeys(key) {
    return this.users.get(key);
  }
  onAgentChange(chg) {

    if (!this.userObserver) {
      console.warn("There is not subscribed to receive agent change");
      return -1;
    }
    if (chg.agentid == "debugger") return;
    if (chg.agentContext) {
      if (!this.existsAgent(chg.agentid)) {

        if (this.appCtx.getAgents().self.agentid === chg.agentid) {
          let user = this.users.get("me");
          user.agentid = chg.agentid;
          user.context = chg.agentContext;
        }
        else {
          this.users.set(chg.agentid, new _user__WEBPACK_IMPORTED_MODULE_4__.User(chg.agentid, chg.agentid, '', {}));
          let user = this.users.get(chg.agentid);
          user.context = chg.agentContext;
        }
        this.userObserver.next({ evt: EVENT.AGENT_JOIN, type: "agentChange", data: chg });
        this.eventLogs[chg.agentContext.agentid] = [];
      }

      if (chg.diff.keys.length > 0) {
        chg.diff.keys.forEach((key) => {
          if (this.eventLogs[chg.agentContext.agentid].indexOf(key) == -1) {
            this.enableInstrument([key], chg.agentContext, chg, this.master);
            this.userObserver.next({ evt: EVENT.AGENT_CHANGE, type: "agentChange", data: chg });
            this.eventLogs[chg.agentContext.agentid].push(key);
          }

        })
      }


    }
    else {
      this.users.delete(chg.agentid);
      this.userObserver.next({ evt: EVENT.AGENT_LEFT, data: chg })

    }

  }
  onAgentPrivChange(chg) {
    log.debug("Priv agent change", chg);
    if (!this.userPrivObserver) {
      console.warn("There is not subscribed to receive agent change");
      return -1;
    }
    if (chg.agentid == "debugger") return;
    if (chg.agentContext) {
      if (!this.existsAgent(chg.agentid, true)) {

        if (this.appCtxPriv.getAgents().self.agentid === chg.agentid) {
          let user = this.users_priv.get("me");
          user.agentid = chg.agentid;
          user.context = chg.agentContext;
        }
        else {
          this.users_priv.set(chg.agentid, new _user__WEBPACK_IMPORTED_MODULE_4__.User(chg.agentid, chg.agentid, '', {}));
          let user = this.users_priv.get(chg.agentid);
          user.context = chg.agentContext;
        }
        this.userPrivObserver.next({ evt: EVENT.AGENT_JOIN, type: "agentChange", data: chg });

      }

      if (chg.diff.keys.length > 0) {


        this.enablePrivInstrument(chg.diff.keys, chg.agentContext, chg, this.master);
        this.userPrivObserver.next({ evt: EVENT.AGENT_CHANGE, type: "agentChange", data: chg });

      }


    }
    else {
      this.users_priv.delete(chg.agentid);
      this.userPrivObserver.next({ evt: EVENT.AGENT_LEFT, data: chg })

    }

  }
  onAppAttrChange(chg) {
    if (!this.appObserver) {
      log.warn("There is not subscribed to receive agent change");
      return -1;
    }
    this.appData[chg.key] = chg.value;
    this.appObserver.next({ type: "appAttrChange", key: chg.key, data: chg });
  }
  onNewAppAttr(chg) {
    if (this.appCtx.keys().indexOf(chg.key) === -1) this.subscribe(chg.key);
    this.onAppAttrChange(chg)
  }
  use(rule, options) {
    this.ruleEngineEnabled = true;
    this.rules = this.rules || [];
    this.rules.push({ name: rule.name, cb: rule(this), options: options });
  }
  ui(cb,options) {
    if (cb)
      this._ui.subscribe(cb,options);
    else return this._ui;
  }
  transitions(plugin){
    this.transitionsCbs.push({plugin:plugin,enable:true});
    return plugin;
  }
  removeTransition(name){
    this.transitionsCbs = this.transitionsCbs.filter((pg)=>{
       if (pg.plugin.name !== name) return true;
       return false;
    })
  }
  disableTransitions(){
      this.transitionsCbs.forEach((tr)=>{
          tr.enable = false;
      })
  }
  enableTransition(name){
    this.transitionsCbs.forEach((tr)=>{
      if (tr.plugin.name ==name )tr.enable = true;
  })
  }
  disableTransition(name){
    this.transitionsCbs.forEach((tr)=>{
      if (tr.plugin.name ==name )tr.enable = false;
  })
  }
  updateComponentStatus(agentid,comp,value){
      let cpmStatus = this.getUserContextData(agentid,'componentsStatus');
      if (cpmStatus && cpmStatus.componentsStatus.length>0){
          let cmp = cpmStatus.componentsStatus.find((x)=>{
                if (x.cmp == comp) return true;
          })
          if (cmp){
             if (typeof cmp.usrCmd =="undefined") cmp.usrCmd = [];
             let cmds = cmp.usrCmd.map((c=>{
                return c.cmd;
             }));
             if (cmds.indexOf(value.cmd)!=-1)
                  cmp.usrCmd = cmp.usrCmd.filter((c)=>{
                      if (c.cmd == value.cmd) return false;
                  })
             cmp.usrCmd.push(value);
            if (agentid === this.getMyAgentId()) agentid = "me";
             cpmStatus.from = this.getMyAgentId();
             this.users.get(agentid).context.setItem("componentsStatus",cpmStatus);
          }
      }
  }
  updateUserData(user, key, value) {
    let data = this.getUserContextData(user, "userData") == "undefined"? {}:this.getUserContextData(user, "userData");
    if (data && typeof value != "string" && typeof value != "boolean")
      for (let d in value) {
        data[d] = value[d];
      }
    else if (typeof value === "string" || typeof value == "boolean") {
      data[key] = value;
    }
    else data = value;
    if (user == this.getMyAgentId() && this.getMyAgentId()!=="debugger") this.users.get('me').context.setItem("userData", data);

    else this.users.get(user).context.setItem("userData", data);
  }

  setUserContextData(user, key, value) {
    let data = this.getUserContextData(user, key);
    if (typeof data !=="undefined" && data!=="undefined" && typeof(data)!="string")
      for (let d in value) {
        data[d] = value[d];
      }
    else data = value;
    if (user == this.getMyAgentId() && this.getMyAgentId()!=="debugger") this.users.get('me').context.setItem(key, data);
    else this.users.get(user).context.setItem(key, data);
  }
  getUserContextData(user, key) {
    if (user == this.getMyAgentId() &&this.getMyAgentId()!=="debugger") return this.users.get('me').context.getItem(key);

    else
      return this.users.get(user).context.getItem(key) || {};
  }

  getUsers() {
    return JSON.stringify(Array.from(this.users.entries()));
  }
  getUsersForRules(){
      let userMap = new Map();
      for (const [key, value] of this.users.entries()) {
        if (this.users.get(key).profile!="controller") userMap.set(key,value);
      }
      return userMap;
  }
  getPrivateUsers() {
    return JSON.stringify(Array.from(this.users_priv.entries()));
  }
  getAppData() {
    return JSON.stringify(this.appData);
  }
  getUsersByProfile() {
    //this.appCtx.getAgents().self.agentid
  }
  data(name, script, args) {
    var x = setInterval(() => {
      if (this.appCtx && this.appCtx.me) {
        clearInterval(x);
        this.appCtx.me.load(script(args[0]));
      }
    }, 5)



  }
  isInteracive(agentid){
    if (this.getMyAgentId()==="debugger") return false;
    else if (this.getMyAgentId()== agentid)
          if (this.isRuleEngineEnable()) return false;
          else return true;

  }
  isRuleEngineEnable(){
    return this.rulesEnabled;
  }
  existsAgent(agid, priv) {
    if (this.getMyAgentId()== "debugger" || this.rulesEnabled===false){
        return this.users.get(agid) !== undefined;
    }
    else {
        if (priv && priv == true) return (this.users_priv.get(agid) !== undefined || (this.appCtxPriv.me.agentid === this.users_priv.get('me').agentid));
        else {
          return (this.users.get(agid) !== undefined || (this.appCtx.me.agentid === this.users.get('me').agentid));

        }
    }
  }
  setAppAttribute(key, value) {
    if (this.appCtx.keys().indexOf(key) === -1) this.subscribe(key);
    if (typeof value === "object") value.timestamp = new Date().getTime();
    this.appCtx.setItem(key, value);
  }
  getAppAttribute(key) {
    return this.appCtx.getItem(key);
  }
  subscribe(key) {
    this.appCtx.on(key, this.onAppAttrChange.bind(this))
  }
  resolveConflict(deploys) {
    var maxPriority = 0, result = null;

    for (var i = 0; i < deploys.length; i++) {
      if (deploys[i].priority >= maxPriority) {
        maxPriority = deploys[i].priority;
        if (result === null)
          result = deploys[i].decision;
        else {
          result.forEach( (c) => {
            deploys[i].decision.forEach((c2) =>{
              if (c.cmp === c2.cmp) {
                c.show = c2.show;
                if (typeof c2.usrCmd !="undefined"){
                   c.usrCmd = c2.usrCmd;
                }
              }
            })
          });
        }
      }
    }
    if (result) {
      result.forEach((c) => {
        if (c.show === true) document.getElementById(c.cmp).style.display = "block";
        else document.getElementById(c.cmp).style.display = "none";
      });
      if (this.users.get("me") && this.users.get("me").context) this.setUserContextData(this.users.get("me").agentid, "componentsStatus", {componentsStatus:result,from:this.users.get("me").agentid});
    }
  }
  resolveConflictLocally(deploys) {
    var maxPriority = 0, result = null;

    for (var i = 0; i < deploys.length; i++) {
      if (deploys[i].priority >= maxPriority) {
        maxPriority = deploys[i].priority;
        if (result === null)
          result = deploys[i].decision;
        else {
          result.forEach( (c) => {
            deploys[i].decision.forEach((c2) =>{
              if (c.cmp === c2.cmp) {
                c.show = c2.show;
                if (typeof c2.usrCmd !="undefined"){
                   c.usrCmd = c2.usrCmd;
                }
              }
            })
          });
        }
      }
    }
    if (result) {
      result.forEach((c) => {
        if (c.show === true) document.getElementById(c.cmp).style.display = "block";
        else document.getElementById(c.cmp).style.display = "none";
      });
      if (this.users.get("me") && this.users.get("me").context) this.setUserContextData(this.users.get("me").agentid, "componentsStatus", {componentsStatus:result,from:"me"});
    }
  }
  getUserObservable() { return this.userObservable };
  me() {
    return this.appCtx.me;
  }
  getMyAgentId() {
    if (this.debugger) return "debugger";
    else return this.users.get('me').agentid;
  }
  enableInstrument(cap, context, chg, master) {
    cap.forEach((_cap) => {
      context.on(_cap, (k, v) => {
        if (context.agentid == this.appCtx.getAgents().self.agentid) {
          let user = this.users.get('me');
          user[k] = v;
          log.debug("me", user);
          this.userObserver.next({ evt: EVENT.CAP_CHANGE, data: { "agentid": context.agentid, "key": k, "value": v } })

        }
      })
    });
    if (master === true || master === undefined) {
      cap.forEach((_cap) => {
        context.on(_cap, (k, v) => {

          let user = '';

          if (context.agentid == this.appCtx.getAgents().self.agentid)
            user = this.users.get('me');
          else
            user = this.users.get(context.agentid);
          user.capacities[k] = v;
          if (k === "userProfile" && v !== "supported") user.profile = v;
          if (k === "userData" && v !== "supported") {
            if (context.agentid == this.appCtx.getAgents().self.agentid)
              user = this.users.get('me');
            else
              user = this.users.get(context.agentid);
            user[k] = v;

          }
          this.userObserver.next({ evt: EVENT.CAP_CHANGE, data: { "agentid": context.agentid, "key": k, "value": v } })
        });
      })
    }
    else {
      let ind = cap.indexOf("masterSlave");
      if (ind !== -1) {
        let user = '';
        context.on(cap[ind], (k, v) => {
          if (context.agentid == this.appCtx.getAgents().self.agentid)
            user = this.users.get('me');
          else
            user = this.users.get(context.agentid);
          user.capacities[k] = v;
          this.userObserver.next({ evt: EVENT.CAP_CHANGE, data: { "key": k, "value": v } })
          if (k === "masterSlave" && v === true) {

            context.keys().forEach((_cap) => {
              context.on(_cap, (k, v) => {
                let user = '';

                if (context.agentid == this.appCtx.getAgents().self.agentid)
                  user = this.users.get('me');
                else
                  user = this.users.get(context.agentid);
                user.capacities[k] = v;
                this.userObserver.next({ evt: EVENT.CAP_CHANGE, data: { "agentid": context.agentid, "key": k, "value": v } });
              })
            })
          }
          if (k === "userProfile" && v !== "supported") {
            if (context.agentid == this.appCtx.getAgents().self.agentid)
              user = this.users.get('me');
            else
              user = this.users.get(context.agentid);
            user.profile = v;

          }
          if (k === "userData" && v !== "supported") {
            if (context.agentid == this.appCtx.getAgents().self.agentid)
              user = this.users.get('me');
            else
              user = this.users.get(context.agentid);
            user[k] = v;

          }


        });
      }
    }
  }
  enablePrivInstrument(cap, context, chg, master) {
    cap.forEach((_cap) => {
      context.on(_cap, (k, v) => {
        let user = '';

        if (context.agentid == this.appCtxPriv.getAgents().self.agentid)
          user = this.users_priv.get('me');
        else
          user = this.users_priv.get(context.agentid);
        user.capacities[k] = v;
        this.userPrivObserver.next({ evt: EVENT.CAP_CHANGE, data: { "agentid": context.agentid, "key": k, "value": v } })
      });
    })


  }
  syncObjects(obj, channel, server) {
    let motion = new _motion_motion__WEBPACK_IMPORTED_MODULE_3__.Motion(server || this.options.url, channel);
    motion.start();
    let ctrl = motion.addObject(obj, 0);
    return ctrl;
  }

  enableSequencer(obj, channel, server) {
    let motion = new _motion_motion__WEBPACK_IMPORTED_MODULE_3__.Motion(server || this.options.url, channel);
    motion.start();
    let ctrl = motion.addObject(obj, 0);
    let promise = new Promise((resolve, reject) => {
      let timer =
      setTimeout(() => {
        reject("timeout enable sequencer");
      }, 8000);
      motion.addEventListener('motionReady', (evt) => {
        resolve("ready");
        clearInterval(timer);
        log.debug("MOTION SOCKET READY");
        evt.target = {currentTime:evt.value};
        this.timeObserver.next(evt);
        ctrl.addEventListener('timeupdate', (e) => {
          this.timeObserver.next(e);
        })
      })

    })
    this.sequencer = ctrl;
    ctrl.ready = promise;
    return ctrl;
  }
  getSequencer(){
    return this.sequencer;
  }
  enableQRcode(el) {
    let server = this.options.url.slice(0, -1);
    _utils___WEBPACK_IMPORTED_MODULE_6__.URI.shortURL(server, location.protocol + "//" + location.host + "/?master=" + this.master + "&group=" + this.privGroup).then((_url) => {
      log.debug("SHORTURL", _url.response);
      let cont = document.createElement('div');
      document.querySelector(el).appendChild(cont);
      new _utils___WEBPACK_IMPORTED_MODULE_6__.QRCode(cont, {
        text: _url.response,
        width: 128,
        height: 128,
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: _utils___WEBPACK_IMPORTED_MODULE_6__.QRCode.CorrectLevel.H
      });
      let anchor = document.createElement('a');
      anchor.href = _url.response;
      anchor.innerHTML = _url.response;
      cont.appendChild(anchor);
    })
  }
  addDebugger(session) {
    let iframe = document.querySelector("#debugger");
    if (!iframe) {
      iframe = document.createElement('iframe');
      iframe.src = "/test/context/monitor.html?agent=debugger&session=" + (session || this.options.channel);
      iframe.style = "position:absolute;top:75%;left:1%;z-index:9999;width:100%;height:30%;background:white";
      document.addEventListener("DOMContentLoaded",()=>document.body.appendChild(iframe));
    }
  }
}





/***/ }),

/***/ "./src/orkestra/rules/byTimeline.js":
/*!******************************************!*\
  !*** ./src/orkestra/rules/byTimeline.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Bytimeline": function() { return /* binding */ Bytimeline; }
/* harmony export */ });
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! loglevel */ "./node_modules/loglevel/lib/loglevel.js");
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__);


function Bytimeline() {
  var self = {};
  self.name = "bytimeline";
  self.data = [];
  self.time;
  var deploy = function (evt, cmp, users, options) {
    let decision = [];
    if (typeof evt.key === "undefined") evt.key = "";
    let key = evt.key.split('_');
    if (key[0] == "timeline" && key[1] != "change") {
      if (evt.type === "appAttrChange" || typeof evt.type === "undefined") {
        let data = evt.data ? evt.data.value : evt.value;
        if (data.applyTo === users.get("me").agentid || data.applyTo === "all")
          self.data = data.componentStatus;
        evt.applyTo = data.applyTo;
      }
      else
        if (key[1] === users.get("me").agentid) self.data = evt.componentStatus;
    }

    /* TODO :rewrite evt info is not clean */
   // if (self.data && typeof self.data != "string") evt.data = self.data;

    if (evt.type === "timeline_change" || evt.key.indexOf("timeline") > -1) {
      const isChangeScene = evt.time!=undefined && evt.time!=self.time;
      Array.from(cmp).forEach((c) => {
        c.unload(isChangeScene);
      });
      
      if (evt.type === "timeline_change") self.time = evt.time;
      if (evt.key.indexOf("timeline") > -1) evt.time = self.time || 0;
      let cmps = getTimeEvent(evt);
      for (let n = 0; n < cmp.length; n++) {
        let c = cmp[n];
        if (!c.style) continue;
        let index = cmps.map((x) => { return x.id }).indexOf(c.id);
       
        if (index > -1) {
          c.order = cmps[index].order;
          c.input = cmps[index].source;
          if(!isChangeScene && c.style.display=="none"){
            c.load();
          }
          else{
            c.load(isChangeScene);
          }
          if (cmps[index].mutedScene == 'true') {
            c.muteScene();
          }
          else {
            c.unmuteScene();
          }
          if (cmps[index].loopVideo == 'true') {
            c.changeLoop(true);
          }
          else {
            c.changeLoop(false);
          }
        }
        else
          c.unload(isChangeScene);
        decision.push({ cmp: c.id, show: index > -1 })
      }
    }
    return decision;
  }
  function getTimeEvent(evt) {
    loglevel__WEBPACK_IMPORTED_MODULE_0___default().debug(evt);
    let data = typeof self.data !== "string" ? self.data : [];
    if (typeof data === "undefined") data = [];
    let time = Math.round(evt.time);
    let inIntervalCmps = data.filter((d) => {
      if (d.slots[time] === 1) return true;
      return false;
    })
    if (inIntervalCmps.length > 0) {
      inIntervalCmps = inIntervalCmps.map((c) => {
        return { id: "v"+c.id, source: c.source, mutedScene: c.mutedScenes[time],order:c.order, loopVideo: c.loopVideo[time]};
      })
    }
    return inIntervalCmps;
  }
  return deploy;

}


/***/ }),

/***/ "./src/orkestra/rules/byname.js":
/*!**************************************!*\
  !*** ./src/orkestra/rules/byname.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Byname": function() { return /* binding */ Byname; }
/* harmony export */ });
function Byname (){
  var self = {};
  self.name ="byname";
  var deploy = function (evt,cmp,users,options){
      let decision = [];
    //  cmp[0].style.display="none";
      for (let n in cmp){
        let c = cmp[n];
        if (!c.style) return;
        if ('master' === users.get('me').profile && c.nodeName==="USER-TABLE") c.style.display = 'block';
        else if ( c.nodeName==="APP-TABLE") c.style.display = 'block';
              else c.style.display = 'none';
        decision.push({cmp:c.id,show:c.style.display=="block"})
        }
        return decision;
  }
  return deploy;

}


/***/ }),

/***/ "./src/orkestra/rules/explicit.js":
/*!****************************************!*\
  !*** ./src/orkestra/rules/explicit.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Explicit": function() { return /* binding */ Explicit; }
/* harmony export */ });
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! loglevel */ "./node_modules/loglevel/lib/loglevel.js");
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__);

function Explicit() {
  var self = {};
  self.name = "explicit";
  self.data = [];
  self.time;
  var deploy = function (evt, cmp, users, options) {
    const reload = options ? !!options.reload : true
    let decision = [];
    loglevel__WEBPACK_IMPORTED_MODULE_0___default().debug(options);
    let context = getNearContext(evt,users,options);
    loglevel__WEBPACK_IMPORTED_MODULE_0___default().debug("RULE",context);
    if (context){
      context.then.forEach((c)=>{
        if (c.show) {
          reload && document.querySelector("#"+c.comp).load();
        }
        else  {
          reload && document.querySelector("#"+c.comp).unload();
        }
        if (users.get("me").agentid === c.agentid)
        decision.push({ cmp: c.comp, show: c.show })
      })
    }
    else { // whether is not context show all hide
      Array.from(cmp).forEach((c)=>{
        decision.push({ cmp: c.id, show: false })
      })
    }

    return decision;
  }
  function getNearContext(evt,users,options){
    loglevel__WEBPACK_IMPORTED_MODULE_0___default().debug(evt,options,users);
    if (!users) return undefined;
    if (!options.contexts) {
      loglevel__WEBPACK_IMPORTED_MODULE_0___default().warn ("NO explicit found, add config file to app.use");
      return;
    }
    let myContext = options.contexts.find((x)=> {if (x.session==options.channel) return true});
    let conditionsEquality = [];
    let usersMaps = Array.from(users).map((usr)=>{
      return usr[1].agentid;
    })
    let rule = myContext.rules.find((r)=>{
      usersMaps.sort();
      r.condition.sort();
      if (usersMaps.length === r.condition.length && usersMaps.every((value, index) => value === r.condition[index])){
        return true;
      }

    });
    return rule || undefined;
  }
  return deploy;

}


/***/ }),

/***/ "./src/orkestra/rules/userPref.js":
/*!****************************************!*\
  !*** ./src/orkestra/rules/userPref.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UserPref": function() { return /* binding */ UserPref; }
/* harmony export */ });
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! loglevel */ "./node_modules/loglevel/lib/loglevel.js");
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__);


function UserPref() {
    var self = {};
    self.name = "userpref";
    self.data = [];
    self.time;
    var deploy = function (evt, cmp, users, options) {
      const reload = options ? !!options.reload : true
      let decision = [];
      if (evt.data && evt.data.key==="componentsStatus"){
        loglevel__WEBPACK_IMPORTED_MODULE_0___default().debug("COMPONENTSSTATUS",evt);
        let cmps = evt.data.value;
        if (cmps!="undefined")
         cmps.componentsStatus.forEach((c)=>{
           if (typeof c.usrCmd !=="undefined"){
            let cmdShow = c.usrCmd.find((x)=>{
              if (x.cmd =="show") {
                reload && document.querySelector("#"+c.cmp).load();
                return true;
              }
            });
            if (cmdShow) decision.push({ cmp: c.cmp, show: cmdShow.value, usrCmd:c.usrCmd})
           }
        })
      }
      else {
        if (users.get("me").capacities.componentsStatus && users.get("me").capacities.componentsStatus.componentsStatus){
         loglevel__WEBPACK_IMPORTED_MODULE_0___default().debug("COMPONENTSSTATUS",users.get("me").capacities.componentsStatus.componentsStatus,evt);
          let cmps = users.get("me").capacities.componentsStatus;
          if (cmps!="undefined")
           cmps.componentsStatus.forEach((c)=>{
             if (typeof c.usrCmd !=="undefined"){
              let cmdShow = c.usrCmd.find((x)=>{
                  if (x.cmd =="show") {
                    reload && document.querySelector("#"+c.cmp).load();
                    return true;
                  }
                });
              if (cmdShow) decision.push({ cmp: c.cmp, show: cmdShow.value, usrCmd:c.usrCmd})
             }
          })
        }
      }
      loglevel__WEBPACK_IMPORTED_MODULE_0___default().debug(decision);
      return decision;
    }

    return deploy;

  }


/***/ }),

/***/ "./src/orkestra/sharedstate.es6.js":
/*!*****************************************!*\
  !*** ./src/orkestra/sharedstate.es6.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io-client */ "./node_modules/socket.io-client/build/esm/index.js");
/* harmony import */ var _utils___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/ */ "./src/orkestra/utils/index.js");



    /**
     * @class SharedState
     * @classdesc JavaScript Library for the flexcontrol SharedState
     * @param {string} url URL for the WS connection. if(!url) it tryes to connect to the server wich hosts the socket.io.js
     * @param {string} token the connection token
     * @param {Object} options
     * @param {boolean} [options.reconnection] if the Client should try to reconnect,Default = true
     * @param {boolean} [options.agentid] the AgentID to use, Default = random()
     * @param {boolean} [options.getOnInit] get all Keys from the Server on init(), Default = true
     * @param {boolean} [options.logStateInterval] logs the sharedState every 5sec to the console, Default = false
     * @param {boolean} [options.logToConsole] if things should get logged to console, Default = false
     * @param {boolean} [options.autoPresence] set presence to "online" on connect, Default = true
     * @returns {Object} SharedState
     * @author Andreas Bosl <bosl@irt.de>
     * @copyright 2014 Institut für Rundfunktechnik GmbH, All rights reserved.
     *
     */
    var SharedState = function (url, options) {
        var _connection = null;
        var log =  _utils___WEBPACK_IMPORTED_MODULE_1__.Logger.getLogger('SharedState');

        var self = {};

        // READY STATE for Shared State
        var STATE = Object.freeze({
            CONNECTING: "connecting",
            OPEN: "open",
            CLOSED: "closed"
        });

        // Event Handlers
        var _callbacks = {
            'change': [],
            'remove': [],
            'readystatechange': [],
            'presence': []
        };

        var _sharedStates = {};

        var _presence = {};
        var _request = false;

        var _stateChanges = {};


        var _log = function (text, datagram) {
            if (options.logToConsole === true) {
                log.info(text, datagram);
            }
        };

        var _error = function (text, datagram) {
            if (options.logToConsole === true) {
                log.error(text, datagram);
            }
        };

        /* <!-- defaults */
        options = options || {};
        if (options instanceof String) {
            options = {};
        }
        if (options.reconnection !== false) {
            options.reconnection = true;
        }
        if (!options.agentid) {
            log.warn('SHAREDSTATE - agentID undefined, generating one for this session');
            options.agentid = (Math.random() * 999999999).toFixed(0);
        }
        if (options.getOnInit !== false) {
            options.getOnInit = true;
        }

        if (options.autoPresence !== false) {
            options.autoPresence = true;
        }
        if (options.autoClean !== true) {
            options.autoClean = false;
        }
        options.forceNew = true;
        options.multiplex = false;

        url = url || {};
        /* defaults --> */



        if (options.logStateInterval === true) {
            setInterval(function () {
                _log('SharedSate(' + url + '):', _sharedStates);
            }, 5000);
        }


        /* <!-- internal functions */
        var _init = function () {

	     options.transport = [ "websocket","polling"]
            _connection = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_0__.default)(url, options);
            _connection.on('connect', onConnect);
            _connection.on('disconnect', onDisconnect);

            _connection.on('joined', onJoined);
            _connection.on('status', onStatus);
            _connection.on('changeState', onChangeState);
            _connection.on('initState', onInitState);

            _connection.on('ssError', onError);
            readystate.set('connecting');


            if (_connection.connected === true) {
                onConnect();
            }

        };

        var onError = function (data) {
            _error('SharedState-error', data);
        };

        var onConnect = function () {
            if (_connection.connected === true) {
                readystate.set('connecting');
                var datagram = {
                    agentID: options.agentid
                };
                if (options.userId) {
                    datagram.userId = options.userId;
                }
                _sendDatagram('join', datagram);
            }
        };

        /*
			Internal method for invoking callback handlers

			Handler is only supplied if on one specific callback is to used.
			This is helpful for supporting "immediate events", i.e. events given directly
			after handler is registered - on("change", handler);

			If handler is not supplied, this means that all callbacks are to be fired.
			This function is also sensitive to whether an "immediate event" has already been fired
			or not. See callback registration below.
        */
        var _do_callbacks = function (what, e, handler) {
            if (!_callbacks.hasOwnProperty(what)) throw "Unsupported event " + what;
            var h;
            for (let i = 0; i < _callbacks[what].length; i++) {
                h = _callbacks[what][i];
                if (handler === undefined) {
                    // all handlers to be invoked, except those with pending immeditate
                    if (h._immediate_pending) {
                        continue;
                    }
                } else {
                    // only given handler to be called
                    if (h === handler) handler._immediate_pending = false;
                    else {
                        continue;
                    }
                }
                try {
                    if (h._ctx) {
                        h.call(h._ctx, e);
                    } else {
                        h.call(self, e);
                    }
                } catch (e) {
                    log.error("Error in " + what + ": " + h + ": " + e);
                }
            }
        };
        /* internal functions --> */


        /* <!-- incoming socket functions */
        var onStatus = function (datagram) {
            _log('SHAREDSTATE - got "status"', datagram);
            for (var i = 0; i < datagram.presence.length; i++) {
                if (datagram.presence[i].key && (JSON.stringify(_presence[datagram.presence[i].key]) != JSON.stringify(datagram.presence[i].value || !_presence[datagram.presence[i].key]))) {
                    var presence = {
                        key: datagram.presence[i].key,
                        value: datagram.presence[i].value || undefined
                    };
                    _presence[datagram.presence[i].key] = datagram.presence[i].value;
                    _do_callbacks('presence', presence);
                } else {
                    _log('SHAREDSTATE - reveived "presence" already saved or something wrong', datagram.presence[i]);
                }

            }
        };

        var onDisconnect = function () {
            readystate.set('connecting');
            _log('SHAREDSTATE - got "disconnected"');
        };


        var onChangeState = function (datagram) {
            _log('SHAREDSTATE - got "changeState"', datagram);

            datagram = datagram || {};


            for (var i = 0; i < datagram.length; i++) {
                if (datagram[i].type == 'set') {
                    if (datagram[i].key && JSON.stringify(_sharedStates[datagram[i].key]) != JSON.stringify(datagram[i].value)) {
                        var state = {
                            key: datagram[i].key,
                            value: datagram[i].value,
                            type: 'add'
                        };
                        if (_sharedStates[datagram[i].key]) {
                            state.type = 'update';
                        }
                        _sharedStates[datagram[i].key] = datagram[i].value;
                        _do_callbacks('change', state);

                    } else {
                        _log('SHAREDSTATE - reveived "set" already saved or something wrong', datagram[i]);
                    }
                } else if (datagram[i].type == 'remove') {
                    if (datagram[i].key && _sharedStates[datagram[i].key]) {
                        var state = {
                            key: datagram[i].key,
                            value: _sharedStates[datagram[i].key],
                            type: 'delete'
                        };
                        delete _sharedStates[datagram[i].key];
                        _do_callbacks('remove', state);
                    }

                }

            }
        };

        var onJoined = function (datagram) {
            _log('SHAREDSTATE - got "joined"', datagram);
            if (datagram.agentID == options.agentid) {
                if (options.getOnInit === true) {
                    var datagram = [];
                    _sendDatagram('getInitState', datagram);
                } else {
                    readystate.set('open');
                    if (options.autoPresence === true) {
                        setPresence("online");
                    }
                }


            }
            if (options.autoClean) {

                setInterval(function () {
                    // Autoclean - check for meta keys without online nodes
                    for (var key in _sharedStates) {
                        if (_sharedStates.hasOwnProperty(key)) {
                            if (key.indexOf("__meta__") == 0) {
                                var agentid = key.substr(8);
                                if (!_presence[agentid]) {
                                    _autoClean(agentid);
                                }

                            }
                        }
                    }
                }, 5000);
            }
        };



        var onInitState = function (datagram) {
            _log('INITSTATE', datagram);

            for (var i = 0, len = datagram.length; i < len; i++) {
                if (datagram[i].type == 'set') {
                    if (datagram[i].key && datagram[i].value && JSON.stringify(_sharedStates[datagram[i].key]) != JSON.stringify(datagram[i].value)) {
                        var state = {
                            key: datagram[i].key,
                            value: datagram[i].value,
                            type: 'add'
                        };
                        _sharedStates[datagram[i].key] = datagram[i].value;
                        _do_callbacks('change', state);
                    }
                }
            }
            readystate.set('open');
            if (options.autoPresence === true) {
                setPresence("online");
            }

        }


        var _autoClean = function (agentid) {
            if (!options.autoClean) {
                return;
            }
            _log("*** Cleaning agent ", agentid)
                // Go through the dataset and remove anything left from this node
            for (var key in _sharedStates) {
                if (_sharedStates.hasOwnProperty(key)) {
                    if (key.indexOf("__") == 0 && key.indexOf("__" + agentid) > -1) {
                        self.removeItem(key);
                    }
                }
            }
        }


        /* incoming socket functions --> */



        /* <!-- outgoing socket functions */
        var _sendDatagram = function (type, datagram) {
            _log('SHAREDSTATE - sending', datagram);
            _connection.emit(type, datagram);
        };
        /* outgoing socket functions --> */


        /* <!-- API functions */
        /**
         * sets a key in the sharedState
         * @method setItem
         * @param {string} key the key to set
         * @param {Object} value the value to set
         * @param {string} [options] tbd
         * @returns {Object} SharedState
         * @memberof SharedState
         */
        var setItem = function (key, value, options) {
            if (_request) {
                var state = {
                    type: 'set',
                    key: key,
                    value: value
                };

                _stateChanges[key] = state;
            } else {
                if (readystate.get() === STATE.OPEN) {
                    if (key) {
                        var datagram = [
                            {
                                type: 'set',
                                key: key,
                                value: value
                                }
                            ];
                        _sendDatagram('changeState', datagram);
                    } else {
                        throw 'SHAREDSTATE - params with error - key:' + key + 'value:' + value;
                    }
                } else {
                    throw 'SHAREDSTATE - setItem not possible - connection status:' + readystate.get();
                }
            }


            return self;
        };

        /**
         * removes a key from the sharedState
         * @method removeItem
         * @param {string} key the key to remove
         * @param {string} [options] tbd
         * @returns {Object} SharedState
         * @memberof SharedState
         */
        var removeItem = function (key, options) {
            if (_request) {
                var state = {
                    type: 'remove',
                    key: key
                };
                _stateChanges[key] = state;
            } else {
                if (readystate.get() == STATE.OPEN) {
                    if (_sharedStates[key]) {
                        var datagram = [
                            {
                                type: 'remove',
                                key: key
                                }
                            ];
                        _sendDatagram('changeState', datagram);
                    } else {
                        throw 'SHAREDSTATE - key with error - key:' + key;
                    }
                } else {
                    throw 'SHAREDSTATE - removeItem not possible - connection status:' + readystate.get();
                }
            }
            return self;
        };

        /**
         * starts the request builder
         * @method request
         * @returns {Object} SharedState
         * @memberof SharedState
         */
        var request = function () {
            _request = true;
            return self;
        };

        /**
         * stops the request builder and sends all changes
         * @method send
         * @returns {Object} SharedState
         * @memberof SharedState
         */
        var send = function () {
            if (readystate.get() == STATE.OPEN) {
                _request = false;
                if (Object.keys(_stateChanges).length > 0) {
                    var datagram = [];
                    var keys = Object.keys(_stateChanges);
                    for (var i = 0; i < keys.length; i++) {
                        datagram.push(_stateChanges[keys[i]]);
                    }
                    _sendDatagram('changeState', datagram);

                    _stateChanges = {};
                }
            } else {
                throw 'SHAREDSTATE - send not possible - connection status:' + readystate.get();
            }
            return self;
        };

        /**
         * returns a value of the given key
         * @method getItem
         * @param {string} key the key to remove
         * @param {string} [options] tbd
         * @returns {Object} data
         * @returns {Object} data.key the value of the key
         * @returns {Object} data.newValue the value of the key
         * @memberof SharedState
         */
        var getItem = function (key, options) {

            if (key === undefined || key === null) {
                var datagram = [];
                _sendDatagram('getState', datagram);
                return;
            } else {
                key = key + '';
                if (_sharedStates[key]) {
                    return JSON.parse(JSON.stringify(_sharedStates[key]));
                }
            }
            return;
        };

        /**
         * returns an Array of keys
         * @method keys
         * @returns {Array} keys
         * @memberof SharedState
         */
        var keys = function () {

            return Object.keys(_sharedStates);

        };


        /*
			READYSTATE

			encapsulate protected property _readystate by wrapping
			getter and setter logic around it.
			Closure ensures that all state transfers must go through set function.
			Possibility to implement verification on all attempted state transferes
			Event

  		*/
        var readystate = function () {
            var _readystate = STATE["CONNECTING"];
            // accessors
            return {
                set: function (new_state) {
                    // check new state value
                    let found = false;
                    for (let key in STATE) {
                        if (!STATE.hasOwnProperty(key)) continue;
                        if (STATE[key] === new_state) found = true;
                    }
                    if (!found) throw "Illegal state value " + new_state;
                    // check state transition
                    if (_readystate === STATE["CLOSED"]) return; // never leave final state
                    // perform state transition
                    if (new_state !== _readystate) {
                        _readystate = new_state;
                        // trigger events
                        _do_callbacks("readystatechange", new_state);
                    }
                },
                get: function () {
                    return _readystate;
                }
            };
        }();

        /**
         * registers a function on event, function gets called immediatly
         * @method on
         * @param {string} what change || presence || readystatechange
         * @param {function} handler the function to call on event
         * @returns {Object} SharedState
         * @memberof SharedState
         */
        /*
		    register callback

			The complexity of this method arise from the fact that we are to give
			an "immediate callback" to the given handler.

			In addition, I do not want to do so directly within the on() method.

			As a programmer I would like to ensure that initialisation of an object
			is completed BEFORE the object needs to process any callbacks from the
			external world. This can be problematic if the object depends on events
			from multiple other objects. For example, the internal initialisation code
			needs to register handlers on external objects a and b.

			a.on("event", internal_handler_a);
			b.on("event", internal_handler_b);

			However, if object a gives an callback immediately within on, this callback
			will be processed BEFORE we have completed initialisation, i.e., any code
			subsequent to a.on).

			It is quite possible to make this be correct still, but I find nested handler
			invocation complicated to think about, and I prefer to avoid the problem.
			Therefore I like instead to make life easier by delaying "immediate callbacks"
			using

			setTimeout(_do_callbacks("event", e, handler), 0);

			This however introduces two new problems. First, if you do :

			o.on("event", handler);
			o.off("event", handler);

			you will get the "immediate callback" after off(), which is not what you
			expect. This is avoided by checking that the given handler is indeed still
			registered when executing _do_callbacks(). Alternatively one could cancel the
			timeout within off().

			Second, with the handler included in _callbacks[what] it is possible to receive
			event callbacks before the delayed "immediate callback" is actually invoked.
			This breaks the expectation the the "immediate callback" is the first callback.
			This problem is avoided by flagging the callback handler with ".immediate_pending"
			and dropping notifications that arrive before the "immediate_callback has executed".
			Note however that the effect of this dropped notification is not lost. The effects
			are taken into account when we calculate the "initial state" to be reported by the
			"immediate callback". Crucially, we do this not in the on() method, but when the
			delayed "immediate callback" actually is processed.
	    */

        var on = function (what, handler, ctx) {
            if (!handler || typeof handler !== "function") throw "Illegal handler";
            if (!_callbacks.hasOwnProperty(what)) throw "Unsupported event " + what;
            if (ctx) {
                handler._ctx = ctx;
            }
            var index = _callbacks[what].indexOf(handler);
            if (index === -1) {
                // register handler
                _callbacks[what].push(handler);
                // flag handler
                handler._immediate_pending = true;
                // do immediate callback
                setTimeout(function () {
                    switch (what) {
                    case 'change':
                        var keys = Object.keys(_sharedStates);
                        if (keys.length === 0) {
                            handler._immediate_pending = false;
                        } else {
                            for (var i = 0, len = keys.length; i < len; i++) {
                                var state = {
                                    key: keys[i],
                                    value: _sharedStates[keys[i]],
                                    type: 'update'
                                };
                                _do_callbacks('change', state, handler);
                            }
                        }
                        break;
                    case 'presence':
                        var keys = Object.keys(_presence);
                        if (keys.length === 0) {
                            handler._immediate_pending = false;
                        } else {
                            for (var i = 0, len = keys.length; i < len; i++) {
                                var presence = {
                                    key: keys[i],
                                    value: _presence[keys[i]]
                                };
                                _do_callbacks('presence', presence, handler);
                            }
                        }
                        break;
                    case 'remove':
                        handler._immediate_pending = false;
                        break;
                    case 'readystatechange':
                        _do_callbacks("readystatechange", readystate.get(), handler);
                        break;
                    }
                }, 100);
            }
            return self;
        };

        /**
         * deregisters a function on event
         * @method off
         * @param {string} what change || presence || readystatechange
         * @param {function} handler the function to call on event
         * @returns {Object} SharedState
         * @memberof SharedState
         */
        // unregister callback
        var off = function (what, handler) {
            if (_callbacks[what] !== undefined) {
                var index = _callbacks[what].indexOf(handler);
                if (index > -1) {
                    _callbacks[what].splice(index, 1);
                }
            }
            return self;
        };


        /**
         * sets the presence of the client ('connected' and 'disconnected' automatically set by server)
         * @method setPresence
         * @param {string} state the string to set the presence to
         * @returns {Object} SharedState
         * @memberof SharedState
         */
        var setPresence = function (state) {
            if (readystate.get() == STATE.OPEN) {
                if (state) {
                    var datagram = {
                        agentID: options.agentid,
                        presence: state
                    };
                    _sendDatagram('changePresence', datagram);

                } else {
                    throw 'SHAREDSTATE - params with error - state:' + state;
                }
            } else {
                throw 'SHAREDSTATE - send not possible - connection status:' + readystate.get();
            }
            return self;
        };
        /* API functions --> */


        /* <!-- public */
        self.__defineGetter__("readyState", readystate.get);
        self.__defineGetter__("STATE", function () {
            return STATE;
        });
        self.__defineGetter__("agentid", function () {
            return options.agentid;
        });

        self.setItem = setItem;
        self.removeItem = removeItem;

        self.request = request;
        self.send = send;

        self.getItem = getItem;

        self.keys = keys;
        self.on = on;
        self.off = off;
        self.setPresence = setPresence;
        /* public --> */

        _init();

        return self;
    }

/* harmony default export */ __webpack_exports__["default"] = (SharedState);


/***/ }),

/***/ "./src/orkestra/transitions/simple.js":
/*!********************************************!*\
  !*** ./src/orkestra/transitions/simple.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Simple": function() { return /* binding */ Simple; }
/* harmony export */ });
/* harmony import */ var _css_simple_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css/simple.css */ "./src/orkestra/transitions/css/simple.css");
/* harmony import */ var _css_simple_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_simple_css__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/ */ "./src/orkestra/utils/index.js");


var log =  _utils___WEBPACK_IMPORTED_MODULE_1__.Logger.getLogger('Transtiion Plugin Simple');

function Simple (options){
    var render = function(time){
        if (options && options.background) document.body.style.background = options.background; 
        document.body.className = "ork_opacity_0"; 
        if (!time) 
            if (options && options.time) var time = options.time;
        setTimeout(()=>{
            document.body.className ="ork_opacity_1";
        },(time || 1500));
    
    }
    var plugin ={
        render:render,
        name:"Simple"
     }
     return plugin;
}


/***/ }),

/***/ "./src/orkestra/ui/UI.js":
/*!*******************************!*\
  !*** ./src/orkestra/ui/UI.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UI": function() { return /* binding */ UI; }
/* harmony export */ });
/* harmony import */ var _utils___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/ */ "./src/orkestra/utils/index.js");


var log =  _utils___WEBPACK_IMPORTED_MODULE_0__.Logger.getLogger('UI');

function UI (app) {
  var self = {};
  if (typeof document !== 'undefined')
  self.components = document.querySelector('orkestra-ui')?document.querySelector('orkestra-ui').children:[];
  else self.components =[];
  self.callbacks = [];
  self.old = [];
  self.uiRender = function (evt,eventType){
      switch (eventType){
            case "appCtx":{
              if (evt.key.indexOf("layout")!=-1){
                log.info("changing layout");
                if (evt.value){
                    if (evt.value.applyTo && (evt.value.applyTo=="all" || evt.value.applyTo==app.getMyAgentId())){
                    if (evt.value.status ==="off") self.useLayout(self.callbacks[0].name,evt)
                    else self.useLayout(evt.value.layout,evt);
                  }
                }
                 else if(evt.data) {
                  if (evt.data.value.applyTo && (evt.data.value.applyTo=="all" || evt.data.value.applyTo==app.getMyAgentId()))
                   {
                    if (evt.data.value.status ==="off") self.useLayout(self.callbacks[0].name,evt)
                    else self.useLayout(evt.data.value.layout,evt);
                  }
                 }
              }
              else{
                self.useLayout(self.activeLayout,evt);
              }
              break;
            }
            case "userCtx":{
              // runLayout(evt);
               if (evt.data.key && evt.data.value!=="undefined" && evt.data.key ==="userData"){
                   if ("layout" in evt.data.value && evt.data.agentid === app.getMyAgentId()){
                     if (evt.data.value.layout.indexOf("FullScreen")!=-1){
                        let cmp = evt.data.value.layout.split('_')[1];
                        evt.cmp = cmp;
                        let type = evt.data.value.layout.split('_')[2];
                        let tnpLayout = self.callbacks[0].name;
                        if (type==="off") tnpLayout = self.callbacks[0].name;
                        else  tnpLayout = "FullScreen";
                        self.useLayout(tnpLayout,evt)
                     }
                     else  self.useLayout(evt.data.value.layout,evt)

                 }
               }
               if (evt.data.key && evt.data.key ==="componentsStatus"){
                  if (evt.data.agentid === app.getMyAgentId() && evt.data.from !==app.getMyAgentId()){
                       var diff = _utils___WEBPACK_IMPORTED_MODULE_0__.Obj.getObjectDiff(evt.data.value,self.old);
                       log.debug(diff);
                        self.old = evt.data.value;
                       if (typeof diff !="undefined" && Object.keys(diff).length ==1 && diff.componentsStatus){
                         let usrCmdCmps = Object.entries(diff.componentsStatus).filter((obj)=>{
                                if ("usrCmd" in obj[1]) return true;
                                return false;
                         });
                         if (usrCmdCmps.length==0) return;
                          let compentIdx = usrCmdCmps[0][0];
                          let cmdIdx = Object.keys(diff.componentsStatus[compentIdx].usrCmd)[0];
                          log.debug("CHANGE",evt.data.value.componentsStatus[compentIdx].usrCmd[cmdIdx]);
                          let diff2 = evt.data.value.componentsStatus[compentIdx].usrCmd[cmdIdx];
                          if( !diff2) return;
                          let comp = document.querySelector("#"+diff2.cmp);
                          if (comp && comp.userCmdEvents){
                            comp.userCmdEvents ({cmd:diff2.cmd,value:diff2.value});
                          }
                          else
                           console.warn("Webcomponent does not implements userCmdEvents function");
                       }
                       /* first time the diff is all object */
                       if (typeof diff !="undefined" && Object.keys(diff).length >1 && diff.componentsStatus){
                          if (Array.isArray(diff.componentsStatus)===false) diff.componentsStatus = [diff.componentsStatus];
                          let cmp = diff.componentsStatus.find((x)=>{
                                if (x.usrCmd) return true;
                          })
                          if (!cmp) return;
                          let diff2 = cmp.usrCmd[0]
                          if( !diff2) return;
                          let comp = document.querySelector("#"+diff2.cmp);
                          if (comp && comp.userCmdEvents){
                            comp.userCmdEvents ({cmd:diff2.cmd,value:diff2.value});
                          }
                          else
                           console.warn("Webcomponent does not implements userCmdEvents function");
                       }
                    // self.old = evt.data.value;
                  }
               }
               runLayout(evt);
              break;
            }
            case "timeupdate":
            case "timeline":{
               
                runLayout(evt);


            break;
            }
      }
  }

  var runLayout = function (chg){
    // clean style before
    unloadOldLayout();
    if (typeof self.activeLayout ==="object"){
	    let time = app.sequencer.currentTime;
      let layoutname = self.activeLayout[time];
      //let order = self.activeLayout[time];
	    let _layout = self.callbacks.find((layout)=>{ return layout.name === layoutname});
    	    _layout.callback(chg,self.components,app,_layout.options)
    }
    else
	    if (self.activeLayout){
	      let _layout = self.callbacks.find((layout)=>{ return layout.name === self.activeLayout});
	      if (_layout) _layout.callback(chg,self.components,app,_layout.options)
	    }
	    else
	    	self.callbacks.forEach((cb)=>{
		      cb.callback(chg,self.components,app,cb.options);
    		    })
  }
  var unloadOldLayout = function(){
      if (self.oldLayout === self.activeLayout && typeof self.activeLayout!=="object") return;
      let status = [];
      // get status of display, a plugin code may changed it, to ensure status.
      Array.from(self.components).forEach((c)=>{
        let state = c.style.display;
        status.push({component:c,status:state});
     })
    if (typeof self.oldLayout ==="object"){
	    let time = app.sequencer.currentTime;
	    let layoutname = self.oldLayout[time];
	    let _layout = self.callbacks.find((layout)=>{ return layout.name === layoutname});
          _layout.unload(self.components);
          status.forEach((x)=>{
              x.component.style.display = x.status;
          })
    }
    else
	    if (self.oldLayout){
	      let _layout = self.callbacks.find((layout)=>{ return layout.name === self.oldLayout});
	      if (_layout) {
          _layout.unload(self.components);
          status.forEach((x)=>{
            x.component.style.display = x.status;
        })
        }
	    }
	    else {
	    	self.callbacks.forEach((cb)=>{
		      cb.unload(self.components);
          })
        status.forEach((x)=>{
            x.component.style.display = x.status;
        })
      }
  }
  self.subscribe = function (plugin,options){
    let _plugin = plugin();
    self.callbacks.push({name:plugin.name,callback:_plugin.render,unload:_plugin.unload,options:options});
    log.info("registring UI",plugin.name);
  }
  self.unsubscribe = function (plugin){
    // TODO
    log.info("unregistring UI",plugin.name);
  }
  self.useLayout = function (name,evt){
     self.oldLayout = self.activeLayout;
     self.activeLayout = name;
     runLayout(evt);
  }
  self.getUsingLayout = function(){
    return self.activeLayout;
  }
  return {
    "subscribe":self.subscribe,
    "components":self.components,
    "layouts":self.callbacks,
    "useLayout":self.useLayout,
    "uiRender":self.uiRender,
    "getUsingLayout":self.getUsingLayout


  }
}




/***/ }),

/***/ "./src/orkestra/ui/plugins/customLayout.js":
/*!*************************************************!*\
  !*** ./src/orkestra/ui/plugins/customLayout.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CustomLayout": function() { return /* binding */ CustomLayout; }
/* harmony export */ });
/* harmony import */ var _css_custom_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css/custom.css */ "./src/orkestra/ui/plugins/css/custom.css");
/* harmony import */ var _css_custom_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_custom_css__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/ */ "./src/orkestra/utils/index.js");


var log =  _utils___WEBPACK_IMPORTED_MODULE_1__.Logger.getLogger('UI Plugin Custom Layout');

function CustomLayout (){

  var render = function(ev,cmp){
     var setClasses = function(parameters,_cmp,N){
         document.querySelector('orkestra-ui').className="grid";
         log.info("parameters=>",parameters);
         let cmp_p = parameters.find((x)=>{ if (x.id == _cmp.id) return true})   
         if (cmp_p){
             _cmp.style.top = cmp_p.top;
             _cmp.style.left = cmp_p.left;
             _cmp.style.width = cmp_p.width;
             _cmp.style.height = cmp_p.height;
             _cmp.style.zIndex = cmp_p.zindex;
             _cmp.style.position = "absolute";
         }
     }
     var visible = Array.from(cmp).filter( (x,i,len) =>
       {

         return x.style.display!="none"
       });
        visible.forEach((cmp,o,len)=>{
            setClasses(JSON.parse(localStorage.getItem("parameters")),cmp,len.length);
        });


  }
  var unload = function (cmps){
     Array.from(cmps).forEach((c)=>{
      c.style ="";
      c.className ="";
   })

  }
  var plugin ={
     render:render,
     unload:unload
  }
  return plugin;

}


/***/ }),

/***/ "./src/orkestra/ui/plugins/divided.js":
/*!********************************************!*\
  !*** ./src/orkestra/ui/plugins/divided.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Divided": function() { return /* binding */ Divided; }
/* harmony export */ });
/* harmony import */ var _css_custom_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css/custom.css */ "./src/orkestra/ui/plugins/css/custom.css");
/* harmony import */ var _css_custom_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_custom_css__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/ */ "./src/orkestra/utils/index.js");


var log =  _utils___WEBPACK_IMPORTED_MODULE_1__.Logger.getLogger('UI Plugin Divided');

function Divided (){

  var render = function(ev,cmp,app){
    var currentTime = app.sequencer ? app.sequencer.currentTime:-1;
     var setClasses = function(_cmp,N){
         document.querySelector('orkestra-ui').className="container";
         log.info("N=>",N);
         if (N>6){
           _cmp.className = "item79";
         }
         else if (N==5 || N==6){
          _cmp.className = "item456";
         }
         else if (N==3 || N==4){
          _cmp.className = "item34";
         }
         else if (N==2){
           _cmp.className = "item24";
         }
        
         else if (N==1){
            _cmp.className = "item21";
         }

     }
     var visible = Array.from(cmp).filter( (x,i,len) =>
       {

         return x.style.display!="none"
       });
       
        visible.forEach((cmp,o,len)=>{
            if (typeof cmp.order==="undefined") cmp.style.order = 0;
            else cmp.style.order = cmp.order[currentTime];
            setClasses(cmp,len.length);
        });


  }
  var unload = function (cmps){
     Array.from(cmps).forEach((c)=>{
      c.style ="";
      c.className ="";
   })

  }
  var plugin ={
     render:render,
     unload:unload
  }
  return plugin;

}


/***/ }),

/***/ "./src/orkestra/ui/plugins/editLayout.js":
/*!***********************************************!*\
  !*** ./src/orkestra/ui/plugins/editLayout.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EditLayout": function() { return /* binding */ EditLayout; }
/* harmony export */ });
/* harmony import */ var _css_custom_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css/custom.css */ "./src/orkestra/ui/plugins/css/custom.css");
/* harmony import */ var _css_custom_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_custom_css__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/ */ "./src/orkestra/utils/index.js");



var log =  _utils___WEBPACK_IMPORTED_MODULE_1__.Logger.getLogger('UI Plugin Edit Layout');

function EditLayout (){

  var render = function(ev,cmp){
    document.querySelector('orkestra-ui').className="grid";
     var changeZindex = function (type,id){
        switch (type){
              case "back":
                console.log("back",id);
              break;
              case "front":
                console.log("front",id);
              break;
        }
     }
     var setClasses = function(_cmp,N){
         
         _cmp.className +=_cmp.className.indexOf('resizable')==-1?"resizable":"";
         _cmp.style.width = "400px";
         _cmp.style.height = "auto";
         _cmp.style.position = "absolute";
         _cmp.style.top = Math.floor(Math.random() * 500) + 100+"px";
         _cmp.style.left = Math.floor(Math.random() * 1000) + 1+"px";
         _cmp.style.zIndex = 9999;
     }
     var visible = Array.from(cmp).filter( (x,i,len) =>
       {
         if (!x.shadowRoot.querySelector('#'+x.id+"header")){
             x.shadowRoot.innerHTML+= "<div id='"+x.id+"header' style='width:100%;height:25px;background:red;position:absolute;top:0px;'> Move <span style='padding-left:68%;cursor:pointer;' id="+x.id+"_backzindex> Back</span><span style='cursor:pointer;' id="+x.id+"_frontzindex>/Front</span></div>";
             x.shadowRoot.querySelector('#'+x.id+'_backzindex').addEventListener('click',(e)=>{
                  console.log(e);
                  let el = e.path[0].id;
                  let elid = el.split('_')[0];
                  document.querySelector("#"+elid).style.zIndex -=1; 
             })
             x.shadowRoot.querySelector('#'+x.id+'_frontzindex').addEventListener('click',(e)=>{
                console.log(e);
                let el = e.path[0].id;
                  let elid = el.split('_')[0];
                  document.querySelector("#"+elid).style.zIndex +=1; 

            })
         }
         _utils___WEBPACK_IMPORTED_MODULE_1__.Obj.dragElement(x);         
         return x.style.display!="none"
       });
        visible.forEach((cmp,o,len)=>{
            setClasses(cmp,len.length);
        });

     let saveParams = document.createElement('button');
     saveParams.innerHTML="Save";
     saveParams.id ="saveparams";
     saveParams.addEventListener('click',(e)=>{
        let parameters =[]; 
        Array.from(cmp).forEach((c)=>{
            let params = {};
            params.width = (parseInt(c.style.width)*100)/document.body.clientWidth+"%";
            params.height = (parseInt(c.style.height)*100)/document.body.clientHeight+"%";
            params.top =(parseInt( c.style.top || 0)*100)/document.body.clientHeight+"%";
            params.left = (parseInt( c.style.left || 0)*100)/document.body.clientWidth+"%";
            params.zindex = c.style.zIndex;
            params.id = c.id;
            parameters.push(params);
         })
         console.log(parameters);
         localStorage.setItem('parameters', JSON.stringify(parameters));
    });   
     if (!document.querySelector('#saveparams'))
         document.body.appendChild(saveParams);
  }
  var unload = function (cmps){
     Array.from(cmps).forEach((c)=>{
      let header  = c.shadowRoot.querySelector("#"+c.id+"header");
      if (header) c.shadowRoot.removeChild(header);
    
      c.style ="";
      c.className ="";
   })
   if (document.querySelector('#saveparams'))document.body.removeChild(document.querySelector('#saveparams'));
  }
  var plugin ={
     render:render,
     unload:unload
  }
  return plugin;

}


/***/ }),

/***/ "./src/orkestra/ui/plugins/fullscreen.js":
/*!***********************************************!*\
  !*** ./src/orkestra/ui/plugins/fullscreen.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FullScreen": function() { return /* binding */ FullScreen; }
/* harmony export */ });
/* harmony import */ var _utils___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/ */ "./src/orkestra/utils/index.js");

function FullScreen (){
  var log =  _utils___WEBPACK_IMPORTED_MODULE_0__.Logger.getLogger('UI Plugin Fullscreen');
  var self = {};
  self.name = "FullScreen";
  var render = function(ev,cmp,app,options){
       let layout = app.getAppAttribute("layout");
       log.debug("Rendering")
       if (ev && ev.type=="appAttrChange" || layout.status == "on") { // Session oriented fullscreen
        let Config = options;
        let applyToComp = Config.componentId;
        applyToComp = layout.cmp;
        if (ev && ev.data.value.cmp) applyToComp = ev.data.value.cmp;
        let comp =  Array.from(cmp).find((x)=>{
            return x.id == applyToComp;
        })
        Array.from(cmp).forEach((x)=>{
            if (x.id != applyToComp) x.style.display="none";
        })

        let props = Config.agents.find((ag)=>{
            return ag.agentid == app.getMyAgentId()
        });
        if (!props) log.debug("Not agent's properties found");
        comp.style="position:absolute;z-index:999";
        comp.style.width = props.screensize.width*Config.cols;
        comp.style.height = props.screensize.height*Config.rows;
        comp.style.left = -((props.col * props.screensize.width)+props.offsetx);
        comp.style.top = -((props.row * props.screensize.height)+props.offsety);
        document.body.style="overflow:hidden";
      }
      else if (ev.data && ev.data.key=="userData" && ev.data.value) { // Agent oriented fullscreen
        if (ev.data && ev.data.agentid=== app.getMyAgentId()){
        let Config = options;
        let applyToComp = Config.componentId;
        if (ev && ev.cmp) applyToComp = ev.cmp;
        let comp =  Array.from(cmp).find((x)=>{
            return x.id == applyToComp;
        })
        Array.from(cmp).find((x)=>{
            if (x.id != applyToComp) x.style.display="none";
        })
        comp.style="position:absolute;z-index:999";
        comp.style.width = "100%";
        comp.style.height = "100%";
        comp.style.left = "0px";
        comp.style.top = "0px";
        document.body.style="overflow:hidden";
      }
    }
  }
  var unload = function (cmps){
    log.debug("Unloading")
     Array.from(cmps).forEach((c)=>{
      c.style ="";
      c.className ="";
   })

  }
  var plugin ={
     render:render,
     unload:unload
  }
  return plugin;

}


/***/ }),

/***/ "./src/orkestra/ui/plugins/mosaic.js":
/*!*******************************************!*\
  !*** ./src/orkestra/ui/plugins/mosaic.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Mosaic": function() { return /* binding */ Mosaic; }
/* harmony export */ });
function Mosaic (){

  var self = {};
  self.name = "mosaic";
  var render = function(ev,cmp,app){
     var container = document.createElement('div');
     container.class="mosaic";
     var currentTime = app.sequencer ? app.sequencer.currentTime:-1;
     var setClasses = function(_cmp,N,ind){
        document.querySelector('orkestra-ui').className="container";
         //REVIEW
         //document.querySelector('orkestra-ui').style.width='100%';
         //document.querySelector('orkestra-ui').style.height='100%';
         //document.querySelector('orkestra-ui').style.position='absolute';
         document.querySelector('body').style.overflow='hidden';
         if(N==1){
           _cmp.style.width='99%';
           _cmp.style.height='99%';
           _cmp.style.left='0%';
           _cmp.style.top='0%';
           _cmp.style.position='absolute';
           _cmp.style.backgroundColor='black';
           _cmp.style.transition='width 1s, height 1s';
           //_cmp.style.transitionProperty= 'display, border-radius';
           //_cmp.style.transitionDuration= '5s 3s';
           //_cmp.style.borderRadius= '25px';
         }
         else if(N<=5){
           if(ind==0){
             _cmp.style.width='99%';
             _cmp.style.height='69%';
             _cmp.style.left='0%';
             _cmp.style.top='30%';
             _cmp.style.position='absolute';
             _cmp.style.backgroundColor='black';
             _cmp.style.transition='width 1s, height 1s';

           }
           else{
             _cmp.style.width=((100-N+1)/(N-1))+'%';
             _cmp.style.height='29%';
             _cmp.style.left= ((ind-1)*((100)/(N-1)))+'%';
             _cmp.style.top='0%';
             _cmp.style.position='absolute';
             _cmp.style.backgroundColor='black';
             _cmp.style.transition='width 1s, height 1s';

           }
         }
         else if(N>5){
           if(ind==0){
             _cmp.style.width='49%';
             _cmp.style.height='49%';
             _cmp.style.left='25%';
             _cmp.style.top='25%';
             _cmp.style.position='absolute';
             _cmp.style.backgroundColor='black';
             _cmp.style.transition='width 1s, height 1s';
           }
           else if(ind==1){
             _cmp.style.width='49%';
             _cmp.style.height='24%';
             _cmp.style.left='0%';
             _cmp.style.top='0%';
             _cmp.style.position='absolute';
             _cmp.style.backgroundColor='black';
             _cmp.style.transition='width 1s, height 1s';
           }
           else if(ind==2){
             _cmp.style.width='49%';
             _cmp.style.height='24%';
             _cmp.style.left='50%';
             _cmp.style.top='0%';
             _cmp.style.position='absolute';
             _cmp.style.backgroundColor='black';
             _cmp.style.transition='width 1s, height 1s';
           }
           else if(ind==3){
             _cmp.style.width='49%';
             _cmp.style.height='24%';
             _cmp.style.left='0%';
             _cmp.style.top='75%';
             _cmp.style.position='absolute';
             _cmp.style.backgroundColor='black';
             _cmp.style.transition='width 1s, height 1s';
           }
           else if(ind==4){
             _cmp.style.width='49%';
             _cmp.style.height='24%';
             _cmp.style.left='50%';
             _cmp.style.top='75%';
             _cmp.style.position='absolute';
             _cmp.style.backgroundColor='black';
             _cmp.style.transition='width 1s, height 1s';
           }
           else if(ind==5){
             _cmp.style.width='24%';
             _cmp.style.height='24%';
             _cmp.style.left='0%';
             _cmp.style.top='25%';
             _cmp.style.position='absolute';
             _cmp.style.backgroundColor='black';
             _cmp.style.transition='width 1s, height 1s';
           }
           else if(ind==6){
             _cmp.style.width='24%';
             _cmp.style.height='24%';
             _cmp.style.left='0%';
             _cmp.style.top='50%';
             _cmp.style.position='absolute';
             _cmp.style.backgroundColor='black';
             _cmp.style.transition='width 1s, height 1s';
           }
           else if(ind==7){
             _cmp.style.width='24%';
             _cmp.style.height='24%';
             _cmp.style.left='75%';
             _cmp.style.top='25%';
             _cmp.style.position='absolute';
             _cmp.style.backgroundColor='black';
             _cmp.style.transition='width 1s, height 1s';
           }
           else if(ind==8){
             _cmp.style.width='24%';
             _cmp.style.height='24%';
             _cmp.style.left='75%';
             _cmp.style.top='50%';
             _cmp.style.position='absolute';
             _cmp.style.backgroundColor='black';
             _cmp.style.transition='width 1s, height 1s';
           }
         }
         /*if (N===9 || N==6){
           _cmp.className = "item69";
         }
         else if (N==4 || N==2 || N===3){
           _cmp.className = "item24";
         }
         else if (N==1){
            _cmp.className = "item21";
         }*/


     }
     var visible = Array.from(cmp).filter( (x,i,len) =>
       {
        if (typeof x.order==="undefined") x.style.order = 0;
         return x.style.display!="none"
       });
       if (typeof cmp[0].order!=="undefined")
          // sort by parameter.
          visible = visible.sort((a,b)=>{
              if (a.order[currentTime] < b.order[currentTime]) return -1;
              else if (a.order[currentTime] > b.order[currentTime]) return 1;
              else return 0;
          })
        visible.forEach((cmp,o,len)=>{
            if (typeof cmp.order!=="undefined") cmp.style.order = cmp.order[currentTime];
            setClasses(cmp,len.length,o);
        });
  }
  var unload = function (cmps){
    Array.from(cmps).forEach((c)=>{
      c.style ="";
      c.className ="";
   })
  }
  var plugin ={
     render:render,
     unload:unload
  }
  return plugin;
}
   


/***/ }),

/***/ "./src/orkestra/ui/plugins/pipgrid.js":
/*!********************************************!*\
  !*** ./src/orkestra/ui/plugins/pipgrid.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PipGrid": function() { return /* binding */ PipGrid; }
/* harmony export */ });
/* harmony import */ var _css_pipgrid_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css/pipgrid.css */ "./src/orkestra/ui/plugins/css/pipgrid.css");
/* harmony import */ var _css_pipgrid_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_pipgrid_css__WEBPACK_IMPORTED_MODULE_0__);
//import './css/custom.css';


function PipGrid() {
  const render = function (ev, cmp, app) {
    document.querySelector("orkestra-ui").className = "containerpipgrid";
    const currentTime = app.sequencer ? app.sequencer.currentTime : -1;

    const setClasses = function (_cmp, N, cn) {
      // Set component Background
      if (_cmp.shadowRoot) {
        const video = _cmp.shadowRoot.querySelector("video");
        if (video) {
          video.style.background = "black";
        }
      }

      if (N == 1) {
        _cmp.className = "fullmain";
      } else {
        if (cn == 0) {
          _cmp.className = "main";
          _cmp.style.height= '100%'
        } else {
          _cmp.className = "secondary";
          _cmp.style.height = "calc(100% / " + (N - 1) + ")";
          _cmp.style.top = ((cn - 1) * 100) / (N - 1) + "%";
        }
      }
    };
    var visible = Array.from(cmp).filter((x, i, len) => {
      return x.style.display != "none";
    });

    visible.forEach((cmp, o, len) => {
      if (typeof cmp.order === "undefined") cmp.style.order = 0;
      else cmp.style.order = cmp.order[currentTime];
      setClasses(cmp, len.length, o);
    });
  };
  var unload = function (cmps) {
    Array.from(cmps).forEach((c) => {
      c.style = "";
      c.className = "";
    });
  };
  var plugin = {
    render: render,
    unload: unload,
  };
  return plugin;
}


/***/ }),

/***/ "./src/orkestra/ui/plugins/tabs.js":
/*!*****************************************!*\
  !*** ./src/orkestra/ui/plugins/tabs.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Tabs": function() { return /* binding */ Tabs; }
/* harmony export */ });
/* harmony import */ var _css_tabs_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css/tabs.css */ "./src/orkestra/ui/plugins/css/tabs.css");
/* harmony import */ var _css_tabs_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_tabs_css__WEBPACK_IMPORTED_MODULE_0__);


function Tabs() {

    var render = function (ev, cmp) {
    
        var changeTab = function(evt){
            console.log(evt);
            visible.forEach((c)=>{
                c.className="tabcontentNone";
               
            })
            let ind = evt.currentTarget.id.split('_')[1];
            document.querySelector("#"+evt.currentTarget.data).className="tabcontentDisplay";
            let tablinks = document.getElementsByClassName("tablinks");
            for (let i = 0; i < tablinks.length; i++) {
              tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            evt.currentTarget.className +=" active";
           
        }
        var createTabs = function (cmps) {
            let div = document.createElement('div');
            visible.forEach((c)=>{
                c.className="tabcontentNone";

            })
            div.className = "tab";
            cmps.forEach((c,i)=>{
                let but = document.createElement('button');
                but.className="tablinks";
                but.innerHTML = c.nodeName;
                but.data = c.id;
                but.addEventListener("click",changeTab.bind(this));
                div.appendChild(but);
            })

             document.body.prepend(div);
           
        }
       
        var visible = Array.from(cmp).filter((x, i, len) => {

            return x.style.display != "none"
        });

        if (!document.querySelector(".tablinks")) createTabs(visible);


    }

    var unload = function (cmps){
        Array.from(cmps).forEach((c)=>{
          c.style ="";
          c.className ="";
    
       })
       if (document.querySelector(".tab")) document.body.removeChild(document.querySelector(".tab"));

      }
      var plugin = {
         render:render,
         unload:unload
      }
      return plugin;

}


/***/ }),

/***/ "./src/orkestra/user.js":
/*!******************************!*\
  !*** ./src/orkestra/user.js ***!
  \******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "User": function() { return /* binding */ User; }
/* harmony export */ });
class User {

  constructor(agentid,name="",profile,capacities){
     this.agentid = agentid;
     this.name = name;
     this.profile = profile;
     this.capacities = capacities;
  }


}


/***/ }),

/***/ "./src/orkestra/utils/URI.js":
/*!***********************************!*\
  !*** ./src/orkestra/utils/URI.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "URI": function() { return /* binding */ URI; }
/* harmony export */ });
var URI = {
  getUrlVar : function (name){
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
      vars[key] = value;
    });
    return vars[name];
  },
  createToken:function(){
    var rand = function() {
      return Math.random().toString(36).substr(2); // remove `0.`
    };

    var token = function() {
      return rand() + rand(); // to make it longer
    };
    return token();
  },
  shortURL:function(server,url){
    var p1= new Promise((resolve,reject)=>{
           fetch(server+'/api/shorten',{
              method: 'POST', // or 'PUT'
              body: JSON.stringify({url:url}),
              headers:{
                'Content-Type': 'application/json'
              }
             })
              .then((data)=>{
                  data.json().then((_data)=>{
                  console.log('Shorten:'+_data.shortUrl);
                  resolve(JSON.parse('{"response":"'+_data.shortUrl+'"}'));
                  })
            });

      });
    return p1;
  }


}




/***/ }),

/***/ "./src/orkestra/utils/hashes.js":
/*!**************************************!*\
  !*** ./src/orkestra/utils/hashes.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Hash": function() { return /* binding */ Hash; }
/* harmony export */ });
var Hash ={

   genRanHex:function(size)
    {
        return [...Array(size)].map(() => Math.floor(Math.random() * 16).toString(16)).join('');
    } 

}



/***/ }),

/***/ "./src/orkestra/utils/index.js":
/*!*************************************!*\
  !*** ./src/orkestra/utils/index.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "URI": function() { return /* reexport safe */ _URI_js__WEBPACK_IMPORTED_MODULE_0__.URI; },
/* harmony export */   "QRCode": function() { return /* reexport safe */ _qrcode_js__WEBPACK_IMPORTED_MODULE_1__.QRCode; },
/* harmony export */   "Hash": function() { return /* reexport safe */ _hashes_js__WEBPACK_IMPORTED_MODULE_2__.Hash; },
/* harmony export */   "Obj": function() { return /* reexport safe */ _object_js__WEBPACK_IMPORTED_MODULE_3__.Obj; },
/* harmony export */   "Logger": function() { return /* reexport safe */ _logger_js__WEBPACK_IMPORTED_MODULE_4__.Logger; }
/* harmony export */ });
/* harmony import */ var _URI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./URI.js */ "./src/orkestra/utils/URI.js");
/* harmony import */ var _qrcode_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./qrcode.js */ "./src/orkestra/utils/qrcode.js");
/* harmony import */ var _hashes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hashes.js */ "./src/orkestra/utils/hashes.js");
/* harmony import */ var _object_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./object.js */ "./src/orkestra/utils/object.js");
/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./logger.js */ "./src/orkestra/utils/logger.js");









/***/ }),

/***/ "./src/orkestra/utils/logger.js":
/*!**************************************!*\
  !*** ./src/orkestra/utils/logger.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Logger": function() { return /* binding */ Logger; }
/* harmony export */ });
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! loglevel */ "./node_modules/loglevel/lib/loglevel.js");
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__);



var Logger = {
    default:{
        template: '[%t] %l:',
        levelFormatter: function (level) {
          return level.toUpperCase();
        },
        nameFormatter: function (name) {
          return name || 'root';
        },
        timestampFormatter: function (date) {
          return date.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/, '$1');
        },
        format: undefined
      },
    getLogger : function (name){
        let _log = loglevel__WEBPACK_IMPORTED_MODULE_0___default().getLogger(name);
        _log.setLevel(loglevel__WEBPACK_IMPORTED_MODULE_0___default().getLevel());
        return _log;
    },
    setLogLevel:function(level,name){
        loglevel__WEBPACK_IMPORTED_MODULE_0___default().setLevel(level);
        loglevel__WEBPACK_IMPORTED_MODULE_0___default().getLogger(name).setLevel(level);
    }
  
  }
  
  
  

/***/ }),

/***/ "./src/orkestra/utils/object.js":
/*!**************************************!*\
  !*** ./src/orkestra/utils/object.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Obj": function() { return /* binding */ Obj; }
/* harmony export */ });
/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ "./node_modules/underscore/modules/index-all.js");

var Obj = {
    getObjectDiff : function (object,base){
        const changes = (object, base) => (
            underscore__WEBPACK_IMPORTED_MODULE_0__.pick(
              underscore__WEBPACK_IMPORTED_MODULE_0__.mapObject(object, (value, key) => (
                (!underscore__WEBPACK_IMPORTED_MODULE_0__.isEqual(value, base[key])) ?
                  ((underscore__WEBPACK_IMPORTED_MODULE_0__.isObject(value) && underscore__WEBPACK_IMPORTED_MODULE_0__.isObject(base[key])) ? changes(value, base[key]) : value) :
                  null
              )),
              (value) => (value !== null)
            )
          );
          return changes(object, base);
        
    },
    combine: function(obj1,obj2){
        return Object.assign(obj1, obj2);
    },
    dragElement:function (elmnt) {
      var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
      if (elmnt.shadowRoot.querySelector('#'+elmnt.id+"header")) {
        /* if present, the header is where you move the DIV from:*/
        elmnt.shadowRoot.querySelector('#'+elmnt.id+"header").onmousedown = dragMouseDown;
      } else {
        /* otherwise, move the DIV from anywhere inside the DIV:*/
        elmnt.onmousedown = dragMouseDown;
      }
    
      function dragMouseDown(e) {
        e = e || window.event;
        e.preventDefault();
        // get the mouse cursor position at startup:
        pos3 = e.clientX;
        pos4 = e.clientY;
        document.onmouseup = closeDragElement;
        // call a function whenever the cursor moves:
        document.onmousemove = elementDrag;
      }
    
      function elementDrag(e) {
        e = e || window.event;
        e.preventDefault();
        // calculate the new cursor position:
        pos1 = pos3 - e.clientX;
        pos2 = pos4 - e.clientY;
        pos3 = e.clientX;
        pos4 = e.clientY;
        // set the element's new position:
        elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
        elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
      }
    
      function closeDragElement() {
        /* stop moving when mouse button is released:*/
        document.onmouseup = null;
        document.onmousemove = null;
      }
    }

}


/***/ }),

/***/ "./src/orkestra/utils/qrcode.js":
/*!**************************************!*\
  !*** ./src/orkestra/utils/qrcode.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "QRCode": function() { return /* binding */ QRCode; }
/* harmony export */ });
/**
 * @fileoverview
 * - Using the 'QRCode for Javascript library'
 * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.
 * - this library has no dependencies.
 *
 * @author davidshimjs
 * @see <a href="http://www.d-project.com/" target="_blank">http://www.d-project.com/</a>
 * @see <a href="http://jeromeetienne.github.com/jquery-qrcode/" target="_blank">http://jeromeetienne.github.com/jquery-qrcode/</a>
 */
var QRCode;

(function () {
	//---------------------------------------------------------------------
	// QRCode for JavaScript
	//
	// Copyright (c) 2009 Kazuhiko Arase
	//
	// URL: http://www.d-project.com/
	//
	// Licensed under the MIT license:
	//   http://www.opensource.org/licenses/mit-license.php
	//
	// The word "QR Code" is registered trademark of
	// DENSO WAVE INCORPORATED
	//   http://www.denso-wave.com/qrcode/faqpatent-e.html
	//
	//---------------------------------------------------------------------
	function QR8bitByte(data) {
		this.mode = QRMode.MODE_8BIT_BYTE;
		this.data = data;
		this.parsedData = [];

		// Added to support UTF-8 Characters
		for (var i = 0, l = this.data.length; i < l; i++) {
			var byteArray = [];
			var code = this.data.charCodeAt(i);

			if (code > 0x10000) {
				byteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);
				byteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);
				byteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);
				byteArray[3] = 0x80 | (code & 0x3F);
			} else if (code > 0x800) {
				byteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);
				byteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);
				byteArray[2] = 0x80 | (code & 0x3F);
			} else if (code > 0x80) {
				byteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);
				byteArray[1] = 0x80 | (code & 0x3F);
			} else {
				byteArray[0] = code;
			}

			this.parsedData.push(byteArray);
		}

		this.parsedData = Array.prototype.concat.apply([], this.parsedData);

		if (this.parsedData.length != this.data.length) {
			this.parsedData.unshift(191);
			this.parsedData.unshift(187);
			this.parsedData.unshift(239);
		}
	}

	QR8bitByte.prototype = {
		getLength: function (buffer) {
			return this.parsedData.length;
		},
		write: function (buffer) {
			for (var i = 0, l = this.parsedData.length; i < l; i++) {
				buffer.put(this.parsedData[i], 8);
			}
		}
	};

	function QRCodeModel(typeNumber, errorCorrectLevel) {
		this.typeNumber = typeNumber;
		this.errorCorrectLevel = errorCorrectLevel;
		this.modules = null;
		this.moduleCount = 0;
		this.dataCache = null;
		this.dataList = [];
	}

	QRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null;},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+","+col);}
	return this.modules[row][col];},getModuleCount:function(){return this.moduleCount;},make:function(){this.makeImpl(false,this.getBestMaskPattern());},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null;}}
	this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test);}
	if(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList);}
	this.mapData(this.dataCache,maskPattern);},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if((0<=r&&r<=6&&(c==0||c==6))||(0<=c&&c<=6&&(r==0||r==6))||(2<=r&&r<=4&&2<=c&&c<=4)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i;}}
	return pattern;},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill();}}}
	return qr_mc;},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue;}
	this.modules[r][6]=(r%2==0);}
	for(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue;}
	this.modules[6][c]=(c%2==0);}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue;}
	for(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||(r==0&&c==0)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod;}
	for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod;}},setupTypeInfo:function(test,maskPattern){var data=(this.errorCorrectLevel<<3)|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<6){this.modules[i][8]=mod;}else if(i<8){this.modules[i+1][8]=mod;}else{this.modules[this.moduleCount-15+i][8]=mod;}}
	for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<8){this.modules[8][this.moduleCount-i-1]=mod;}else if(i<9){this.modules[8][15-i-1+1]=mod;}else{this.modules[8][15-i-1]=mod;}}
	this.modules[this.moduleCount-8][8]=(!test);},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(((data[byteIndex]>>>bitIndex)&1)==1);}
	var mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark;}
	this.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7;}}}
	row+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break;}}}}};QRCodeModel.PAD0=0xEC;QRCodeModel.PAD1=0x11;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer();for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer);}
	var totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount;}
	if(buffer.getLengthInBits()>totalDataCount*8){throw new Error("code length overflow. ("
	+buffer.getLengthInBits()
	+">"
	+totalDataCount*8
	+")");}
	if(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4);}
	while(buffer.getLengthInBits()%8!=0){buffer.putBit(false);}
	while(true){if(buffer.getLengthInBits()>=totalDataCount*8){break;}
	buffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break;}
	buffer.put(QRCodeModel.PAD1,8);}
	return QRCodeModel.createBytes(buffer,rsBlocks);};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=0xff&buffer.buffer[i+offset];}
	offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=(modIndex>=0)?modPoly.get(modIndex):0;}}
	var totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount;}
	var data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i];}}}
	for(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i];}}}
	return data;};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),G18:(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),G15_MASK:(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=(QRUtil.G15<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)));}
	return((data<<10)|d)^QRUtil.G15_MASK;},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=(QRUtil.G18<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)));}
	return(data<<12)|d;},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1;}
	return digit;},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1];},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return(i*j)%2+(i*j)%3==0;case QRMaskPattern.PATTERN110:return((i*j)%2+(i*j)%3)%2==0;case QRMaskPattern.PATTERN111:return((i*j)%3+(i+j)%2)%2==0;default:throw new Error("bad maskPattern:"+maskPattern);}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));}
	return a;},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+mode);}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+mode);}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+mode);}}else{throw new Error("type:"+type);}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue;}
	for(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue;}
	if(r==0&&c==0){continue;}
	if(dark==qrCode.isDark(row+r,col+c)){sameCount++;}}}
	if(sameCount>5){lostPoint+=(3+sameCount-5);}}}
	for(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4){lostPoint+=3;}}}
	for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40;}}}
	for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40;}}}
	var darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++;}}}
	var ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint;}};var QRMath={glog:function(n){if(n<1){throw new Error("glog("+n+")");}
	return QRMath.LOG_TABLE[n];},gexp:function(n){while(n<0){n+=255;}
	while(n>=256){n-=255;}
	return QRMath.EXP_TABLE[n];},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i;}
	for(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];}
	for(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;}
	function QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+"/"+shift);}
	var offset=0;while(offset<num.length&&num[offset]==0){offset++;}
	this.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset];}}
	QRPolynomial.prototype={get:function(index){return this.num[index];},getLength:function(){return this.num.length;},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));}}
	return new QRPolynomial(num,0);},mod:function(e){if(this.getLength()-e.getLength()<0){return this;}
	var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i);}
	for(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);}
	return new QRPolynomial(num,0).mod(e);}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount;}
	QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error("bad rs block @ typeNumber:"+typeNumber+"/errorCorrectLevel:"+errorCorrectLevel);}
	var length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount));}}
	return list;};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined;}};function QRBitBuffer(){this.buffer=[];this.length=0;}
	QRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return((this.buffer[bufIndex]>>>(7-index%8))&1)==1;},put:function(num,length){for(var i=0;i<length;i++){this.putBit(((num>>>(length-i-1))&1)==1);}},getLengthInBits:function(){return this.length;},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0);}
	if(bit){this.buffer[bufIndex]|=(0x80>>>(this.length%8));}
	this.length++;}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];

	function _isSupportCanvas() {
		return typeof CanvasRenderingContext2D != "undefined";
	}

	// android 2.x doesn't support Data-URI spec
	function _getAndroid() {
		var android = false;
		var sAgent = navigator.userAgent;

		if (/android/i.test(sAgent)) { // android
			android = true;
			var aMat = sAgent.toString().match(/android ([0-9]\.[0-9])/i);

			if (aMat && aMat[1]) {
				android = parseFloat(aMat[1]);
			}
		}

		return android;
	}

	var svgDrawer = (function() {

		var Drawing = function (el, htOption) {
			this._el = el;
			this._htOption = htOption;
		};

		Drawing.prototype.draw = function (oQRCode) {
			var _htOption = this._htOption;
			var _el = this._el;
			var nCount = oQRCode.getModuleCount();
			var nWidth = Math.floor(_htOption.width / nCount);
			var nHeight = Math.floor(_htOption.height / nCount);

			this.clear();

			function makeSVG(tag, attrs) {
				var el = document.createElementNS('http://www.w3.org/2000/svg', tag);
				for (var k in attrs)
					if (attrs.hasOwnProperty(k)) el.setAttribute(k, attrs[k]);
				return el;
			}

			var svg = makeSVG("svg" , {'viewBox': '0 0 ' + String(nCount) + " " + String(nCount), 'width': '100%', 'height': '100%', 'fill': _htOption.colorLight});
			svg.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
			_el.appendChild(svg);

			svg.appendChild(makeSVG("rect", {"fill": _htOption.colorLight, "width": "100%", "height": "100%"}));
			svg.appendChild(makeSVG("rect", {"fill": _htOption.colorDark, "width": "1", "height": "1", "id": "template"}));

			for (var row = 0; row < nCount; row++) {
				for (var col = 0; col < nCount; col++) {
					if (oQRCode.isDark(row, col)) {
						var child = makeSVG("use", {"x": String(col), "y": String(row)});
						child.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#template")
						svg.appendChild(child);
					}
				}
			}
		};
		Drawing.prototype.clear = function () {
			while (this._el.hasChildNodes())
				this._el.removeChild(this._el.lastChild);
		};
		return Drawing;
	})();

	var useSVG = document.documentElement.tagName.toLowerCase() === "svg";

	// Drawing in DOM by using Table tag
	var Drawing = useSVG ? svgDrawer : !_isSupportCanvas() ? (function () {
		var Drawing = function (el, htOption) {
			this._el = el;
			this._htOption = htOption;
		};

		/**
		 * Draw the QRCode
		 *
		 * @param {QRCode} oQRCode
		 */
		Drawing.prototype.draw = function (oQRCode) {
            var _htOption = this._htOption;
            var _el = this._el;
			var nCount = oQRCode.getModuleCount();
			var nWidth = Math.floor(_htOption.width / nCount);
			var nHeight = Math.floor(_htOption.height / nCount);
			var aHTML = ['<table style="border:0;border-collapse:collapse;">'];

			for (var row = 0; row < nCount; row++) {
				aHTML.push('<tr>');

				for (var col = 0; col < nCount; col++) {
					aHTML.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:' + nWidth + 'px;height:' + nHeight + 'px;background-color:' + (oQRCode.isDark(row, col) ? _htOption.colorDark : _htOption.colorLight) + ';"></td>');
				}

				aHTML.push('</tr>');
			}

			aHTML.push('</table>');
			_el.innerHTML = aHTML.join('');

			// Fix the margin values as real size.
			var elTable = _el.childNodes[0];
			var nLeftMarginTable = (_htOption.width - elTable.offsetWidth) / 2;
			var nTopMarginTable = (_htOption.height - elTable.offsetHeight) / 2;

			if (nLeftMarginTable > 0 && nTopMarginTable > 0) {
				elTable.style.margin = nTopMarginTable + "px " + nLeftMarginTable + "px";
			}
		};

		/**
		 * Clear the QRCode
		 */
		Drawing.prototype.clear = function () {
			this._el.innerHTML = '';
		};

		return Drawing;
	})() : (function () { // Drawing in Canvas
		function _onMakeImage() {
			this._elImage.src = this._elCanvas.toDataURL("image/png");
			this._elImage.style.display = "block";
			this._elCanvas.style.display = "none";
		}


		/**
		 * Check whether the user's browser supports Data URI or not
		 *
		 * @private
		 * @param {Function} fSuccess Occurs if it supports Data URI
		 * @param {Function} fFail Occurs if it doesn't support Data URI
		 */
		function _safeSetDataURI(fSuccess, fFail) {
            var self = this;
            self._fFail = fFail;
            self._fSuccess = fSuccess;

            // Check it just once
            if (self._bSupportDataURI === null) {
                var el = document.createElement("img");
                var fOnError = function() {
                    self._bSupportDataURI = false;

                    if (self._fFail) {
                        self._fFail.call(self);
                    }
                };
                var fOnSuccess = function() {
                    self._bSupportDataURI = true;

                    if (self._fSuccess) {
                        self._fSuccess.call(self);
                    }
                };

                el.onabort = fOnError;
                el.onerror = fOnError;
                el.onload = fOnSuccess;
                el.src = "data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="; // the Image contains 1px data.
                return;
            } else if (self._bSupportDataURI === true && self._fSuccess) {
                self._fSuccess.call(self);
            } else if (self._bSupportDataURI === false && self._fFail) {
                self._fFail.call(self);
            }
		};

		/**
		 * Drawing QRCode by using canvas
		 *
		 * @constructor
		 * @param {HTMLElement} el
		 * @param {Object} htOption QRCode Options
		 */
		var Drawing = function (el, htOption) {
    		this._bIsPainted = false;
    		this._android = _getAndroid();

			this._htOption = htOption;
			this._elCanvas = document.createElement("canvas");
			this._elCanvas.width = htOption.width;
			this._elCanvas.height = htOption.height;
			el.appendChild(this._elCanvas);
			this._el = el;
			this._oContext = this._elCanvas.getContext("2d");
			this._bIsPainted = false;
			this._elImage = document.createElement("img");
			this._elImage.alt = "Scan me!";
			this._elImage.style.display = "none";
			this._el.appendChild(this._elImage);
			this._bSupportDataURI = null;
		};

		/**
		 * Draw the QRCode
		 *
		 * @param {QRCode} oQRCode
		 */
		Drawing.prototype.draw = function (oQRCode) {
            var _elImage = this._elImage;
            var _oContext = this._oContext;
            var _htOption = this._htOption;

			var nCount = oQRCode.getModuleCount();
			var nWidth = _htOption.width / nCount;
			var nHeight = _htOption.height / nCount;
			var nRoundedWidth = Math.round(nWidth);
			var nRoundedHeight = Math.round(nHeight);

			_elImage.style.display = "none";
			this.clear();

			for (var row = 0; row < nCount; row++) {
				for (var col = 0; col < nCount; col++) {
					var bIsDark = oQRCode.isDark(row, col);
					var nLeft = col * nWidth;
					var nTop = row * nHeight;
					_oContext.strokeStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;
					_oContext.lineWidth = 1;
					_oContext.fillStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;
					_oContext.fillRect(nLeft, nTop, nWidth, nHeight);

					// 안티 앨리어싱 방지 처리
					_oContext.strokeRect(
						Math.floor(nLeft) + 0.5,
						Math.floor(nTop) + 0.5,
						nRoundedWidth,
						nRoundedHeight
					);

					_oContext.strokeRect(
						Math.ceil(nLeft) - 0.5,
						Math.ceil(nTop) - 0.5,
						nRoundedWidth,
						nRoundedHeight
					);
				}
			}

			this._bIsPainted = true;
		};

		/**
		 * Make the image from Canvas if the browser supports Data URI.
		 */
		Drawing.prototype.makeImage = function () {
			if (this._bIsPainted) {
				_safeSetDataURI.call(this, _onMakeImage);
			}
		};

		/**
		 * Return whether the QRCode is painted or not
		 *
		 * @return {Boolean}
		 */
		Drawing.prototype.isPainted = function () {
			return this._bIsPainted;
		};

		/**
		 * Clear the QRCode
		 */
		Drawing.prototype.clear = function () {
			this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);
			this._bIsPainted = false;
		};

		/**
		 * @private
		 * @param {Number} nNumber
		 */
		Drawing.prototype.round = function (nNumber) {
			if (!nNumber) {
				return nNumber;
			}

			return Math.floor(nNumber * 1000) / 1000;
		};

		return Drawing;
	})();

	/**
	 * Get the type by string length
	 *
	 * @private
	 * @param {String} sText
	 * @param {Number} nCorrectLevel
	 * @return {Number} type
	 */
	function _getTypeNumber(sText, nCorrectLevel) {
		var nType = 1;
		var length = _getUTF8Length(sText);

		for (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {
			var nLimit = 0;

			switch (nCorrectLevel) {
				case QRErrorCorrectLevel.L :
					nLimit = QRCodeLimitLength[i][0];
					break;
				case QRErrorCorrectLevel.M :
					nLimit = QRCodeLimitLength[i][1];
					break;
				case QRErrorCorrectLevel.Q :
					nLimit = QRCodeLimitLength[i][2];
					break;
				case QRErrorCorrectLevel.H :
					nLimit = QRCodeLimitLength[i][3];
					break;
			}

			if (length <= nLimit) {
				break;
			} else {
				nType++;
			}
		}

		if (nType > QRCodeLimitLength.length) {
			throw new Error("Too long data");
		}

		return nType;
	}

	function _getUTF8Length(sText) {
		var replacedText = encodeURI(sText).toString().replace(/\%[0-9a-fA-F]{2}/g, 'a');
		return replacedText.length + (replacedText.length != sText ? 3 : 0);
	}

	/**
	 * @class QRCode
	 * @constructor
	 * @example
	 * new QRCode(document.getElementById("test"), "http://jindo.dev.naver.com/collie");
	 *
	 * @example
	 * var oQRCode = new QRCode("test", {
	 *    text : "http://naver.com",
	 *    width : 128,
	 *    height : 128
	 * });
	 *
	 * oQRCode.clear(); // Clear the QRCode.
	 * oQRCode.makeCode("http://map.naver.com"); // Re-create the QRCode.
	 *
	 * @param {HTMLElement|String} el target element or 'id' attribute of element.
	 * @param {Object|String} vOption
	 * @param {String} vOption.text QRCode link data
	 * @param {Number} [vOption.width=256]
	 * @param {Number} [vOption.height=256]
	 * @param {String} [vOption.colorDark="#000000"]
	 * @param {String} [vOption.colorLight="#ffffff"]
	 * @param {QRCode.CorrectLevel} [vOption.correctLevel=QRCode.CorrectLevel.H] [L|M|Q|H]
	 */
	QRCode = function (el, vOption) {
		this._htOption = {
			width : 256,
			height : 256,
			typeNumber : 4,
			colorDark : "#000000",
			colorLight : "#ffffff",
			correctLevel : QRErrorCorrectLevel.H
		};

		if (typeof vOption === 'string') {
			vOption	= {
				text : vOption
			};
		}

		// Overwrites options
		if (vOption) {
			for (var i in vOption) {
				this._htOption[i] = vOption[i];
			}
		}

		if (typeof el == "string") {
			el = document.querySelector(el);
		}

		if (this._htOption.useSVG) {
			Drawing = svgDrawer;
		}

		this._android = _getAndroid();
		this._el = el;
		this._oQRCode = null;
		this._oDrawing = new Drawing(this._el, this._htOption);

		if (this._htOption.text) {
			this.makeCode(this._htOption.text);
		}
	};

	/**
	 * Make the QRCode
	 *
	 * @param {String} sText link data
	 */
	QRCode.prototype.makeCode = function (sText) {
		this._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);
		this._oQRCode.addData(sText);
		this._oQRCode.make();
		this._el.title = sText;
		this._oDrawing.draw(this._oQRCode);
		this.makeImage();
	};

	/**
	 * Make the Image from Canvas element
	 * - It occurs automatically
	 * - Android below 3 doesn't support Data-URI spec.
	 *
	 * @private
	 */
	QRCode.prototype.makeImage = function () {
		if (typeof this._oDrawing.makeImage == "function" && (!this._android || this._android >= 3)) {
			this._oDrawing.makeImage();
		}
	};

	/**
	 * Clear the QRCode
	 */
	QRCode.prototype.clear = function () {
		this._oDrawing.clear();
	};

	/**
	 * @name QRCode.CorrectLevel
	 */
	QRCode.CorrectLevel = QRErrorCorrectLevel;
})();



/***/ }),

/***/ "./src/wcs/app.js":
/*!************************!*\
  !*** ./src/wcs/app.js ***!
  \************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WCAppTable": function() { return /* binding */ WCAppTable; }
/* harmony export */ });
/* harmony import */ var _css_apptable_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css/apptable.css */ "./src/wcs/css/apptable.css");
/* harmony import */ var _css_apptable_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_apptable_css__WEBPACK_IMPORTED_MODULE_0__);

class WCAppTable extends HTMLElement {
  static get observedAttributes () {
    return ['datos'];
  }

  attributeChangedCallback (name, oldValue, newValue) {
    if (!this.__initialized) { return; }
    if (oldValue !== newValue) {
      if (name === 'no-headers') {
        this.noHeaders = newValue;
      } else {
        this[name] = newValue;
      }
    }
  }

  get datos () { return this.getAttribute('datos'); }
  set datos (value) {
    this.setAttribute('datos', value);
    this.render();
  }

  get value () { return this.__data; }
  set value (value) {
    this.setValue(value);
  }

  

  constructor () {
    super();

  }

  async connectedCallback () {
   

    this.__initialized = true;
  }




  setValue (value) {
    this.__data = parse(value);
    this.render();
  }



  render () {
    if (this.datos === "undefined") return;
    if (!this.__table)  this.__table = document.createElement('table');
    const div = document.createElement('h2');
    div.innerHTML = "APP DATA";
    div.id ="app_div"
    this.__headers = ["Key","Value"];
    this.__table.innerHTML="";
    if (this.__headers) {
      const thead = document.createElement('thead');
      const tr = document.createElement('tr');
      this.__headers.forEach(header => {
        const th = document.createElement('th');
        th.innerText = header;
        tr.appendChild(th);
      });
      thead.append(tr);
      this.__table.appendChild(thead);
    }

    const tbody = document.createElement('tbody');
    var d = JSON.parse(this.datos);
    Object.keys(d).forEach(row => {
      const tr = document.createElement('tr');

        const td = document.createElement('td');
        td.innerText = row;
        tr.appendChild(td);
        const td1 = document.createElement('td');
        td1.innerHTML = "<div>"+JSON.stringify(d[row])+"</div>";
        tr.appendChild(td1);

      tbody.appendChild(tr);
    });
    this.__table.id = "table";
    this.__table.appendChild(tbody);




    if (!this.querySelector("#app_div")) this.appendChild(div);
    if (!this.querySelector("#table")) this.appendChild(this.__table);

  }
}

customElements.define('app-table', WCAppTable);


/***/ }),

/***/ "./src/wcs/css/webrtc.js":
/*!*******************************!*\
  !*** ./src/wcs/css/webrtc.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "buttonClass": function() { return /* binding */ buttonClass; }
/* harmony export */ });
let buttonClass =`.btn{
display: inline-block;
    font-weight: 400;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    border: 1px solid transparent;
    padding: .5rem .75rem;
    font-size: 1rem;
    line-height: 1.25;
    border-radius: .25rem;
    transition: all .15s ease-in-out;
    cursor:pointer;
}

.btn-primary {
    color: #fff;
    background-color: #007bff;
    border-color: #007bff;
}`



/***/ }),

/***/ "./src/wcs/icons/config.js":
/*!*********************************!*\
  !*** ./src/wcs/icons/config.js ***!
  \*********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "svg": function() { return /* binding */ svg; }
/* harmony export */ });
let svg ='<svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%"><use class="ytp-svg-shadow" xlink:href="#ytp-id-18"></use><path d="m 23.94,18.78 c .03,-0.25 .05,-0.51 .05,-0.78 0,-0.27 -0.02,-0.52 -0.05,-0.78 l 1.68,-1.32 c .15,-0.12 .19,-0.33 .09,-0.51 l -1.6,-2.76 c -0.09,-0.17 -0.31,-0.24 -0.48,-0.17 l -1.99,.8 c -0.41,-0.32 -0.86,-0.58 -1.35,-0.78 l -0.30,-2.12 c -0.02,-0.19 -0.19,-0.33 -0.39,-0.33 l -3.2,0 c -0.2,0 -0.36,.14 -0.39,.33 l -0.30,2.12 c -0.48,.2 -0.93,.47 -1.35,.78 l -1.99,-0.8 c -0.18,-0.07 -0.39,0 -0.48,.17 l -1.6,2.76 c -0.10,.17 -0.05,.39 .09,.51 l 1.68,1.32 c -0.03,.25 -0.05,.52 -0.05,.78 0,.26 .02,.52 .05,.78 l -1.68,1.32 c -0.15,.12 -0.19,.33 -0.09,.51 l 1.6,2.76 c .09,.17 .31,.24 .48,.17 l 1.99,-0.8 c .41,.32 .86,.58 1.35,.78 l .30,2.12 c .02,.19 .19,.33 .39,.33 l 3.2,0 c .2,0 .36,-0.14 .39,-0.33 l .30,-2.12 c .48,-0.2 .93,-0.47 1.35,-0.78 l 1.99,.8 c .18,.07 .39,0 .48,-0.17 l 1.6,-2.76 c .09,-0.17 .05,-0.39 -0.09,-0.51 l -1.68,-1.32 0,0 z m -5.94,2.01 c -1.54,0 -2.8,-1.25 -2.8,-2.8 0,-1.54 1.25,-2.8 2.8,-2.8 1.54,0 2.8,1.25 2.8,2.8 0,1.54 -1.25,2.8 -2.8,2.8 l 0,0 z" fill="orange" id="ytp-id-18"></path></svg>';


/***/ }),

/***/ "./src/wcs/libs/dash-video-element.js":
/*!********************************************!*\
  !*** ./src/wcs/libs/dash-video-element.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

var require;/*! v3.2.2-27f4eb3d, 2021-04-13T07:06:26Z */
!function r(i,a,o){function s(t,e){if(!a[t]){if(!i[t]){var n=undefined;if(!e&&n)return require(t,!0);if(u)return u(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",__webpack_require__("./src/wcs/libs sync recursive")}n=a[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,a,o)}return a[t].exports}for(var u=undefined,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,n){"use strict";var o,u,r,i={encode:function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r))}return t},decode:function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?r=(31&r)<<6:(r<240?r=(15&r)<<12:(r=(7&r)<<18,r|=(63&e[n++])<<12),r|=(63&e[n++])<<6),r|=63&e[n++]),t.push(String.fromCharCode(r))}return t.join("")}},l={};function d(e){for(var t=0,n=[],r=0|e.length/3;0<r--;){var i=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push(o.charAt(63&i>>6)),n.push(o.charAt(63&i))}return 2==e.length-t?(i=(e[t]<<16)+(e[t+1]<<8),n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push(o.charAt(63&i>>6)),n.push("=")):1==e.length-t&&(i=e[t]<<16,n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push("==")),n.join("")}function f(e){for(var t=0,n=[],r=0|e.length/4;0<r--;){var i=(u[e.charCodeAt(t)]<<18)+(u[e.charCodeAt(t+1)]<<12)+(u[e.charCodeAt(t+2)]<<6)+u[e.charCodeAt(t+3)];n.push(255&i>>16),n.push(255&i>>8),n.push(255&i),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n}o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(){for(var e=[],t=0;t<o.length;++t)e[o.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),r={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},l.decodeArray=function(e){e=f(e);return new Uint8Array(e)},l.encodeASCII=function(e){e=r.encode(e);return d(e)},l.decodeASCII=function(e){e=f(e);return r.decode(e)},l.encode=function(e){e=i.encode(e);return d(e)},l.decode=function(e){e=f(e);return i.decode(e)},void 0!==n&&(n.decode=l.decode,n.decodeArray=l.decodeArray,n.encode=l.encode,n.encodeASCII=l.encodeASCII)},{}],2:[function(e,t,n){"use strict";!function(e){function o(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)}function s(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}function u(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},a={17:2,18:4,21:6,22:8,23:10,19:13,20:15},l={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},d={25:2,26:4,29:6,30:8,31:10,27:13,28:15},f=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],c={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}};u.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};function t(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new u(t,n,r,i,a)}t.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};function r(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new t);this.pos=0,this.currPenState=new u}r.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(c.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(c.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){144<=e&&this.backSpace();var t=o(e);32<=this.pos?c.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){for(var t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};function h(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new r);this.currRow=14,this.nrRollUpRows=null,this.reset()}h.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){c.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){c.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];null!==e.indent&&(t=e.indent,t=Math.max(t-1,0),n.setCursor(e.indent),e.color=n.chars[t].penState.foreground);e={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(e)},setBkgData:function(e){c.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){var e;null!==this.nrRollUpRows?(c.log("TEXT",this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),c.log("INFO","Rolling up")):c.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t,n=[],r="",i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(t=i+1,e?n.push("Row "+t+': "'+a+'"'):n.push(a.trim()))}return 0<n.length&&(r=e?"["+n.join(" | ")+"]":n.join("\n")),r},getTextAndFormat:function(){return this.rows}};function p(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new h,this.nonDisplayedMemory=new h,this.lastOutputScreen=new h,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,c.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";c.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(c.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){c.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){c.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){c.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){c.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){c.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){c.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){c.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){c.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){c.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){c.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){c.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){var e;c.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,c.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate()},cc_TO:function(e){c.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),c.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=c.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};function g(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new p(1,t),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}g.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r=!1;this.lastTime=e,c.setTime(e);for(var i=0;i<t.length;i+=2){var a=127&t[i],o=127&t[i+1];16<=a&&a<=31&&a===this.lastCmdA&&o===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,c.log("DEBUG","Repeated command ("+s([a,o])+") is dropped")):0!=a||0!=o?(c.log("DATA","["+s([t[i],t[i+1]])+"] -> ("+s([a,o])+")"),(n=(n=(n=(n=this.parseCmd(a,o))||this.parseMidrow(a,o))||this.parsePAC(a,o))||this.parseBackgroundAttributes(a,o))||(r=this.parseChars(a,o))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(r):c.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:r?this.dataCounters.char+=2:(this.dataCounters.other+=2,c.log("WARNING","Couldn't parse cleaned data "+s([a,o])+" orig: "+s([t[i],t[i+1]])))):this.dataCounters.padding+=2}},parseCmd:function(e,t){var n=null;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;n=20===e||21===e||23===e?1:2;var r=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?r.cc_RCL():33===t?r.cc_BS():34===t?r.cc_AOF():35===t?r.cc_AON():36===t?r.cc_DER():37===t?r.cc_RU(2):38===t?r.cc_RU(3):39===t?r.cc_RU(4):40===t?r.cc_FON():41===t?r.cc_RDC():42===t?r.cc_TR():43===t?r.cc_RTD():44===t?r.cc_EDM():45===t?r.cc_CR():46===t?r.cc_ENM():47===t&&r.cc_EOC():r.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return c.log("ERROR","Mismatch channel in midrow parsing"),!1;n=this.channels[n-1];return n.insertChars([32]),n.cc_MIDROW(t),c.log("DEBUG","MIDROW ("+s([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var n,r=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;n=e<=23?1:2,r=(64<=t&&t<=95?1==n?i:l:1==n?a:d)[e];r=this.interpretPAC(r,t);return this.channels[n-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,e={color:null,italics:!1,indent:null,underline:!1,row:e},n=95<t?t-96:t-64;return e.underline=1==(1&n),n<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((n-16)/2),e},parseChars:function(e,t){var n,r=null,i=null,a=null;return 17<=(a=25<=e?(r=2,e-8):(r=1,e))&&a<=19?(n=t,n=17===a?t+80:18===a?t+112:t+144,c.log("INFO","Special char '"+o(n)+"' in channel "+r),i=[n],this.lastCmdA=e,this.lastCmdB=t):32<=e&&e<=127&&(i=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null),i&&(t=s(i),c.log("DEBUG","Char codes =  "+t.join(","))),i},parseBackgroundAttributes:function(e,t){var n,r;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=f[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),r=e<24?1:2,this.channels[r-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};e.logger=c,e.PenState=u,e.CaptionScreen=h,e.Cea608Parser=g,e.findCea608Nalus=function(e,t,n){for(var r,i=t,a=[];i<t+n;){if(r=e.getUint32(i),6==(31&e.getUint8(i+4)))for(var o=i+5,s=-1;o<i+4+r-1;){s=0;for(var u=255;255===u;)s+=u=e.getUint8(o),o++;for(var l=0,u=255;255===u;)l+=u=e.getUint8(o),o++;!function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),e=n.getUint16(r+1),t=n.getUint32(r+3),r=n.getUint8(r+7);return 181==i&&49==e&&1195456820==t&&3==r}(s,l,e,o)||a.push([o,l]),o+=l}i+=r+4}return a},e.extractCea608DataFromRange=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var a=0;a<i;a++){var o=e.getUint8(n),s=4&o,u=3&o;n++;var l=e.getUint8(n);n++;o=e.getUint8(n);n++,s&&(127&l)+(127&o)!=0&&(0==u?(r[0].push(l),r[0].push(o)):1==u&&(r[1].push(l),r[1].push(o)))}return r}}(void 0===n?(void 0).cea608parser={}:n)},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(A){A=A||{},function(){void 0===A.escapeMode&&(A.escapeMode=!0);void 0===A.attributePrefix&&(A.attributePrefix="_");A.arrayAccessForm=A.arrayAccessForm||"none",A.emptyNodeForm=A.emptyNodeForm||"text",void 0===A.enableToStringFunc&&(A.enableToStringFunc=!0);A.arrayAccessFormPaths=A.arrayAccessFormPaths||[],void 0===A.skipEmptyTextNodesForObj&&(A.skipEmptyTextNodesForObj=!0);void 0===A.stripWhitespaces&&(A.stripWhitespaces=!0);A.datetimeAccessFormPaths=A.datetimeAccessFormPaths||[],void 0===A.useDoubleQuotes&&(A.useDoubleQuotes=!1);A.xmlElementsFilter=A.xmlElementsFilter||[],A.jsonPropertiesFilter=A.jsonPropertiesFilter||[],void 0===A.keepCData&&(A.keepCData=!1);void 0===A.ignoreRoot&&(A.ignoreRoot=!1)}();var I={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function R(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function u(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function b(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(t,n,r))break}return i!=e.length}function M(e,t,n){"property"===A.arrayAccessForm&&(e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]]),!(e[t]instanceof Array)&&0<A.arrayAccessFormPaths.length&&b(A.arrayAccessFormPaths,e,t,n)&&(e[t]=[e[t]])}function D(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");return n.setHours(t[3],t[4],r[0]),1<r.length&&n.setMilliseconds(r[1]),t[6]&&t[7]?(t=60*t[6]+Number(t[7]),t=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*t:t),n.setMinutes(n.getMinutes()-t-n.getTimezoneOffset())):-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))),n}function N(e,t){if(e.nodeType==I.DOCUMENT_NODE){for(var n=new Object,r=e.childNodes,i=0;i<r.length;i++){(o=r[i]).nodeType==I.ELEMENT_NODE&&(A.ignoreRoot?n=N(o):(n={})[d=R(o)]=N(o))}return n}if(e.nodeType==I.ELEMENT_NODE){(n=new Object).__cnt=0;for(var a=[],r=e.childNodes,i=0;i<r.length;i++){var o,s,u,l,d=R(o=r[i]);o.nodeType!=I.COMMENT_NODE&&(s=t+"."+d,y=n,v=o.nodeType,T=d,S=s,v==I.ELEMENT_NODE&&0<A.xmlElementsFilter.length&&!b(A.xmlElementsFilter,y,T,S)||(n.__cnt++,null==n[d]?(u=N(o,s),"#text"==d&&!/[^\s]/.test(u)||((l={})[d]=u,a.push(l)),n[d]=u,M(n,d,s)):(null!=n[d]&&(n[d]instanceof Array||(n[d]=[n[d]],M(n,d,s))),u=N(o,s),"#text"==d&&!/[^\s]/.test(u)||((l={})[d]=u,a.push(l)),n[d][n[d].length]=u)))}n.__children=a;for(var f=R(e),c=0;c<e.attributes.length;c++){var h=e.attributes[c];n.__cnt++;for(var p=h.value,g=0,_=A.matchers.length;g<_;g++){var m=A.matchers[g];m.test(h,f)&&(p=m.converter(h.value))}n[A.attributePrefix+h.name]=p}var E=e.prefix;return null!=E&&""!=E&&(n.__cnt++,n.__prefix=E),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),A.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==A.arrayAccessForm&&delete n["#text_asArray"],n.__text=function(e,t,n){if(0<A.datetimeAccessFormPaths.length){n=n.split(".#")[0];return b(A.datetimeAccessFormPaths,e,t,n)?D(e):e}return e}(n.__text,d,t+"."+d)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==A.arrayAccessForm&&delete n["#cdata-section_asArray"]),0==n.__cnt&&"text"==A.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||A.keepCData?1<n.__cnt&&null!=n.__text&&A.skipEmptyTextNodesForObj&&(A.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!A.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}if(e.nodeType==I.TEXT_NODE||e.nodeType==I.CDATA_SECTION_NODE)return e.nodeValue;var y,v,T,S}function s(e,t,n,r){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var a=0;a<n.length;a++){var o=n[a],s=e[o];A.escapeMode&&(s=u(s)),i+=" "+o.substr(A.attributePrefix.length)+"=",A.useDoubleQuotes?i+='"'+s+'"':i+="'"+s+"'"}return i+=r?"/>":">"}function l(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function d(e,t){return"property"==A.arrayAccessForm&&(n=t.toString(),r="_asArray",-1!==n.indexOf(r,n.length-r.length))||0==t.toString().indexOf(A.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function;var n,r}function f(e){var t=0;if(e instanceof Object)for(var n in e)d(e,n)||t++;return t}function c(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(A.attributePrefix)&&t.push(n);return t}function h(e){var t,n,r="";return e instanceof Object?r+=(n="",null!=(t=e).__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(A.escapeMode?n+=u(t.__text):n+=t.__text),n):null!=e&&(A.escapeMode?r+=u(e):r+=e),r}function p(e,t){return""===e?t:e+"."+t}function g(e,t){var n,r,i,a="";if(0<f(e))for(var o in e){d(e,o)||""!=t&&(n=e,i=p(t,r=o),0!=A.jsonPropertiesFilter.length&&""!=i&&!b(A.jsonPropertiesFilter,n,r,i))||(i=c(r=e[o]),null==r||null==r?a+=s(r,o,i,!0):r instanceof Object?r instanceof Array?a+=function(e,t,n,r){var i="";if(0==e.length)i+=s(e,t,n,!0);else for(var a=0;a<e.length;a++)i+=s(e[a],t,c(e[a]),!1),i+=g(e[a],p(r,t)),i+=l(e[a],t);return i}(r,o,i,t):r instanceof Date?(a+=s(r,o,i,!1),a+=r.toISOString(),a+=l(r,o)):0<f(r)||null!=r.__text||null!=r.__cdata?(a+=s(r,o,i,!1),a+=g(r,p(t,o)),a+=l(r,o)):a+=s(r,o,i,!0):(a+=s(r,o,i,!1),a+=h(r),a+=l(r,o)))}return a+=h(e)}this.parseXmlString=function(e){var t;window.ActiveXObject||0 in window;if(void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{0<(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?D(e):e},this.xml2json=function(e){return N(e)},this.xml_str2json=function(e){e=this.parseXmlString(e);return null!=e?this.xml2json(e):null},this.json2xml_str=function(e){return g(e,"")},this.json2xml=function(e){e=this.json2xml_str(e);return this.parseXmlString(e)},this.getVersion=function(){return"1.2.0"}},t.exports=n.default},{}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(5),a=e(220),o=r(e(129)),s=r(e(166)),u=r(e(105)),e=r(e(45));dashjs.Protection=s.default,dashjs.MetricsReporting=o.default,dashjs.MediaPlayerFactory=u.default,dashjs.Debug=e.default,dashjs.supportsMediaSource=a.supportsMediaSource,n.default=dashjs,n.MediaPlayer=i.MediaPlayer,n.Protection=s.default,n.MetricsReporting=o.default,n.MediaPlayerFactory=u.default,n.Debug=e.default,n.supportsMediaSource=a.supportsMediaSource},{105:105,129:129,166:166,220:220,45:45,5:5}],5:[function(s,e,u){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(u,"__esModule",{value:!0});var n=t(s(103)),r=t(s(47)),i=t(s(45)),a=s(50),o="undefined"!=typeof window&&window||e,e=o.dashjs;(e=e||(o.dashjs={})).MediaPlayer=n.default,e.FactoryMaker=r.default,e.Debug=i.default,e.Version=(0,a.getVersionString)(),u.default=e,u.MediaPlayer=n.default,u.FactoryMaker=r.default,u.Debug=i.default}).call(this,"undefined"!=typeof __webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{103:103,45:45,47:47,50:50}],6:[function(e,t,n){"use strict";n.byteLength=function(e){var t=d(e),e=t[0],t=t[1];return 3*(e+t)/4-t},n.toByteArray=function(e){for(var t,n=d(e),r=n[0],n=n[1],i=new l(function(e,t){return 3*(e+t)/4-t}(r,n)),a=0,o=0<n?r-4:r,s=0;s<o;s+=4)t=u[e.charCodeAt(s)]<<18|u[e.charCodeAt(s+1)]<<12|u[e.charCodeAt(s+2)]<<6|u[e.charCodeAt(s+3)],i[a++]=t>>16&255,i[a++]=t>>8&255,i[a++]=255&t;2===n&&(t=u[e.charCodeAt(s)]<<2|u[e.charCodeAt(s+1)]>>4,i[a++]=255&t);1===n&&(t=u[e.charCodeAt(s)]<<10|u[e.charCodeAt(s+1)]<<4|u[e.charCodeAt(s+2)]>>2,i[a++]=t>>8&255,i[a++]=255&t);return i},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],a=0,o=n-r;a<o;a+=16383)i.push(function(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(function(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}(r));return i.join("")}(e,a,o<a+16383?o:a+16383));1==r?(t=e[n-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return i.join("")};for(var s=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=r.length;i<a;++i)s[i]=r[i],u[r.charCodeAt(i)]=i;function d(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],7:[function(e,t,n){},{}],8:[function(e,t,n){"use strict";var s=e(6),a=e(13);n.Buffer=f,n.SlowBuffer=function(e){+e!=e&&(e=0);return f.alloc(+e)},n.INSPECT_MAX_BYTES=50;var r=2147483647;function i(e){if(r<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=f.prototype,e}function f(e,t,n){if("number"!=typeof e)return o(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function o(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!f.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),r=i(n),t=r.write(e,t);t!==n&&(r=r.slice(0,t));return r}(e,t);if(ArrayBuffer.isView(e))return d(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(O(e,ArrayBuffer)||e&&O(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');n=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return n.__proto__=f.prototype,n}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return f.from(r,t,n);r=function(e){if(f.isBuffer(e)){var t=0|c(e.length),n=i(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(void 0!==e.length)return"number"!=typeof e.length||w(e.length)?i(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return u(e),i(e<0?0:0|c(e))}function d(e){for(var t=e.length<0?0:0|c(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function c(e){if(r<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function h(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||O(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(e).length;default:if(i)return r?-1:D(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){var r,i,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var i="",a=t;a<n;++a)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[a]);return i}(this,t,n);case"utf8":case"utf-8":return v(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return r=this,a=n,0===(i=t)&&a===r.length?s.fromByteArray(r):s.fromByteArray(r.slice(i,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),w(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=f.from(t,r)),f.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var a=1,o=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o/=a=2,s/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i)for(var l=-1,d=n;d<o;d++)if(u(e,d)===u(t,-1===l?0:d-l)){if(-1===l&&(l=d),d-l+1===s)return l*a}else-1!==l&&(d-=d-l),l=-1;else for(o<n+s&&(n=o-s),d=n;0<=d;d--){for(var f=!0,c=0;c<s;c++)if(u(e,d+c)!==u(t,c)){f=!1;break}if(f)return d}return-1}function E(e,t,n,r){return C(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function y(e,t,n,r){return C(function(e,t){for(var n,r,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,r=r%256,i.push(r),i.push(n);return i}(t,e.length-n),e,n,r)}function v(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,l=e[i],d=null,f=239<l?4:223<l?3:191<l?2:1;if(i+f<=n)switch(f){case 1:l<128&&(d=l);break;case 2:128==(192&(a=e[i+1]))&&127<(u=(31&l)<<6|63&a)&&(d=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&2047<(u=(15&l)<<12|(63&a)<<6|63&o)&&(u<55296||57343<u)&&(d=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)&&u<1114112&&(d=u)}null===d?(d=65533,f=1):65535<d&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=f}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}n.kMaxLength=r,(f.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=o,f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(e,t,n){return t=t,n=n,u(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)},f.allocUnsafe=l,f.allocUnsafeSlow=l,f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(O(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),O(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=f.allocUnsafe(t),r=0,i=0;i<e.length;++i){var a=e[i];if(O(a,Uint8Array)&&(a=f.from(a)),!f.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length}return n},f.byteLength=h,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?v(this,0,e):p.apply(this,arguments)},f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},f.prototype.compare=function(e,t,n,r,i){if(O(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(r,i),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){a=u[d],o=l[d];break}return a<o?-1:o<a?1:0},f.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},f.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},f.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},f.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var a,o,s,u=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;(!r||i<(r=Number(r)))&&(r=i),(i=t.length)/2<r&&(r=i/2);for(var a=0;a<r;++a){var o=parseInt(t.substr(2*a,2),16);if(w(o))return a;e[n+a]=o}return a}(this,e,t,n);case"utf8":case"utf-8":return o=t,s=n,C(D(e,(a=this).length-o),a,o,s);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return a=this,o=t,s=n,C(N(e),a,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function S(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,n,r,i,a){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,i){return t=+t,n>>>=0,i||I(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function b(e,t,n,r,i){return t=+t,n>>>=0,i||I(e,0,n,8),a.write(e,t,n,r,52,8),n+8}f.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);t=this.subarray(e,t);return t.__proto__=f.prototype,t},f.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},f.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},f.prototype.readUInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),this[e]},f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},f.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=t,i=1,a=this[e+--r];0<r&&(i*=256);)a+=this[e+--r]*i;return(i*=128)<=a&&(a-=Math.pow(2,8*t)),a},f.prototype.readInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||S(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(e,t){e>>>=0,t||S(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return e>>>=0,t||S(e,4,this.length),a.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||S(e,4,this.length),a.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||S(e,8,this.length),a.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||S(e,8,this.length),a.read(this,e,!1,52,8)},f.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||A(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},f.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||A(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;0<=--i&&(a*=256);)this[t+i]=e/a&255;return t+n},f.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||A(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,a=1,o=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},f.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||A(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,a=1,o=0;for(this[t+i]=255&e;0<=--i&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},f.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},f.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},f.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},f.prototype.writeDoubleLE=function(e,t,n){return b(this,e,t,!0,n)},f.prototype.writeDoubleBE=function(e,t,n){return b(this,e,t,!1,n)},f.prototype.copy=function(e,t,n,r){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var a=i-1;0<=a;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},f.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!f.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===e.length&&(i=e.charCodeAt(0),("utf8"===r&&i<128||"latin1"===r)&&(e=i))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else{var o=f.isBuffer(e)?e:f.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var M=/[^+/0-9A-Za-z-_]/g;function D(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&a.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&a.push(239,191,189);if(i=null,n<128){if(--t<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function N(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function C(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function O(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function w(e){return e!=e}},{13:13,6:6}],9:[function(e,t,n){var i={parseBuffer:function(e){return new a(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(r.prototype._boxProcessors[e]=t)},createFile:function(){return new a},createBox:function(e,t,n){e=r.create(e);return t&&t.append(e,n),e},createFullBox:function(e,t,n){n=i.createBox(e,t,n);return n.version=0,n.flags=0,n},Utils:{}};i.Utils.dataViewToString=function(e,t){t=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(t).decode(e);var n=[],r=0;if("utf-8"===t)for(;r<e.byteLength;){var i=e.getUint8(r++);i<128||(i<224?i=(31&i)<<6:(i<240?i=(15&i)<<12:(i=(7&i)<<18,i|=(63&e.getUint8(r++))<<12),i|=(63&e.getUint8(r++))<<6),i|=63&e.getUint8(r++)),n.push(String.fromCharCode(i))}else for(;r<e.byteLength;)n.push(String.fromCharCode(e.getUint8(r++)));return n.join("")},i.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r))}return t},i.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var a=0;a<e.boxes.length;a++)if(r===e.boxes[a].type){i=a+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)},void 0!==n&&(n.parseBuffer=i.parseBuffer,n.addBoxProcessor=i.addBoxProcessor,n.createFile=i.createFile,n.createBox=i.createBox,n.createFullBox=i.createFullBox,n.Utils=i.Utils),i.Cursor=function(e){this.offset=void 0===e?0:e};var a=function(e){this._cursor=new i.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};a.prototype.fetch=function(e){e=this.fetchAll(e,!0);return e.length?e[0]:null},a.prototype.fetchAll=function(e,t){var n=[];return a._sweep.call(this,e,n,t),n},a.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=r.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},a._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;a._sweep.call(this.boxes[r],e,t,n)}},a.prototype.write=function(){for(var e=0,t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var n=new Uint8Array(e);for(this._rawo=new DataView(n.buffer),this.bytes=n,t=this._cursor.offset=0;t<this.boxes.length;t++)this.boxes[t].write();return n.buffer},a.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)};var r=function(){this._cursor=new i.Cursor};r.parse=function(e){var t=new r;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},r.create=function(e){var t=new r;return t.type=e,t.boxes=[],t},r.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],r.prototype._boxProcessors={},r.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},r.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},r.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},r.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},r.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},r.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},r.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(r.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},r.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},r.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),n=this._raw.getInt32(4+n),t=r*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,t},r.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((t=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(2+i));break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(4+i),r=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,r},r.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},r.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},r.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},r.prototype._readData=function(e){var t=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(0<t){e=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,e}return null},r.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?i.Utils.dataViewToString(t):t},r.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},r.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},r.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(r.parse(this))},r.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)},r.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},r.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},r.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),t=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(4+n,t)}this._cursor.offset+=e>>3}else this.size+=e>>3},r.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(2+i,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:r=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(4+i,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},r.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},r.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},r.prototype._writeTemplate=function(e,t){var n=Math.floor(t),t=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,t)},r.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},r.prototype._writeUTF8String=function(e){var t=i.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)n.setUint8(r,t[r]);else this.size+=t.length},r.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},r.prototype._boxProcessors.avc1=r.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},r.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},r.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},r.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},r.prototype._boxProcessors.free=r.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},r.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},r.prototype._boxProcessors.ftyp=r.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},r.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},r.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},r.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},r.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},r.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},r.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},r.prototype._boxProcessors.mp4a=r.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},r.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},r.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},r.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},r.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},r.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},r.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},r.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},r.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},r.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},r.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},r.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},r.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},r.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},r.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},r.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},r.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},r.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},r.prototype._boxProcessors["url "]=r.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},r.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},r.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},r.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},r.prototype._boxProcessors.vtte=function(){}},{}],10:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e(22)})},{22:22}],11:[function(e,t,n){var s=Object.create||function(e){function t(){}return t.prototype=e,new t},o=Object.keys||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return t},r=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=s(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0;var a,u=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),a=0===l.x}catch(e){a=!1}function d(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=s(null),e._eventsCount=0),a?("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),a.warned||(r=d(e))&&0<r&&a.length>r&&(a.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",r.name,r.message))):(a=i[t]=n,++e._eventsCount),e}function c(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function h(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=r.call(c,e);return t.listener=n,e.wrapFn=t}function p(e,t,n){e=e._events;if(!e)return[];t=e[t];return t?"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):_(t,t.length):[]}function g(e){var t=this._events;if(t){e=t[e];if("function"==typeof e)return 1;if(e)return e.length}return 0}function _(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}a?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');u=e}}):i.defaultMaxListeners=u,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return d(this)},i.prototype.emit=function(e,t,n,r){var i,a,o,s="error"===e,u=this._events;if(u)s=s&&null==u.error;else if(!s)return!1;if(s){if(1<arguments.length&&(i=t),i instanceof Error)throw i;s=new Error('Unhandled "error" event. ('+i+")");throw s.context=i,s}if(!(u=u[e]))return!1;var l,e="function"==typeof u;switch(l=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=_(e,r),a=0;a<r;++a)i[a].call(n)}(u,e,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,a=_(e,i),o=0;o<i;++o)a[o].call(n,r)}(u,e,this,t);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var a=e.length,o=_(e,a),s=0;s<a;++s)o[s].call(n,r,i)}(u,e,this,t,n);break;case 4:!function(e,t,n,r,i,a){if(t)e.call(n,r,i,a);else for(var o=e.length,s=_(e,o),u=0;u<o;++u)s[u].call(n,r,i,a)}(u,e,this,t,n,r);break;default:for(a=new Array(l-1),o=1;o<l;o++)a[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,a=_(e,i),o=0;o<i;++o)a[o].apply(n,r)}(u,e,this,a)}return!0},i.prototype.on=i.prototype.addListener=function(e,t){return f(this,e,t,!1)},i.prototype.prependListener=function(e,t){return f(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,h(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,h(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=s(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=s(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=s(null):delete n[e]),this;if(0===arguments.length){for(var r,i=o(n),a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=s(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},i.prototype.listeners=function(e){return p(this,e,!0)},i.prototype.rawListeners=function(e){return p(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},i.prototype.listenerCount=g,i.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],12:[function(e,t,n){"use strict";var l=Array.isArray,d=Object.keys,f=Object.prototype.hasOwnProperty;t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var r,i,a=l(t),o=l(n);if(a&&o){if((s=t.length)!=n.length)return!1;for(r=s;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(a!=o)return!1;a=t instanceof Date,o=n instanceof Date;if(a!=o)return!1;if(a&&o)return t.getTime()==n.getTime();a=t instanceof RegExp,o=n instanceof RegExp;if(a!=o)return!1;if(a&&o)return t.toString()==n.toString();var s,u=d(t);if((s=u.length)!==d(n).length)return!1;for(r=s;0!=r--;)if(!f.call(n,u[r]))return!1;for(r=s;0!=r--;)if(!e(t[i=u[r]],n[i]))return!1;return!0}return t!=t&&n!=n}},{}],13:[function(e,t,n){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,d=-7,f=n?i-1:0,c=n?-1:1,n=e[t+f];for(f+=c,a=n&(1<<-d)-1,n>>=-d,d+=s;0<d;a=256*a+e[t+f],f+=c,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=r;0<d;o=256*o+e[t+f],f+=c,d-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(n?-1:1);o+=Math.pow(2,r),a-=l}return(n?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,u=8*a-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,c=r?0:a-1,h=r?1:-1,a=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-o))<1&&(o--,r*=2),2<=(t+=1<=o+d?f/r:f*Math.pow(2,1-d))*r&&(o++,r/=2),l<=o+d?(s=0,o=l):1<=o+d?(s=(t*r-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));8<=i;e[n+c]=255&s,c+=h,s/=256,i-=8);for(o=o<<i|s,u+=i;0<u;e[n+c]=255&o,c+=h,o/=256,u-=8);e[n+c-h]|=128*a}},{}],14:[function(e,t,n){function g(e,t,n,r){var i=r&&"seq"===r.timeContainer,a=0;r&&(a=i&&n?n.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+a:a;var o,s=t.begin,u=null;for(o in t.sets)g(e,t.sets[o],u,t),s="seq"===t.timeContainer?t.sets[o].end:Math.max(s,t.sets[o].end),u=t.sets[o];if("contents"in t)for(var l in t.contents)g(e,t.contents[l],u,t),s="seq"===t.timeContainer?t.contents[l].end:Math.max(s,t.contents[l].end),u=t.contents[l];else s=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,a+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=a+t.explicit_end:t.end=s,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function _(e){this.node=e}function m(){this.events=[],this.head=null,this.body=null}function E(){this.styling=null,this.layout=null}function y(){this.styles={}}function v(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function T(){this.regions={}}function r(e){this.kind=e}function i(e){this.id=e}function a(e){this.regionID=e}function o(e){this.styleAttrs=e}function s(e){this.sets=e}function u(e){this.contents=e}function l(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n}function S(){r.call(this,"body")}function A(){r.call(this,"div")}function I(){r.call(this,"p")}function R(){r.call(this,"span")}function b(){r.call(this,"span")}function M(){r.call(this,"br")}function D(){}function N(){}function d(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function f(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function c(e,t){var n={};if(null!==e)for(var r in e.attributes){var i,a=e.attributes[r].uri+" "+e.attributes[r].local,o=B.byQName[a];void 0!==o&&(null!==(i=o.parse(e.attributes[r].value))?(n[a]=i,o===B.byName.zIndex&&w(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):P(t,"Cannot parse styling attribute "+a+" --\x3e "+e.attributes[r].value))}return n}function h(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function p(e,t,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),i}function C(e,t,n,r){for(var i=t.length-1;0<=i;i--){var a=t[i];a in e.styles?O(e.styles[a].styleAttrs,n):P(r,"Non-existant style id referenced")}}function O(e,t){for(var n in e)n in t||(t[n]=e[n])}function w(e,t){if(e&&e.warn&&e.warn(t))throw t}function P(e,t){if(e&&e.error&&e.error(t))throw t}function L(e,t){throw e&&e.fatal&&e.fatal(t),t}function x(e,t){for(var n,r=0,i=e.length-1;r<=i;){var a=e[n=Math.floor((r+i)/2)];if(a<t)r=n+1;else{if(!(t<a))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}var F,U,B,k;n=void 0===n?this.imscDoc={}:n,F="undefined"==typeof sax?e(40):sax,U="undefined"==typeof imscNames?e(18):imscNames,B="undefined"==typeof imscStyles?e(19):imscStyles,k="undefined"==typeof imscUtils?e(20):imscUtils,n.fromXML=function(e,u,l){var t=F.parser(!0,{xmlns:!0}),d=[],f=[],c=[],h=0,p=null;t.onclosetag=function(e){if(d[0]instanceof y)for(var t in d[0].styles)!function e(t,n,r){for(;0<n.styleRefs.length;){var i=n.styleRefs.pop();i in t.styles?(e(t,t.styles[i],r),O(t.styles[i].styleAttrs,n.styleAttrs)):P(r,"Non-existant style id referenced")}}(d[0],d[0].styles[t],u);else if(d[0]instanceof I||d[0]instanceof R){if(1<d[0].contents.length){for(var n=[d[0].contents[0]],r=1;r<d[0].contents.length;r++)d[0].contents[r]instanceof b&&n[n.length-1]instanceof b?n[n.length-1].text+=d[0].contents[r].text:n.push(d[0].contents[r]);d[0].contents=n}d[0]instanceof R&&1===d[0].contents.length&&d[0].contents[0]instanceof b&&(d[0].text=d[0].contents[0].text,delete d[0].contents)}else d[0]instanceof _&&(d[0].node.uri===U.ns_tt&&"metadata"===d[0].node.local?h--:0<h&&l&&"onCloseTag"in l&&l.onCloseTag());c.shift(),f.shift(),d.shift()},t.ontext=function(e){var t;void 0===d[0]||(d[0]instanceof R||d[0]instanceof I?((t=new b).initFromText(p,d[0],e,c[0],u),d[0].contents.push(t)):d[0]instanceof _&&0<h&&l&&"onText"in l&&l.onText(e))},t.onopentag=function(e){var t=e.attributes["xml:space"];t?c.unshift(t.value):0===c.length?c.unshift("default"):c.unshift(c[0]);var n,r,i,a,t=e.attributes["xml:lang"];if(t?f.unshift(t.value):0===f.length?f.unshift(""):f.unshift(f[0]),e.uri===U.ns_tt?"tt"===e.local?(null!==p&&L(u,"Two <tt> elements at ("+this.line+","+this.column+")"),(p=new m).initFromNode(e,u),d.unshift(p)):"head"===e.local?(d[0]instanceof m||L(u,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==p.head&&L("Second <head> element at ("+this.line+","+this.column+")"),p.head=new E,d.unshift(p.head)):"styling"===e.local?(d[0]instanceof E||L(u,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==p.head.styling&&L("Second <styling> element at ("+this.line+","+this.column+")"),p.head.styling=new y,d.unshift(p.head.styling)):"style"===e.local?d[0]instanceof y?((n=new v).initFromNode(e,u),n.id?p.head.styling.styles[n.id]=n:P(u,"<style> element missing @id attribute"),d.unshift(n)):d[0]instanceof D?((n=new v).initFromNode(e,u),O(n.styleAttrs,d[0].styleAttrs),d.unshift(n)):L(u,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")"):"layout"===e.local?(d[0]instanceof E||L(u,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==p.head.layout&&L(u,"Second <layout> element at "+this.line+","+this.column+")"),p.head.layout=new T,d.unshift(p.head.layout)):"region"===e.local?(d[0]instanceof T||L(u,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),(n=new D).initFromNode(p,e,u),!n.id||n.id in p.head.layout.regions?P(u,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):p.head.layout.regions[n.id]=n,d.unshift(n)):"body"===e.local?(d[0]instanceof m||L(u,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==p.body&&L(u,"Second <body> element at "+this.line+","+this.column+")"),(r=new S).initFromNode(p,e,u),p.body=r,d.unshift(r)):"div"===e.local?(d[0]instanceof A||d[0]instanceof S||L(u,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")"),(r=new A).initFromNode(p,d[0],e,u),d[0].contents.push(r),d.unshift(r)):"p"===e.local?(d[0]instanceof A||L(u,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),(i=new I).initFromNode(p,d[0],e,u),d[0].contents.push(i),d.unshift(i)):"span"===e.local?(d[0]instanceof R||d[0]instanceof I||L(u,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),(i=new R).initFromNode(p,d[0],e,c[0],u),d[0].contents.push(i),d.unshift(i)):"br"===e.local?(d[0]instanceof R||d[0]instanceof I||L(u,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),(a=new M).initFromNode(p,d[0],e,u),d[0].contents.push(a),d.unshift(a)):"set"===e.local?(d[0]instanceof R||d[0]instanceof I||d[0]instanceof A||d[0]instanceof S||d[0]instanceof D||d[0]instanceof M||L(u,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),(a=new N).initFromNode(p,d[0],e,u),d[0].sets.push(a),d.unshift(a)):d.unshift(new _(e)):d.unshift(new _(e)),d[0]instanceof _)if(e.uri===U.ns_tt&&"metadata"===e.local)h++;else if(0<h&&l&&"onOpenTag"in l){var o,s=[];for(o in e.attributes)s[e.attributes[o].uri+" "+e.attributes[o].local]={uri:e.attributes[o].uri,local:e.attributes[o].local,value:e.attributes[o].value};l.onOpenTag(e.uri,e.local,s)}},t.write(e).close(),null!==p.head?delete p.head.styling:p.head=new E,null===p.head.layout&&(p.head.layout=new T);var n,r,i=!1;for(n in p.head.layout.regions){i=!0;break}for(r in i||(e=D.prototype.createDefaultRegion(),p.head.layout.regions[e.id]=e),p.head.layout.regions)g(p,p.head.layout.regions[r],null,null);return p.body&&g(p,p.body,null,null),p},m.prototype.initFromNode=function(e,t){this.cellResolution=function(e,t){var n=h(e,U.ns_ttp,"cellResolution"),r=15,e=32;{null!==n&&(null!==(n=/(\d+) (\d+)/.exec(n))?(e=parseInt(n[1]),r=parseInt(n[2])):w(t,"Malformed cellResolution value (using initial value instead)"))}return{w:e,h:r}}(e,t);var n=function(e,t){var n,r=h(e,U.ns_ttp,"frameRate"),i=30;{null!==r&&(null!==(n=/(\d+)/.exec(r))?i=parseInt(n[1]):w(t,"Malformed frame rate attribute (using initial value instead)"))}var a=h(e,U.ns_ttp,"frameRateMultiplier"),o=1;{null!==a&&(null!==(n=/(\d+) (\d+)/.exec(a))?o=parseInt(n[1])/parseInt(n[2]):w(t,"Malformed frame rate multiplier attribute (using initial value instead)"))}o*=i,i=1,e=h(e,U.ns_ttp,"tickRate");{null===e?null!==r&&(i=o):null!==(n=/(\d+)/.exec(e))?i=parseInt(n[1]):w(t,"Malformed tick rate attribute (using initial value instead)")}return{effectiveFrameRate:o,tickRate:i}}(e,t);this.effectiveFrameRate=n.effectiveFrameRate,this.tickRate=n.tickRate,this.aspectRatio=function(e,t){var n=h(e,U.ns_ittp,"aspectRatio"),r=null;{null!==n&&(null!==(e=/(\d+) (\d+)/.exec(n))?(n=parseInt(e[1]),e=parseInt(e[2]),0!==n&&0!==e?r=n/e:P(t,"Illegal aspectRatio values (ignoring)")):P(t,"Malformed aspectRatio attribute (ignoring)"))}return r}(e,t);n=h(e,U.ns_ttp,"timeBase");null!==n&&"media"!==n&&L(t,"Unsupported time base");e=function(e,t){var n=h(e,U.ns_tts,"extent");if(null===n)return null;e=n.split(" ");if(2!==e.length)return w(t,"Malformed extent (ignoring)"),null;n=k.parseLength(e[0]),e=k.parseLength(e[1]);return e&&n?{h:e,w:n}:(w(t,"Malformed extent values (ignoring)"),null)}(e,t);null===e?this.pxDimensions={h:480,w:640}:("px"===e.h.unit&&"px"===e.w.unit||L(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:e.h.value,w:e.w.value})},m.prototype._registerEvent=function(e){var t;e.end<=e.begin||((t=x(this.events,e.begin)).found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY&&((t=x(this.events,e.end)).found||this.events.splice(t.index,0,e.end)))},m.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},m.prototype.getMediaTimeEvents=function(){return this.events},v.prototype.initFromNode=function(e,t){this.id=d(e),this.styleAttrs=c(e,t),this.styleRefs=f(e)},i.prototype.initFromNode=function(e,t,n,r){this.id=d(n)},a.prototype.initFromNode=function(e,t,n,r){this.regionID=(n=n)&&"region"in n.attributes?n.attributes.region.value:""},o.prototype.initFromNode=function(e,t,n,r){this.styleAttrs=c(n,r),null!==e.head&&null!==e.head.styling&&C(e.head.styling,f(n),this.styleAttrs,r)},s.prototype.initFromNode=function(e,t,n,r){this.sets=[]},u.prototype.initFromNode=function(e,t,n,r){this.contents=[]},l.prototype.initFromNode=function(e,t,n,r){e=function(e,t,n){var r=null;t&&"begin"in t.attributes&&null===(r=p(e.tickRate,e.effectiveFrameRate,t.attributes.begin.value))&&w(n,"Malformed begin value "+t.attributes.begin.value+" (using 0)");var i=null;t&&"dur"in t.attributes&&null===(i=p(e.tickRate,e.effectiveFrameRate,t.attributes.dur.value))&&w(n,"Malformed dur value "+t.attributes.dur.value+" (ignoring)");var a=null;t&&"end"in t.attributes&&null===(a=p(e.tickRate,e.effectiveFrameRate,t.attributes.end.value))&&w(n,"Malformed end value (ignoring)");return{explicit_begin:r,explicit_end:a,explicit_dur:i}}(e,n,r);this.explicit_begin=e.explicit_begin,this.explicit_end=e.explicit_end,this.explicit_dur=e.explicit_dur,this.timeContainer=function(e,t){e=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return e&&"par"!==e?"seq"===e?"seq":(P(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,r)},S.prototype.initFromNode=function(e,t,n){o.prototype.initFromNode.call(this,e,null,t,n),l.prototype.initFromNode.call(this,e,null,t,n),s.prototype.initFromNode.call(this,e,null,t,n),a.prototype.initFromNode.call(this,e,null,t,n),u.prototype.initFromNode.call(this,e,null,t,n)},A.prototype.initFromNode=function(e,t,n,r){o.prototype.initFromNode.call(this,e,t,n,r),l.prototype.initFromNode.call(this,e,t,n,r),s.prototype.initFromNode.call(this,e,t,n,r),a.prototype.initFromNode.call(this,e,t,n,r),u.prototype.initFromNode.call(this,e,t,n,r)},I.prototype.initFromNode=function(e,t,n,r){o.prototype.initFromNode.call(this,e,t,n,r),l.prototype.initFromNode.call(this,e,t,n,r),s.prototype.initFromNode.call(this,e,t,n,r),a.prototype.initFromNode.call(this,e,t,n,r),u.prototype.initFromNode.call(this,e,t,n,r)},R.prototype.initFromNode=function(e,t,n,r,i){o.prototype.initFromNode.call(this,e,t,n,i),l.prototype.initFromNode.call(this,e,t,n,i),s.prototype.initFromNode.call(this,e,t,n,i),a.prototype.initFromNode.call(this,e,t,n,i),u.prototype.initFromNode.call(this,e,t,n,i),this.space=r},b.prototype.initFromText=function(e,t,n,r,i){l.prototype.initFromNode.call(this,e,t,null,i),this.text=n,this.space=r},M.prototype.initFromNode=function(e,t,n,r){a.prototype.initFromNode.call(this,e,t,n,r),l.prototype.initFromNode.call(this,e,t,n,r)},D.prototype.createDefaultRegion=function(){var e=new D;return i.call(e,""),o.call(e,{}),s.call(e,[]),l.call(e,0,Number.POSITIVE_INFINITY,null),e},D.prototype.initFromNode=function(e,t,n){i.prototype.initFromNode.call(this,e,null,t,n),o.prototype.initFromNode.call(this,e,null,t,n),l.prototype.initFromNode.call(this,e,null,t,n),s.prototype.initFromNode.call(this,e,null,t,n),null!==e.head&&null!==e.head.styling&&C(e.head.styling,f(t),this.styleAttrs,n)},N.prototype.initFromNode=function(e,t,n,r){l.prototype.initFromNode.call(this,e,t,n,r);var i,a=c(n,r);for(i in this.qname=null,this.value=null,a){if(this.qname){P(r,"More than one style specified on set");break}this.qname=i,this.value=a[i]}}},{18:18,19:19,20:20,40:40}],15:[function(e,t,n){!function(e,_){function m(e,t,n){for(var r in e){var i=e[r].elements.length,a=e[r].elements[e[r].start_elem],o=e[r].elements[e[r].end_elem],s=Math.ceil(t)+"px",u="-"+Math.ceil(t)+"px";0!==i&&("lr"===n.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=s,a.node.style.marginLeft=u):"rl"===n.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=s,a.node.style.marginRight=u):"tb"===n.ipd&&(a.node.style.borderTopColor=a.bgcolor||"#00000000",a.node.style.borderTopStyle="solid",a.node.style.borderTopWidth=s,a.node.style.marginTop=u),"lr"===n.ipd?(o.node.style.borderRightColor=o.bgcolor||"#00000000",o.node.style.borderRightStyle="solid",o.node.style.borderRightWidth=s,o.node.style.marginRight=u):"rl"===n.ipd?(o.node.style.borderLeftColor=o.bgcolor||"#00000000",o.node.style.borderLeftStyle="solid",o.node.style.borderLeftWidth=s,o.node.style.marginLeft=u):"tb"===n.ipd&&(o.node.style.borderBottomColor=o.bgcolor||"#00000000",o.node.style.borderBottomStyle="solid",o.node.style.borderBottomWidth=s,o.node.style.marginBottom=u))}}function E(e){for(var t=0;t<e.length-1;t++){var n,r=e[t].elements.length;0!==r&&!1===e[t].br&&(n=document.createElement("br"),(r=e[t].elements[r-1].node).parentElement.insertBefore(n,r.nextSibling))}}function y(e,t,n,r){for(var i=Math.sign(n-t),a=0;a<=e.length;a++){var o,s,u=0===a?t:a===e.length?n:(e[a].before+e[a-1].after)/2;if(0<a)for(var l=0;l<e[a-1].elements.length;l++)null!==e[a-1].elements[l].bgcolor&&i*((s=e[a-1].elements[l]).after-u)<0&&(o=Math.ceil(Math.abs(u-s.after))+"px",s.node.style.backgroundColor=s.bgcolor,"lr"===r.bpd?s.node.style.paddingRight=o:"rl"===r.bpd?s.node.style.paddingLeft=o:"tb"===r.bpd&&(s.node.style.paddingBottom=o));if(a<e.length)for(var d=0;d<e[a].elements.length;d++)null!==(s=e[a].elements[d]).bgcolor&&0<i*(s.before-u)&&(o=Math.ceil(Math.abs(s.before-u))+"px",s.node.style.backgroundColor=s.bgcolor,"lr"===r.bpd?s.node.style.paddingLeft=o:"rl"===r.bpd?s.node.style.paddingRight=o:"tb"===r.bpd&&(s.node.style.paddingTop=o))}}function v(e,t){this.id=e,this.plist=t}function T(e,t){var n={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function S(e,t,n,r){var i=t.style.backgroundColor||r;if(0===t.childElementCount)if("span"===t.localName){var a=t.getBoundingClientRect();if(0===a.height||0===a.width)return;var o,s,u=T(a,e);0!==n.length&&(o=u.before,r=u.after,s=n[n.length-1].before,a=n[n.length-1].after,r<a&&s<o||a<=r&&o<=s)?(o=Math.sign(u.after-u.before),s=Math.sign(u.end-u.start),o*(u.before-n[n.length-1].before)<0&&(n[n.length-1].before=u.before),0<o*(u.after-n[n.length-1].after)&&(n[n.length-1].after=u.after),s*(u.start-n[n.length-1].start)<0&&(n[n.length-1].start=u.start,n[n.length-1].start_elem=n[n.length-1].elements.length),0<s*(u.end-n[n.length-1].end)&&(n[n.length-1].end=u.end,n[n.length-1].end_elem=n[n.length-1].elements.length)):n.push({before:u.before,after:u.after,start:u.start,end:u.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1}),n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:i,before:u.before,after:u.after})}else"br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var l=t.firstChild;l;)l.nodeType===Node.ELEMENT_NODE&&S(e,l,n,i),l=l.nextSibling}function t(e,t){this.qname=e,this.map=t}e.render=function(e,t,n,r,i,a,o,s,u){var l=r||t.clientHeight,r=i||t.clientWidth;null!==e.aspectRatio&&(r<(i=l*e.aspectRatio)?l=Math.round(r/e.aspectRatio):r=i);var d=document.createElement("div");d.style.position="relative",d.style.width=r+"px",d.style.height=l+"px",d.style.margin="auto",d.style.top=0,d.style.bottom=0,d.style.left=0,d.style.right=0,d.style.zIndex=0;var f,c={h:l,w:r,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:a||!1,isd:e,errorHandler:o,previousISDState:s,enableRollUp:u||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(f in t.appendChild(d),e.contents)!function e(t,n,r){var i;"region"===r.kind?(i=document.createElement("div")).style.position="absolute":"body"===r.kind||"div"===r.kind?i=document.createElement("div"):"p"===r.kind?i=document.createElement("p"):"span"===r.kind?i=document.createElement("span"):"br"===r.kind&&(i=document.createElement("br"));if(!i)return void I(t.errorHandler,"Error processing ISD element kind: "+r.kind);i.style.margin="0";for(var a in A){var o=A[a],s=r.styleAttrs[o.qname];void 0!==s&&null!==o.map&&o.map(t,i,r,s)}var u=i;{"region"===r.kind&&("lrtb"===(l=r.styleAttrs[_.byName.writingMode.qname])||"lr"===l?(t.ipd="lr",t.bpd="tb"):"rltb"===l||"rl"===l?(t.ipd="rl",t.bpd="tb"):"tblr"===l?(t.ipd="tb",t.bpd="lr"):"tbrl"!==l&&"tb"!==l||(t.ipd="tb",t.bpd="rl"))}var l=r.styleAttrs[_.byName.linePadding.qname];{l&&0<l&&(d=Math.ceil(l*t.h)+"px","tb"===t.bpd?(u.style.paddingLeft=d,u.style.paddingRight=d):(u.style.paddingTop=d,u.style.paddingBottom=d),t.lp=l)}var d=r.styleAttrs[_.byName.multiRowAlign.qname];{d&&"auto"!==d&&((l=document.createElement("span")).style.display="inline-block",l.style.textAlign=d,i.appendChild(l),u=l,t.mra=d)}r.styleAttrs[_.byName.fillLineGap.qname]&&(t.flg=!0);if("span"===r.kind&&r.text)if(t.lp||t.mra||t.flg)for(var f="",c=0;c<r.text.length;c++){f+=r.text.charAt(c);var h=r.text.charCodeAt(c);(h<55296||56319<h||c===r.text.length)&&((h=document.createElement("span")).textContent=f,i.appendChild(h),f="")}else i.textContent=r.text;n.appendChild(i);for(var p in r.contents)e(t,u,r.contents[p]);n=[];{(t.lp||t.mra||t.flg)&&"p"===r.kind&&(S(t,u,n,null),t.mra&&(E(n),t.mra=null),t.lp&&(m(n,t.lp*t.h,t),t.lp=null),t.flg&&(g=T(u.getBoundingClientRect(),t),y(n,g.before,g.after,t),t.flg=null))}{var g;"region"===r.kind&&(S(t,u,n),"tb"===t.bpd&&t.enableRollUp&&0<r.contents.length&&"after"===r.styleAttrs[_.byName.displayAlign.qname]&&(g=""===r.id?"_":r.id,g=new v(g,n),t.currentISDState[g.id]=g,t.previousISDState&&g.id in t.previousISDState&&0<t.previousISDState[g.id].plist.length&&1<g.plist.length&&g.plist[g.plist.length-2].text===t.previousISDState[g.id].plist[t.previousISDState[g.id].plist.length-1].text&&(n=i.firstElementChild,g=g.plist[g.plist.length-1].after-g.plist[g.plist.length-1].before,n.style.bottom="-"+g+"px",n.style.transition="transform 0.4s",n.style.position="relative",n.style.transform="translateY(-"+g+"px)")))}}(c,d,e.contents[f]);return c.currentISDState};var n,A=[new t("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,n,r){0!==r[3]&&(t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")}),new t("http://www.w3.org/ns/ttml#styling color",function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"}),new t("http://www.w3.org/ns/ttml#styling direction",function(e,t,n,r){t.style.direction=r}),new t("http://www.w3.org/ns/ttml#styling display",function(e,t,n,r){}),new t("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end")}),new t("http://www.w3.org/ns/ttml#styling extent",function(e,t,n,r){e.regionH=r.h*e.h,e.regionW=r.w*e.w;var i=0,r=0,n=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];n&&(i=(n[0]+n[2])*e.h,r=(n[1]+n[3])*e.w),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-r+"px"}),new t("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,n,r){var i,a=[];for(i in r)"monospaceSerif"===r[i]?(a.push("Courier New"),a.push('"Liberation Mono"'),a.push("Courier"),a.push("monospace")):"proportionalSansSerif"===r[i]?(a.push("Arial"),a.push("Helvetica"),a.push('"Liberation Sans"'),a.push("sans-serif")):"monospace"===r[i]?a.push("monospace"):"sansSerif"===r[i]?a.push("sans-serif"):"serif"===r[i]?a.push("serif"):"monospaceSansSerif"===r[i]?(a.push("Consolas"),a.push("monospace")):"proportionalSerif"===r[i]?a.push("serif"):a.push(r[i]);t.style.fontFamily=a.join(",")}),new t("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,n,r){t.style.fontSize=r*e.h+"px"}),new t("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,n,r){t.style.fontStyle=r}),new t("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,n,r){t.style.fontWeight=r}),new t("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r*e.h+"px"}),new t("http://www.w3.org/ns/ttml#styling opacity",function(e,t,n,r){t.style.opacity=r}),new t("http://www.w3.org/ns/ttml#styling origin",function(e,t,n,r){t.style.top=r.h*e.h+"px",t.style.left=r.w*e.w+"px"}),new t("http://www.w3.org/ns/ttml#styling overflow",function(e,t,n,r){t.style.overflow=r}),new t("http://www.w3.org/ns/ttml#styling padding",function(e,t,n,r){var i=[];i[0]=r[0]*e.h+"px",i[1]=r[3]*e.w+"px",i[2]=r[2]*e.h+"px",i[3]=r[1]*e.w+"px",t.style.padding=i.join(" ")}),new t("http://www.w3.org/ns/ttml#styling showBackground",null),new t("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,n,r){n=n.styleAttrs[_.byName.direction.qname],r="start"===r?"rtl"===n?"right":"left":"end"===r?"rtl"===n?"left":"right":r;t.style.textAlign=r}),new t("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through")}),new t("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,n,r){t.style.textShadow="none"===r?"":"rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness*e.h+"px"}),new t("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,n,r){r="bidiOverride"===r?"bidi-override":r;t.style.unicodeBidi=r}),new t("http://www.w3.org/ns/ttml#styling visibility",function(e,t,n,r){t.style.visibility=r}),new t("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new t("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,n,r){"lrtb"===r||"lr"===r||"rltb"===r||"rl"===r?t.style.writingMode="horizontal-tb":"tblr"===r?t.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.style.writingMode="vertical-rl")}),new t("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,n,r){t.style.zIndex=r}),new t("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",function(e,t,n,r){var i;null!==e.imgResolver&&null!==r&&(i=document.createElement("img"),(r=e.imgResolver(r,i))&&(i.src=r),i.height=e.regionH,i.width=e.regionW,t.appendChild(i))}),new t("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden")})],r={};for(n in A)r[A[n].qname]=A[n];function I(e,t){if(e&&e.error&&e.error(t))throw t}}(void 0===n?this.imscHTML={}:n,("undefined"==typeof imscNames&&e(18),"undefined"==typeof imscStyles?e(19):imscStyles))},{18:18,19:19}],16:[function(e,t,n){function x(e,t){if("contents"in e)for(var n in e.contents)x(e.contents[n],t);else t.push(e)}function F(e){if("br"!==e.kind){if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)F(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}}function s(e){this.contents=[],this.aspectRatio=e.aspectRatio}function U(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space)}function B(e,t){if(e&&e.error&&e.error(t))throw t}var k;n=void 0===n?this.imscISD={}:n,"undefined"==typeof imscNames&&e(18),k="undefined"==typeof imscStyles?e(19):imscStyles,n.generateISD=function(e,t,n){var r,i=new s(e),a={};for(r in e.head.layout.regions){var o=function e(t,n,r,i,a,o,s,u,l){if(n<s.begin||n>=s.end)return null;var d="regionID"in s&&""!==s.regionID?s.regionID:o;if(null!==a&&d!==r.id&&(!("contents"in s)||"contents"in s&&0===s.contents.length||""!==d))return null;var f=new U(s);for(var c in s.sets)n<s.sets[c].begin||n>=s.sets[c].end||(f.styleAttrs[s.sets[c].qname]=s.sets[c].value);var h={};for(var p in f.styleAttrs){var g;h[p]=!0,p!==k.byName.writingMode.qname||k.byName.direction.qname in f.styleAttrs||("lrtb"===(g=f.styleAttrs[p])||"lr"===g?f.styleAttrs[k.byName.direction.qname]="ltr":"rltb"!==g&&"rl"!==g||(f.styleAttrs[k.byName.direction.qname]="rtl"))}if(null!==a)for(var _ in k.all){var m,E,y,v=k.all[_];v.qname===k.byName.textDecoration.qname?(m=a.styleAttrs[v.qname],E=f.styleAttrs[v.qname],y=[],void 0===E?y=m:-1===E.indexOf("none")?((-1===E.indexOf("noUnderline")&&-1!==m.indexOf("underline")||-1!==E.indexOf("underline"))&&y.push("underline"),(-1===E.indexOf("noLineThrough")&&-1!==m.indexOf("lineThrough")||-1!==E.indexOf("lineThrough"))&&y.push("lineThrough"),(-1===E.indexOf("noOverline")&&-1!==m.indexOf("overline")||-1!==E.indexOf("overline"))&&y.push("overline")):y.push("none"),f.styleAttrs[v.qname]=y):v.inherit&&v.qname in a.styleAttrs&&!(v.qname in f.styleAttrs)&&(f.styleAttrs[v.qname]=a.styleAttrs[v.qname])}for(var T in k.all){var S=k.all[T];S.qname in f.styleAttrs||("region"===f.kind||!1===S.inherit&&null!==S.initial)&&(f.styleAttrs[S.qname]=S.parse(S.initial),h[S.qname]=!0)}for(var A in k.all){var I,R=k.all[A];R.qname in h&&null!==R.compute&&(null!==(I=R.compute(t,a,f,f.styleAttrs[R.qname],l))?f.styleAttrs[R.qname]=I:B(u,"Style '"+R.qname+"' on element '"+f.kind+"' cannot be computed"))}if("none"===f.styleAttrs[k.byName.display.qname])return null;var b;null===a?b=null===i?[]:[i]:"contents"in s&&(b=s.contents);for(var M in b){var D=e(t,n,r,i,f,d,b[M],u,l);null!==D&&f.contents.push(D.element)}for(var N in f.styleAttrs){var C=k.byQName[N];-1===C.applies.indexOf(f.kind)&&delete f.styleAttrs[N]}{"span"===f.kind&&f.text&&"default"===f.space&&(o=f.text.replace(/\s+/g," "),f.text=o)}if("p"===f.kind){var O=[];x(f,O);for(var w=0,P="after_br",L=0;;)if("after_br"===P)w>=O.length||"br"===O[w].kind?(P="before_br",L=w,w--):("preserve"!==O[w].space&&(O[w].text=O[w].text.replace(/^\s+/g,"")),0<O[w].text.length?(P="looking_br",w++):O.splice(w,1));else if("before_br"===P)if(w<0||"br"===O[w].kind){if(P="after_br",(w=L+1)>=O.length)break}else if("preserve"!==O[w].space&&(O[w].text=O[w].text.replace(/\s+$/g,"")),0<O[w].text.length){if(P="after_br",(w=L+1)>=O.length)break}else O.splice(w,1),w--;else w>=O.length||"br"===O[w].kind?(P="before_br",L=w,w--):w++;F(f)}if("div"===f.kind&&k.byName.backgroundImage.qname in f.styleAttrs||"br"===f.kind||"contents"in f&&0<f.contents.length||"span"===f.kind&&null!==f.text||"region"===f.kind&&"always"===f.styleAttrs[k.byName.showBackground.qname])return{region_id:d,element:f};return null}(e,t,e.head.layout.regions[r],e.body,null,"",e.head.layout.regions[r],n,a);null!==o&&i.contents.push(o.element)}return i}},{18:18,19:19}],17:[function(e,t,n){n.generateISD=e(16).generateISD,n.fromXML=e(14).fromXML,n.renderHTML=e(15).render},{14:14,15:15,16:16}],18:[function(e,t,n){(n=void 0===n?this.imscNames={}:n).ns_tt="http://www.w3.org/ns/ttml",n.ns_tts="http://www.w3.org/ns/ttml#styling",n.ns_ttp="http://www.w3.org/ns/ttml#parameter",n.ns_xml="http://www.w3.org/XML/1998/namespace",n.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",n.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",n.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",n.ns_ebutts="urn:ebu:tt:style"},{}],19:[function(e,t,n){!function(u,e,a){function t(e,t,n,r,i,a,o,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=a,this.initial=n,this.applies=r,this.parse=o,this.compute=s}for(var n in u.all=[new t(e.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,a.parseColor,null),new t(e.ns_tts,"color","white",["span"],!0,!0,a.parseColor,null),new t(e.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new t(e.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;e=a.parseLength(t[0]),t=a.parseLength(t[1]);return t&&e?{h:t,w:e}:null},function(e,t,n,r,i){var a,o;if("auto"===r)a=1;else if("%"===r.h.unit)a=r.h.value/100;else{if("px"!==r.h.unit)return null;a=r.h.value/e.pxDimensions.h}if("auto"===r)o=1;else if("%"===r.w.unit)o=r.w.value/100;else{if("px"!==r.w.unit)return null;o=r.w.value/e.pxDimensions.w}return{h:a,w:o}}),new t(e.ns_tts,"fontFamily","default",["span"],!0,!0,function(e){var t,n=e.split(","),r=[];for(t in n)"'"!==n[t].charAt(0)&&'"'!==n[t].charAt(0)&&"default"===n[t]?r.push("monospaceSerif"):r.push(n[t]);return r},null),new t(e.ns_tts,"fontSize","1c",["span"],!0,!0,a.parseLength,function(e,t,n,r,i){var a;if("%"===r.unit)a=null!==t?t.styleAttrs[u.byName.fontSize.qname]*r.value/100:r.value/100/e.cellResolution.h;else if("em"===r.unit)a=null!==t?t.styleAttrs[u.byName.fontSize.qname]*r.value:r.value/e.cellResolution.h;else if("c"===r.unit)a=r.value/e.cellResolution.h;else{if("px"!==r.unit)return null;a=r.value/e.pxDimensions.h}return a}),new t(e.ns_tts,"fontStyle","normal",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"fontWeight","normal",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:a.parseLength(e)},function(e,t,n,r,i){var a;if("normal"===r)a=r;else if("%"===r.unit)a=n.styleAttrs[u.byName.fontSize.qname]*r.value/100;else if("em"===r.unit)a=n.styleAttrs[u.byName.fontSize.qname]*r.value;else if("c"===r.unit)a=r.value/e.cellResolution.h;else{if("px"!==r.unit)return null;a=r.value/e.pxDimensions.h}return a}),new t(e.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new t(e.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;e=a.parseLength(t[0]),t=a.parseLength(t[1]);return t&&e?{h:t,w:e}:null},function(e,t,n,r,i){var a,o;if("auto"===r)a=0;else if("%"===r.h.unit)a=r.h.value/100;else{if("px"!==r.h.unit)return null;a=r.h.value/e.pxDimensions.h}if("auto"===r)o=0;else if("%"===r.w.unit)o=r.w.value/100;else{if("px"!==r.w.unit)return null;o=r.w.value/e.pxDimensions.w}return{h:a,w:o}}),new t(e.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(4<t.length)return null;var n,r=[];for(n in t){var i=a.parseLength(t[n]);if(!i)return null;r.push(i)}return r},function(e,t,n,r,i){var a;if(1===r.length)a=[r[0],r[0],r[0],r[0]];else if(2===r.length)a=[r[0],r[1],r[0],r[1]];else if(3===r.length)a=[r[0],r[1],r[2],r[1]];else{if(4!==r.length)return null;a=[r[0],r[1],r[2],r[3]]}r=n.styleAttrs[u.byName.writingMode.qname];if("lrtb"===r||"lr"===r)a=[a[0],a[3],a[2],a[1]];else if("rltb"===r||"rl"===r)a=[a[0],a[1],a[2],a[3]];else if("tblr"===r)a=[a[3],a[0],a[1],a[2]];else{if("tbrl"!==r&&"tb"!==r)return null;a=[a[3],a[2],a[1],a[0]]}var o,s=[];for(o in a)if(0===a[o].value)s[o]=0;else if("%"===a[o].unit)s[o]="0"===o||"2"===o?n.styleAttrs[u.byName.extent.qname].h*a[o].value/100:n.styleAttrs[u.byName.extent.qname].w*a[o].value/100;else if("em"===a[o].unit)s[o]=n.styleAttrs[u.byName.fontSize.qname]*a[o].value;else if("c"===a[o].unit)s[o]=a[o].value/e.cellResolution.h;else{if("px"!==a[o].unit)return null;s[o]="0"===o||"2"===o?a[o].value/e.pxDimensions.h:a[o].value/e.pxDimensions.w}return s}),new t(e.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,n,r,i){return"left"===r?"start":"right"===r?"end":r}),new t(e.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new t(e.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},n=e.split(" ");if(0===n.length||2<n.length)return null;e=a.parseColor(n[0]);if(null!==(t.color=e)&&n.shift(),1!==n.length)return null;n=a.parseLength(n[0]);return n?(t.thickness=n,t):null},function(e,t,n,r,i){if("none"===r)return r;var a={};if(null===r.color?a.color=n.styleAttrs[u.byName.color.qname]:a.color=r.color,"%"===r.thickness.unit)a.thickness=n.styleAttrs[u.byName.fontSize.qname]*r.thickness.value/100;else if("em"===r.thickness.unit)a.thickness=n.styleAttrs[u.byName.fontSize.qname]*r.thickness.value;else if("c"===r.thickness.unit)a.thickness=r.thickness.value/e.cellResolution.h;else{if("px"!==r.thickness.unit)return null;a.thickness=r.thickness.value/e.pxDimensions.h}return a}),new t(e.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new t(e.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new t(e.ns_ebutts,"linePadding","0c",["p"],!0,!1,a.parseLength,function(e,t,n,r,i){return"c"===r.unit?r.value/e.cellResolution.h:null}),new t(e.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new t(e.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new t(e.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null),new t(e.ns_itts,"fillLineGap","false",["p"],!0,!0,function(e){return"true"===e},null)],u.byQName={},u.all)u.byQName[u.all[n].qname]=u.all[n];for(var r in u.byName={},u.all)u.byName[u.all[r].name]=u.all[r]}(void 0===n?this.imscStyles={}:n,"undefined"==typeof imscNames?e(18):imscNames,"undefined"==typeof imscUtils?e(20):imscUtils)},{18:18,20:20}],20:[function(e,t,n){!function(e){var r=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,i=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,a=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var t=null,n=o[e.toLowerCase()];return void 0!==n?t=n:null!==(n=r.exec(e))?t=[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),void 0!==n[4]?parseInt(n[4],16):255]:null!==(n=i.exec(e))?t=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3]),255]:null!==(n=a.exec(e))&&(t=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3]),parseInt(n[4])]),t};var n=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t=null;return null!==(e=n.exec(e))&&(t={value:parseFloat(e[1]),unit:e[2]}),t}}(void 0===n?this.imscUtils={}:n)},{}],21:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],22:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))||!!e._isBuffer);var t}},{}],23:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],24:[function(e,t,n){(function(s){"use strict";!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,a,o=arguments.length;switch(o){case 0:case 1:return s.nextTick(e);case 2:return s.nextTick(function(){e.call(null,t)});case 3:return s.nextTick(function(){e.call(null,t,n)});case 4:return s.nextTick(function(){e.call(null,t,n,r)});default:for(i=new Array(o-1),a=0;a<i.length;)i[a++]=arguments[a];return s.nextTick(function(){e.apply(null,i)})}}}:t.exports=s}).call(this,e(25))},{25:25}],25:[function(e,t,n){var r,i,t=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var u,l=[],d=!1,f=-1;function c(){d&&u&&(d=!1,u.length?l=u.concat(l):f=-1,l.length&&h())}function h(){if(!d){var e=s(c);d=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||d||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=g,t.addListener=g,t.once=g,t.off=g,t.removeListener=g,t.removeAllListeners=g,t.emit=g,t.prependListener=g,t.prependOnceListener=g,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],26:[function(e,t,n){t.exports=e(27)},{27:27}],27:[function(e,t,n){"use strict";var r=e(24),i=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n};t.exports=d;t=e(10);t.inherits=e(21);var a=e(29),o=e(31);t.inherits(d,a);for(var s=i(o.prototype),u=0;u<s.length;u++){var l=s[u];d.prototype[l]||(d.prototype[l]=o.prototype[l])}function d(e){if(!(this instanceof d))return new d(e);a.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(c,this)}function c(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},{10:10,21:21,24:24,29:29,31:31}],28:[function(e,t,n){"use strict";t.exports=i;var r=e(30),t=e(10);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}t.inherits=e(21),t.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{10:10,21:21,30:30}],29:[function(O,w,e){(function(g,e){"use strict";var _=O(24);w.exports=i;var a,m=O(23);i.ReadableState=r;function E(e,t){return e.listeners(t).length}O(11).EventEmitter;var n=O(34),s=O(39).Buffer,u=e.Uint8Array||function(){};var t=O(10);t.inherits=O(21);var o,e=O(7),y=void 0,y=e&&e.debuglog?e.debuglog("stream"):function(){},l=O(32),e=O(33);t.inherits(i,n);var d=["error","close","destroy","pause","resume"];function r(e,t){e=e||{};var n=t instanceof(a=a||O(27));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=e.readableHighWaterMark,t=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:t,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(o=o||O(42).StringDecoder,this.decoder=new o(e.encoding),this.encoding=e.encoding)}function i(e){if(a=a||O(27),!(this instanceof i))return new i(e);this._readableState=new r(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),n.call(this)}function f(e,t,n,r,i){var a,o=e._readableState;return null===t?(o.reading=!1,function(e,t){if(t.ended)return;{var n;!t.decoder||(n=t.decoder.end())&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,v(e)}(e,o)):(i||(a=function(e,t){var n;(function(e){return s.isBuffer(e)||e instanceof u})(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(o,t)),a?e.emit("error",a):o.objectMode||t&&0<t.length?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===s.prototype||(a=t,t=s.from(a)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):c(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?c(e,o,t,!1):S(e,o)):c(e,o,t,!1))):r||(o.reading=!1)),!(o=o).ended&&(o.needReadable||o.length<o.highWaterMark||0===o.length)}function c(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&v(e)),S(e,t)}Object.defineProperty(i.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),i.prototype.destroy=e.destroy,i.prototype._undestroy=e.undestroy,i.prototype._destroy=function(e,t){this.push(null),t(e)},i.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),f(this,e,t,!1,n)},i.prototype.unshift=function(e){return f(this,e,null,!0,!1)},i.prototype.isPaused=function(){return!1===this._readableState.flowing},i.prototype.setEncoding=function(e){return o=o||O(42).StringDecoder,this._readableState.decoder=new o(e),this._readableState.encoding=e,this};var h=8388608;function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(h<=(n=e)?n=h:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function v(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(y("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?_.nextTick(T,e):T(e))}function T(e){y("emit readable"),e.emit("readable"),b(e)}function S(e,t){t.readingMore||(t.readingMore=!0,_.nextTick(A,e,t))}function A(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(y("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function I(e){y("readable nexttick read 0"),e.read(0)}function R(e,t){t.reading||(y("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState;for(y("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():(n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=a.slice(o);break}++r}return t.length-=r,i}:function(e,t){var n=s.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0===(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=a.slice(o);break}++i}return t.length-=i,n})(e,t);return r}(e,t.buffer,t.decoder),n);var n}function D(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,_.nextTick(N,t,e))}function N(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}i.prototype.read=function(e){y("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return y("read: emitReadable",t.length,t.ended),(0===t.length&&t.ended?D:v)(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&D(this),null;var r=t.needReadable;return y("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&y("length less than watermark",r=!0),t.ended||t.reading?y("reading or ended",r=!1):r&&(y("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(n,t))),null===(r=0<e?M(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&D(this)),null!==r&&this.emit("data",r),r},i.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},i.prototype.pipe=function(n,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=n;break;case 1:i.pipes=[i.pipes,n];break;default:i.pipes.push(n)}i.pipesCount+=1,y("pipe count=%d opts=%j",i.pipesCount,e);e=(!e||!1!==e.end)&&n!==g.stdout&&n!==g.stderr?o:p;function a(e,t){y("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,y("cleanup"),n.removeListener("close",c),n.removeListener("finish",h),n.removeListener("drain",s),n.removeListener("error",f),n.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",p),r.removeListener("data",d),u=!0,!i.awaitDrain||n._writableState&&!n._writableState.needDrain||s())}function o(){y("onend"),n.end()}i.endEmitted?_.nextTick(e):r.once("end",e),n.on("unpipe",a);var t,s=(t=r,function(){var e=t._readableState;y("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&E(t,"data")&&(e.flowing=!0,b(t))});n.on("drain",s);var u=!1;var l=!1;function d(e){y("ondata"),(l=!1)!==n.write(e)||l||((1===i.pipesCount&&i.pipes===n||1<i.pipesCount&&-1!==C(i.pipes,n))&&!u&&(y("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function f(e){y("onerror",e),p(),n.removeListener("error",f),0===E(n,"error")&&n.emit("error",e)}function c(){n.removeListener("finish",h),p()}function h(){y("onfinish"),n.removeListener("close",c),p()}function p(){y("unpipe"),r.unpipe(n)}return r.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?m(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(n,"error",f),n.once("close",c),n.once("finish",h),n.emit("pipe",r),i.flowing||(y("pipe resume"),r.resume()),n},i.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=C(t.pipes,e);return-1===o||(t.pipes.splice(o,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},i.prototype.addListener=i.prototype.on=function(e,t){t=n.prototype.on.call(this,e,t);return"data"===e?!1!==this._readableState.flowing&&this.resume():"readable"===e&&((e=this._readableState).endEmitted||e.readableListening||(e.readableListening=e.needReadable=!0,e.emittedReadable=!1,e.reading?e.length&&v(this):_.nextTick(I,this))),t},i.prototype.resume=function(){var e,t=this._readableState;return t.flowing||(y("resume"),t.flowing=!0,e=this,(t=t).resumeScheduled||(t.resumeScheduled=!0,_.nextTick(R,e,t))),this},i.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e,n=this,r=this._readableState,i=!1;for(e in t.on("end",function(){var e;y("wrapped end"),!r.decoder||r.ended||(e=r.decoder.end())&&e.length&&n.push(e),n.push(null)}),t.on("data",function(e){y("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&(n.push(e)||(i=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var a=0;a<d.length;a++)t.on(d[a],this.emit.bind(this,d[a]));return this._read=function(e){y("wrapped _read",e),i&&(i=!1,t.resume())},this},Object.defineProperty(i.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),i._fromList=M}).call(this,O(25),"undefined"!=typeof __webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{10:10,11:11,21:21,23:23,24:24,25:25,27:27,32:32,33:33,34:34,39:39,42:42,7:7}],30:[function(e,t,n){"use strict";t.exports=i;var r=e(27),t=e(10);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e),(e=this._readableState).reading=!1,(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var n=this;"function"==typeof this._flush?this._flush(function(e,t){o(n,e,t)}):o(this,null,null)}function o(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.inherits=e(21),t.inherits(i,r),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;r.writecb=n,r.writechunk=e,r.writeencoding=t,r.transforming||(t=this._readableState,(r.needTransform||t.needReadable||t.length<t.highWaterMark)&&this._read(t.highWaterMark))},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{10:10,21:21,27:27}],31:[function(T,S,e){(function(e,t,n){"use strict";var c=T(24);function d(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}S.exports=l;var o,s=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?n:c.nextTick;l.WritableState=u;n=T(10);n.inherits=T(21);var r={deprecate:T(44)},i=T(34),h=T(39).Buffer,p=t.Uint8Array||function(){};var a,t=T(33);function g(){}function u(e,t){o=o||T(27),e=e||{};var n=t instanceof o;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=e.writableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;a=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;{(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0})(n),t?function(e,t,n,r,i){--t.pendingcb,n?(c.nextTick(i,r),c.nextTick(v,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),v(e,t))}(e,n,r,t,i):((t=E(n))||n.corked||n.bufferProcessing||!n.bufferedRequest||m(e,n),r?s(f,e,n,t,i):f(e,n,t,i))}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function l(e){if(o=o||T(27),!(a.call(l,this)||this instanceof o))return new l(e);this._writableState=new u(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),i.call(this)}function _(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function f(e,t,n,r){var i;n||(i=e,0===(n=t).length&&n.needDrain&&(n.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),v(e,t)}function m(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),r=t.corkedRequestsFree;r.entry=n;for(var a=0,o=!0;n;)(i[a]=n).isBuf||(o=!1),n=n.next,a+=1;i.allBuffers=o,_(e,t,!0,t.length,i,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new d(t),t.bufferedRequestCount=0}else{for(;n;){var s=n.chunk,u=n.encoding,l=n.callback;if(_(e,t,!1,t.objectMode?1:s.length,s,u,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function y(t,n){t._final(function(e){n.pendingcb--,e&&t.emit("error",e),n.prefinished=!0,t.emit("prefinish"),v(t,n)})}function v(e,t){var n,r,i=E(t);return i&&(n=e,(r=t).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,c.nextTick(y,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}n.inherits(l,i),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===l&&(e&&e._writableState instanceof u)}})):a=function(e){return e instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(e,t,n){var r,i,a,o,s,u,l=this._writableState,d=!1,f=!l.objectMode&&(i=e,h.isBuffer(i)||i instanceof p);return f&&!h.isBuffer(e)&&(a=e,e=h.from(a)),"function"==typeof t&&(n=t,t=null),t=f?"buffer":t||l.defaultEncoding,"function"!=typeof n&&(n=g),l.ended?(o=this,s=n,u=new Error("write after end"),o.emit("error",u),c.nextTick(s,u)):(f||(r=this,i=l,a=n,s=!(o=!0),null===(u=e)?s=new TypeError("May not write null values to stream"):"string"==typeof u||void 0===u||i.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(r.emit("error",s),c.nextTick(a,s),o=!1),o))&&(l.pendingcb++,d=function(e,t,n,r,i,a){{n||(u=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n));return t}(t,r,i),r!==u&&(n=!0,i="buffer",r=u))}var o=t.objectMode?1:r.length;t.length+=o;var s=t.length<t.highWaterMark;s||(t.needDrain=!0);{var u;t.writing||t.corked?(u=t.lastBufferedRequest,t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):_(e,t,!1,o,r,i,a)}return s}(this,l,f,e,t,n)),d},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||m(this,e))},l.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),l.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,v(e,t),n&&(t.finished?c.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=t.destroy,l.prototype._undestroy=t.undestroy,l.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,T(25),"undefined"!=typeof __webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},T(43).setImmediate)},{10:10,21:21,24:24,25:25,27:27,33:33,34:34,39:39,43:43,44:44}],32:[function(e,t,n){"use strict";var s=e(39).Buffer,r=e(7);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.head=null,this.tail=null,this.length=0}t.exports=(i.prototype.push=function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},i.prototype.unshift=function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},i.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},i.prototype.concat=function(e){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var t,n,r,i=s.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=a.data,n=i,r=o,t.copy(n,r),o+=a.data.length,a=a.next;return i},i),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},{39:39,7:7}],33:[function(e,t,n){"use strict";var a=e(24);function o(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a.nextTick(o,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{24:24}],34:[function(e,t,n){t.exports=e(11).EventEmitter},{11:11}],35:[function(e,t,n){t.exports=e(36).PassThrough},{36:36}],36:[function(e,t,n){(((n=t.exports=e(29)).Stream=n).Readable=n).Writable=e(31),n.Duplex=e(27),n.Transform=e(30),n.PassThrough=e(28)},{27:27,28:28,29:29,30:30,31:31}],37:[function(e,t,n){t.exports=e(36).Transform},{36:36}],38:[function(e,t,n){t.exports=e(31)},{31:31}],39:[function(e,t,n){var r=e(8),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,n),n.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=i(e);return void 0!==t?"string"==typeof n?e.fill(t,n):e.fill(t):e.fill(0),e},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{8:8}],40:[function(G,e,t){(function(k){!function(s){s.parser=function(e,t){return new i(e,t)},s.SAXParser=i,s.SAXStream=o,s.createStream=function(e,t){return new o(e,t)},s.MAX_BUFFER_LENGTH=65536;var r,u=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function i(e,t){if(!(this instanceof i))return new i(e,t);var n=this;!function(e){for(var t=0,n=u.length;t<n;t++)e[u[t]]=""}(n),n.q=n.c="",n.bufferCheckPosition=s.MAX_BUFFER_LENGTH,n.opt=t||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!e,n.noscript=!(!e&&!n.opt.noscript),n.state=R.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(s.XML_ENTITIES):Object.create(s.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(g)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),b(n,"onready")}s.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}),i.prototype={end:function(){O(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return C(t,"Cannot write after close. Assign an onready handler.");if(null===e)return O(t);"object"==typeof e&&(e=e.toString());var n,r,i=0,a="";for(;a=B(e,i++),t.c=a;)switch(t.trackPosition&&(t.position++,"\n"===a?(t.line++,t.column=0):t.column++),t.state){case R.BEGIN:if(t.state=R.BEGIN_WHITESPACE,"\ufeff"===a)continue;U(t,a);continue;case R.BEGIN_WHITESPACE:U(t,a);continue;case R.TEXT:if(t.sawRoot&&!t.closedRoot){for(var o=i-1;a&&"<"!==a&&"&"!==a;)(a=B(e,i++))&&t.trackPosition&&(t.position++,"\n"===a?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(o,i-1)}"<"!==a||t.sawRoot&&t.closedRoot&&!t.strict?(!S(_,a)||t.sawRoot&&!t.closedRoot||w(t,"Text data outside of root node."),"&"===a?t.state=R.TEXT_ENTITY:t.textNode+=a):(t.state=R.OPEN_WAKA,t.startTagPosition=t.position);continue;case R.SCRIPT:"<"===a?t.state=R.SCRIPT_ENDING:t.script+=a;continue;case R.SCRIPT_ENDING:"/"===a?t.state=R.CLOSE_TAG:(t.script+="<"+a,t.state=R.SCRIPT);continue;case R.OPEN_WAKA:"!"===a?(t.state=R.SGML_DECL,t.sgmlDecl=""):T(_,a)||(T(m,a)?(t.state=R.OPEN_TAG,t.tagName=a):"/"===a?(t.state=R.CLOSE_TAG,t.tagName=""):"?"===a?(t.state=R.PROC_INST,t.procInstName=t.procInstBody=""):(w(t,"Unencoded <"),t.startTagPosition+1<t.position&&(o=t.position-t.startTagPosition,a=new Array(o).join(" ")+a),t.textNode+="<"+a,t.state=R.TEXT));continue;case R.SGML_DECL:(t.sgmlDecl+a).toUpperCase()===f?(M(t,"onopencdata"),t.state=R.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+a==="--"?(t.state=R.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+a).toUpperCase()===c?(t.state=R.DOCTYPE,(t.doctype||t.sawRoot)&&w(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===a?(M(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=R.TEXT):(T(l,a)&&(t.state=R.SGML_DECL_QUOTED),t.sgmlDecl+=a);continue;case R.SGML_DECL_QUOTED:a===t.q&&(t.state=R.SGML_DECL,t.q=""),t.sgmlDecl+=a;continue;case R.DOCTYPE:">"===a?(t.state=R.TEXT,M(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=a,"["===a?t.state=R.DOCTYPE_DTD:T(l,a)&&(t.state=R.DOCTYPE_QUOTED,t.q=a));continue;case R.DOCTYPE_QUOTED:t.doctype+=a,a===t.q&&(t.q="",t.state=R.DOCTYPE);continue;case R.DOCTYPE_DTD:t.doctype+=a,"]"===a?t.state=R.DOCTYPE:T(l,a)&&(t.state=R.DOCTYPE_DTD_QUOTED,t.q=a);continue;case R.DOCTYPE_DTD_QUOTED:t.doctype+=a,a===t.q&&(t.state=R.DOCTYPE_DTD,t.q="");continue;case R.COMMENT:"-"===a?t.state=R.COMMENT_ENDING:t.comment+=a;continue;case R.COMMENT_ENDING:"-"===a?(t.state=R.COMMENT_ENDED,t.comment=N(t.opt,t.comment),t.comment&&M(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+a,t.state=R.COMMENT);continue;case R.COMMENT_ENDED:">"!==a?(w(t,"Malformed comment"),t.comment+="--"+a,t.state=R.COMMENT):t.state=R.TEXT;continue;case R.CDATA:"]"===a?t.state=R.CDATA_ENDING:t.cdata+=a;continue;case R.CDATA_ENDING:"]"===a?t.state=R.CDATA_ENDING_2:(t.cdata+="]"+a,t.state=R.CDATA);continue;case R.CDATA_ENDING_2:">"===a?(t.cdata&&M(t,"oncdata",t.cdata),M(t,"onclosecdata"),t.cdata="",t.state=R.TEXT):"]"===a?t.cdata+="]":(t.cdata+="]]"+a,t.state=R.CDATA);continue;case R.PROC_INST:"?"===a?t.state=R.PROC_INST_ENDING:T(_,a)?t.state=R.PROC_INST_BODY:t.procInstName+=a;continue;case R.PROC_INST_BODY:if(!t.procInstBody&&T(_,a))continue;"?"===a?t.state=R.PROC_INST_ENDING:t.procInstBody+=a;continue;case R.PROC_INST_ENDING:">"===a?(M(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=R.TEXT):(t.procInstBody+="?"+a,t.state=R.PROC_INST_BODY);continue;case R.OPEN_TAG:T(E,a)?t.tagName+=a:(function(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns);e.attribList.length=0,M(e,"onopentagstart",n)}(t),">"===a?x(t):"/"===a?t.state=R.OPEN_TAG_SLASH:(S(_,a)&&w(t,"Invalid character in tag name"),t.state=R.ATTRIB));continue;case R.OPEN_TAG_SLASH:">"===a?(x(t,!0),F(t)):(w(t,"Forward-slash in opening tag not followed by >"),t.state=R.ATTRIB);continue;case R.ATTRIB:if(T(_,a))continue;">"===a?x(t):"/"===a?t.state=R.OPEN_TAG_SLASH:T(m,a)?(t.attribName=a,t.attribValue="",t.state=R.ATTRIB_NAME):w(t,"Invalid attribute name");continue;case R.ATTRIB_NAME:"="===a?t.state=R.ATTRIB_VALUE:">"===a?(w(t,"Attribute without value"),t.attribValue=t.attribName,L(t),x(t)):T(_,a)?t.state=R.ATTRIB_NAME_SAW_WHITE:T(E,a)?t.attribName+=a:w(t,"Invalid attribute name");continue;case R.ATTRIB_NAME_SAW_WHITE:if("="===a)t.state=R.ATTRIB_VALUE;else{if(T(_,a))continue;w(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",M(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===a?x(t):T(m,a)?(t.attribName=a,t.state=R.ATTRIB_NAME):(w(t,"Invalid attribute name"),t.state=R.ATTRIB)}continue;case R.ATTRIB_VALUE:if(T(_,a))continue;T(l,a)?(t.q=a,t.state=R.ATTRIB_VALUE_QUOTED):(w(t,"Unquoted attribute value"),t.state=R.ATTRIB_VALUE_UNQUOTED,t.attribValue=a);continue;case R.ATTRIB_VALUE_QUOTED:if(a!==t.q){"&"===a?t.state=R.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=a;continue}L(t),t.q="",t.state=R.ATTRIB_VALUE_CLOSED;continue;case R.ATTRIB_VALUE_CLOSED:T(_,a)?t.state=R.ATTRIB:">"===a?x(t):"/"===a?t.state=R.OPEN_TAG_SLASH:T(m,a)?(w(t,"No whitespace between attributes"),t.attribName=a,t.attribValue="",t.state=R.ATTRIB_NAME):w(t,"Invalid attribute name");continue;case R.ATTRIB_VALUE_UNQUOTED:if(S(d,a)){"&"===a?t.state=R.ATTRIB_VALUE_ENTITY_U:t.attribValue+=a;continue}L(t),">"===a?x(t):t.state=R.ATTRIB;continue;case R.CLOSE_TAG:if(t.tagName)">"===a?F(t):T(E,a)?t.tagName+=a:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=R.SCRIPT):(S(_,a)&&w(t,"Invalid tagname in closing tag"),t.state=R.CLOSE_TAG_SAW_WHITE);else{if(T(_,a))continue;S(m,a)?t.script?(t.script+="</"+a,t.state=R.SCRIPT):w(t,"Invalid tagname in closing tag."):t.tagName=a}continue;case R.CLOSE_TAG_SAW_WHITE:if(T(_,a))continue;">"===a?F(t):w(t,"Invalid characters in closing tag");continue;case R.TEXT_ENTITY:case R.ATTRIB_VALUE_ENTITY_Q:case R.ATTRIB_VALUE_ENTITY_U:switch(t.state){case R.TEXT_ENTITY:n=R.TEXT,r="textNode";break;case R.ATTRIB_VALUE_ENTITY_Q:n=R.ATTRIB_VALUE_QUOTED,r="attribValue";break;case R.ATTRIB_VALUE_ENTITY_U:n=R.ATTRIB_VALUE_UNQUOTED,r="attribValue"}";"===a?(t[r]+=function(e){var t,n=e.entity,r=n.toLowerCase(),i="";if(e.ENTITIES[n])return e.ENTITIES[n];if(e.ENTITIES[r])return e.ENTITIES[r];"#"===(n=r).charAt(0)&&(i="x"===n.charAt(1)?(n=n.slice(2),(t=parseInt(n,16)).toString(16)):(n=n.slice(1),(t=parseInt(n,10)).toString(10)));return n=n.replace(/^0+/,""),i.toLowerCase()===n?String.fromCodePoint(t):(w(e,"Invalid character entity"),"&"+e.entity+";")}(t),t.entity="",t.state=n):T(t.entity.length?v:y,a)?t.entity+=a:(w(t,"Invalid character in entity name"),t[r]+="&"+t.entity+a,t.entity="",t.state=n);continue;default:throw new Error(t,"Unknown state: "+t.state)}t.position>=t.bufferCheckPosition&&function(e){for(var t=Math.max(s.MAX_BUFFER_LENGTH,10),n=0,r=0,i=u.length;r<i;r++){var a=e[u[r]].length;if(t<a)switch(u[r]){case"textNode":D(e);break;case"cdata":M(e,"oncdata",e.cdata),e.cdata="";break;case"script":M(e,"onscript",e.script),e.script="";break;default:C(e,"Max buffer length exceeded: "+u[r])}n=Math.max(n,a)}var o=s.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=o+e.position}(t);return t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;D(e=this),""!==e.cdata&&(M(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(M(e,"onscript",e.script),e.script="")}};try{r=G(41).Stream}catch(e){r=function(){}}var a=s.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function o(e,t){if(!(this instanceof o))return new o(e,t);r.apply(this),this._parser=new i(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,a.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e;n.on(t,e)},enumerable:!0,configurable:!1})})}(o.prototype=Object.create(r.prototype,{constructor:{value:o}})).write=function(e){var t;return"function"==typeof k&&"function"==typeof k.isBuffer&&k.isBuffer(e)&&(this._decoder||(t=G(42).StringDecoder,this._decoder=new t("utf8")),e=this._decoder.write(e)),this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===a.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),r.prototype.on.call(n,t,e)};var l="'\"",d=(_="\r\n\t ")+">",f="[CDATA[",c="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",g={xml:h,xmlns:p},_=e(_),m=(e("0124356789"),e("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function e(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function T(e,t){return n=e,"[object RegExp]"===Object.prototype.toString.call(n)?t.match(e):e[t];var n}function S(e,t){return!T(e,t)}l=e(l),d=e(d);var t,A,I,R=0;for(t in s.STATE={BEGIN:R++,BEGIN_WHITESPACE:R++,TEXT:R++,TEXT_ENTITY:R++,OPEN_WAKA:R++,SGML_DECL:R++,SGML_DECL_QUOTED:R++,DOCTYPE:R++,DOCTYPE_QUOTED:R++,DOCTYPE_DTD:R++,DOCTYPE_DTD_QUOTED:R++,COMMENT_STARTING:R++,COMMENT:R++,COMMENT_ENDING:R++,COMMENT_ENDED:R++,CDATA:R++,CDATA_ENDING:R++,CDATA_ENDING_2:R++,PROC_INST:R++,PROC_INST_BODY:R++,PROC_INST_ENDING:R++,OPEN_TAG:R++,OPEN_TAG_SLASH:R++,ATTRIB:R++,ATTRIB_NAME:R++,ATTRIB_NAME_SAW_WHITE:R++,ATTRIB_VALUE:R++,ATTRIB_VALUE_QUOTED:R++,ATTRIB_VALUE_CLOSED:R++,ATTRIB_VALUE_UNQUOTED:R++,ATTRIB_VALUE_ENTITY_Q:R++,ATTRIB_VALUE_ENTITY_U:R++,CLOSE_TAG:R++,CLOSE_TAG_SAW_WHITE:R++,SCRIPT:R++,SCRIPT_ENDING:R++},s.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},s.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(s.ENTITIES).forEach(function(e){var t=s.ENTITIES[e],t="number"==typeof t?String.fromCharCode(t):t;s.ENTITIES[e]=t}),s.STATE)s.STATE[s.STATE[t]]=t;function b(e,t,n){e[t]&&e[t](n)}function M(e,t,n){e.textNode&&D(e),b(e,t,n)}function D(e){e.textNode=N(e.opt,e.textNode),e.textNode&&b(e,"ontext",e.textNode),e.textNode=""}function N(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function C(e,t){return D(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,b(e,"onerror",t),e}function O(e){return e.sawRoot&&!e.closedRoot&&w(e,"Unclosed root tag"),e.state!==R.BEGIN&&e.state!==R.BEGIN_WHITESPACE&&e.state!==R.TEXT&&C(e,"Unexpected end"),D(e),e.c="",e.closed=!0,b(e,"onend"),i.call(e,e.strict,e.opt),e}function w(e,t){if("object"!=typeof e||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&C(e,t)}function P(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],n=n[1];return t&&"xmlns"===e&&(r="xmlns",n=""),{prefix:r,local:n}}function L(e){var t,n,r;e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName)||(e.opt.xmlns?(r=(n=P(e.attribName,!0)).prefix,t=n.local,"xmlns"===r&&("xml"===t&&e.attribValue!==h?w(e,"xml: prefix must be bound to "+h+"\nActual: "+e.attribValue):"xmlns"===t&&e.attribValue!==p?w(e,"xmlns: prefix must be bound to "+p+"\nActual: "+e.attribValue):(n=e.tag,r=e.tags[e.tags.length-1]||e,n.ns===r.ns&&(n.ns=Object.create(r.ns)),n.ns[t]=e.attribValue)),e.attribList.push([e.attribName,e.attribValue])):(e.tag.attributes[e.attribName]=e.attribValue,M(e,"onattribute",{name:e.attribName,value:e.attribValue}))),e.attribName=e.attribValue=""}function x(t,e){if(t.opt.xmlns){var n=t.tag,r=P(t.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(w(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix);r=t.tags[t.tags.length-1]||t;n.ns&&r.ns!==n.ns&&Object.keys(n.ns).forEach(function(e){M(t,"onopennamespace",{prefix:e,uri:n.ns[e]})});for(var i=0,a=t.attribList.length;i<a;i++){var o=t.attribList[i],s=o[0],u=o[1],l=P(s,!0),d=l.prefix,o=l.local,l=""!==d&&n.ns[d]||"",o={name:s,value:u,prefix:d,local:o,uri:l};d&&"xmlns"!==d&&!l&&(w(t,"Unbound namespace prefix: "+JSON.stringify(d)),o.uri=d),t.tag.attributes[s]=o,M(t,"onattribute",o)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),M(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=R.TEXT:t.state=R.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function F(n){if(!n.tagName)return w(n,"Weird empty close tag."),n.textNode+="</>",void(n.state=R.TEXT);if(n.script){if("script"!==n.tagName)return n.script+="</"+n.tagName+">",n.tagName="",void(n.state=R.SCRIPT);M(n,"onscript",n.script),n.script=""}var e=n.tags.length,t=n.tagName;n.strict||(t=t[n.looseCase]());for(var r=t;e--;){if(n.tags[e].name===r)break;w(n,"Unexpected close tag")}if(e<0)return w(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",void(n.state=R.TEXT);n.tagName=t;for(var i=n.tags.length;i-- >e;){var a=n.tag=n.tags.pop();n.tagName=n.tag.name,M(n,"onclosetag",n.tagName);var o,s={};for(o in a.ns)s[o]=a.ns[o];var u=n.tags[n.tags.length-1]||n;n.opt.xmlns&&a.ns!==u.ns&&Object.keys(a.ns).forEach(function(e){var t=a.ns[e];M(n,"onclosenamespace",{prefix:e,uri:t})})}0===e&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=R.TEXT}function U(e,t){"<"===t?(e.state=R.OPEN_WAKA,e.startTagPosition=e.position):S(_,t)&&(w(e,"Non-whitespace before first tag."),e.textNode=t,e.state=R.TEXT)}function B(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function n(){var e,t=[],n=-1,r=arguments.length;if(!r)return"";for(var i="";++n<r;){var a=Number(arguments[n]);if(!isFinite(a)||a<0||1114111<a||I(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?t.push(a):(e=55296+((a-=65536)>>10),a=a%1024+56320,t.push(e,a)),(n+1===r||16384<t.length)&&(i+=A.apply(null,t),t.length=0)}return i}R=s.STATE,String.fromCodePoint||(A=String.fromCharCode,I=Math.floor,Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n)}(void 0===t?this.sax={}:t)}).call(this,G(8).Buffer)},{41:41,42:42,8:8}],41:[function(e,t,n){t.exports=r;var d=e(11).EventEmitter;function r(){d.call(this)}e(21)(r,d),r.Readable=e(36),r.Writable=e(38),r.Duplex=e(26),r.Transform=e(37),r.PassThrough=e(35),(r.Stream=r).prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",o),n.on("close",s));var a=!1;function o(){a||(a=!0,t.end())}function s(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function u(e){if(l(),0===d.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",s),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",u),t.on("error",u),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},{11:11,21:21,26:26,35:35,36:36,37:37,38:38}],42:[function(e,t,n){"use strict";var r=e(39).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=l,this.end=d,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=f,this.end=c,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var n=e.toString("utf16le",t);if(n){t=n.charCodeAt(n.length-1);if(55296<=t&&t<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){e=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,e)}return t}function f(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}(n.StringDecoder=o).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"�":e},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(0<=i)return 0<i&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(0<=(i=s(t[r])))return 0<i&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(0<=(i=s(t[r])))return 0<i&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;n=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{39:39}],43:[function(u,e,l){(function(e,t){var r=u(25).nextTick,n=Function.prototype.apply,i=Array.prototype.slice,a={},o=0;function s(e,t){this._id=e,this._clearFn=t}l.setTimeout=function(){return new s(n.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new s(n.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(e){e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},l.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},l._unrefActive=l.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},l.setImmediate="function"==typeof e?e:function(e){var t=o++,n=!(arguments.length<2)&&i.call(arguments,1);return a[t]=!0,r(function(){a[t]&&(n?e.apply(null,n):e.call(null),l.clearImmediate(t))}),t},l.clearImmediate="function"==typeof t?t:function(e){delete a[e]}}).call(this,u(43).setImmediate,u(43).clearImmediate)},{25:25,43:43}],44:[function(e,n,t){(function(t){function r(e){try{if(!t.localStorage)return}catch(e){return}e=t.localStorage[e];return null!=e&&"true"===String(e).toLowerCase()}n.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof __webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),h=r(e(54)),a=r(e(47)),o=1,p=2,g=3,_=4,m=5;function s(e){e=e||{};var t=this.context,s=(0,i.default)(t).getInstance(),u=e.settings,l=[],e=void 0,d=void 0,f=void 0,c=void 0;function n(e){return(e&&e.bind?e:window.console.log).bind(window.console)}function r(e,t){var n,r="";d&&(n=(new Date).getTime(),r+="["+(n-c)+"]"),f&&t&&t.getClassName&&(r+="["+t.getClassName()+"]",t.getType&&(r+="["+t.getType()+"]")),0<r.length&&(r+=" ");for(var i=arguments.length,a=Array(2<i?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];Array.apply(null,a).forEach(function(e){r+=e+" "}),l[e]&&u.get().debug.logLevel>=e&&l[e](r),u&&u.get().debug.dispatchEvent&&s.trigger(h.default.LOG,{message:r,level:e})}return e={getLogger:function(e){return{fatal:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[o,this].concat(t))}.bind(e),error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[p,this].concat(t))}.bind(e),warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[g,this].concat(t))}.bind(e),info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[_,this].concat(t))}.bind(e),debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[m,this].concat(t))}.bind(e)}},setLogTimestampVisible:function(e){d=e},setCalleeNameVisible:function(e){f=e}},f=d=!0,c=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(l[o]=n(window.console.error),l[p]=n(window.console.error),l[g]=n(window.console.warn),l[_]=n(window.console.info),l[m]=n(window.console.debug)),e}s.__dashjs_factory_name="Debug";e=a.default.getSingletonFactory(s);e.LOG_LEVEL_NONE=0,e.LOG_LEVEL_FATAL=o,e.LOG_LEVEL_ERROR=p,e.LOG_LEVEL_WARNING=g,e.LOG_LEVEL_INFO=_,e.LOG_LEVEL_DEBUG=m,a.default.updateSingletonFactory(s.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{46:46,47:47,54:54}],46:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(104));function o(){var o={};function s(e,n,r){var i=-1;return o[e]&&o[e].some(function(e,t){if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0}),i}return{on:function(n,e,t){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(!n)throw new Error("event type cannot be null or undefined");if(!e||"function"!=typeof e)throw new Error("listener must be a function: "+e);var i,a=r.priority||0;0<=s(n,e,t)||(o[n]=o[n]||[],i={callback:e,scope:t,priority:a},t&&t.getStreamId&&(i.streamId=t.getStreamId()),t&&t.getType&&(i.mediaType=t.getType()),r&&r.mode&&(i.mode=r.mode),o[n].some(function(e,t){if(e&&a>e.priority)return o[n].splice(t,0,i),!0})||o[n].push(i))},off:function(e,t,n){e&&t&&o[e]&&((n=s(e,t,n))<0||(o[e][n]=null))},trigger:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(e&&o[e]){if((t=t||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,n.streamId&&(t.streamId=n.streamId),n.mediaType&&(t.mediaType=n.mediaType),o[e].filter(function(e){return!!e&&((!n.streamId||!e.streamId||e.streamId===n.streamId)&&((!n.mediaType||!e.mediaType||e.mediaType===n.mediaType)&&!(n.mode&&e.mode&&e.mode!==n.mode||!e.mode&&n.mode&&n.mode===a.default.EVENT_MODE_ON_RECEIVE)))}).forEach(function(e){return e&&e.callback.call(e.scope,t)})}},reset:function(){o={}}}}o.__dashjs_factory_name="EventBus";e=i.default.getSingletonFactory(o);e.EVENT_PRIORITY_LOW=0,e.EVENT_PRIORITY_HIGH=5e3,i.default.updateSingletonFactory(o.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{104:104,47:47}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var u,a,r,i,o=(u=void 0,a=[],r={},i={},u={extend:function(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n})},getSingletonInstance:s,setSingletonInstance:function(e,t,n){for(var r in a){var i=a[r];if(i.context===e&&i.name===t)return void(a[r].instance=n)}a.push({name:t,context:e,instance:n})},deleteSingletonInstances:function(t){a=a.filter(function(e){return e.context!==t})},getSingletonFactory:function(n){var e=l(n.__dashjs_factory_name,r);return e||(e=function(e){var t=void 0;return void 0===e&&(e={}),{getInstance:function(){return(t=t||s(e,n.__dashjs_factory_name))||(t=f(n,e,arguments),a.push({name:n.__dashjs_factory_name,context:e,instance:t})),t}}},r[n.__dashjs_factory_name]=e),e},getSingletonFactoryByName:function(e){return r[e]},updateSingletonFactory:function(e,t){d(e,t,r)},getClassFactory:function(t){var e=l(t.__dashjs_factory_name,i);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return f(t,e,arguments)}}},i[t.__dashjs_factory_name]=e),e},getClassFactoryByName:function(e){return i[e]},updateClassFactory:function(e,t){d(e,t,i)}});function s(e,t){for(var n in a){var r=a[n];if(r.context===e&&r.name===t)return r.instance}return null}function l(e,t){return t[e]}function d(e,t,n){e in n&&(n[e]=t)}function f(e,t,n){var r=void 0,i=e.__dashjs_factory_name,a=t[i];if(a){var o,s=a.instance;if(!a.override)return s.apply({context:t,factory:u},n);for(o in r=e.apply({context:t},n),s=s.apply({context:t,factory:u,parent:r},n))r.hasOwnProperty(o)&&(r[o]=s[o])}else r=e.apply({context:t},n);return r.getClassName=function(){return i},r}n.default=o,t.exports=n.default},{}],48:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(47)),o=r(e(49)),s=r(e(45)),u=r(e(112)),l=e(255);function d(){var e,t={debug:{logLevel:s.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{metricsMaxListDepth:1e3,abandonLoadTimeout:1e4,liveDelayFragmentCount:NaN,liveDelay:null,scheduleWhilePaused:!0,fastSwitchEnabled:!1,flushBufferAtTrackSwitch:!1,calcSegmentAvailabilityRangeFromTimeline:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,stableBufferTime:12,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,longFormContentDurationThreshold:600,wallclockTimeUpdateInterval:50,lowLatencyEnabled:!1,keepProtectionMediaKeys:!1,useManifestDateHeaderTimeSource:!0,useSuggestedPresentationDelay:!0,useAppendWindow:!0,manifestUpdateRetryInterval:100,stallThreshold:.5,filterUnsupportedEssentialProperties:!0,eventControllerRefreshDelay:100,utcSynchronization:{backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"}},liveCatchup:{minDrift:.02,maxDrift:0,playbackRate:.5,latencyThreshold:60,playbackBufferMin:.5,enabled:!1,mode:u.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:u.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:u.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:u.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE,fragmentRequestTimeout:0,retryIntervals:(i(e={},l.HTTPRequest.MPD_TYPE,500),i(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,500),i(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.INIT_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.OTHER_TYPE,1e3),i(e,"lowLatencyReductionFactor",10),e),retryAttempts:(i(e={},l.HTTPRequest.MPD_TYPE,3),i(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,1),i(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,3),i(e,l.HTTPRequest.INIT_SEGMENT_TYPE,3),i(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),i(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,3),i(e,l.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),i(e,l.HTTPRequest.OTHER_TYPE,3),i(e,"lowLatencyMultiplyFactor",5),e),abr:{movingAverageMethod:u.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:u.default.ABR_STRATEGY_DYNAMIC,bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:u.default.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:u.default.CMCD_MODE_QUERY}}},n=o.default.clone(t);return{get:function(){return n},update:function(e){"object"==typeof e&&!function e(t,n,r){for(var i in t)t.hasOwnProperty(i)&&n.hasOwnProperty(i)&&("object"==typeof t[i]&&null!==t[i]?e(t[i],n[i],r.slice()+i+"."):n[i]=o.default.clone(t[i]))}(e,n,"")},reset:function(){n=o.default.clone(t)}}}d.__dashjs_factory_name="Settings";a=a.default.getSingletonFactory(d);n.default=a,t.exports=n.default},{112:112,255:255,45:45,47:47,49:49}],49:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(o,null,[{key:"mixin",value:function(e,t,n){var r,i={};if(e)for(var a in t)t.hasOwnProperty(a)&&(r=t[a],a in e&&(e[a]===r||a in i&&i[a]===r)||("object"==typeof e[a]&&null!==e[a]?e[a]=o.mixin(e[a],r,n):e[a]=n(r)));return e}},{key:"clone",value:function(e){if(!e||"object"!=typeof e)return e;var t=void 0;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;++n)n in e&&t.push(o.clone(e[n]))}else t={};return o.mixin(t,e,o.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(n,e){try{var t=function(){if(!e||0===e.length)return{v:n};var t=new URL(n);return e.forEach(function(e){e.key&&e.value&&t.searchParams.set(e.key,e.value)}),{v:t.href}}();if("object"==typeof t)return t.v}catch(e){return n}}},{key:"parseHttpHeaders",value:function(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],o=a.indexOf(": ");0<o&&(t[a.substring(0,o)]=a.substring(o+2))}return t}},{key:"generateUuid",value:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)})}},{key:"generateHashCode",value:function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n);t|=0}return t}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}n.default=i,t.exports=n.default},{}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=function(){return r};var r="3.2.2"},{}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};var i,a=e(52);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : "}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((i=a)&&i.__esModule?i:{default:i})["default"]),o);n.default=e,t.exports=n.default},{52:52}],52:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"extend",value:function(e,t){if(e){var n,r=!!t&&t.override,i=!!t&&t.publicOnly;for(n in e)!e.hasOwnProperty(n)||this[n]&&!r||i&&-1===e[n].indexOf("public_")||(this[n]=e[n])}}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}n.default=i,t.exports=n.default},{}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};var i,a=e(55),e=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((i=a)&&i.__esModule?i:{default:i})["default"]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INBAND_EVENTS="inbandEvents",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATE_STARTED="representationUpdateStarted",this.REPRESENTATION_UPDATE_COMPLETED="representationUpdateCompleted",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady",this.SEGMENTBASE_INIT_REQUEST_NEEDED="segmentBaseInitRequestNeeded",this.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED="segmentBaseSegmentsListRequestNeeded",this.SEEK_TARGET="seekTarget"}n.default=e,t.exports=n.default},{55:55}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};var i,a=e(53);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).apply(this,arguments)}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((i=a)&&i.__esModule?i:{default:i})["default"]),o);n.default=e,t.exports=n.default},{53:53}],55:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"extend",value:function(e,t){if(e){var n,r=!!t&&t.override,i=!!t&&t.publicOnly;for(n in e)!e.hasOwnProperty(n)||this[n]&&!r||i&&-1===e[n].indexOf("public_")||(this[n]=e[n])}}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}n.default=i,t.exports=n.default},{}],56:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(61)),g=r(e(95)),_=r(e(90)),b=r(e(98)),M=r(e(89)),D=r(e(87)),i=r(e(47)),N=r(e(65)),C=r(e(66));function a(){var e,m=void 0,a=void 0,E=void 0,y=void 0,u=void 0,v=void 0,i=void 0,t=this.context;function o(e,t,n){var r,i=m.getAdaptationsForType(E[0].mpd.manifest,e,t);if(!i||0===i.length)return null;if(1<i.length&&n){var a=l(n,t);if(u[n.id]&&u[n.id][t])for(var o=0,s=i.length;o<s;o++)if(function(e,t){if(!e||!t)return!1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),t=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&t}(u[n.id][t],a[o]))return i[o];for(o=0,s=i.length;o<s;o++)if(r=i[o],m.getRolesForAdaptation(r).filter(function(e){return e.value===p.default.MAIN})[0])return i[o]}return i[0]}function l(e,t,n){var r,i,a,o=E,s=n,u=[],l=void 0,d=void 0,f=void 0,c=void 0;if(s)R(),o=T(s);else{if(!(0<E.length))return u;s=E[0].mpd.manifest}o=S(e,o);o&&(c=o.id);var h=m.getAdaptationsForType(s,e?e.index:null,t!==v.EMBEDDED_TEXT?t:v.VIDEO);if(!h||0===h.length)return u;for(y[c]=y[c]||m.getAdaptationsForPeriod(o),d=0,a=h.length;d<a;d++)if(r=h[d],i=m.getIndexForAdaptation(r,s,e.index),l=A(y[c][i]),t===v.EMBEDDED_TEXT){for(var p=l.accessibility.length,f=0;f<p;f++)if(l){var g=l.accessibility[f];if(0===g.indexOf("cea-608:")){var _=g.substring(8).split(";");if("CC"===_[0].substring(0,2))for(f=0;f<_.length;f++)I(l=l||A.call(this,y[c][i]),_[f].substring(0,3),_[f].substring(4)),u.push(l),l=null;else for(f=0;f<_.length;f++)I(l=l||A.call(this,y[c][i]),"CC"+(f+1),_[f]),u.push(l),l=null}else 0===g.indexOf("cea-608")&&(I(l,v.CC1,"eng"),u.push(l),l=null)}}else t===v.IMAGE?(l.type=v.IMAGE,u.push(l),l=null):l&&u.push(l);return u}function T(e){e=n(e);return m.getRegularPeriods(e)}function n(e){e=s(e);return m.getMpd(e)}function r(){E=[],y={},u={}}function s(e){return e||(0<E.length?E[0].mpd.manifest:null)}function d(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&y[e.streamInfo.id]?y[e.streamInfo.id][e.index]:null}function S(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e&&e.id===i.id)return i}return null}function A(e){if(!e)return null;var t,r=new _.default,n=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return r.id=e.id,r.index=e.index,r.type=e.type,r.streamInfo=f(e.period),r.representationCount=m.getRepresentationCount(n),r.labels=m.getLabelsForAdaptation(n),r.lang=m.getLanguageForAdaptation(n),t=m.getViewpointForAdaptation(n),r.viewpoint=t?t.value:void 0,r.accessibility=m.getAccessibilityForAdaptation(n).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==i&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n}),r.audioChannelConfiguration=m.getAudioChannelConfigurationForAdaptation(n).map(function(e){return e.value}),0===r.audioChannelConfiguration.length&&Array.isArray(n.Representation_asArray)&&0<n.Representation_asArray.length&&(r.audioChannelConfiguration=m.getAudioChannelConfigurationForRepresentation(n.Representation_asArray[0]).map(function(e){return e.value})),r.roles=m.getRolesForAdaptation(n).map(function(e){return e.value}),r.codec=m.getCodec(n),r.mimeType=m.getMimeType(n),r.contentProtection=m.getContentProtectionData(n),r.bitrateList=m.getBitrateListForAdaptation(n),r.contentProtection&&r.contentProtection.forEach(function(e){e.KID=m.getKID(e)}),r.isText=m.getIsTextTrack(r.mimeType),r.supplementalProperties=m.getSupplementalPropperties(n),r}function I(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=v.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=n,e.roles=["caption"]}function f(e){var t,n,r=new b.default;return r.id=e.id,r.index=e.index,r.start=e.start,r.duration=e.duration,r.manifestInfo=(t=e.mpd,(n=new M.default).DVRWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=m.getDuration(t.manifest),n.isDynamic=m.getIsDynamic(t.manifest),n.serviceDescriptions=m.getServiceDescriptions(t.manifest),n.protocol=t.manifest.protocol,n),r.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(r.start+r.duration-r.manifestInfo.duration)<1,r}function R(){if(!v)throw new Error("setConfig function has to be called previously")}function c(e){return 0<E.length?E[0].mpd.manifest.Period_asArray[e]:null}function h(e,t,n){var r,i,a,o=void 0,s=void 0;if(e)for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)for(a=r[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(i=a[s]).id)return n?s:i;return null}return e={getBandwidthForRepresentation:function(e,t){var n=void 0;return(n=h(c(t),e))?n.bandwidth:null},getIndexForRepresentation:function(e,t){return function(e,t){t=h(e,t,!0);return null!==t?t:-1}(c(t),e)},getMaxIndexForBufferType:function(e,t){return function(e,t){var n=void 0,r=void 0,i=void 0,a=void 0;if(!e||!t)return-1;for(r=e.AdaptationSet_asArray,a=0;a<r.length;a+=1)if(n=r[a],i=n.Representation_asArray,m.getIsTypeOf(n,t))return i.length;return-1}(c(t),e)},convertDataToRepresentationInfo:function(e){if(e){var t=new g.default,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],n=m.getRepresentationFor(e.index,n);return t.id=e.id,t.quality=e.index,t.bandwidth=m.getBandwidth(n),t.DVRWindow=e.segmentAvailabilityRange,t.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),t.MSETimeOffset=e.MSETimeOffset,t.mediaInfo=A(e.adaptation),t}return null},getDataForMedia:d,getStreamsInfo:function(e,t){var n=[],r=E;if(e&&(R(),r=T(e)),0<r.length){(!t||t>r.length)&&(t=r.length);for(var i=0;i<t;i++)n.push(f(r[i]))}return n},getMediaInfoForType:function(e,t){if(0===E.length||!e)return null;var n=S(e,E);if(!n)return null;var r=n.id;return y[r]=y[r]||m.getAdaptationsForPeriod(n),(t=o(e.index,t,e))?(e=m.getIndexForAdaptation(t,E[0].mpd.manifest,e.index),A(y[r][e])):null},getAllMediaInfoForType:l,getAdaptationForType:o,getRealAdaptation:function(e,t){var n=void 0,e=S(e,E),r=t?t.id:null;return 0<E.length&&e&&(n=r?m.getAdaptationForId(r,E[0].mpd.manifest,e.index):m.getAdaptationForIndex(t?t.index:null,E[0].mpd.manifest,e.index)),n},getRealPeriodByIndex:function(e){return m.getRealPeriodForIndex(e,E[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(e){try{return m.getEssentialPropertiesForRepresentation(e)}catch(e){return[]}},getVoRepresentations:function(e){return e=d(e),m.getRepresentationsForAdaptation(e)},getEventsFor:function(e,t){var n,r=[];return 0<E.length&&(n=E[0].mpd.manifest,e instanceof b.default?r=m.getEventsForPeriod(S(e,E)):e instanceof _.default?r=m.getEventStreamForAdaptationSet(n,d(e)):e instanceof g.default&&(r=m.getEventStreamForRepresentation(n,t))),r},getEvent:function(e,t,n,r){try{if(!e||!t||isNaN(n)||!r)return null;var i=e.scheme_id_uri,a=e.value;if(!t[i+"/"+a])return null;var o=new D.default,s=e.timescale||1,u=r.adaptation.period.start,l=t[i+"/"+a],d=isNaN(r.presentationTimeOffset)?isNaN(l.presentationTimeOffset)?0:l.presentationTimeOffset:r.presentationTimeOffset,f=e.presentation_time_delta/s,c=void 0,c=0===e.version?u+n-d+f:u-d+f,i=e.event_duration,u=e.id,d=e.message_data;return o.eventStream=l,o.eventStream.value=a,o.eventStream.timescale=s,o.duration=i,o.id=u,o.calculatedPresentationTime=c,o.messageData=d,o.presentationTimeDelta=f,o}catch(e){return null}},getMpd:n,setConfig:function(e){e&&(e.constants&&(v=e.constants),e.cea608parser&&(i=e.cea608parser),e.errHandler&&m.setConfig({errHandler:e.errHandler}),e.BASE64&&m.setConfig({BASE64:e.BASE64}))},updatePeriods:function(e){if(!e)return null;R(),E=T(e),y={}},getIsTextTrack:function(e){return m.getIsTextTrack(e)},getUTCTimingSources:function(){var e=s();return m.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=0<E.length?E[0].mpd:null;return m.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){return e=n(e),m.getAvailabilityStartTime(e)},getIsTypeOf:function(e,t){return m.getIsTypeOf(e,t)},getIsDynamic:function(e){return e=s(e),m.getIsDynamic(e)},getDuration:function(e){return e=s(e),m.getDuration(e)},getRegularPeriods:T,getLocation:function(e){return m.getLocation(e)},getPatchLocation:function(e){var t=m.getPatchLocation(e),n=m.getPublishTime(e);if(!t||!n)return null;if(t.hasOwnProperty("ttl")&&n){e=1e3*parseFloat(t.ttl);if(n.getTime()+e<=(new Date).getTime())return null}return t.__text},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return m.getManifestUpdatePeriod(e,t)},getPublishTime:function(e){return m.getPublishTime(e)},getIsDVB:function(e){return m.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(e){return a.getIsPatch(e)},getBaseURLsFromElement:function(e){return m.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return m.getRepresentationSortFunction()},getCodec:function(e,t,n){return m.getCodec(e,t,n)},getVoAdaptations:function(){return y},getVoPeriods:function(){return E},getPeriodById:function(t){if(!t||0===E.length)return null;var e=E.filter(function(e){return e.id===t});return e&&0<e.length?e[0]:null},setCurrentMediaInfo:function(e,t,n){u[e]=u[e]||{},u[e][t]=u[e][t]||{},u[e][t]=n},isPatchValid:function(e,t){var n=m.getId(e),r=a.getMpdId(t),i=m.getPublishTime(e),e=a.getPublishTime(t),t=a.getOriginalPublishTime(t);return!!(n&&r&&n==r&&i&&t&&i.getTime()==t.getTime()&&e&&i.getTime()<e.getTime())},applyPatchToManifest:function(t,e){a.getPatchOperations(e).forEach(function(i){var e=i.getMpdTarget(t);if(null!==e){var a=e.name,o=e.target,e=e.leaf;if(i.xpath.findsAttribute())switch(i.action){case"add":case"replace":o[a]=i.value;break;case"remove":delete o[a]}else{var s=(o[a+"_asArray"]||[]).indexOf(e),u="prepend"===i.position||"before"===i.position;"remove"!==i.action&&"replace"!==i.action||(delete o[a],-1!=s&&((e=o[a+"_asArray"]).splice(s,1),1<e.length?o[a]=e:1==e.length?o[a]=e[0]:delete o[a+"_asArray"])),"add"!==i.action&&"replace"!==i.action||Object.keys(i.value).forEach(function(e){var t,n=i.value[e],r=o[e+"_asArray"]||[];0===r.length&&o[e]&&r.push(o[e]),0===r.length?r=n:(t=r.length,t=e==a&&-1!=s?s+(u?0:1)+("replace"==i.action?-1:0):u?0:r.length,r.splice.apply(r,[t,0].concat(n))),o[e+"_asArray"]=r,o[e]=1==r.length?r[0]:r})}}})},reset:r},m=(0,N.default)(t).getInstance(),a=(0,C.default)(t).getInstance(),r(),e}a.__dashjs_factory_name="DashAdapter",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{47:47,61:61,65:65,66:66,87:87,89:89,90:90,95:95,98:98}],57:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var O=r(e(241)),w=e(255),i=r(e(47)),P=e(81),L=r(e(64));function a(e){e=e||{};var t=this.context,l=e.eventBus,d=e.events,n=e.debug,u=e.dashConstants,a=e.urlUtils,f=e.type,c=e.streamInfo,h=e.timelineConverter,p=e.dashMetrics,o=e.baseURLController,r=void 0,g=void 0,_=void 0,m=void 0,E=void 0,y=void 0,s=void 0,i=void 0,v=void 0;function T(){return f}function S(){_=-1,m=null}function A(){S(),i=v=E=null}function I(e,t,n){var r=o.resolve(n.path),i=void 0,n=void 0;return r&&t!==r.url&&a.isRelative(t)?(i=r.url,n=r.serviceLocation,t&&(i=a.resolve(t,i))):i=t,!a.isRelative(i)&&(e.url=i,e.serviceLocation=n,1)}function R(e){var t,n;t=e.representation,n=t.hasInitialization(),e=t.hasSegments(),n&&e?l.trigger(d.REPRESENTATION_UPDATE_COMPLETED,{representation:t},{streamId:c.id,mediaType:f}):v.update(t,i,n,e)}function b(e,t){if(null==t)return null;var n=new O.default,r=t.representation,i=r.adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].bandwidth,a=t.media,a=(0,P.replaceTokenForTemplate)(a,"Number",t.replacementNumber);return a=(0,P.replaceTokenForTemplate)(a,"Time",t.replacementTime),a=(0,P.replaceTokenForTemplate)(a,"Bandwidth",i),a=(0,P.replaceIDForTemplate)(a,r.id),a=(0,P.unescapeDollarsInTemplate)(a),n.mediaType=f,n.type=w.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=t.mediaRange,n.startTime=t.presentationStartTime,n.mediaStartTime=t.mediaStartTime,n.duration=t.duration,n.timescale=r.timescale,n.availabilityStartTime=t.availabilityStartTime,n.availabilityEndTime=t.availabilityEndTime,n.wallStartTime=t.wallStartTime,n.quality=r.index,n.index=t.availabilityIdx,n.mediaInfo=e,n.adaptationIndex=r.adaptation.index,n.representationId=r.id,I(n,a,r)?n:void 0}function M(e){var t,n=!1;return e&&(y?s?n=!0:m&&(t=parseFloat((m.presentationStartTime-e.adaptation.period.start).toFixed(5)),t=0<m.duration?t+1.5*m.duration:t,n=e.adaptation.period.duration<=t):_>=e.availableSegmentsNumber&&(n=!0)),n}function D(e){e=e.representation;e.segments&&l.trigger(d.REPRESENTATION_UPDATE_COMPLETED,{representation:e},{streamId:c.id,mediaType:f})}function N(e){if(!e.error){for(var t,n,r=e.segments,i=e.representation,a=[],o=0,s=void 0,s=0,u=r?r.length:0;s<u;s++)t=r[s],(n=(0,P.getTimeBasedSegment)(h,y,i,t.startTime,t.duration,t.timescale,t.media,t.mediaRange,o))&&(a.push(n),o++);0<a.length&&(i.segmentAvailabilityRange={start:a[0].presentationStartTime,end:a[a.length-1].presentationStartTime},i.availableSegmentsNumber=a.length,i.segments=a,y&&(e=a[a.length-1].presentationStartTime-8,e=e,h.setExpectedLiveEdge(e),p.updateManifestUpdateInfo({presentationStartTime:e}))),i.hasInitialization()&&l.trigger(d.REPRESENTATION_UPDATE_COMPLETED,{representation:i},{streamId:c.id,mediaType:f})}}function C(){g.debug("Dynamic stream complete"),s=!0}return r={initialize:function(e){y=e,s=!1,v.initialize(e)},getStreamId:function(){return c.id},getType:T,getStreamInfo:function(){return c},getInitRequest:function(e,t){return t?function(e,t,n){var r=new O.default,i=t.adaptation.period,a=i.start;if(r.mediaType=n,r.type=w.HTTPRequest.INIT_SEGMENT_TYPE,r.range=t.range,r.availabilityStartTime=h.calcAvailabilityStartTimeFromPresentationTime(a,i.mpd,y),r.availabilityEndTime=h.calcAvailabilityEndTimeFromPresentationTime(a+i.duration,i.mpd,y),r.quality=t.index,r.mediaInfo=e,r.representationId=t.id,I(r,t.initialization,t))return r.url=(0,P.replaceTokenForTemplate)(r.url,"Bandwidth",t.bandwidth),r}(e,t,f):null},getRequestForSegment:b,getSegmentRequestForTime:function(e,t,n,r){var i=null;if(!t||!t.segmentInfoType)return i;var a=_,o=!!r&&r.keepIdx,s=!(!r||!r.ignoreIsFinished);return E!==n&&(E=n,g.debug("Getting the request for time : "+n)),(r=v.getSegmentByTime(t,n))?(_=r.availabilityIdx,m=r,g.debug("Index for time "+n+" is "+_),i=b(e,r)):!s&&M(t)&&((i=new O.default).action=O.default.ACTION_COMPLETE,i.index=_-1,i.mediaType=f,i.mediaInfo=e,g.debug("Signal complete in getSegmentRequestForTime")),o&&0<=a&&(_=t.segmentInfoType===u.SEGMENT_TIMELINE&&y?_:a),i},getNextSegmentRequest:function(e,t){var n=null;if(!t||!t.segmentInfoType)return null;E=null;var r=_+1;g.debug("Getting the next request at index: "+r);var i=v.getSegmentByIndex(t,r,m?m.mediaStartTime:-1);return i||isFinite(t.adaptation.period.duration)||s?(_=i?(n=b(e,i),i.availabilityIdx):y?r-1:r,i?m=i:M(t)&&((n=new O.default).action=O.default.ACTION_COMPLETE,n.index=_-1,n.mediaType=f,n.mediaInfo=e,g.debug("Signal complete")),n):(g.debug(f+" No segment found at index: "+r+". Wait for next loop"),null)},setCurrentIndex:function(e){_=e},getCurrentIndex:function(){return _},isMediaFinished:M,reset:function(){A(),l.off(d.INITIALIZATION_LOADED,D,r),l.off(d.SEGMENTS_LOADED,N,r),l.off(d.REPRESENTATION_UPDATE_STARTED,R,r),l.off(d.DYNAMIC_TO_STATIC,C,r)},resetIndex:S,setMimeType:function(e){i=e},getNextSegmentRequestIdempotent:function(e,t){var n=_+1;return(n=v.getSegmentByIndex(t,n,m?m.mediaStartTime:-1))?b(e,n):null}},g=n.getLogger(r),A(),v=(0,L.default)(t).create(e),l.on(d.INITIALIZATION_LOADED,D,r),l.on(d.SEGMENTS_LOADED,N,r),l.on(d.REPRESENTATION_UPDATE_STARTED,R,r),l.on(d.DYNAMIC_TO_STATIC,C,r),r}a.__dashjs_factory_name="DashHandler",n.default=i.default.getClassFactory(a),t.exports=n.default},{241:241,255:255,47:47,64:64,81:81}],58:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var d=r(e(112)),f=e(255),i=r(e(47)),c=r(e(113)),h=r(e(79)),p=r(e(157)),g=r(e(49)),_=e(257);function a(e){e=e||{};var t,n=this.context,r=void 0,i=void 0,a=void 0,o=e.metricsModel;function s(e){e=o.getMetricsFor(e,!0);if(!e)return null;var t=e.HttpList,n=null,r=void 0;if(!t||t.length<=0)return null;for(r=t.length-1;0<=r;){if(t[r].responsecode){n=t[r];break}r--}return n}function u(e){e=o.getMetricsFor(e,!0);return e&&e.HttpList?e.HttpList:[]}function l(e,t){if(!e)return null;t=e[t];return t&&0!==t.length?t[t.length-1]:null}return t={getCurrentRepresentationSwitch:function(e){return l(o.getMetricsFor(e,!0),c.default.TRACK_SWITCH)},getCurrentBufferState:function(e){return l(o.getMetricsFor(e,!0),c.default.BUFFER_STATE)},getCurrentBufferLevel:function(e){return(e=l(o.getMetricsFor(e,!0),c.default.BUFFER_LEVEL))?h.default.round10(e.level/1e3,-3):0},getCurrentHttpRequest:s,getHttpRequests:u,getCurrentDroppedFrames:function(){return l(o.getMetricsFor(d.default.VIDEO,!0),c.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return l(o.getMetricsFor(e,!0),c.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return l(e?o.getMetricsFor(e,!0):o.getMetricsFor(d.default.VIDEO,!0)||o.getMetricsFor(d.default.AUDIO,!0),c.default.DVR_INFO)},getCurrentManifestUpdate:function(){return l(o.getMetricsFor(d.default.STREAM),c.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n={};return(e=s(e))&&(n=g.default.parseHttpHeaders(e._responseHeaders)),void 0===n[t]?null:n[t]},getLatestMPDRequestHeaderValueByID:function(e){for(var t,n={},r=void 0,i=void 0,i=(r=u(d.default.STREAM)).length-1;0<=i;i--)if((t=r[i]).type===f.HTTPRequest.MPD_TYPE){n=g.default.parseHttpHeaders(t._responseHeaders);break}return void 0===n[e]?null:n[e]},addRepresentationSwitch:function(e,t,n,r,i){o.addRepresentationSwitch(e,t,n,r,i)},addDVRInfo:function(e,t,n,r){o.addDVRInfo(e,t,n,r)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();o.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){var t;e&&(t=this.getCurrentManifestUpdate(),o.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration))},addManifestUpdateRepresentationInfo:function(e,t){var n;e&&(n=this.getCurrentManifestUpdate(),o.addManifestUpdateRepresentationInfo(n,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType))},addManifestUpdate:function(e){o.addManifestUpdate(d.default.STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,n,r,i){o.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,n,e.duration,r,i)},addSchedulingInfo:function(e,t){o.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,n){o.addRequestsQueue(e,t,n)},addBufferLevel:function(e,t,n){o.addBufferLevel(e,t,n)},addBufferState:function(e,t,n){o.addBufferState(e,t,n)},addDroppedFrames:function(e){o.addDroppedFrames(d.default.VIDEO,e)},addPlayList:function(){a&&(o.addPlayList(a),a=null)},addDVBErrors:function(e){o.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(a=new _.PlayList).start=new Date,a.mstart=e,a.starttype=t},createPlaylistTraceMetrics:function(e,t,n){!0===r&&(r=!1,(i=new _.PlayListTrace).representationid=e,i.start=new Date,i.mstart=t,i.playbackspeed=null!==n?n.toString():null)},updatePlayListTraceMetrics:function(e){if(i)for(var t in i)i[t]=e[t]},pushPlayListTraceMetrics:function(e,t){var n;!1===r&&a&&i&&i.start&&(n=i.start,n=e.getTime()-n.getTime(),i.duration=n,i.stopreason=t,a.trace.push(i),r=!0)},clearAllCurrentMetrics:function(){o.clearAllCurrentMetrics()}},o=o||(0,p.default)(n).getInstance({settings:e.settings}),r=!0,a=i=null,t}a.__dashjs_factory_name="DashMetrics",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{112:112,113:113,157:157,255:255,257:257,47:47,49:49,79:79}],59:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var S=r(e(96)),p=r(e(239)),i=r(e(47)),g=r(e(241)),A=r(e(163));function a(){var e=this.context,t=void 0,_=void 0,n=void 0,m=void 0,r=void 0,i=void 0,a=void 0,o=void 0,u=void 0,l=void 0,d=void 0,s=void 0,f=void 0,c=void 0,h=void 0,E=void 0;function y(){if(!E||!E.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function v(e){if(e.url){var t=new g.default;return t.setInfo(e),t}}function T(e,t,n,r){d.trigger(l.SEGMENTS_LOADED,{segments:n,representation:r,error:n?void 0:new p.default(s.SEGMENT_BASE_LOADER_ERROR_CODE,s.SEGMENT_BASE_LOADER_ERROR_MESSAGE)},{streamId:e,mediaType:t})}return t={setConfig:function(e){e.baseURLController&&(E=e.baseURLController),e.dashMetrics&&(i=e.dashMetrics),e.mediaPlayerModel&&(o=e.mediaPlayerModel),e.errHandler&&(n=e.errHandler),e.settings&&(a=e.settings),e.boxParser&&(m=e.boxParser),e.events&&(l=e.events),e.eventBus&&(d=e.eventBus),e.debug&&(_=e.debug.getLogger(t)),e.requestModifier&&(r=e.requestModifier),e.errors&&(s=e.errors),e.urlUtils&&(h=e.urlUtils),e.constants&&(f=e.constants),e.dashConstants&&(c=e.dashConstants)},initialize:function(){u=(0,A.default)(e).create({errHandler:n,dashMetrics:i,mediaPlayerModel:o,requestModifier:r,useFetch:a?a.get().streaming.lowLatencyEnabled:null,boxParser:m,errors:s,urlUtils:h,constants:f,dashConstants:c})},loadInitialization:function t(n,r,i,e){y();var a,o=i?E.resolve(i.path):null,s=e||{init:!0,url:o?o.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:r};_.debug("Start searching for initialization.");o=v(s);u.load({request:o,success:function(e){s.bytesLoaded=s.range.end,(a=m.findInitRange(e))?(i.range=a,d.trigger(l.INITIALIZATION_LOADED,{representation:i},{streamId:n,mediaType:r})):(s.range.end=s.bytesLoaded+s.bytesToLoad,t(n,r,i,s))},error:function(){d.trigger(l.INITIALIZATION_LOADED,{representation:i},{streamId:n,mediaType:r})}}),_.debug("Perform init search: "+s.url)},loadSegments:function l(d,f,c,e,h,t){y(),!e||void 0!==e.start&&void 0!==e.end||(e=(r=e?e.toString().split("-"):null)?{start:parseFloat(r[0]),end:parseFloat(r[1])}:null),h=h||T;var p,i=null,n=!!e,r=c?E.resolve(c.path):null,g={init:!1,url:r?r.url:void 0,range:n?e:{start:0,end:1500},searching:!n,bytesLoaded:t?t.bytesLoaded:0,bytesToLoad:1500,mediaType:f},t=v(g);u.load({request:t,success:function(e){var t=g.bytesToLoad,n=e.byteLength;if(g.bytesLoaded=g.range.end-g.range.start,i=m.parse(e),(p=i.getBox("sidx"))&&p.isComplete){var u=p.references,r=void 0,e=void 0;null!=u&&0<u.length&&(r=1===u[0].reference_type),r?function(){_.debug("Initiate multiple SIDX load."),g.range.end=g.range.start+p.size;for(var e,t,n=void 0,r=void 0,i=[],a=0,o=(p.offset||g.range.start)+p.size,s=function(e,t,n){n?(i=i.concat(n),r<=++a&&(i.sort(function(e,t){return e.startTime-t.startTime<0?-1:0}),h(e,t,i,c))):h(e,t,null,c)},n=0,r=u.length;n<r;n++)t=(e=o)+u[n].referenced_size-1,o+=u[n].referenced_size,l(d,f,c,{start:e,end:t},s,g)}():(_.debug("Parsing segments from SIDX. representation "+f+" - id: "+c.id+" for range : "+g.range.start+" - "+g.range.end),e=function(e,t){for(var n=e.references,r=n.length,i=e.timescale,a=e.earliest_presentation_time,o=t.range.start+e.offset+e.first_offset+e.size,s=[],u=void 0,l=void 0,d=void 0,f=void 0,c=0;c<r;c++)d=n[c].subsegment_duration,f=n[c].referenced_size,(u=new S.default).duration=d,u.startTime=a,u.timescale=i,l=o+f-1,u.mediaRange=o+"-"+l,s.push(u),a+=d,o+=f;return s}(p,g),h(d,f,e,c))}else{if(p)g.range.start=p.offset||g.range.start,g.range.end=g.range.start+(p.size||t);else{if(n<g.bytesLoaded)return void h(d,f,null,c);(n=i.getLastBox())&&n.size?(g.range.start=n.offset+n.size,g.range.end=g.range.start+t):g.range.end+=t}l(d,f,c,g.range,h,g)}},error:function(){h(d,f,null,c)}}),_.debug("Perform SIDX load: "+g.url+" with range : "+g.range.start+" - "+g.range.end)},reset:function(){u.abort(),r=m=n=u=null}}}a.__dashjs_factory_name="SegmentBaseLoader",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{163:163,239:239,241:241,47:47,96:96}],60:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(225)),v=r(e(112)),i=r(e(47)),T=r(e(96)),S=r(e(241)),A=r(e(163)),I=r(e(239));function a(){var c=this.context,t=void 0,h=void 0,p=void 0,n=void 0,r=void 0,i=void 0,a=void 0,g=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0;function _(e,t,n,r){for(var i,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,s=[],l=0,f=(o=function(e){var t=[],n=(0,y.default)(c).create({data:e}),r=void 0,i=void 0;for(n.consumeTagAndSize(p.Segment.Cues);n.moreData()&&n.consumeTagAndSize(p.Segment.Cues.CuePoint,!0);){for((r={}).CueTime=n.parseTag(p.Segment.Cues.CuePoint.CueTime),r.CueTracks=[];n.moreData()&&n.consumeTag(p.Segment.Cues.CuePoint.CueTrackPositions,!0);){var a=n.getMatroskaCodedNum(),o=n.getPos();if((i={}).Track=n.parseTag(p.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=n.parseTag(p.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),r.CueTracks.push(i),n.setPos(o+a)}if(0===r.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(r)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}(e)).length;l<f;l+=1)u=new T.default,a=0,a=l<o.length-1?o[l+1].CueTime-o[l].CueTime:r-o[l].CueTime,u.duration=a,u.startTime=o[l].CueTime,u.timescale=1e3,i=o[l].CueTracks[0].ClusterPosition+t,d=l<o.length-1?o[l+1].CueTracks[0].ClusterPosition+t-1:n-1,u.mediaRange=i+"-"+d,s.push(u);return h.debug("Parsed cues: "+s.length+" cues."),s}function f(){if(!d||!d.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function m(e,t,n,r){s.trigger(u.SEGMENTS_LOADED,{segments:n,representation:r,error:n?void 0:new I.default(l.SEGMENT_BASE_LOADER_ERROR_CODE,l.SEGMENT_BASE_LOADER_ERROR_MESSAGE)},{streamId:e,mediaType:t})}function E(e){var t=new S.default;return t.setInfo(e),t}return t={setConfig:function(e){if(!(e.baseURLController&&e.dashMetrics&&e.mediaPlayerModel&&e.errHandler))throw new Error(v.default.MISSING_CONFIG_ERROR);d=e.baseURLController,i=e.dashMetrics,a=e.mediaPlayerModel,n=e.errHandler,o=e.settings,u=e.events,s=e.eventBus,l=e.errors,h=e.debug.getLogger(t),r=e.requestModifier},initialize:function(){g=(0,A.default)(c).create({errHandler:n,dashMetrics:i,mediaPlayerModel:a,requestModifier:r,useFetch:o?o.get().streaming.lowLatencyEnabled:null,errors:l})},loadInitialization:function(e,t,n,r){f();var i=null,a=n?d.resolve(n.path):null,o=n?n.range.split("-"):null,a=r||{range:{start:o?parseFloat(o[0]):null,end:o?parseFloat(o[1]):null},request:i,url:a?a.url:void 0,init:!0,mediaType:t};h.info("Start loading initialization."),i=E(a),g.load({request:i,success:function(){s.trigger(u.INITIALIZATION_LOADED,{representation:n},{streamId:e,mediaType:t})},error:function(){s.trigger(u.INITIALIZATION_LOADED,{representation:n},{streamId:e,mediaType:t})}}),h.debug("Perform init load: "+a.url)},loadSegments:function(t,n,r,i,a){f();var e=null,o=r?d.resolve(r.path):null,s=o?o.url:void 0;a=a||m,e=E({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:e,url:s,init:!1,mediaType:n}),h.debug("Parsing ebml header"),g.load({request:e,success:function(e){!function(e,t,n,r){if(e&&0!==e.byteLength){var i,a,o,s=(0,y.default)(c).create({data:e}),u=void 0,e=n?n.split("-"):null,n=null,l={url:t,range:{start:e?parseFloat(e[0]):null,end:e?parseFloat(e[1]):null},request:n};for(h.debug("Parse EBML header: "+l.url),s.skipOverElement(p.EBML),s.consumeTag(p.Segment),a=s.getMatroskaCodedNum(),a+=s.getPos(),o=s.getPos();s.moreData()&&!s.consumeTagAndSize(p.Segment.Info,!0);)if(!(s.skipOverElement(p.Segment.SeekHead,!0)||s.skipOverElement(p.Segment.Tracks,!0)||s.skipOverElement(p.Segment.Cues,!0)||s.skipOverElement(p.Void,!0)))throw new Error("no valid top level element found");for(;void 0===u;){var d=s.getMatroskaCodedNum(!0),f=s.getMatroskaCodedNum();d===p.Segment.Info.Duration.tag?u=s[p.Segment.Info.Duration.parse](f):s.setPos(s.getPos()+f)}n=E(l);g.load({request:n,success:function(e){i=_(e,o,a,u),r(i)},error:function(){h.error("Download Error: Cues "+l.url),r(null)}}),h.debug("Perform cues load: "+l.url+" bytes="+l.range.start+"-"+l.range.end)}else r(null)}(e,s,i,function(e){a(t,n,e,r)})},error:function(){a(t,n,null,r)}})},reset:function(){r=n=null}},p={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},t}a.__dashjs_factory_name="WebmSegmentBaseLoader",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{112:112,163:163,225:225,239:239,241:241,47:47,96:96}],61:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId"}}]),i);n.default=a,t.exports=n.default},{}],62:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var w=r(e(112)),P=r(e(239)),e=r(e(47));function i(e){var i=(e=e||{}).eventBus,a=e.events,o=e.errors,s=e.abrController,u=e.dashMetrics,l=e.playbackController,n=e.timelineConverter,d=e.type,f=e.streamInfo,c=e.dashConstants,t=void 0,h=void 0,p=void 0,g=void 0,_=void 0;function r(){return d}function m(){if(!(s&&u&&l&&n))throw new Error(w.default.MISSING_CONFIG_ERROR)}function E(){return p}function y(){return _}function v(){p=!(h=null),g=[]}function T(){m();var e=new Date,t=_,n=1e3*l.getTime();t&&u.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function S(e){return null==e||e>=g.length?null:g[e]}function A(e,t){e.segmentAvailabilityRange=n.calcSegmentAvailabilityRange(e,t),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start?b(new P.default(o.SEGMENTS_UNAVAILABLE_ERROR_CODE,o.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end})):t&&(e=e.segmentAvailabilityRange.end,n.setExpectedLiveEdge(e),u.updateManifestUpdateInfo({presentationStartTime:e}))}function I(e,t){m();for(var n=0,r=g.length;n<r;n++)A(g[n],e),t&&i.trigger(a.REPRESENTATION_UPDATE_STARTED,{representation:g[n]},{streamId:f.id,mediaType:d})}function R(){p=!0,i.trigger(a.DATA_UPDATE_STARTED,{},{streamId:f.id,mediaType:d})}function b(e){p=!1,i.trigger(a.DATA_UPDATE_COMPLETED,{data:h,currentRepresentation:_,error:e},{streamId:f.id,mediaType:d})}function M(e){i.trigger(a.AST_IN_FUTURE,{delay:e}),setTimeout(function(){p||(R(),g.forEach(function(e){e.segmentAvailabilityRange=null}),I(l.getIsDynamic(),!0))},e)}function D(e){if(p)if(e.error)b(e.error);else{var t,n=e.representation,r=u.getCurrentManifestUpdate(),i=!1,e=0;if(n.adaptation.period.mpd.manifest.type===c.DYNAMIC&&!n.adaptation.period.mpd.manifest.ignorePostponeTimePeriod&&l.getStreamController().getStreams().length<=1&&(e=function(e){try{var t=l.getStreamController().getActiveStreamInfo(),n=e.segmentAvailabilityRange.start;t&&t.id&&t.id!==f.id&&(n=Math.min(l.getTime(),n));n=e.segmentAvailabilityRange.end-n;return 1e3*(l.getLiveDelay()-n)}catch(e){return 0}}(n)),0<e)return M(e),void b(new P.default(o.SEGMENTS_UPDATE_FAILED_ERROR_CODE,o.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE));if(r){for(var a=0;a<r.representationInfo.length;a++)if((t=r.representationInfo[a]).index===n.index&&t.mediaType===d){i=!0;break}i||u.addManifestUpdateRepresentationInfo(n,d)}!function(){for(var e=0,t=g.length;e<t;e++){var n=g[e].segmentInfoType;if(null===g[e].segmentAvailabilityRange||!g[e].hasInitialization()||(n===c.SEGMENT_BASE||n===c.BASE_URL)&&!g[e].segments)return}return 1}()||(s.setPlaybackQuality(d,f,(e=_,g.indexOf(e))),u.updateManifestUpdateInfo({latency:_.segmentAvailabilityRange.end-l.getTime()}),u.getCurrentRepresentationSwitch(_.adaptation.type)||T(),b())}}function N(e){e.isDynamic&&I(e.isDynamic)}function C(e){_=S(e.newQuality),T()}function O(e){e.newDuration&&_&&_.adaptation.period&&(_.adaptation.period.duration=e.newDuration)}return t={getStreamId:function(){return f.id},getType:r,getData:function(){return h},isUpdating:E,updateData:function(e,t,n,r){m(),R(),g=t,_=S(r),h=e,n===w.default.VIDEO||n===w.default.AUDIO||n===w.default.FRAGMENTED_TEXT?I(l.getIsDynamic(),!0):b()},updateRepresentation:A,getCurrentRepresentation:y,getRepresentationForQuality:S,reset:function(){i.off(a.QUALITY_CHANGE_REQUESTED,C,t),i.off(a.REPRESENTATION_UPDATE_COMPLETED,D,t),i.off(a.WALLCLOCK_TIME_UPDATED,N,t),i.off(a.MANIFEST_VALIDITY_CHANGED,O,t),v()}},v(),i.on(a.QUALITY_CHANGE_REQUESTED,C,t),i.on(a.REPRESENTATION_UPDATE_COMPLETED,D,t),i.on(a.WALLCLOCK_TIME_UPDATED,N,t),i.on(a.MANIFEST_VALIDITY_CHANGED,O,t),t}i.__dashjs_factory_name="RepresentationController",n.default=e.default.getClassFactory(i),t.exports=n.default},{112:112,239:239,47:47}],63:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),E=r(e(59)),y=r(e(60));function a(e){e=e||{};var t=this.context,n=e.eventBus,r=e.events,i=e.dashMetrics,a=e.mediaPlayerModel,o=e.errHandler,s=e.baseURLController,u=e.debug,l=e.boxParser,d=e.requestModifier,f=e.errors,c=void 0,h=void 0,p=void 0;function g(e){return"webm"===(e?e.split("/")[1]:"").toLowerCase()}function _(e){(g(e.mimeType)?p:h).loadInitialization(e.streamId,e.mediaType,e.representation)}function m(e){(g(e.mimeType)?p:h).loadSegments(e.streamId,e.mediaType,e.representation,e.representation?e.representation.indexRange:null,e.callback)}return c={initialize:function(){n.on(r.SEGMENTBASE_INIT_REQUEST_NEEDED,_,c),n.on(r.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,m,c),h.initialize(),p.initialize()},reset:function(){n.off(r.SEGMENTBASE_INIT_REQUEST_NEEDED,_,c),n.off(r.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,m,c)}},h=(0,E.default)(t).getInstance(),p=(0,y.default)(t).getInstance(),h.setConfig({baseURLController:s,dashMetrics:i,mediaPlayerModel:a,errHandler:o,eventBus:n,events:r,errors:f,debug:u,boxParser:l,requestModifier:d}),p.setConfig({baseURLController:s,dashMetrics:i,mediaPlayerModel:a,errHandler:o,eventBus:n,events:r,errors:f,debug:u,requestModifier:d}),c}a.__dashjs_factory_name="SegmentBaseController";i=i.default.getSingletonFactory(a);n.default=i,t.exports=n.default},{47:47,59:59,60:60}],64:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),d=r(e(84)),f=r(e(82)),c=r(e(78)),h=r(e(80));function a(t){t=t||{};var e,n=this.context,i=t.events,a=t.eventBus,r=t.dashConstants,o=t.streamInfo,s=t.type,u=void 0;function l(e){return e?e.segments?u[r.SEGMENT_BASE]:u[e.segmentInfoType]:null}return e={initialize:function(e){u[r.SEGMENT_TIMELINE]=(0,d.default)(n).create(t,e),u[r.SEGMENT_TEMPLATE]=(0,f.default)(n).create(t,e),u[r.SEGMENT_LIST]=(0,c.default)(n).create(t,e),u[r.SEGMENT_BASE]=(0,h.default)(n).create(t,e)},update:function(e,t,n,r){n||a.trigger(i.SEGMENTBASE_INIT_REQUEST_NEEDED,{streamId:o.id,mediaType:s,mimeType:t,representation:e}),r||a.trigger(i.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,{streamId:o.id,mediaType:s,mimeType:t,representation:e})},getSegmentByIndex:function(e,t,n){var r=l(e);return r?r.getSegmentByIndex(e,t,n):null},getSegmentByTime:function(e,t){var n=l(e);return n?n.getSegmentByTime(e,t):null}},u={},e}a.__dashjs_factory_name="SegmentsController";i=i.default.getClassFactory(a);n.default=i,t.exports=n.default},{47:47,78:78,80:80,82:82,84:84}],65:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(112)),v=r(e(61)),T=r(e(94)),S=r(e(85)),A=r(e(93)),i=r(e(91)),I=r(e(99)),R=r(e(87)),b=r(e(86)),M=r(e(88)),D=r(e(230)),N=r(e(234)),a=r(e(47)),C=r(e(45)),O=r(e(239)),w=r(e(51)),P=e(217);function o(){var e=void 0,l=void 0,d=void 0,f=void 0,a=this.context,o=(0,N.default)(a).getInstance(),h=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function s(e,t){var n,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=!1,l=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(a=e.ContentComponent_asArray),o=t!==y.default.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&0<e.Representation_asArray.length){var d=_(e.Representation_asArray[0]);if(d&&0<d.length&&0<=P.THUMBNAILS_SCHEME_ID_URIS.indexOf(d[0].schemeIdUri))return t===y.default.IMAGE;if(e.Representation_asArray[0].hasOwnProperty(v.default.CODECS)&&(0===(s=e.Representation_asArray[0].codecs).search(y.default.STPP)||0===s.search(y.default.WVTT)))return t===y.default.FRAGMENTED_TEXT}if(a){if(1<a.length)return t===y.default.MUXED;a[0]&&a[0].contentType===t&&(l=u=!0)}if(e.hasOwnProperty(v.default.MIME_TYPE)&&(u=o.test(e.mimeType),l=!0),!l)for(r=0,n=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!l&&r<n;)(i=e.Representation_asArray[r]).hasOwnProperty(v.default.MIME_TYPE)&&(u=o.test(i.mimeType),l=!0),r++;return u}function p(e){return"text/vtt"===e||"application/ttml+xml"===e}function t(){return function(e,t){return e.bandwidth-t.bandwidth}}function g(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort(t()),e}function u(e,t){return e&&e.Period_asArray&&h(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function n(e){return e&&e.Period_asArray?e.Period_asArray:[]}function c(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===v.default.DYNAMIC),t}function _(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function m(e,t){var n=[],r=void 0;if(!e)return n;for(r=0;r<e.length;r++){var i=new M.default;if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty(y.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty(v.default.TIMESCALE)&&(i.timescale=e[r].timescale),e[r].hasOwnProperty(v.default.VALUE)&&(i.value=e[r].value),n.push(i)}return n}function E(r){var i=[],e=r.BaseURL_asArray||[r.baseUri],a=!1;return e.some(function(e){if(e){var t=new b.default,n=e.__text||e;return o.isRelative(n)&&(a=!0,r.baseUri&&(n=o.resolve(n,r.baseUri))),t.url=n,e.hasOwnProperty(v.default.SERVICE_LOCATION)&&e.serviceLocation.length?t.serviceLocation=e.serviceLocation:t.serviceLocation=n,e.hasOwnProperty(v.default.DVB_PRIORITY)&&(t.dvb_priority=e[v.default.DVB_PRIORITY]),e.hasOwnProperty(v.default.DVB_WEIGHT)&&(t.dvb_weight=e[v.default.DVB_WEIGHT]),e.hasOwnProperty(v.default.AVAILABILITY_TIME_OFFSET)&&(t.availabilityTimeOffset=e[v.default.AVAILABILITY_TIME_OFFSET]),e.hasOwnProperty(v.default.AVAILABILITY_TIME_COMPLETE)&&(t.availabilityTimeComplete="false"!==e[v.default.AVAILABILITY_TIME_COMPLETE]),i.push(t),a}}),i}return e={getIsTypeOf:s,getIsTextTrack:p,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(v.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(v.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(v.default.ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(v.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(v.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(v.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,n){return 0<(n=u(t,n)).length&&h(e)?n[e]:null},getIndexForAdaptation:function(e,t,n){if(!e)return-1;for(var r=u(t,n),i=0;i<r.length;i++){if((0,D.default)(a).getInstance().areEqual(r[i],e))return i}return-1},getAdaptationForId:function(e,t,n){for(var r=u(t,n),i=void 0,i=0,a=r.length;i<a;i++)if(r[i].hasOwnProperty(v.default.ID)&&r[i].id===e)return r[i];return null},getAdaptationsForType:function(e,t,n){for(var r=u(e,t),i=void 0,a=[],i=0,o=r.length;i<o;i++)s(r[i],n)&&a.push(g(r[i]));return a},getRealPeriods:n,getRealPeriodForIndex:function(e,t){return 0<(t=n(t)).length&&h(e)?t[e]:null},getCodec:function(e,t,n){var r=null;return e&&e.Representation_asArray&&0<e.Representation_asArray.length&&((e=h(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0])&&(r=e.mimeType+';codecs="'+e.codecs+'"',n&&void 0!==e.width&&(r+=';width="'+e.width+'";height="'+e.height+'"'))),r=r&&r.replace(/\sprofiles=[^;]*/g,"")},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(v.default.CENC_DEFAULT_KID)?e[v.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(v.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:c,getId:function(e){return e&&e[v.default.ID]||null},hasProfile:function(e,t){var n=!1;return e&&e.profiles&&0<e.profiles.length&&(n=-1!==e.profiles.indexOf(t)),n},getDuration:function(e){return e&&e.hasOwnProperty(v.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e&&e.hasOwnProperty(v.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getPublishTime:function(e){return e&&e.hasOwnProperty(v.default.PUBLISH_TIME)?new Date(e[v.default.PUBLISH_TIME]):null},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){return((e=g(e))&&Array.isArray(e.Representation_asArray)?e.Representation_asArray:[]).map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}})},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&h(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,n,r,i=[],a=function(e){if(e&&e.period&&h(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&h(e.index))return g(t.AdaptationSet_asArray[e.index])}}(e),o=void 0,s=void 0;if(a&&a.Representation_asArray){e&&e.period&&h(e.period.index)&&((t=E(e.period.mpd.manifest))&&(s=t[0]));for(var u=0,l=a.Representation_asArray.length;u<l;++u){var d,f=a.Representation_asArray[u],c=new T.default;c.index=u,c.adaptation=e,f.hasOwnProperty(v.default.ID)&&(c.id=f.id),f.hasOwnProperty(v.default.CODECS)&&(c.codecs=f.codecs),f.hasOwnProperty(v.default.CODEC_PRIVATE_DATA)&&(c.codecPrivateData=f.codecPrivateData),f.hasOwnProperty(v.default.BANDWITH)&&(c.bandwidth=f.bandwidth),f.hasOwnProperty(v.default.WIDTH)&&(c.width=f.width),f.hasOwnProperty(v.default.HEIGHT)&&(c.height=f.height),f.hasOwnProperty(v.default.SCAN_TYPE)&&(c.scanType=f.scanType),f.hasOwnProperty(v.default.MAX_PLAYOUT_RATE)&&(c.maxPlayoutRate=f.maxPlayoutRate),f.hasOwnProperty(v.default.SEGMENT_BASE)?(o=f.SegmentBase,c.segmentInfoType=v.default.SEGMENT_BASE):f.hasOwnProperty(v.default.SEGMENT_LIST)?(o=f.SegmentList).hasOwnProperty(v.default.SEGMENT_TIMELINE)?c.segmentInfoType=v.default.SEGMENT_TIMELINE:c.segmentInfoType=v.default.SEGMENT_LIST:f.hasOwnProperty(v.default.SEGMENT_TEMPLATE)?((o=f.SegmentTemplate).hasOwnProperty(v.default.SEGMENT_TIMELINE)?c.segmentInfoType=v.default.SEGMENT_TIMELINE:c.segmentInfoType=v.default.SEGMENT_TEMPLATE,o.hasOwnProperty(v.default.INITIALIZATION_MINUS)&&(c.initialization=o.initialization.split("$Bandwidth$").join(f.bandwidth).split("$RepresentationID$").join(f.id))):c.segmentInfoType=v.default.BASE_URL,c.essentialProperties=_(f),o&&(o.hasOwnProperty(v.default.INITIALIZATION)?((d=o.Initialization).hasOwnProperty(v.default.SOURCE_URL)&&(c.initialization=d.sourceURL),d.hasOwnProperty(v.default.RANGE)&&(c.range=d.range)):f.hasOwnProperty(v.default.MIME_TYPE)&&p(f.mimeType)&&(c.range=0),o.hasOwnProperty(v.default.TIMESCALE)&&(c.timescale=o.timescale),o.hasOwnProperty(v.default.DURATION)?c.segmentDuration=o.duration/c.timescale:f.hasOwnProperty(v.default.SEGMENT_TEMPLATE)&&(o=f.SegmentTemplate).hasOwnProperty(v.default.SEGMENT_TIMELINE)&&(c.segmentDuration=(n=o.SegmentTimeline,r=void 0,r=n.S_asArray[0],n=n.S_asArray[1],(r.hasOwnProperty("d")?r.d:n.t-r.t)/c.timescale)),o.hasOwnProperty(v.default.MEDIA)&&(c.media=o.media),o.hasOwnProperty(v.default.START_NUMBER)&&(c.startNumber=o.startNumber),o.hasOwnProperty(v.default.INDEX_RANGE)&&(c.indexRange=o.indexRange),o.hasOwnProperty(v.default.PRESENTATION_TIME_OFFSET)&&(c.presentationTimeOffset=o.presentationTimeOffset/c.timescale),o.hasOwnProperty(v.default.AVAILABILITY_TIME_OFFSET)?c.availabilityTimeOffset=o.availabilityTimeOffset:s&&void 0!==s.availabilityTimeOffset&&(c.availabilityTimeOffset=s.availabilityTimeOffset),o.hasOwnProperty(v.default.AVAILABILITY_TIME_COMPLETE)?c.availabilityTimeComplete="false"!==o.availabilityTimeComplete:s&&void 0!==s.availabilityTimeComplete&&(c.availabilityTimeComplete=s.availabilityTimeComplete)),c.MSETimeOffset=(n=void 0,n=(r=c).presentationTimeOffset,r.adaptation.period.start-n),c.path=[e.period.index,e.index,u],i.push(c)}}return i},getAdaptationsForPeriod:function(e){var t=e&&h(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,n=[],r=void 0,i=void 0,a=void 0;if(t&&t.AdaptationSet_asArray)for(a=0;a<t.AdaptationSet_asArray.length;a++)i=t.AdaptationSet_asArray[a],r=new S.default,i.hasOwnProperty(v.default.ID)&&(r.id=i.id),r.index=a,r.period=e,s(i,y.default.MUXED)?r.type=y.default.MUXED:s(i,y.default.AUDIO)?r.type=y.default.AUDIO:s(i,y.default.VIDEO)?r.type=y.default.VIDEO:s(i,y.default.FRAGMENTED_TEXT)?r.type=y.default.FRAGMENTED_TEXT:s(i,y.default.IMAGE)?r.type=y.default.IMAGE:r.type=y.default.TEXT,n.push(r);return n},getRegularPeriods:function(e){for(var t=!!e&&c(e.manifest),n=[],r=null,i=null,a=null,o=null,s=void 0,s=0,u=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;s<u;s++)(i=e.manifest.Period_asArray[s]).hasOwnProperty(v.default.START)?(o=new A.default).start=i.start:null!==r&&r.hasOwnProperty(v.default.DURATION)&&null!==a?(o=new A.default).start=parseFloat((a.start+a.duration).toFixed(5)):0!==s||t||((o=new A.default).start=0),null!==a&&isNaN(a.duration)&&(null!==o?a.duration=parseFloat((o.start-a.start).toFixed(5)):l.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==o&&(o.id=function(e,t){if(!e)throw new Error("Period cannot be null or undefined");t=A.default.DEFAULT_ID+"_"+t;e.hasOwnProperty(v.default.ID)&&0<e.id.length&&"__proto__"!==e.id&&(t=e.id);return t}(i,s),o.index=s,o.mpd=e,i.hasOwnProperty(v.default.DURATION)&&(o.duration=i.duration),n.push(o),r=i,a=o),o=i=null;return 0===n.length||null!==a&&isNaN(a.duration)&&(a.duration=parseFloat((function(e){!function(){if(!d||!d.hasOwnProperty("error"))throw new Error(y.default.MISSING_CONFIG_ERROR)}();var t=c(e.mpd.manifest),n=void 0;e.mpd.manifest.mediaPresentationDuration?n=e.mpd.manifest.mediaPresentationDuration:e.duration?n=e.duration:t?n=Number.POSITIVE_INFINITY:d.error(new O.default(w.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e));return n}(a)-a.start).toFixed(5))),n},getMpd:function(e){var t=new i.default;return e&&((t.manifest=e).hasOwnProperty(v.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(v.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(v.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(v.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(v.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(v.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(v.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration),e.hasOwnProperty(v.default.PUBLISH_TIME)&&(t.publishTime=new Date(e.publishTime))),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=(t=t?t.Period_asArray:null)&&e&&h(e.index)?t[e.index].EventStream_asArray:null,r=[],i=void 0,a=void 0;if(n)for(i=0;i<n.length;i++){var o=new M.default;if(o.period=e,o.timescale=1,!n[i].hasOwnProperty(y.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(o.schemeIdUri=n[i][y.default.SCHEME_ID_URI],n[i].hasOwnProperty(v.default.TIMESCALE)&&(o.timescale=n[i][v.default.TIMESCALE]),n[i].hasOwnProperty(v.default.VALUE)&&(o.value=n[i][v.default.VALUE]),n[i].hasOwnProperty(v.default.PRESENTATION_TIME_OFFSET)&&(o.presentationTimeOffset=n[i][v.default.PRESENTATION_TIME_OFFSET]),a=0;n[i].Event_asArray&&a<n[i].Event_asArray.length;a++){var s,u=n[i].Event_asArray[a],l=new R.default;l.presentationTime=0,l.eventStream=o,u.hasOwnProperty(v.default.PRESENTATION_TIME)&&(l.presentationTime=u.presentationTime,s=o.presentationTimeOffset?o.presentationTimeOffset/o.timescale:0,l.calculatedPresentationTime=l.presentationTime/o.timescale+e.start-s),u.hasOwnProperty(v.default.DURATION)&&(l.duration=u.duration/o.timescale),u.hasOwnProperty(v.default.ID)&&(l.id=u.id),u.Signal&&u.Signal.Binary?l.messageData=f.decodeArray(u.Signal.Binary.toString()):l.messageData=u.messageData||u.__text,r.push(l)}}return r},getEssentialPropertiesForRepresentation:_,getEventStreamForAdaptationSet:function(e,t){var n,r,i=void 0;return e&&e.Period_asArray&&t&&t.period&&h(t.period.index)&&(n=e.Period_asArray[t.period.index])&&n.AdaptationSet_asArray&&h(t.index)&&(r=n.AdaptationSet_asArray[t.index])&&(i=r.InbandEventStream_asArray),m(i,null)},getEventStreamForRepresentation:function(e,t){var n,r,i,a=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&h(t.adaptation.period.index)&&(n=e.Period_asArray[t.adaptation.period.index])&&n.AdaptationSet_asArray&&h(t.adaptation.index)&&(r=n.AdaptationSet_asArray[t.adaptation.index])&&r.Representation_asArray&&h(t.index)&&(i=r.Representation_asArray[t.index])&&(a=i.InbandEventStream_asArray),m(a,t)},getUTCTimingSources:function(e){var t=c(e),n=!!e&&e.hasOwnProperty(v.default.AVAILABILITY_START_TIME),e=e?e.UTCTiming_asArray:null,r=[];return(t||n)&&e&&e.forEach(function(e){var t=new I.default;e.hasOwnProperty(y.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(v.default.VALUE)&&(t.value=e.value.toString(),r.push(t)))}),r},getBaseURLsFromElement:E,getRepresentationSortFunction:t,getLocation:function(e){if(e&&e.hasOwnProperty(y.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getPatchLocation:function(e){if(e&&e.hasOwnProperty(v.default.PATCH_LOCATION))return e.PatchLocation=e.PatchLocation_asArray[0],e.PatchLocation},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(v.default.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(v.default.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(v.default.SERVICE_DESCRIPTION)){var n=!0,r=!1,i=void 0;try{for(var a,o=e.ServiceDescription_asArray[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s,u=a.value,l=void 0,d=void 0,f=void 0,c=void 0;for(s in u)u.hasOwnProperty(s)&&(s===v.default.ID?l=u[s]:s===v.default.SERVICE_DESCRIPTION_SCOPE?d=u[s].schemeIdUri:s===v.default.SERVICE_DESCRIPTION_LATENCY?f={target:u[s].target,max:u[s].max,min:u[s].min}:s===v.default.SERVICE_DESCRIPTION_PLAYBACK_RATE&&(c={max:u[s].max,min:u[s].min}));d===y.default.SERVICE_DESCRIPTION_LL_SCHEME&&(f||c)&&t.push({id:l,schemeIdUri:d,latency:f,playbackRate:c})}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}return t},getSupplementalPropperties:function(e){var t={};if(e&&e.hasOwnProperty(v.default.SUPPLEMENTAL_PROPERTY)){var n=!0,r=!1,i=void 0;try{for(var a=e.SupplementalProperty_asArray[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var o=o.value;o.hasOwnProperty(y.default.SCHEME_ID_URI)&&o.hasOwnProperty(v.default.VALUE)&&(t[o[y.default.SCHEME_ID_URI]]=o[v.default.VALUE])}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}return t},setConfig:function(e){e&&(e.errHandler&&(d=e.errHandler),e.BASE64&&(f=e.BASE64))}},l=(0,C.default)(a).getInstance().getLogger(e),e}o.__dashjs_factory_name="DashManifestModel",n.default=a.default.getSingletonFactory(o),t.exports=n.default},{112:112,217:217,230:230,234:234,239:239,45:45,47:47,51:51,61:61,85:85,86:86,87:87,88:88,91:91,93:93,94:94,99:99}],66:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(61)),i=r(e(47)),o=r(e(45)),s=r(e(97)),u=r(e(92));function l(){var e=void 0,i=void 0,t=this.context;return e={getIsPatch:function(e){return e&&e.hasOwnProperty(a.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function(e){return e&&e.hasOwnProperty(a.default.PUBLISH_TIME)?new Date(e[a.default.PUBLISH_TIME]):null},getOriginalPublishTime:function(e){return e&&e.hasOwnProperty(a.default.ORIGINAL_PUBLISH_TIME)?new Date(e[a.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(e){return e&&e[a.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function(e){return e?(e.__children||[]).map(function(e){var t=Object.keys(e)[0];if("add"!==t&&"remove"!==t&&"replace"!==t)return i.warn("Ignoring node of invalid action: "+t),null;var n=e[t],r=n.sel;if("add"===t&&n.type){if(!n.type.startsWith("@"))return i.warn("Ignoring add action for prefixed namespace declaration: "+n.type+"="+n.__text),null;r=r+"/"+n.type}e=new s.default(r);if(!e.isValid())return i.warn("Ignoring action with invalid selector: "+t+" - "+r),null;r=null;e.findsAttribute()?r=n.__text||"":"remove"!==t&&(r=n.__children.reduce(function(e,t){var n=Object.keys(t)[0];return"#text"!==n&&(e[n]=e[n]||[],e[n].push(t[n])),e},{}));r=new u.default(t,e,r);return"add"===t&&(r.position=n.pos),r}).filter(function(e){return!!e}):[]}},i=(0,o.default)(t).getInstance().getLogger(e),e}l.__dashjs_factory_name="PatchManifestModel",n.default=i.default.getSingletonFactory(l),t.exports=n.default},{45:45,47:47,61:61,92:92,97:97}],67:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),u=r(e(77)),l=r(e(3)),d=r(e(76)),f=r(e(74)),c=r(e(73)),h=r(e(75)),p=r(e(70)),g=r(e(71));function a(e){e=e||{};var t=this.context,n=e.debug,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;return r={parse:function(e){var t=void 0,n=window.performance.now();if(!(t=o.xml_str2json(e)))throw new Error("parsing the manifest failed");var r=window.performance.now();return t.Patch?((t=t.Patch).add_asArray&&t.add_asArray.forEach(function(e){return s.run(e)}),t.replace_asArray&&t.replace_asArray.forEach(function(e){return s.run(e)})):(t=t.MPD,s.run(t)),e=window.performance.now(),i.info("Parsing complete: ( xml2json: "+(r-n).toPrecision(3)+"ms, objectiron: "+(e-r).toPrecision(3)+"ms, total: "+((e-n)/1e3).toPrecision(3)+"s)"),t.protocol="DASH",t},getMatchers:function(){return a},getIron:function(){return s}},i=n.getLogger(r),a=[new f.default,new c.default,new h.default,new d.default],o=new l.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:a}),s=(0,u.default)(t).create({adaptationset:new p.default,period:new g.default}),r}a.__dashjs_factory_name="DashParser",n.default=i.default.getClassFactory(a),t.exports=n.default},{3:3,47:47,70:70,71:71,73:73,74:74,75:75,76:76,77:77}],68:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),a);function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t;this._name=e,this._merge=(t=e)&&t.length&&t.charAt(0)===t.charAt(0).toUpperCase()}n.default=i,t.exports=n.default},{}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a,o=e(68),s=(a=o)&&a.__esModule?a:{default:a},r=(r(u,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),u);function u(e,t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(t)&&t.forEach(function(e){r._properties.push(new s.default(e))})}n.default=r,t.exports=n.default},{68:68}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e(69)),o=i(e(61)),e=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,a["default"]),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var e=[o.default.PROFILES,o.default.WIDTH,o.default.HEIGHT,o.default.SAR,o.default.FRAMERATE,o.default.AUDIO_SAMPLING_RATE,o.default.MIME_TYPE,o.default.SEGMENT_PROFILES,o.default.CODECS,o.default.MAXIMUM_SAP_PERIOD,o.default.START_WITH_SAP,o.default.MAX_PLAYOUT_RATE,o.default.CODING_DEPENDENCY,o.default.SCAN_TYPE,o.default.FRAME_PACKING,o.default.AUDIO_CHANNEL_CONFIGURATION,o.default.CONTENT_PROTECTION,o.default.ESSENTIAL_PROPERTY,o.default.SUPPLEMENTAL_PROPERTY,o.default.INBAND_EVENT_STREAM];r(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,o.default.ADAPTATION_SET,e,[new a.default(o.default.REPRESENTATION,e,[new a.default(o.default.SUB_REPRESENTATION,e)])])}n.default=e,t.exports=n.default},{61:61,69:69}],71:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e(69)),o=i(e(61)),e=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,a["default"]),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var e=[o.default.SEGMENT_BASE,o.default.SEGMENT_TEMPLATE,o.default.SEGMENT_LIST];r(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,o.default.PERIOD,e,[new a.default(o.default.ADAPTATION_SET,e,[new a.default(o.default.REPRESENTATION,e)])])}n.default=e,t.exports=n.default},{61:61,69:69}],72:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),a);function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this._test=e,this._converter=t}n.default=i,t.exports=n.default},{}],73:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};var i,a=e(72),e=(i=a)&&i.__esModule?i:{default:i},o=60,s=60,u=1e3,l=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,e=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,e["default"]),d);function d(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),r(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,function(e){return l.test(e.value)},function(e){var t=l.exec(e),n=void 0,n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&parseFloat(t[7])*u||0);return t[9]&&t[10]&&(e=parseInt(t[9],10)*s+parseInt(t[10],10),n+=("+"===t[8]?-1:1)*e*o*u),new Date(n)})}n.default=e,t.exports=n.default},{72:72}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e(72)),o=i(e(112)),s=i(e(61)),u=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,l=31536e3,d=2592e3,f=86400,c=3600,h=60,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,a["default"]),p);function p(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),r(Object.getPrototypeOf(p.prototype),"constructor",this).call(this,function(e){for(var t=[s.default.MIN_BUFFER_TIME,s.default.MEDIA_PRESENTATION_DURATION,s.default.MINIMUM_UPDATE_PERIOD,s.default.TIMESHIFT_BUFFER_DEPTH,s.default.MAX_SEGMENT_DURATION,s.default.MAX_SUBSEGMENT_DURATION,s.default.SUGGESTED_PRESENTATION_DELAY,s.default.START,o.default.START_TIME,s.default.DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return u.test(e.value);return!1},function(e){var t=u.exec(e),e=parseFloat(t[3]||0)*l+parseFloat(t[5]||0)*d+parseFloat(t[7]||0)*f+parseFloat(t[9]||0)*c+parseFloat(t[11]||0)*h+parseFloat(t[13]||0);return void 0!==t[1]&&(e=-e),e})}n.default=a,t.exports=n.default},{112:112,61:61,72:72}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};var i,a=e(72),e=(i=a)&&i.__esModule?i:{default:i},o=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,e=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,e["default"]),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,function(e){return o.test(e.value)},function(e){return parseFloat(e)})}n.default=e,t.exports=n.default},{72:72}],76:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=i(e(72)),s=i(e(61)),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,o["default"]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),r(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,function(e,t){var n=(a(n={},s.default.MPD,[s.default.ID,s.default.PROFILES]),a(n,s.default.PERIOD,[s.default.ID]),a(n,s.default.BASE_URL,[s.default.SERVICE_LOCATION,s.default.BYTE_RANGE]),a(n,s.default.SEGMENT_BASE,[s.default.INDEX_RANGE]),a(n,s.default.INITIALIZATION,[s.default.RANGE]),a(n,s.default.REPRESENTATION_INDEX,[s.default.RANGE]),a(n,s.default.SEGMENT_LIST,[s.default.INDEX_RANGE]),a(n,s.default.BITSTREAM_SWITCHING,[s.default.RANGE]),a(n,s.default.SEGMENT_URL,[s.default.MEDIA_RANGE,s.default.INDEX_RANGE]),a(n,s.default.SEGMENT_TEMPLATE,[s.default.INDEX_RANGE,s.default.MEDIA,s.default.INDEX,s.default.INITIALIZATION_MINUS,s.default.BITSTREAM_SWITCHING_MINUS]),a(n,s.default.ASSET_IDENTIFIER,[s.default.VALUE,s.default.ID]),a(n,s.default.EVENT_STREAM,[s.default.VALUE]),a(n,s.default.ADAPTATION_SET,[s.default.PROFILES,s.default.MIME_TYPE,s.default.SEGMENT_PROFILES,s.default.CODECS,s.default.CONTENT_TYPE]),a(n,s.default.FRAME_PACKING,[s.default.VALUE,s.default.ID]),a(n,s.default.AUDIO_CHANNEL_CONFIGURATION,[s.default.VALUE,s.default.ID]),a(n,s.default.CONTENT_PROTECTION,[s.default.VALUE,s.default.ID]),a(n,s.default.ESSENTIAL_PROPERTY,[s.default.VALUE,s.default.ID]),a(n,s.default.SUPPLEMENTAL_PROPERTY,[s.default.VALUE,s.default.ID]),a(n,s.default.INBAND_EVENT_STREAM,[s.default.VALUE,s.default.ID]),a(n,s.default.ACCESSIBILITY,[s.default.VALUE,s.default.ID]),a(n,s.default.ROLE,[s.default.VALUE,s.default.ID]),a(n,s.default.RATING,[s.default.VALUE,s.default.ID]),a(n,s.default.VIEWPOINT,[s.default.VALUE,s.default.ID]),a(n,s.default.CONTENT_COMPONENT,[s.default.CONTENT_TYPE]),a(n,s.default.REPRESENTATION,[s.default.ID,s.default.DEPENDENCY_ID,s.default.MEDIA_STREAM_STRUCTURE_ID]),a(n,s.default.SUBSET,[s.default.ID]),a(n,s.default.METRICS,[s.default.METRICS_MINUS]),a(n,s.default.REPORTING,[s.default.VALUE,s.default.ID]),n);if(n.hasOwnProperty(t)){t=n[t];return void 0!==t&&0<=t.indexOf(e.name)}return!1},function(e){return String(e)})}n.default=o,t.exports=n.default},{61:61,72:72}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),e=(r=i)&&r.__esModule?r:{default:r};function a(d){function l(e,t,n){for(var r=0,i=e.length;r<i;++r){var a,o,s=e[r];t[s.name]&&(n[s.name]?s.merge&&(a=t[s.name],o=n[s.name],"object"==typeof a&&"object"==typeof o?function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(a,o):n[s.name]=a+o):n[s.name]=t[s.name])}}function f(e,t){for(var n=0,r=e.children.length;n<r;++n){var i=e.children[n],a=t[i.name+"_asArray"];if(a)for(var o=0,s=a.length;o<s;++o){var u=a[o];l(e.properties,t,u),f(i,u)}}}return{run:function(e){if(null===e||"object"!=typeof e)return e;if(e.Period_asArray&&"period"in d)for(var t=d.period,n=e.Period_asArray,r=0,i=n.length;r<i;++r){var a=n[r];if(f(t,a),"adaptationset"in d){var o=a.AdaptationSet_asArray;if(o)for(var s=d.adaptationset,u=0,l=o.length;u<l;++u)f(s,o[u])}}return e}}}a.__dashjs_factory_name="ObjectIron";e=e.default.getClassFactory(a);n.default=e,t.exports=n.default},{47:47}],78:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(112)),d=e(81);function o(e,s){var u=(e=e||{}).timelineConverter;function l(){if(!u||!u.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(a.default.MISSING_CONFIG_ERROR)}function r(e,t){if(l(),!e)return null;var n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,r=n.SegmentURL_asArray.length,i=e&&!isNaN(e.startNumber)?e.startNumber:1,a=Math.max(i-1,0),o=Math.max(t-a,0),a=null;return o<r&&(o=n.SegmentURL_asArray[o],(a=(0,d.getIndexBasedSegment)(u,s,e,t))&&(a.replacementTime=(i+t-1)*e.segmentDuration,a.media=o.media?o.media:"",a.mediaRange=o.mediaRange,a.index=t,a.indexRange=o.indexRange)),e.availableSegmentsNumber=r,a}return{getSegmentByIndex:r,getSegmentByTime:function(e,t){if(l(),!e)return null;var n=e.segmentDuration;return isNaN(n)?null:(t=u.calcPeriodRelativeTimeFromMpdRelativeTime(e,t),r(e,Math.floor(t/n)))}}}o.__dashjs_factory_name="ListSegmentsGetter";i=i.default.getClassFactory(o);n.default=i,t.exports=n.default},{112:112,47:47,81:81}],79:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,null,[{key:"round10",value:function(e,t){return n="round",e=e,void 0!==(t=t)&&0!=+t?(t=+t,null===(e=+e)||isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math[n](+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t)))):Math[n](e);var n}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}n.default=i,t.exports=n.default},{}],80:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(112));function a(e){var t=(e=e||{}).timelineConverter;function a(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(o.default.MISSING_CONFIG_ERROR)}function n(e,t){if(a(),!e)return null;var n=e.segments?e.segments.length:-1,r=void 0;if(t<n&&(r=e.segments[t])&&r.availabilityIdx===t)return r;for(var i=0;i<n;i++)if((r=e.segments[i])&&r.availabilityIdx===t)return r;return null}return{getSegmentByIndex:n,getSegmentByTime:function(e,t){return a(),n(e,function(e,t){if(!e)return-1;var n=e.segments,r=n?n.length:null,i=-1,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0;if(n&&0<r)for(l=0;l<r;l++)if(o=n[l],s=o.presentationStartTime,u=o.duration,s<=t+(a=u/2)&&t-a<s+u){i=o.availabilityIdx;break}return i}(e,t))}}}a.__dashjs_factory_name="SegmentBaseGetter";i=i.default.getClassFactory(a);n.default=i,t.exports=n.default},{112:112,47:47}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.unescapeDollarsInTemplate=function(e){return e?e.split("$$").join("$"):e},n.replaceIDForTemplate=function(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;t=t.toString();return e.split("$RepresentationID$").join(t)},n.replaceTokenForTemplate=h,n.getIndexBasedSegment=function(e,t,n,r){var i=void 0,a=void 0,o=void 0;i=n.segmentDuration,isNaN(i)&&(i=n.adaptation.period.duration);a=parseFloat((n.adaptation.period.start+r*i).toFixed(5)),o=parseFloat((a+i).toFixed(5));r=p(n,i,a,e.calcMediaTimeFromPresentationTime(a,n),e.calcAvailabilityStartTimeFromPresentationTime(a,n.adaptation.period.mpd,t),e,o,t,r);return g(e,n,r,t)?r:null},n.getTimeBasedSegment=function(e,t,n,r,i,a,o,s,u,l){var d=r/a,f=Math.min(i/a,n.adaptation.period.mpd.maxSegmentDuration),c=void 0,i=void 0,a=void 0;return c=e.calcPresentationTimeFromMediaTime(d,n),i=c+f,a=p(n,f,c,d,n.adaptation.period.mpd.manifest.loadedTime,e,i,t,u),g(e,n,a,t)?(a.replacementTime=l||r,o=h(o,"Number",a.replacementNumber),o=h(o,"Time",a.replacementTime),a.media=o,a.mediaRange=s,a):null};var r,i=e(96),d=(r=i)&&r.__esModule?r:{default:r};function f(e,t){for(;e.length<t;)e="0"+e;return e}function h(e,t,n){var r,i,a,o,s,u=void 0,l=t.length,d="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((i=e.indexOf("$",r+l))<0)return e;if(r<(a=e.indexOf("%0",r+l))&&a<i)switch(o=e.charAt(i-1),s=parseInt(e.substring(a+d,i-1),10),o){case"d":case"i":case"u":u=f(n.toString(),s);break;case"x":u=f(n.toString(16),s);break;case"X":u=f(n.toString(16),s).toUpperCase();break;case"o":u=f(n.toString(8),s);break;default:return e}else u=n;e=e.substring(0,r)+u+e.substring(i+1)}}function p(e,t,n,r,i,a,o,s,u){var l=new d.default;return l.representation=e,l.duration=t,l.presentationStartTime=n,l.mediaStartTime=r,l.availabilityStartTime=i,l.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(o,e.adaptation.period.mpd,s),l.wallStartTime=a.calcWallTimeForSegment(l,s),l.replacementNumber=(s=u,l.representation.startNumber+s),l.availabilityIdx=u,l}function g(e,t,n,r){var i=e.getPeriodEnd(t,r);if(e.calcPeriodRelativeTimeFromMpdRelativeTime(t,i)<=e.calcPeriodRelativeTimeFromMpdRelativeTime(t,n.presentationStartTime)){if(!r)return;if(t.segmentAvailabilityRange&&n.presentationStartTime>=t.segmentAvailabilityRange.end)return}return 1}},{96:96}],82:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),u=r(e(112)),l=e(81);function a(e,a){var o=(e=e||{}).timelineConverter;function s(){if(!o||!o.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(u.default.MISSING_CONFIG_ERROR)}function r(e,t){if(s(),!e)return null;var n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate;t=Math.max(t,0);var r=(0,l.getIndexBasedSegment)(o,a,e,t);r&&(r.replacementTime=Math.round((t-1)*e.segmentDuration*e.timescale,10),i=n.media,i=(0,l.replaceTokenForTemplate)(i,"Number",r.replacementNumber),i=(0,l.replaceTokenForTemplate)(i,"Time",r.replacementTime),r.media=i);var n=e.segmentDuration,i=e.segmentAvailabilityRange;return isNaN(n)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((i.end-i.start)/n),r}return{getSegmentByIndex:r,getSegmentByTime:function(e,t){if(s(),!e)return null;var n=e.segmentDuration;return isNaN(n)?null:(t=o.calcPeriodRelativeTimeFromMpdRelativeTime(e,t),r(e,Math.floor(t/n)))}}}a.__dashjs_factory_name="TemplateSegmentsGetter";i=i.default.getClassFactory(a);n.default=i,t.exports=n.default},{112:112,47:47,81:81}],83:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var g=r(e(46)),_=r(e(54)),i=r(e(47)),m=r(e(61)),E=r(e(65)),y=r(e(48));function a(){var e,t=this.context,n=(0,g.default)(t).getInstance(),o=(0,y.default)(t).getInstance(),d=void 0,i=void 0,s=void 0,r=void 0;function a(e){i=e}function u(e,t,n,r){return r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-i)):t.availabilityStartTime}function l(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*i)/1e3}function f(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function c(e){void 0!==e.offset&&(a(e.offset/1e3),s=!0)}function h(){i=0,s=!1,r=NaN}function p(){n.off(_.default.UPDATE_TIME_SYNC_OFFSET,c,this),h()}return e={initialize:function(){h(),n.on(_.default.UPDATE_TIME_SYNC_OFFSET,c,this)},getClientTimeOffset:function(){return i},setClientTimeOffset:a,getExpectedLiveEdge:function(){return r},setExpectedLiveEdge:function(e){r=e},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return u.call(this,e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return u.call(this,e,t,n,!0)},calcPresentationTimeFromWallTime:l,calcPresentationTimeFromMediaTime:f,calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!s&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var i=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0);if(e.segmentInfoType===m.default.SEGMENT_TIMELINE&&o.get().streaming.calcSegmentAvailabilityRangeFromTimeline)return function(e){var t=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],n=d.getRepresentationFor(e.index,t),t=n.SegmentTemplate.SegmentTimeline,r=n.SegmentTemplate.timescale,i=t.S_asArray,t={start:0,end:0},a=0,o=void 0,s=void 0,u=void 0,l=void 0;for(t.start=f(i[0].t/r,e),u=0,l=i.length;u<l;u++)o=i[u],s=0,o.hasOwnProperty("r")&&(s=o.r),a+=o.d/r*(1+s);return t.end=t.start+a,t}(e);var a=l(new Date,n),t=n.start+n.duration;return r.start=Math.max(a-n.mpd.timeShiftBufferDepth,n.start),i=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<i?i-e.availabilityTimeOffset:i,r.end=t<=a&&a-i<t?t:a-i,r},getPeriodEnd:function(e,t){var n=e.adaptation.period;if(!t)return n.start+n.duration;if(!s&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var r=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),t=l(new Date,n),n=n.start+n.duration,r=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<r?r-e.availabilityTimeOffset:r;return Math.min(t-r,n)},calcWallTimeForSegment:function(e,t){var n=void 0;return t&&(t=e.representation.adaptation.period.mpd.suggestedPresentationDelay,t=e.presentationStartTime+t,n=new Date(e.availabilityStartTime.getTime()+1e3*t)),n},reset:p},d=(0,E.default)(t).getInstance(),p(),e}a.__dashjs_factory_name="TimelineConverter",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{46:46,47:47,48:48,54:54,61:61,65:65}],84:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(112)),h=e(81);function o(e,y){var v=(e=e||{}).timelineConverter;function t(){if(!v||!v.hasOwnProperty("calcMediaTimeFromPresentationTime")||!v.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(a.default.MISSING_CONFIG_ERROR)}function n(e,t){for(var n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,r=n.SegmentTimeline,i=n.SegmentURL_asArray,a=0,o=0,s=-1,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=e.timescale,_=!1,d=0,m=(u=r.S_asArray).length;d<m&&!_;d++){var E,c=0;for((l=u[d]).hasOwnProperty("r")&&(c=l.r),l.hasOwnProperty("t")&&(o=(a=l.t)/g),c<0&&((p=u[d+1])&&p.hasOwnProperty("t")?h=p.t/g:(E=(e.segmentAvailabilityRange?e.segmentAvailabilityRange:v.calcSegmentAvailabilityRange(e,y)).end,h=v.calcMediaTimeFromPresentationTime(E,e),e.segmentDuration=l.d/g),c=Math.ceil((h-o)/(l.d/g))-1),f=0;f<=c&&!_;f++)(_=t(a,o,n,i,l,g,++s,d))&&(e.segmentDuration=l.d/g,(f<c-1||d<m-1)&&s++),o=(a+=l.d)/g}e.availableSegmentsNumber=s}return{getSegmentByIndex:function(l,e,d){if(t(),!l)return null;var f=null,c=!1;return n(l,function(e,t,n,r,i,a,o,s){if(c||d<0){var u=n.media,n=i.mediaRange;return r&&(u=r[s].media||"",n=r[s].mediaRange),f=(0,h.getTimeBasedSegment)(v,y,l,e,i.d,a,u,n,o,i.tManifest),!0}return t>=d-.5*i.d/a&&(c=!0),!1}),f},getSegmentByTime:function(u,e){if(t(),!u)return null;void 0===e&&(e=null);var l=null,d=v.calcMediaTimeFromPresentationTime(e,u);return n(u,function(e,t,n,r,i,a,o,s){if(d<t+i.d/a){t=n.media,n=i.mediaRange;return r&&(t=r[s].media||"",n=r[s].mediaRange),l=(0,h.getTimeBasedSegment)(v,y,u,e,i.d,a,t,n,o,i.tManifest),!0}return!1}),l}}}o.__dashjs_factory_name="TimelineSegmentsGetter";i=i.default.getClassFactory(o);n.default=i,t.exports=n.default},{112:112,47:47,81:81}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.period=null,this.index=-1,this.type=null}n.default=r,t.exports=n.default},{}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.url=e||"",this.serviceLocation=t||e||"",this.dvb_priority=n||1,this.dvb_weight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,n.default=i,t.exports=n.default},{}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN}n.default=r,t.exports=n.default},{}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}n.default=r,t.exports=n.default},{}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null}n.default=r,t.exports=n.default},{}],90:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null}n.default=r,t.exports=n.default},{}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN}n.default=r,t.exports=n.default},{}],92:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"getMpdTarget",value:function(e){var t="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(e,t)}}]),a);function a(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.action=e,this.xpath=t,this.value=n,this.position=null}n.default=i,t.exports=n.default},{}],93:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null}r.DEFAULT_ID="defaultId",n.default=r,t.exports=n.default},{}],94:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a,o=e(61),s=(a=o)&&a.__esModule?a:{default:a},r=(r(u,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==s.default.BASE_URL&&this.segmentInfoType!==s.default.SEGMENT_BASE&&!this.indexRange}}]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}n.default=r,t.exports=n.default},{61:61}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null}n.default=r,t.exports=n.default},{}],96:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null}n.default=r,t.exports=n.default},{}],97:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(e,t){for(var n=null,r=e,i=1,a="MPD";i<this.path.length&&null!==r;){n=r;var o,s=this.path[i],a=s.name;i===this.path.length-1&&a.startsWith("@")||(0===(o=n[a+"_asArray"]||[]).length&&n[a]&&o.push(n[a]),s.position?r=o[s.position]||null:s.attribute?function(){var t=s.attribute;r=o.filter(function(e){return e[t.name]==t.value})[0]||null}():r=o[0]||null),i++}return null===r?null:a.startsWith("@")?{name:a.substring(1),leaf:r,target:r}:{name:a,leaf:r,target:t?n:r}}}]),a);function a(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.valid="/"==e[0],this.path=e.split("/").filter(function(e){return 0!==e.length}).map(function(e){var t={name:e},n=e.indexOf("[");return-1!=n&&(t.name=e.substring(0,n),n=e.substring(n+1,e.length-1),r.valid=r.valid&&-1==n.indexOf("["),-1!=(e=n.indexOf("="))?(t.attribute={name:n.substring(1,e),value:n.substring(e+1)},-1!=["'",'"'].indexOf(t.attribute.value[0])&&(t.attribute.value=t.attribute.value.substring(1,t.attribute.value.length-1))):t.position=parseInt(n,10)-1),t})}n.default=i,t.exports=n.default},{}],98:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0}n.default=r,t.exports=n.default},{}],99:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.schemeIdUri="",this.value=""}n.default=r,t.exports=n.default},{}],100:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(112)),d=r(e(163)),f=r(e(242)),c=r(e(239)),e=r(e(47));function i(e){e=e||{};var t=this.context,i=e.eventBus,a=e.events,n=e.urlUtils,o=e.errors,s=void 0,u=void 0;return s={checkForExistence:function(t){function e(e){i.trigger(a.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e})}var n;t?(n=new f.default(t.url),u.load({request:n,success:function(){e(!0)},error:function(){e(!1)}})):e(!1)},load:function(n){function r(e,t){i.trigger(a.LOADING_COMPLETED,{request:n,response:e||null,error:t||null,sender:s})}n?u.load({request:n,progress:function(e){i.trigger(a.LOADING_PROGRESS,{request:n,stream:e.stream}),e.data&&i.trigger(a.LOADING_DATA_PROGRESS,{request:n,response:e.data||null,error:null,sender:s})},success:function(e){r(e)},error:function(e,t,n){r(void 0,new c.default(o.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,t))},abort:function(e){e&&i.trigger(a.LOADING_ABANDONED,{mediaType:e.mediaType,request:e,sender:s})}}):r(void 0,new c.default(o.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,o.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){u&&u.abort()},reset:function(){u&&(u.abort(),u=null)}},u=(0,d.default)(t).create({errHandler:e.errHandler,errors:o,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings.get().streaming.lowLatencyEnabled,urlUtils:n,constants:l.default,boxParser:e.boxParser,dashConstants:e.dashConstants,requestTimeout:e.settings.get().streaming.fragmentRequestTimeout}),s}i.__dashjs_factory_name="FragmentLoader",n.default=e.default.getClassFactory(i),t.exports=n.default},{112:112,163:163,239:239,242:242,47:47}],101:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var g=r(e(112)),a=r(e(61)),o=r(e(128)),_=r(e(163)),m=r(e(234)),E=r(e(246)),y=r(e(239)),v=e(255),T=r(e(46)),S=r(e(54)),A=r(e(51)),i=r(e(47)),I=r(e(67));function s(e){e=e||{};var s=this.context,u=e.debug,l=(0,T.default)(s).getInstance(),d=(0,m.default)(s).getInstance(),t=void 0,f=void 0,n=void 0,c=void 0,h=void 0,p=e.mssHandler,r=e.errHandler;function i(e){l.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return t={load:function(o){var e=new E.default(o,v.HTTPRequest.MPD_TYPE);n.load({request:e,success:function(e,t,n){if(c){var r=void 0,i=void 0,a=void 0;if(n&&n!==o?(i=d.parseBaseUrl(n),r=n):(d.isRelative(o)&&(o=d.resolve(o,window.location.href)),i=d.parseBaseUrl(o)),"No Content"!=t)if(null===h&&(n=null,h=-1<(t=e).indexOf("SmoothStreamingMedia")?(p&&(n=p.createMssParser(),p.registerEvents()),n):-1<t.indexOf("MPD")||-1<t.indexOf("Patch")?(0,I.default)(s).create({debug:u}):n),null!==h){c.setMatchers(h.getMatchers()),c.setIron(h.getIron());try{a=h.parse(e)}catch(e){return void l.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+o)})}a?(a.url=r||o,a.originalUrl||(a.originalUrl=a.url),a.hasOwnProperty(g.default.LOCATION)&&(i=d.parseBaseUrl(a.Location_asArray[0]),f.debug("BaseURI set by Location to: "+i)),a.baseUri=i,a.loadedTime=new Date,c.resolveManifestOnLoad(a),l.trigger(S.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:e})):l.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+o)})}else l.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+o)});else l.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null})}},error:function(e,t,n){l.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(A.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(o+", ")+n)})}})},reset:function(){l.off(S.default.XLINK_READY,i,t),p&&p.reset(),c&&(c.reset(),c=null),n&&(n.abort(),n=null)}},f=u.getLogger(t),l.on(S.default.XLINK_READY,i,t),n=(0,_.default)(s).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings.get().streaming.lowLatencyEnabled,urlUtils:d,constants:g.default,dashConstants:a.default,errors:A.default}),c=(0,o.default)(s).create({errHandler:r,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),h=null,t}s.__dashjs_factory_name="ManifestLoader";i=i.default.getClassFactory(s);n.default=i,t.exports=n.default},{112:112,128:128,163:163,234:234,239:239,246:246,255:255,46:46,47:47,51:51,54:54,61:61,67:67}],102:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var R=r(e(46)),b=r(e(54)),i=r(e(47)),M=r(e(45)),D=r(e(51)),N=r(e(61)),C=r(e(234));function a(){var e=this.context,a=(0,R.default)(e).getInstance(),o=(0,C.default)(e).getInstance(),t=void 0,s=void 0,u=void 0,n=void 0,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,r=void 0,i=void 0;function g(){u=NaN,d=!(l=!(f=!1)),_()}function _(){null!==n&&(clearTimeout(n),n=null)}function m(e){_(),d||(isNaN(e)&&!isNaN(u)&&(e=1e3*u),isNaN(e)||(s.debug("Refresh manifest in "+e+" milliseconds."),n=setTimeout(v,e)))}function E(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];f=!0;var t=h.getValue(),n=t.url,r=p.getPatchLocation(t),i=p.getLocation(t);r&&!e?n=r:i&&(n=i),o.isRelative(n)&&(n=o.resolve(n,t.url)),c.load(n)}function y(e){if(e){if(p.getIsPatch(e)){var t=e;e=h.getValue();var n=p.isPatchValid(e,t),r=n;if(n&&(n=p.getPublishTime(e),r=p.applyPatchToManifest(e,t),i=p.getPublishTime(e),r=n.getTime()!=i.getTime()),!r)return s.debug("Patch provided is invalid, performing full manifest refresh"),void E(!0);e.loadedTime=new Date}}else(e=h.getValue()).loadedTime=new Date;if(h.getValue()&&h.getValue().type===N.default.DYNAMIC&&e.type===N.default.STATIC)return a.trigger(b.default.DYNAMIC_TO_STATIC),void(d=!(f=!1));h.setValue(e);var i=new Date,r=(i.getTime()-e.loadedTime.getTime())/1e3;2147483647<1e3*(u=p.getManifestUpdatePeriod(e,r))&&(u=2147483.647),a.trigger(b.default.MANIFEST_UPDATED,{manifest:e}),s.info("Manifest has been refreshed at "+i+"["+i.getTime()/1e3+"] "),l||m()}function v(){l||(f?m(i.get().streaming.manifestUpdateRetryInterval):E())}function T(e){e.error?e.error.code===D.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&r.error(e.error):y(e.manifest)}function S(){l=!1,m()}function A(){(l=!i.get().streaming.scheduleWhilePaused)&&_()}function I(){f=!1}return t={initialize:function(){g(),a.on(b.default.STREAMS_COMPOSED,I,this),a.on(b.default.PLAYBACK_STARTED,S,this),a.on(b.default.PLAYBACK_PAUSED,A,this),a.on(b.default.INTERNAL_MANIFEST_LOADED,T,this)},setManifest:function(e){y(e)},refreshManifest:E,setConfig:function(e){e&&(e.manifestModel&&(h=e.manifestModel),e.adapter&&(p=e.adapter),e.manifestLoader&&(c=e.manifestLoader),e.errHandler&&(r=e.errHandler),e.settings&&(i=e.settings))},reset:function(){a.off(b.default.PLAYBACK_STARTED,S,this),a.off(b.default.PLAYBACK_PAUSED,A,this),a.off(b.default.STREAMS_COMPOSED,I,this),a.off(b.default.INTERNAL_MANIFEST_LOADED,T,this),g()}},s=(0,M.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="ManifestUpdater",n.default=i.default.getClassFactory(a),t.exports=n.default},{234:234,45:45,46:46,47:47,51:51,54:54,61:61}],103:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var he=r(e(2)),pe=r(e(112)),ge=r(e(61)),_e=r(e(113)),me=r(e(124)),Ee=r(e(126)),ye=r(e(121)),ve=r(e(122)),Te=r(e(116)),Se=r(e(101)),Ae=r(e(226)),Ie=r(e(220)),Re=r(e(221)),be=r(e(215)),Me=r(e(231)),De=r(e(213)),Ne=r(e(158)),Ce=r(e(155)),Oe=r(e(156)),we=r(e(115)),Pe=r(e(162)),Le=r(e(159)),xe=r(e(153)),Fe=r(e(223)),Ue=r(e(45)),Be=r(e(51)),ke=r(e(46)),Ge=r(e(54)),je=r(e(104)),Ye=r(e(47)),He=r(e(48)),qe=e(50),Ke=r(e(63)),Ve=r(e(56)),We=r(e(58)),ze=r(e(83)),Xe=e(255),Qe=r(e(1)),Ze=r(e(9)),$e=r(e(239)),Je=e(232),et=r(e(102)),tt=r(e(234)),nt=r(e(219));function i(){var r="You must first call initialize() and set a source before calling this method",n="You must first call initialize() and set a valid source and view before calling this method",t="You must first call attachView() to set the video element before calling this method",e="You must first call attachSource() with a valid source before calling this method",i="MediaPlayer not initialized!",a=this.context,o=(0,ke.default)(a).getInstance(),s=(0,He.default)(a).getInstance(),u=(0,Ue.default)(a).getInstance({settings:s}),l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=void 0,_=void 0,m=void 0,E=void 0,y=void 0,v=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,M=void 0,D=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0,x=void 0,F=void 0,U=void 0,B=void 0,k=void 0,G=void 0,j=void 0,Y=void 0,H=void 0,q=void 0;function K(){ae(null),ne(null),c=null,T&&(T.reset(),T=null),S&&(S.reset(),S=null),j.reset(),s.reset(),I&&(I.reset(),I=null)}function V(){return!!f&&!!U.getElement()}function W(){return(0,qe.getVersionString)()}function z(){if(!g)throw n;return P.isPaused()}function X(e){var t=L.getCurrentDVRInfo();if(!t)return 0;var n=P.getLiveDelay(),e=t.range.start+e;return e>t.range.end-n&&(e=t.range.end-n),e}function Q(e){if(!g)throw n;var t=te().currentTime;return void 0!==e?t=O.getTimeRelativeToStreamId(t,e):P.getIsDynamic()&&(t=null===(e=L.getCurrentDVRInfo())||0===t?0:Math.max(0,t-e.range.start)),t}function Z(){if(!g)throw n;var e,t=te().duration;return P.getIsDynamic()&&(t=(e=L.getCurrentDVRInfo())?e.range.end-e.range.start:0),t}function $(e){(0,Je.checkParameterType)(e,"boolean"),_=e}function J(){b.restoreDefaultUTCTimingSources()}function ee(){return L}function te(){if(!U.getElement())throw t;return U.getElement()}function ne(e){if(!h)throw i;U.setElement(e),e&&(le(),function(){if(S)return;var e=dashjs.MetricsReporting;{"function"==typeof e&&(e=e(a).create(),S=e.createMetricsReporting({debug:u,eventBus:o,mediaElement:te(),adapter:R,dashMetrics:L,events:Ge.default,constants:pe.default,metricsConstants:_e.default}))}}(),function(){if(A)return;var e=dashjs.MssHandler;"function"==typeof e&&(Be.default.extend(e.errors),A=e(a).create({eventBus:o,mediaPlayerModel:b,dashMetrics:L,manifestModel:x,playbackController:P,streamController:O,protectionController:T,baseURLController:D,errHandler:M,events:Ge.default,constants:pe.default,debug:u,initSegmentType:Xe.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:Qe.default,ISOBoxer:Ze.default,settings:s}))}(),O&&O.switchToVideoElement()),g&&se(),ce()}function re(e){if(!p)throw r;var t=O.getActiveStreamInfo();return v.getTracksFor(e,t)}function ie(e,n){var r=-1;e.some(function(e,t){if(e===n)return r=t,!0}),r<0||e.splice(r,1)}function ae(e){if(!h)throw i;"string"==typeof e&&k.initialize(e),f=e,(p||g)&&se(),V()&&ce()}function oe(){if(!p)throw r;var e=O.getActiveStreamInfo();return e?O.getStreamById(e.id):null}function se(){p=g=!1,R.reset(),O.reset(),w.reset(),P.reset(),m.reset(),v.reset(),B.reset(),T&&(s.get().streaming.keepProtectionMediaKeys?T.stop():(T.reset(),T=null,le())),F.reset()}function ue(){return(0,Se.default)(a).create({debug:u,errHandler:M,dashMetrics:L,mediaPlayerModel:b,requestModifier:(0,Me.default)(a).getInstance(),mssHandler:A,settings:s})}function le(){if(T)return T;var e=dashjs.Protection;if("function"!=typeof e)return null;var t=e(a).create();return Ge.default.extend(e.events),je.default.extend(e.events,{publicOnly:!0}),Be.default.extend(e.errors),N=N||(0,Ie.default)(a).getInstance(),(T=t.createProtectionSystem({debug:u,errHandler:M,videoModel:U,capabilities:N,eventBus:o,events:Ge.default,BASE64:Qe.default,constants:pe.default,cmcdModel:F,settings:s}))&&(T.setLicenseRequestFilters(Y),T.setLicenseResponseFilters(H)),T}function de(){if(!h)throw i;if(I)return I;var e=dashjs.OfflineController;if("function"!=typeof e)return null;Ge.default.extend(e.events),je.default.extend(e.events,{publicOnly:!0}),Be.default.extend(e.errors);var t=ue(),n=(0,et.default)(a).create();return n.setConfig({manifestModel:x,adapter:R,manifestLoader:t,errHandler:M}),I=e(a).create({debug:u,manifestUpdater:n,baseURLController:D,manifestLoader:t,manifestModel:x,mediaPlayerModel:b,abrController:m,playbackController:P,adapter:R,errHandler:M,dashMetrics:L,timelineConverter:y,schemeLoaderFactory:E,eventBus:o,events:Ge.default,errors:Be.default,constants:pe.default,settings:s,dashConstants:ge.default,urlUtils:(0,tt.default)(a).getInstance()})}function fe(e){var t=L.getCurrentDVRInfo();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function ce(){var e;I&&I.resetRecords(),!p&&f&&(p=!0,d.info("Streaming Initialized"),e=ue(),O=O||(0,Ee.default)(a).getInstance(),C.setConfig({capabilities:N,adapter:R,settings:s}),C.setCustomCapabilitiesFilters(q),O.setConfig({capabilities:N,capabilitiesFilter:C,manifestLoader:e,manifestModel:x,mediaPlayerModel:b,protectionController:T,adapter:R,dashMetrics:L,errHandler:M,timelineConverter:y,videoModel:U,playbackController:P,abrController:m,mediaController:v,textController:B,settings:s,baseURLController:D}),w.setConfig({settings:s,playbackController:P,streamController:O,videoModel:U,timelineConverter:y,adapter:R}),P.setConfig({streamController:O,dashMetrics:L,mediaPlayerModel:b,adapter:R,videoModel:U,timelineConverter:y,uriFragmentModel:k,settings:s}),m.setConfig({streamController:O,domStorage:G,mediaPlayerModel:b,dashMetrics:L,adapter:R,videoModel:U,settings:s}),B.setConfig({errHandler:M,manifestModel:x,adapter:R,mediaController:v,streamController:O,videoModel:U}),F.setConfig({abrController:m,dashMetrics:L,playbackController:P}),O.initialize(_,c),w.initialize(),F.initialize(),"string"==typeof f?O.load(f):O.loadWithManifest(f)),!g&&V()&&(g=!0,d.info("Playback Initialized"))}return l={initialize:function(e,t,n){N=N||(0,Ie.default)(a).getInstance(),M=(0,Ae.default)(a).getInstance(),N.supportsMediaSource()?h||(h=!0,y=(0,ze.default)(a).getInstance(),m||(m=(0,we.default)(a).getInstance()).setConfig({settings:s}),E=E||(0,Pe.default)(a).getInstance(),P=P||(0,me.default)(a).getInstance(),v=v||(0,ve.default)(a).getInstance(),O=O||(0,Ee.default)(a).getInstance(),w=w||(0,ye.default)(a).getInstance(),C=C||(0,Re.default)(a).getInstance(),R=(0,Ve.default)(a).getInstance(),x=(0,Ce.default)(a).getInstance(),F=(0,xe.default)(a).getInstance(),L=(0,We.default)(a).getInstance({settings:s}),B=(0,De.default)(a).getInstance(),G=(0,Fe.default)(a).getInstance({settings:s}),R.setConfig({constants:pe.default,cea608parser:he.default,errHandler:M,BASE64:Qe.default}),(D=D||(0,Te.default)(a).create()).setConfig({adapter:R}),(j=(0,Ke.default)(a).getInstance({dashMetrics:L,mediaPlayerModel:b,errHandler:M,baseURLController:D,events:Ge.default,eventBus:o,debug:u,boxParser:(0,nt.default)(a).getInstance(),requestModifier:(0,Me.default)(a).getInstance(),errors:Be.default})).initialize(),v.setConfig({domStorage:G,settings:s}),J(),$(void 0===n||n),de(),e&&ne(e),t&&ae(t),d.info("[dash.js "+W()+"] MediaPlayer has been initialized")):M.error(new $e.default(Be.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,Be.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(N=e.capabilities),e.capabilitiesFilter&&(C=e.capabilitiesFilter),e.streamController&&(O=e.streamController),e.gapController&&(w=e.gapController),e.playbackController&&(P=e.playbackController),e.mediaPlayerModel&&(b=e.mediaPlayerModel),e.abrController&&(m=e.abrController),e.schemeLoaderFactory&&(E=e.schemeLoaderFactory),e.mediaController&&(v=e.mediaController),e.settings&&(s=e.settings))},on:function(e,t,n,r){o.on(e,t,n,r)},off:function(e,t,n){o.off(e,t,n)},extend:function(e,t,n){Ye.default.extend(e,t,n,a)},attachView:ne,attachSource:ae,isReady:V,preload:function(){if(U.getElement()||p)return!1;if(!f)throw e;ce()},play:function(){if(!g)throw n;(!_||z()&&g)&&P.play()},isPaused:z,pause:function(){if(!g)throw n;P.pause()},isSeeking:function(){if(!g)throw n;return P.isSeeking()},isDynamic:function(){if(!g)throw n;return P.getIsDynamic()},seek:function(e){if(!g)throw n;if((0,Je.checkParameterType)(e,"number"),isNaN(e))throw pe.default.BAD_ARGUMENT_ERROR;e=P.getIsDynamic()?X(e):e,P.seek(e)},setPlaybackRate:function(e){te().playbackRate=e},getPlaybackRate:function(){return te().playbackRate},setMute:function(e){(0,Je.checkParameterType)(e,"boolean"),te().muted=e},isMuted:function(){return te().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw pe.default.BAD_ARGUMENT_ERROR;te().volume=e},getVolume:function(){return te().volume},time:Q,duration:Z,timeAsUTC:function(){if(!g)throw n;return Q()<0?NaN:fe(Q())},durationAsUTC:function(){if(!g)throw n;return fe(Z())},getActiveStream:oe,getDVRWindowSize:function(){var e=L.getCurrentDVRInfo();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:X,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),e=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(e<10?"0"+e.toString():e.toString())},formatUTC:function(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=new Date(1e3*e),e=i.toLocaleDateString(t),n=i.toLocaleTimeString(t,{hour12:n});return r?n+" "+e:n},getVersion:W,getDebug:function(){return u},getBufferLength:function(e){var t,n=[pe.default.VIDEO,pe.default.AUDIO,pe.default.FRAGMENTED_TEXT];return e?-1===n.indexOf(e)?(d.warn("getBufferLength requested for invalid type"),NaN):(t=L.getCurrentBufferLevel(e))||NaN:(t=n.map(function(e){return 0<re(e).length?L.getCurrentBufferLevel(e):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)}))===Number.MAX_VALUE?NaN:t},getTTMLRenderingDiv:function(){return U?U.getTTMLRenderingDiv():null},getVideoElement:te,getSource:function(){if(!f)throw e;return f},getCurrentLiveLatency:function(){if(!h)throw i;return g?P.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(e){if(!p)throw r;return m.getTopBitrateInfoFor(e)},setAutoPlay:$,getAutoPlay:function(){return _},getDashMetrics:ee,getQualityFor:function(e){if(!p)throw r;return e!==pe.default.IMAGE?m.getQualityFor(e):(e=oe())&&(e=e.getThumbnailController())?e.getCurrentTrackIndex():-1},setQualityFor:function(e,t){if(!p)throw r;if(e===pe.default.IMAGE){var n=oe();if(!n)return;n=n.getThumbnailController();n&&n.setTrackByIndex(t)}m.setPlaybackQuality(e,O.getActiveStreamInfo(),t)},updatePortalSize:function(){m.setElementSize(),m.setWindowResizeEventCalled(!0)},setTextDefaultLanguage:function(e){d.warn('setTextDefaultLanguage is deprecated and will be removed in version 3.2.0. Please use setInitialMediaSettingsFor("fragmentedText", { lang: lang }) instead'),void 0===B&&(B=(0,De.default)(a).getInstance()),B.setTextDefaultLanguage(e)},getTextDefaultLanguage:function(){return d.warn('getTextDefaultLanguage is deprecated and will be removed in version 3.2.0. Please use getInitialMediaSettingsFor("fragmentedText").lang instead'),void 0===B&&(B=(0,De.default)(a).getInstance()),B.getTextDefaultLanguage()},setTextDefaultEnabled:function(e){void 0===B&&(B=(0,De.default)(a).getInstance()),B.setTextDefaultEnabled(e)},getTextDefaultEnabled:function(){return void 0===B&&(B=(0,De.default)(a).getInstance()),B.getTextDefaultEnabled()},enableText:function(e){void 0===B&&(B=(0,De.default)(a).getInstance()),B.enableText(e)},enableForcedTextStreaming:function(e){void 0===B&&(B=(0,De.default)(a).getInstance()),B.enableForcedTextStreaming(e)},isTextEnabled:function(){return void 0===B&&(B=(0,De.default)(a).getInstance()),B.isTextEnabled()},setTextTrack:function(e){if(!g)throw n;void 0===B&&(B=(0,De.default)(a).getInstance()),B.setTextTrack(e)},getBitrateInfoListFor:function(e){if(!p)throw r;var t=oe();return t?t.getBitrateListFor(e):[]},getStreamsFromManifest:function(e){if(!p)throw r;return R.getStreamsInfo(e)},getTracksFor:re,getTracksForTypeFromManifest:function(e,t,n){if(!p)throw r;return(n=n||R.getStreamsInfo(t,1)[0])?R.getAllMediaInfoForType(n,e,t):[]},getCurrentTrackFor:function(e){if(!p)throw r;var t=O.getActiveStreamInfo();return v.getCurrentTrackFor(e,t)},setInitialMediaSettingsFor:function(e,t){if(!h)throw i;v.setInitialSettings(e,t),e===pe.default.FRAGMENTED_TEXT&&B.setInitialSettings(t)},getInitialMediaSettingsFor:function(e){if(!h)throw i;return v.getInitialSettings(e)},setCurrentTrack:function(e){if(!p)throw r;v.setTrack(e)},getTrackSwitchModeFor:function(e){if(!h)throw i;return v.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!h)throw i;v.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){if(!h)throw i;v.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){if(!h)throw i;return v.getSelectionModeForInitialTrack()},addABRCustomRule:function(e,t,n){b.addABRCustomRule(e,t,n)},removeABRCustomRule:function(e){b.removeABRCustomRule(e)},removeAllABRCustomRule:function(){b.removeABRCustomRule()},getAverageThroughput:function(e){var t=m.getThroughputHistory();return t?t.getAverageThroughput(e):0},retrieveManifest:function(e,t){function n(e){e.error?t(null,e.error):t(e.manifest),o.off(Ge.default.INTERNAL_MANIFEST_LOADED,n,i),r.reset()}var r=ue(),i=this;o.on(Ge.default.INTERNAL_MANIFEST_LOADED,n,i),k.initialize(e),r.load(e)},addUTCTimingSource:function(e,t){b.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){b.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){b.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:J,setXHRWithCredentialsForType:function(e,t){b.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return b.getXHRWithCredentialsForType(e)},getProtectionController:le,attachProtectionController:function(e){T=e},setProtectionData:function(e){c=e,O&&O.setProtectionData(c)},registerLicenseRequestFilter:function(e){Y.push(e),T&&T.setLicenseRequestFilters(Y)},registerLicenseResponseFilter:function(e){H.push(e),T&&T.setLicenseResponseFilters(H)},unregisterLicenseRequestFilter:function(e){ie(Y,e),T&&T.setLicenseRequestFilters(Y)},unregisterLicenseResponseFilter:function(e){ie(H,e),T&&T.setLicenseResponseFilters(H)},registerCustomCapabilitiesFilter:function(e){q.push(e),C&&C.setCustomCapabilitiesFilters(q)},unregisterCustomCapabilitiesFilter:function(e){ie(q,e),C&&C.setCustomCapabilitiesFilters(q)},displayCaptionsOnTop:function(e){var t=(0,be.default)(a).getInstance();t.setConfig({videoModel:U}),t.initialize(),t.setDisplayCConTop(e)},attachTTMLRenderingDiv:function(e){if(!U.getElement())throw t;U.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=NaN;return B&&(e=B.getCurrentTrackIdx()),e},provideThumbnail:function(e,t){if("function"==typeof t)if(e<0)t(null);else{var n=P.getIsDynamic()?X(e):e,r=O.getStreamForTime(n);if(null!==r){e=r.getThumbnailController();if(e){r=O.getTimeRelativeToStreamId(n,r.getId());return e.provide(r,t)}t(null)}else t(null)}},getDashAdapter:function(){return R},getOfflineController:de,getSettings:function(){return s.get()},updateSettings:function(e){s.update(e)},resetSettings:function(){s.reset()},reset:K,destroy:function(){K(),Y=[],H=[],q=[],Ye.default.deleteSingletonInstances(a)}},d=u.getLogger(l),_=!(p=g=h=!1),j=R=c=I=T=null,Ge.default.extend(je.default),b=(0,Oe.default)(a).getInstance(),U=(0,Le.default)(a).getInstance(),k=(0,Ne.default)(a).getInstance(),Y=[],H=[],q=[],l}i.__dashjs_factory_name="MediaPlayer";e=Ye.default.getClassFactory(i);e.events=je.default,e.errors=Be.default,Ye.default.updateClassFactory(i.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{1:1,101:101,102:102,104:104,112:112,113:113,115:115,116:116,121:121,122:122,124:124,126:126,153:153,155:155,156:156,158:158,159:159,162:162,2:2,213:213,215:215,219:219,220:220,221:221,223:223,226:226,231:231,232:232,234:234,239:239,255:255,45:45,46:46,47:47,48:48,50:50,51:51,54:54,56:56,58:58,61:61,63:63,83:83,9:9}],104:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};var i,a=e(55);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.DYNAMIC_TO_STATIC="dynamicToStatic",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.GAP_CAUSED_SEEK_TO_PERIOD_END="gapCausedSeekToPeriodEnd",this.GAP_CAUSED_INTERNAL_SEEK="gapCausedInternalSeek",this.EVENT_MODE_ON_START="eventModeOnStart",this.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",this.CONFORMANCE_VIOLATION="conformanceViolation"}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((i=a)&&i.__esModule?i:{default:i})["default"]),o);n.default=e,t.exports=n.default},{55:55}],105:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(103),a=(r=i)&&r.__esModule?r:{default:r};var s,o,u=(s="application/dash+xml",{create:l,createAll:function(e,t){var n=[];e=e||"[data-dashjs-player]";for(var r=(t=t||document).querySelectorAll(e),i=0;i<r.length;i++){var a=l(r[i],null);n.push(a)}for(var o=t.querySelectorAll('source[type="'+s+'"]'),i=0;i<o.length;i++){a=l(function(e){var t=!0;for(;t;){var n=e;if(t=!1,/^VIDEO$/i.test(n.nodeName))return n;e=n.parentNode,t=!0}}(o[i]),null);n.push(a)}return n}});function l(e,t,n){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var r=void 0,i=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==s})[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return n=n||{},(r=(0,a.default)(n).create()).initialize(e,t.src,e.autoplay),(o=o||r.getDebug().getLogger()).debug("Converted "+i+" to dash.js player and added content: "+t.src),e._dashjs_player=r}var d=o=void 0;"undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate||"undefined"==typeof window||!window||!window.addEventListener||("complete"===window.document.readyState?window.dashjs?u.createAll():d=window.setInterval(function(){window.dashjs&&(window.clearInterval(d),u.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),u.createAll()})),n.default=u,t.exports=n.default},{103:103}],106:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(45)),e=r(e(47));function i(e){var t=this.context,n=void 0,r=void 0,a=void 0,o=[],i=e;function s(t,n){o=o.filter(function(e){return!((isNaN(n)||e.start<n)&&(isNaN(t)||e.end>t))})}return n={getAllBufferRanges:function(){for(var t=[],e=0;e<o.length;e++){var n=o[e];0===t.length||n.start>t[t.length-1].end?t.push({start:n.start,end:n.end}):t[t.length-1].end=n.end}var r={start:function(e){return t[e].start},end:function(e){return t[e].end}};return Object.defineProperty(r,"length",{get:function(){return t.length}}),r},append:function(e){a="InitializationSegment"!==e.segmentType?(o.push(e),o.sort(function(e,t){return e.start-t.start}),null):e,r.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),i&&i({chunk:e})},remove:s,abort:function(){},discharge:function(e,t){var n,r,i=(n=e,r=t,o.filter(function(e){return(isNaN(r)||e.start<r)&&(isNaN(n)||e.end>n)}));return a&&(i.push(a),a=null),s(e,t),i},reset:function(){o=[],i=a=null},updateTimestampOffset:function(){},hasDiscontinuitiesAfter:function(){return!1},waitForUpdateEnd:function(e){e()},getBuffer:function(){return this}},r=(0,u.default)(t).getInstance().getLogger(n),n}i.__dashjs_factory_name="PreBufferSink";e=e.default.getClassFactory(i);n.default=e,t.exports=n.default},{45:45,47:47}],107:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var A=r(e(45)),I=r(e(239)),R=r(e(46)),b=r(e(54)),i=r(e(47)),M=r(e(213)),D=r(e(51));function a(i,r,e,a){var o=this.context,s=(0,R.default)(o).getInstance(),u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,t=[],p=[],g=e;function _(){try{return f.buffered}catch(e){return d.error("getAllBufferRanges exception: "+e.message),null}}function m(n){f&&S(function(){try{var e=i.duration,t=0;n&&!isNaN(n.start)&&!isNaN(n.duration)&&isFinite(n.duration)&&(e=n.start+n.duration),n&&!isNaN(n.start)&&(t=n.start),f.appendWindowStart=0,f.appendWindowEnd=e,f.appendWindowStart=t,d.debug("Updated append window. Set start to "+f.appendWindowStart+" and end to "+f.appendWindowEnd)}catch(e){d.warn("Failed to set append window")}})}function E(){var t=this,o=this;0<p.length&&function(){c=!0;var i=p[0];p.splice(0,1);function e(){var e,t,n,r=_();e=o,t=r,n=i,(r=a)&&0<r.length&&r.length<t.length&&function(e,t){for(var n=0;n<e.length;n++){var r=Math.round(e.start(n)),i=Math.round(e.end(n));if(i===t.start||r===t.end||t.start>=r&&t.end<=i)return!0}return!1}(r,n)&&s.trigger(b.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t.end(t.length-2),to:t.start(t.length-1),unintended:!0}),0<p.length?E.call(this):(c=!1,g&&g({chunk:i}))}var a=[];try{0===i.bytes.length?e.call(t):(a=_(),f.appendBuffer?f.appendBuffer(i.bytes):f.append(i.bytes,i),S(e.bind(t)))}catch(e){d.fatal('SourceBuffer append failed "'+e+'"'),0<p.length?E():c=!1,g&&g({chunk:i,error:new I.default(e.code,e.message)})}}()}function n(){var e;0<t.length&&(e=t.shift(),f.updating?S(e):(e(),n()))}function y(){f.updating||n()}function v(){f.updating||n()}function T(){d.error("SourceBufferSink error")}function S(e){t.push(e),f.updating||n()}return u={getType:function(){return l},getAllBufferRanges:_,getBuffer:function(){return f},append:function(e){e?(p.push(e),c||S(E.bind(this))):g({chunk:e,error:new I.default(D.default.APPEND_ERROR_CODE,D.default.APPEND_ERROR_MESSAGE)})},remove:function(t,n,e){var r=this;S(function(){try{0<=t&&t<n&&(e||"ended"!==i.readyState)&&f.remove(t,n),S(function(){s.trigger(b.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1})})}catch(e){s.trigger(b.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1,error:new I.default(e.code,e.message)})}})},abort:function(){try{("open"===i.readyState||f.setTextTrack&&"ended"===i.readyState)&&f.abort()}catch(e){d.error('SourceBuffer append abort failed: "'+e+'"')}p=[]},reset:function(e){if(f){if("function"==typeof f.removeEventListener&&(f.removeEventListener("updateend",v,!1),f.removeEventListener("error",T,!1),f.removeEventListener("abort",T,!1)),clearInterval(h),t=[],!e){try{f.getClassName&&"TextSourceBuffer"===f.getClassName()||(d.debug("Removing sourcebuffer from media source"),i.removeSourceBuffer(f))}catch(e){d.error("Failed to remove source buffer from media source.")}f=null}c=!1}p=[],g=null},updateTimestampOffset:function(e){f.timestampOffset===e||isNaN(e)||S(function(){e<0&&(e+=.001),f.timestampOffset=e})},hasDiscontinuitiesAfter:function(e){try{var t=_();if(t&&1<t.length)for(var n=0,r=t.length;n<r;n++)if(0<n&&e<t.start(n)&&t.start(n)>t.end(n-1)+.1)return!0}catch(e){d.error("hasDiscontinuities exception: "+e.message)}return!1},waitForUpdateEnd:S,updateAppendWindow:m},function(){d=(0,A.default)(o).getInstance().getLogger(u),c=!1,l=r.type;var t=r.codec;try{if(t.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");(f=a||i.addSourceBuffer(t)).changeType&&a&&(d.debug("Doing period transition with changeType"),f.changeType(t)),m();if("function"==typeof f.addEventListener)try{f.addEventListener("updateend",v,!1),f.addEventListener("error",T,!1),f.addEventListener("abort",T,!1)}catch(e){h=setInterval(y,50)}else h=setInterval(y,50)}catch(e){if(!r.isText&&-1===t.indexOf('codecs="stpp')&&-1===t.indexOf('codecs="wvtt'))throw e;var n=(0,M.default)(o).getInstance();f=n.getTextSourceBuffer()}}(),u}a.__dashjs_factory_name="SourceBufferSink";i=i.default.getClassFactory(a);n.default=i,t.exports=n.default},{213:213,239:239,45:45,46:46,47:47,51:51,54:54}],108:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var fe=r(e(112)),ce=r(e(61)),he=r(e(109)),pe=r(e(120)),ge=r(e(216)),_e=r(e(46)),me=r(e(54)),Ee=r(e(45)),ye=r(e(51)),i=r(e(47)),ve=r(e(239)),Te=r(e(219)),Se=r(e(234));function a(u){u=u||{};var l=this.context,s=(0,_e.default)(l).getInstance(),e=(0,Se.default)(l).getInstance(),d=u.manifestModel,f=u.mediaPlayerModel,a=u.manifestUpdater,c=u.adapter,i=u.capabilities,o=u.capabilitiesFilter,h=u.errHandler,p=u.timelineConverter,t=u.dashMetrics,g=u.abrController,_=u.playbackController,m=u.eventController,E=u.mediaController,y=u.textController,v=u.protectionController,r=u.videoModel,T=u.settings,S=u.streamInfo,A=void 0,I=void 0,R=void 0,b=void 0,M=void 0,D=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0,x=void 0,F=void 0,n=void 0,U=void 0,B=void 0,k=void 0;function G(e){for(var t=R?R.length:0,n=0;n<t;n++){R[n].getFragmentModel().removeExecutedRequestsBeforeTime(q()+H()),R[n].reset(!1,e)}le(D=M=!(R=[])),s.off(me.default.CURRENT_TRACK_CHANGED,Q,A)}function j(){G(),C=N=b=!1,B=n=w=!(O={})}function Y(){_&&_.pause(),P&&(P.reset(),P=null),S=null,j(),s.off(me.default.DATA_UPDATE_COMPLETED,ne,A),s.off(me.default.BUFFERING_COMPLETED,te,A),s.off(me.default.INBAND_EVENTS,re,A),v&&(s.off(me.default.KEY_ERROR,z,A),s.off(me.default.SERVER_CERTIFICATE_UPDATED,z,A),s.off(me.default.LICENSE_REQUEST_COMPLETE,z,A),s.off(me.default.KEY_SYSTEM_SELECTED,z,A),s.off(me.default.KEY_SESSION_CREATED,z,A),s.off(me.default.KEY_STATUSES_CHANGED,z,A)),le(!1)}function H(){return S?S.duration:NaN}function q(){return S?S.start:NaN}function K(){return S?S.id:null}function V(){return S}function W(){if(!(r&&g&&g.hasOwnProperty("getBitrateList")&&c&&c.hasOwnProperty("getAllMediaInfoForType")&&c.hasOwnProperty("getEventsFor")))throw new Error(fe.default.MISSING_CONFIG_ERROR)}function z(e){e.error&&(h.error(e.error),I.fatal(e.error.message),Y())}function X(e){var t,n=e?e.type:null,r=void 0;if(n===fe.default.MUXED)return r="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",I.fatal(r),void h.error(new ve.default(ye.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,r,d.getValue()));if(n===fe.default.TEXT||n===fe.default.FRAGMENTED_TEXT||n===fe.default.EMBEDDED_TEXT||n===fe.default.IMAGE)return 1;if(t=e.codec,I.debug(n+" codec: "+t),e.contentProtection&&!i.supportsEncryptedMedia())h.error(new ve.default(ye.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,ye.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!i.supportsCodec(t))return r=n+"Codec ("+t+") is not supported.",void I.error(r);return 1}function Q(e){var t,n,r,i;S&&e.newMediaInfo.streamInfo.id===S.id&&(t=e.newMediaInfo,n=d.getValue(),c.setCurrentMediaInfo(S.id,t.type,t),(r=ie(t))&&(i=_.getTime(),I.info("Stream -  Process track changed at current time "+i),I.debug("Stream -  Update stream controller"),n.refreshManifestOnSwitchTrack?(I.debug("Stream -  Refreshing manifest for switch track"),k=e,a.refreshManifest()):(r.selectMediaInfo(t),t.type!==fe.default.FRAGMENTED_TEXT?(g.updateTopQualityIndex(t),r.switchTrackAsked(),r.getFragmentModel().abortRequests()):(r.getScheduleController().setSeekTarget(i),r.setBufferingTime(i),r.resetIndexHandler()))))}function Z(e,t){var n,r=c.getAllMediaInfoForType(S,e),i=null;if(r&&0!==r.length){e===fe.default.VIDEO&&(N=!0),e===fe.default.AUDIO&&(C=!0);for(var a=0,o=r.length;a<o;a++)i=r[a],e===fe.default.EMBEDDED_TEXT?y.addEmbeddedTrack(i):X(i)&&E.addTrack(i);e!==fe.default.EMBEDDED_TEXT&&0!==E.getTracksFor(e,S).length&&(e!==fe.default.IMAGE?(E.checkInitialMediaSettingsForType(e,S),n=E.getCurrentTrackFor(e,S),s.trigger(me.default.STREAM_INITIALIZING,{streamInfo:S,mediaInfo:i}),function(e,t,n,r){var i=P.getModel(e?e.type:null),a=(0,he.default)(l).create({streamInfo:S,type:e?e.type:null,mimeType:e?e.mimeType:null,timelineConverter:p,adapter:c,manifestModel:d,mediaPlayerModel:f,fragmentModel:i,dashMetrics:u.dashMetrics,baseURLController:u.baseURLController,abrController:g,playbackController:_,mediaController:E,textController:y,errHandler:h,settings:T,boxParser:F});if(a.initialize(n,N),g.updateTopQualityIndex(e),r?(a.setBuffer(r.buffer),a.setBufferingTime(r.currentTime),R[r.replaceIdx]=a):R.push(a),!r||!r.ignoreMediaInfo)if(!e||e.type!==fe.default.TEXT&&e.type!==fe.default.FRAGMENTED_TEXT)a.addMediaInfo(e,!0);else{for(var o=void 0,s=0;s<t.length;s++)t[s].index===e.index&&(o=s),a.addMediaInfo(t[s]);a.selectMediaInfo(t[o])}}(n,r,t)):L=(0,ge.default)(l).create({streamInfo:S,adapter:c,baseURLController:u.baseURLController,timelineConverter:u.timelineConverter,debug:U,eventBus:s,events:me.default,dashConstants:ce.default}))}else I.info("No "+e+" data.")}function $(){var e;m&&(e=c.getEventsFor(S),m.addInlineEvents(e))}function J(){for(var e=R.length,t=!!O.audio||!!O.video?new ve.default(ye.default.DATA_UPDATE_FAILED_ERROR_CODE,ye.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<e;n++)if(R[n].isUpdating()||w)return;if(D){if(v){v.clearMediaInfoArrayByStreamId(K());for(n=0;n<e&&R[n];n++){var r=R[n].getType();r!==fe.default.AUDIO&&r!==fe.default.VIDEO&&r!==fe.default.FRAGMENTED_TEXT||(r=R[n].getMediaInfo())&&v.initializeForMedia(r)}}t?h.error(t):b||(b=!0,s.trigger(me.default.STREAM_INITIALIZED,{streamInfo:S,liveStartTime:x?NaN:function(){if(!S.manifestInfo.isDynamic)return NaN;for(var e=0;e<R.length;e++)if(R[e].getType()===fe.default.AUDIO||R[e].getType()===fe.default.VIDEO)return R[e].getLiveStartTime();return NaN}()}));for(n=0;n<e&&R[n];n++)R[n].getScheduleController().start()}}function ee(e){for(var t={},n=0,r=R.length;n<r;n++){var i=R[n].createBuffer(e);i&&(t[R[n].getType()]=i.getBuffer())}return t}function te(){var e=ae(),t=e.length;if(0!==t){for(var n=0;n<t;n++)if(!e[n].isBufferingCompleted()&&(e[n].getType()===fe.default.AUDIO||e[n].getType()===fe.default.VIDEO))return void I.warn("onBufferingCompleted - One streamProcessor has finished but",e[n].getType(),"one is not buffering completed");I.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),s.trigger(me.default.STREAM_BUFFERING_COMPLETED,{streamInfo:S})}else I.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ne(e){O[e.mediaType]=e.error,J()}function re(e){e=e.events,m&&m.addInbandEvents(e)}function ie(t){return t?ae().filter(function(e){return e.getType()===t.type})[0]:null}function ae(){for(var e,t=[],n=void 0,r=0;r<R.length;r++)(e=(n=R[r]).getType())!==fe.default.AUDIO&&e!==fe.default.VIDEO&&e!==fe.default.FRAGMENTED_TEXT&&e!==fe.default.TEXT||t.push(n);return t}function oe(e,t,n){n=arguments.length<=2||void 0===n?null:n;if(!e)return!1;e=e.getStreamInfo(),n=n?n.getStreamInfo():S;if(!e||!n)return!1;e=c.getAdaptationForType(e.index,t,e),n=c.getAdaptationForType(n.index,t,n);return e&&n?!(!se(n)&&se(e)):!e&&!n}function se(e){return e&&(e.ContentProtection||e.Representation&&0<e.Representation.length&&e.Representation[0].ContentProtection)}function ue(e,t,n){n=arguments.length<=2||void 0===n?null:n;if(!e||!e.hasOwnProperty("getStreamInfo"))return!1;e=e.getStreamInfo(),n=n?n.getStreamInfo():S;if(!e||!n)return!1;e=c.getAdaptationForType(e.index,t,e),t=c.getAdaptationForType(n.index,t,n);if(!e||!t)return!e&&!t;var n=e&&t&&e.mimeType===t.mimeType,r=t.Representation_asArray.map(function(e){return e.codecs}),t=e.Representation_asArray.map(function(e){return e.codecs}),e=t.some(function(e){return-1<r.indexOf(e)}),t=t.some(function(t){return r.some(function(e){return i.codecRootCompatibleWithCodec(e,t)})});return e||t&&n}function le(e){x=e}function de(){return x}return A={initialize:function(){s.on(me.default.BUFFERING_COMPLETED,te,A),s.on(me.default.DATA_UPDATE_COMPLETED,ne,A),s.on(me.default.INBAND_EVENTS,re,A),v&&(s.on(me.default.KEY_ERROR,z,A),s.on(me.default.SERVER_CERTIFICATE_UPDATED,z,A),s.on(me.default.LICENSE_REQUEST_COMPLETE,z,A),s.on(me.default.KEY_SYSTEM_SELECTED,z,A),s.on(me.default.KEY_SESSION_CREATED,z,A),s.on(me.default.KEY_STATUSES_CHANGED,z,A)),s.trigger(me.default.STREAM_UPDATED,{streamInfo:S})},getStreamId:function(){return S?S.id:null},activate:function(e,t){if(M)return t;var n=void 0;return s.on(me.default.CURRENT_TRACK_CHANGED,Q,A),n=x?(function(){{var e;w=!0,W(),o.filterUnsupportedFeaturesOfPeriod(S),w=!(D=!0),0===R.length?(e="No streams to play.",h.error(new ve.default(ye.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e,d.getValue())),I.debug(e)):J()}}(),t):function(e,t){W();var n=r.getElement();$(),w=!0,o.filterUnsupportedFeaturesOfPeriod(S),(!n||n&&/^VIDEO$/i.test(n.nodeName))&&Z(fe.default.VIDEO,e);Z(fe.default.AUDIO,e),Z(fe.default.TEXT,e),Z(fe.default.FRAGMENTED_TEXT,e),Z(fe.default.EMBEDDED_TEXT,e),Z(fe.default.MUXED,e),Z(fe.default.IMAGE,e);e=ee(t);{w=!(D=!0),0===R.length?(t="No streams to play.",h.error(new ve.default(ye.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t,d.getValue())),I.fatal(t)):J()}return e}(e,t),M=!0,n},deactivate:G,isActive:function(){return M},getDuration:H,getStartTime:q,getId:K,getStreamInfo:V,getHasAudioTrack:function(){return C},getHasVideoTrack:function(){return N},preload:function(e,t){if(!x){$(),Z(fe.default.VIDEO,e),Z(fe.default.AUDIO,e),Z(fe.default.TEXT,e),Z(fe.default.FRAGMENTED_TEXT,e),Z(fe.default.EMBEDDED_TEXT,e),Z(fe.default.MUXED,e),Z(fe.default.IMAGE,e),ee(t),s.on(me.default.CURRENT_TRACK_CHANGED,Q,A);for(var n=0;n<R.length&&R[n];n++)R[n].getScheduleController().start();le(!0)}},getThumbnailController:function(){return L},getBitrateListFor:function(e){return W(),e===fe.default.IMAGE?L?L.getBitrateList():[]:(e=function(e){for(var t=null,n=0;n<R.length;n++)if((t=R[n]).getType()===e)return t.getMediaInfo();return null}(e),g.getBitrateList(e))},updateData:function(e){I.info("Manifest updated... updating data system wide."),w=!(M=!1),S=e,s.trigger(me.default.STREAM_UPDATED,{streamInfo:S}),m&&$(),o.filterUnsupportedFeaturesOfPeriod(S);for(var t=0,n=R.length;t<n;t++){var r,i=R[t];i.updateStreamInfo(S),(r=c.getMediaInfoForType(S,i.getType()))&&(g.updateTopQualityIndex(r),i.addMediaInfo(r,!0))}if(k&&(r=k.newMediaInfo).type!==fe.default.FRAGMENTED_TEXT){e=ie(k.oldMediaInfo);if(!e)return;e.switchTrackAsked(),k=void 0}w=!1,J()},reset:Y,getProcessors:ae,setMediaSource:function(e){for(var t=0;t<R.length;)X(R[t].getMediaInfo())?(R[t].setMediaSource(e),t++):(R[t].reset(),R.splice(t,1));for(var n,t=0;t<R.length;t++)R[t].dischargePreBuffer();0===R.length&&(n="No streams to play.",h.error(new ve.default(ye.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,n+"nostreams",d.getValue())),I.fatal(n))},isMediaCodecCompatible:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return ue(e,fe.default.VIDEO,t)&&ue(e,fe.default.AUDIO,t)},isProtectionCompatible:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return oe(e,fe.default.VIDEO,t)&&oe(e,fe.default.AUDIO,t)},getPreloaded:de,getPreloadingScheduled:function(){return n},setPreloadingScheduled:function(e){n=e},getIsEndedEventSignaled:function(){return B},setIsEndedEventSignaled:function(e){B=e}},U=(0,Ee.default)(l).getInstance(),I=U.getLogger(A),j(),F=(0,Te.default)(l).getInstance(),P=(0,pe.default)(l).create({streamInfo:S,mediaPlayerModel:f,dashMetrics:t,errHandler:h,settings:T,boxParser:F,dashConstants:ce.default,urlUtils:e}),A}a.__dashjs_factory_name="Stream",n.default=i.default.getClassFactory(a),t.exports=n.default},{109:109,112:112,120:120,216:216,219:219,234:234,239:239,45:45,46:46,47:47,51:51,54:54,61:61}],109:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var X=r(e(112)),Q=r(e(61)),Z=r(e(113)),$=r(e(154)),J=r(e(118)),ee=r(e(212)),te=r(e(125)),ne=r(e(62)),re=r(e(229)),i=r(e(47)),ie=e(232),ae=r(e(46)),oe=r(e(54)),se=r(e(57)),ue=r(e(51)),le=r(e(239)),de=r(e(45)),fe=r(e(231)),ce=r(e(234)),he=r(e(219)),pe=r(e(241)),ge=e(257);function a(n){n=n||{};var p=this.context,o=(0,ae.default)(p).getInstance(),s=n.streamInfo,l=n.type,r=n.errHandler,i=n.mimeType,a=n.timelineConverter,g=n.adapter,u=n.manifestModel,d=n.mediaPlayerModel,f=n.fragmentModel,c=n.abrController,h=n.playbackController,_=n.mediaController,m=n.textController,E=n.dashMetrics,y=n.settings,v=n.boxParser,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,M=void 0,D=void 0,N=void 0,C=void 0,O=void 0,w=void 0;function e(){return l}function P(){R=[],I=null,O=0}function L(e){e.error||M.setCurrentRepresentation(g.convertDataToRepresentationInfo(e.currentRepresentation)),e.error&&e.error.code!==ue.default.SEGMENTS_UPDATE_FAILED_ERROR_CODE||h.getStreamController().getActiveStreamInfo().id===s.id&&k()}function x(e){e=H(e.newQuality);M.setCurrentRepresentation(e),E.pushPlayListTraceMetrics(new Date,ge.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),E.createPlaylistTraceMetrics(e.id,1e3*h.getTime(),h.getPlaybackRate())}function F(e){E.addBufferLevel(l,new Date,1e3*e.bufferLevel);e=h.getStreamController().getActiveStreamInfo().id;u.getValue().doNotUpdateDVRWindowOnBufferUpdated||s.id!==e||k()}function U(e){E.addBufferState(l,e.state,M.getBufferTarget()),e.state!==Z.default.BUFFER_EMPTY||h.isSeeking()||E.pushPlayListTraceMetrics(new Date,ge.PlayListTrace.REBUFFERING_REASON)}function B(e){f.syncExecutedRequestsWithBufferedRange(b.getBuffer().getAllBufferRanges(),s.duration),e.from>h.getTime()&&(O=e.from,w=!0)}function t(e){O=e.quotaExceededTime,w=!0}function k(){var e=s.manifestInfo,t=e.isDynamic,t=a.calcSegmentAvailabilityRange(D.getCurrentRepresentation(),t);E.addDVRInfo(l,h.getTime(),e,t)}function G(){return b?b.getBuffer():null}function j(){return R}function Y(){return I}function H(e){var t=void 0,t=void 0!==e?((0,ie.checkInteger)(e),D?D.getRepresentationForQuality(e):null):D?D.getCurrentRepresentation():null;return g.convertDataToRepresentationInfo(t)}function q(e){e.sender&&(g.getIsTextTrack(i)&&!m.isTextEnabled()||b&&e.representationId&&(b.appendInitSegment(e.representationId)||(e=C?C.getInitRequest(I,D.getCurrentRepresentation()):null,M.processInitRequest(e))))}function K(e){var t=void 0;b.getIsPruningInProgress()||(t=function(e,t){var n=H(),r=!isNaN(e),i=h.getNormalizedTime(),a=r?e:O,o=!1,s=void 0;if(isNaN(a)||l===X.default.FRAGMENTED_TEXT&&!m.isTextEnabled())return null;{var u;b&&(u=b.getRangeAt(a),e=b.getRangeAt(i),null===u&&null===e||r||(!u||e&&e.start!=u.start&&e.end!=u.end)&&b.getBuffer().hasDiscontinuitiesAfter(i)&&l!==X.default.FRAGMENTED_TEXT&&(f.removeExecutedRequestsAfterTime(e.end),o=!0))}if(t)a=t.startTime+t.duration/2,s=z(n,a,{timeThreshold:0,ignoreIsFinished:!0});else{o=r||w||o;for(s=z(n,o?a:void 0,{keepIdx:!o}),w=!1;s&&s.action!==pe.default.ACTION_COMPLETE&&f.isFragmentLoaded(s);)s=z(n)}return s}(e.seekTarget,e.replacement))&&(M.setSeekTarget(NaN),e.replacement||(isNaN(t.startTime+t.duration)||(O=t.startTime+t.duration),t.delayLoadingTime=(new Date).getTime()+M.getTimeToLoadDelay(),M.setTimeToLoadDelay(0))),M.processMediaRequest(t)}function V(e){var t=e.chunk,n=t.bytes,r=t.quality,i=H(r),a=D&&i?D.getRepresentationForQuality(i.quality):null,e=g.getEventsFor(i.mediaInfo),a=g.getEventsFor(i,a);(e&&0<e.length||a&&0<a.length)&&(a=function(e,t,n,r){try{for(var i={},a=[],o=n.concat(r),s=0,u=o.length;s<u;s++)i[o[s].schemeIdUri+"/"+o[s].value]=o[s];var l=(0,he.default)(p).getInstance().parse(e),d=l.getBoxes("emsg");if(!d||0===d.length)return a;for(var l=l.getBox("sidx"),l=!l||isNaN(l.earliest_presentation_time)||isNaN(l.timescale)?t&&!isNaN(t.mediaStartTime)?t.mediaStartTime:0:l.earliest_presentation_time/l.timescale,f=Math.max(l,0),c=D.getCurrentRepresentation(),s=0,u=d.length;s<u;s++){var h=g.getEvent(d[s],i,f,c);h&&a.push(h)}return a}catch(e){return[]}}(n,f.getRequests({state:$.default.FRAGMENT_MODEL_EXECUTED,quality:r,index:t.index})[0],e,a),o.trigger(oe.default.INBAND_EVENTS,{events:a},{streamId:s.id}))}function W(e){O=e.time,M.setSeekTarget(e.time)}function z(e,t,n){var r=null;return C&&(e=D&&e?D.getRepresentationForQuality(e.quality):null,r=void 0!==t&&void 0!==n?C.getSegmentRequestForTime(I,e,t,n):C.getNextSegmentRequest(I,e)),r}return T={initialize:function(e,t){C=(0,se.default)(p).create({streamInfo:s,type:l,timelineConverter:a,dashMetrics:E,mediaPlayerModel:d,baseURLController:n.baseURLController,errHandler:r,settings:y,boxParser:v,events:oe.default,eventBus:o,errors:ue.default,debug:(0,de.default)(p).getInstance(),requestModifier:(0,fe.default)(p).getInstance(),dashConstants:Q.default,constants:X.default,urlUtils:(0,ce.default)(p).getInstance()}),(A=s.manifestInfo.isDynamic)&&(N=(0,re.default)(p).create({timelineConverter:a})),C.initialize(A),c.registerStreamType(l,T),D=(0,ne.default)(p).create({streamInfo:s,type:l,abrController:c,dashMetrics:E,playbackController:h,timelineConverter:a,dashConstants:Q.default,events:oe.default,eventBus:o,errors:ue.default}),(b=function(e){var t=null;if(!e)return r.error(new le.default(ue.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,ue.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null;t=e===X.default.VIDEO||e===X.default.AUDIO?(0,J.default)(p).create({streamInfo:s,type:e,mediaPlayerModel:d,manifestModel:u,fragmentModel:f,errHandler:r,mediaController:_,representationController:D,adapter:g,textController:m,abrController:c,playbackController:h,settings:y}):(0,ee.default)(p).create({streamInfo:s,type:e,mimeType:i,mediaPlayerModel:d,manifestModel:u,fragmentModel:f,errHandler:r,mediaController:_,representationController:D,adapter:g,textController:m,abrController:c,playbackController:h,settings:y});return t}(l))&&b.initialize(e),(M=(0,te.default)(p).create({streamInfo:s,type:l,mimeType:i,adapter:g,dashMetrics:E,mediaPlayerModel:d,fragmentModel:f,abrController:c,playbackController:h,textController:m,mediaController:_,bufferController:b,settings:y})).initialize(t),O=0,w=!1},getStreamId:function(){return s.id},getType:e,isUpdating:function(){return!!D&&D.isUpdating()},getBufferController:function(){return b},getFragmentModel:function(){return f},getScheduleController:function(){return M},getRepresentationController:function(){return D},getRepresentationInfo:H,getBufferLevel:function(){return b?b.getBufferLevel():0},isBufferingCompleted:function(){return!!b&&b.getIsBufferingCompleted()},createBuffer:function(e){return G()||b?b.createBuffer(R,e):null},updateStreamInfo:function(e){s=e,y.get().streaming.useAppendWindow&&b.updateAppendWindow()},getStreamInfo:function(){return s},selectMediaInfo:function(e){e===I||e&&I&&e.type!==I.type||(I=e);var t,n,r,i,a=g.getRealAdaptation(s,I),o=g.getVoRepresentations(I);D&&(t=D.getData(),n=c.getTopQualityIndexFor(l,s.id),r=c.getMinAllowedIndexFor(l),i=void 0,i=(e=null)!==t&&t.id==a.id||l===X.default.FRAGMENTED_TEXT?c.getQualityFor(l):(e=c.getThroughputHistory().getAverageThroughput(l)||c.getInitialBitrateFor(l),c.getQualityForBitrate(I,e)),void 0!==r&&i<r&&(i=r),n<i&&(i=n),C.setMimeType(I?I.mimeType:null),D.updateData(a,o,l,i))},addMediaInfo:function(e,t){-1===R.indexOf(e)&&R.push(e),t&&this.selectMediaInfo(e)},getLiveStartTime:function(){if(!A)return NaN;if(!N)return NaN;var e=NaN,t=H(),n=N.getLiveEdge(t);return isNaN(n)?NaN:((t=function(e,t){try{var n=null,r=h.getLiveDelay(),i=isNaN(s.manifestInfo.DVRWindowSize)?r:s.manifestInfo.DVRWindowSize,a=.1*i,o=void 0;if(!isFinite(i)||z(t,e-i+a,{ignoreIsFinished:!0}))for(;!n&&r<=i;)(n=z(t,o=e-r,{ignoreIsFinished:!0}))||(r+=1);return n&&h.setLiveDelay(r,!0),S.debug("live edge: "+e+", live delay: "+r+", live target: "+o),n}catch(e){return null}}(n,t))&&(e=!y.get().streaming.lowLatencyEnabled||t.duration<d.getLiveDelay()?t.startTime:t.startTime+t.duration-d.getLiveDelay()),e)},switchTrackAsked:function(){M.switchTrackAsked()},getMediaInfoArr:j,getMediaInfo:Y,getMediaSource:function(){return b.getMediaSource()},setMediaSource:function(e){b.setMediaSource(e,R)},dischargePreBuffer:function(){b.dischargePreBuffer()},getBuffer:G,setBuffer:function(e){b.setBuffer(e)},setBufferingTime:function(e){O=e},resetIndexHandler:function(){C&&C.resetIndex()},getInitRequest:function(e){return(0,ie.checkInteger)(e),e=D?D.getRepresentationForQuality(e):null,C?C.getInitRequest(I,e):null},getFragmentRequest:z,finalisePlayList:function(e,t){E.pushPlayListTraceMetrics(e,t)},probeNextRequest:function(){var e=H(),e=D&&e?D.getRepresentationForQuality(e.quality):null;return C.getNextSegmentRequestIdempotent(I,e)},reset:function(e,t){C&&C.reset(),b&&(b.reset(e,t),b=null),M&&(M.reset(),M=null),D&&(D.reset(),D=null),N&&(N.reset(),N=null),c&&!t&&c.unRegisterStreamType(l),o.off(oe.default.DATA_UPDATE_COMPLETED,L,T),o.off(oe.default.QUALITY_CHANGE_REQUESTED,x,T),o.off(oe.default.INIT_FRAGMENT_NEEDED,q,T),o.off(oe.default.MEDIA_FRAGMENT_NEEDED,K,T),o.off(oe.default.MEDIA_FRAGMENT_LOADED,V,T),o.off(oe.default.BUFFER_LEVEL_UPDATED,F,T),o.off(oe.default.BUFFER_LEVEL_STATE_CHANGED,U,T),o.off(oe.default.BUFFER_CLEARED,B,T),o.off(oe.default.SEEK_TARGET,W,T),P(),s=l=null}},S=(0,de.default)(p).getInstance().getLogger(T),P(),o.on(oe.default.DATA_UPDATE_COMPLETED,L,T,{priority:ae.default.EVENT_PRIORITY_HIGH}),o.on(oe.default.QUALITY_CHANGE_REQUESTED,x,T),o.on(oe.default.INIT_FRAGMENT_NEEDED,q,T),o.on(oe.default.MEDIA_FRAGMENT_NEEDED,K,T),o.on(oe.default.MEDIA_FRAGMENT_LOADED,V,T),o.on(oe.default.BUFFER_LEVEL_UPDATED,F,T),o.on(oe.default.BUFFER_LEVEL_STATE_CHANGED,U,T),o.on(oe.default.BUFFER_CLEARED,B,T),o.on(oe.default.QUOTA_EXCEEDED,t,T),o.on(oe.default.SEEK_TARGET,W,T),T}a.__dashjs_factory_name="StreamProcessor",n.default=i.default.getClassFactory(a),t.exports=n.default},{112:112,113:113,118:118,125:125,154:154,212:212,219:219,229:229,231:231,232:232,234:234,239:239,241:241,257:257,45:45,46:46,47:47,51:51,54:54,57:57,61:61,62:62}],110:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(239)),i=r(e(163)),l=e(255),d=r(e(246)),f=r(e(46)),c=r(e(54)),a=r(e(47)),h=r(e(51));function o(e){e=e||{};var a="urn:mpeg:dash:resolve-to-zero:2013",t=this.context,o=(0,f.default)(t).getInstance(),s=(0,i.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings?e.settings.get().streaming.lowLatencyEnabled:null,errors:h.default});return{load:function(n,r,i){function t(e,t){r.resolved=!0,r.resolvedContent=e||null,o.trigger(c.default.XLINK_ELEMENT_LOADED,{element:r,resolveObject:i,error:e||t?null:new u.default(h.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,h.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+n)})}var e;n===a?t(null,!0):(e=new d.default(n,l.HTTPRequest.XLINK_EXPANSION_TYPE),s.load({request:e,success:function(e){t(e)},error:function(){t(null)}}))},reset:function(){s&&(s.abort(),s=null)}}}o.__dashjs_factory_name="XlinkLoader",n.default=a.default.getClassFactory(o),t.exports=n.default},{163:163,239:239,246:246,255:255,46:46,47:47,51:51,54:54}],111:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'}}},t.exports=n.default},{}],112:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability"}}]),i);n.default=a,t.exports=n.default},{}],113:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),i);n.default=a,t.exports=n.default},{}],114:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),i);n.default=a,t.exports=n.default},{}],115:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var V=r(e(196)),W=r(e(112)),z=r(e(113)),X=r(e(238)),Q=r(e(154)),Z=r(e(46)),$=r(e(54)),i=r(e(47)),J=r(e(192)),ee=r(e(193)),te=r(e(194)),ne=r(e(191)),re=r(e(195)),ie=r(e(45)),ae=e(255),oe=e(232);function a(){var o=this.context,e=(0,ie.default)(o).getInstance(),u=(0,Z.default)(o).getInstance(),s=void 0,l=void 0,d=void 0,i=void 0,a=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=void 0,_=void 0,m=void 0,E=void 0,y=void 0,v=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,r=void 0,M=void 0,D=void 0,N=void 0;function n(){(d=(0,V.default)(o).create({dashMetrics:D,mediaPlayerModel:v,settings:N})).initialize()}function t(){a={},f={},h={},c={},A={},b={},r={},M={},void 0===g&&(g=!1),R=I=S=void 0,clearTimeout(p),p=null}function C(e){e.mediaType===W.default.VIDEO&&(void 0!==S&&I.push(S,y.getPlaybackQuality()),S=e.newQuality)}function O(e){e.metric!==z.default.HTTP_REQUEST||!e.value||e.value.type!==ae.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==W.default.AUDIO&&e.mediaType!==W.default.VIDEO||R.push(e.mediaType,e.value,N.get().streaming.abr.useDeadTimeLatency),e.metric!==z.default.BUFFER_LEVEL||e.mediaType!==W.default.AUDIO&&e.mediaType!==W.default.VIDEO||function(e,t){var n=N.get().streaming.abr.ABRStrategy;if(n===W.default.ABR_STRATEGY_L2A)return b[e]=!1,M[e]=!1,r[e]=!0;{if(n===W.default.ABR_STRATEGY_LoLP)return b[e]=!1,M[e]=!0,r[e]=!1;if(n===W.default.ABR_STRATEGY_BOLA)return b[e]=!0,M[e]=!1,r[e]=!1;if(n===W.default.ABR_STRATEGY_THROUGHPUT)return b[e]=!1,M[e]=!1,r[e]=!1}!function(e,t){var n=v.getStableBufferTime(),r=n,i=.5*n,n=b[e],r=(n?i:r)<t;(b[e]=r)!==n&&(r?l.info("["+e+"] switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):l.info("["+e+"] switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."))}(e,t)}(e.mediaType,.001*e.value.level)}function w(e,t){return a[t]=a[t]||{},a[t].hasOwnProperty(e)||(a[t][e]=0),function(e,t){if(t!==W.default.VIDEO||!N.get().streaming.abr.limitBitrateByPortal||!c[t])return e;g||q();var n=E.getAdaptationForType(0,t).Representation,r=e;if(0<_&&0<m){for(;0<r&&n[r]&&_<n[r].width&&_-n[r-1].width<n[r].width-_;)--r;for(;r<n.length-1&&n[r].width===n[r+1].width;)r+=1}return r}(function(e,t,n){t=N.get().streaming.abr.maxRepresentationRatio[t];if(isNaN(t)||1<=t||t<0)return e;return Math.min(e,Math.round(n*t))}(function(e,t){var n=e;if(!c[t])return n;var r=L(t);void 0!==r&&(n=Math.max(e,r));t=P(t);void 0!==t&&(n=Math.min(n,t));return n}(a[t][e],e),e,a[t][e]),e)}function P(e){var t,t=(t=e,N.get().streaming.abr.maxBitrate[t]);return-1<t?B(c[e].getMediaInfo(),t):void 0}function L(e){var t=(n=e,N.get().streaming.abr.minBitrate[n]);if(-1<t){var n=c[e].getMediaInfo(),e=k(n),n=B(n,t);return e[n]&&n<e.length-1&&e[n].bitrate<1e3*t&&n++,n}}function x(e,t,n,r){var i=t.id,t=H(e);(0,oe.checkInteger)(n);i=w(e,i);n!==t&&0<=n&&n<=i&&F(e,t,n,i,r)}function F(e,t,n,r,i){var a,o,s;e&&c[e]&&(o=(a=c[e].getStreamInfo())?a.id:null,N.get().debug.logLevel===ie.default.LOG_LEVEL_DEBUG&&(s=D.getCurrentBufferLevel(e),l.info("["+e+"] switch from "+t+" to "+n+"/"+r+" (buffer: "+s+") "+(i?JSON.stringify(i):"."))),r=e,s=n,f[o=o]=f[o]||{},f[o][r]=s,u.trigger($.default.QUALITY_CHANGE_REQUESTED,{oldQuality:t,newQuality:n,reason:i},{streamId:a.id,mediaType:e}),a=R.getAverageThroughput(e),isNaN(a)||T.setSavedBitrateSettings(e,a))}function U(e,t){h[e].state=t}function B(e,t,n){var r=e&&e.type?c[e.type].getRepresentationInfo():null;if(N.get().streaming.abr.useDeadTimeLatency&&n&&r&&r.fragmentDuration){n/=1e3;r=r.fragmentDuration;if(r<n)return 0;t*=1-n/r}for(var i=k(e),a=i.length-1;0<=a;a--){if(1e3*t>=i[a].bitrate)return a}return 0}function k(e){var t=[];if(!e||!e.bitrateList)return t;for(var n=e.bitrateList,r=e.type,i=void 0,a=0,o=n.length;a<o;a++)(i=new X.default).mediaType=r,i.qualityIndex=a,i.bitrate=n[a].bandwidth,i.width=n[a].width,i.height=n[a].height,i.scanType=n[a].scanType,t.push(i);return t}function G(e){return b[e]}function j(e){return r[e]}function Y(e){return M[e]}function H(e){if(e&&c[e]){var t=c[e].getStreamInfo(),t=t?t.id:null;if(t)return f[t]=f[t]||{},f[t].hasOwnProperty(e)||(f[t][e]=0),f[t][e]}return 0}function q(){var e;y&&(e=N.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1,_=y.getClientWidth()*e,m=y.getClientHeight()*e)}function K(e){var t=e.request.mediaType;if(N.get().streaming.abr.autoSwitchBitrate[t]){var n=c[t];if(!n)return;var r=(0,J.default)(o).create({abrController:s,streamProcessor:n,currentRequest:e.request,useBufferOccupancyABR:G(t),useL2AABR:j(t),useLoLPABR:Y(t),videoModel:y}),r=d.shouldAbandonFragment(r);r.quality>ee.default.NO_CHANGE&&((n=n.getFragmentModel()).getRequests({state:Q.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(n.abortRequests(),U(t,z.default.ABANDON_LOAD),A[t].reset(),A[t].push({oldValue:H(t),newValue:r.quality,confidence:1,reason:r.reason}),x(t,i.getActiveStreamInfo(),r.quality,r.reason),clearTimeout(p),p=setTimeout(function(){U(t,z.default.ALLOW_LOAD),p=null},N.get().streaming.abandonLoadTimeout)))}}return s={isPlayingAtTopQuality:function(e){var t=e?e.id:null,n=H(W.default.AUDIO),e=H(W.default.VIDEO);return n===w(W.default.AUDIO,t)&&e===w(W.default.VIDEO,t)},updateTopQualityIndex:function(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return e=t,t=r,a[n=n]=a[n]||{},a[n][e]=t,r},getThroughputHistory:function(){return R},getBitrateList:k,getQualityForBitrate:B,getTopBitrateInfoFor:function(e){if(e&&c&&c[e]){var t=c[e].getStreamInfo();if(t&&t.id){t=w(e,t.id),e=k(c[e].getMediaInfo());return e[t]?e[t]:null}}return null},getMaxAllowedIndexFor:P,getMinAllowedIndexFor:L,getInitialBitrateFor:function(e){if(!function(){if(!T||!T.hasOwnProperty("getSavedBitrateSettings"))throw new Error(W.default.MISSING_CONFIG_ERROR)}(),e===W.default.TEXT||e===W.default.FRAGMENTED_TEXT)return NaN;var t,n=T.getSavedBitrateSettings(e),r=N.get().streaming.abr.initialBitrate[e],i=N.get().streaming.abr.initialRepresentationRatio[e];return-1===r&&(r=-1<i?(t=E.getAdaptationForType(0,e).Representation,Array.isArray(t)?t[Math.max(Math.round(t.length*i)-1,0)].bandwidth:0):isNaN(n)?e===W.default.VIDEO?1e3:100:n),r},getQualityFor:H,getAbandonmentStateFor:function(e){return h[e]?h[e].state:null},setPlaybackQuality:x,checkPlaybackQuality:function(e){var t,n,r,i,a;e&&c&&c[e]&&(a=(n=c[e].getStreamInfo())?n.id:null,t=H(e),i=(0,J.default)(o).create({abrController:s,streamProcessor:c[e],currentValue:t,switchHistory:A[e],droppedFramesHistory:I,useBufferOccupancyABR:G(e),useL2AABR:j(e),useLoLPABR:Y(e),videoModel:y}),!I||(r=y.getPlaybackQuality())&&I.push(S,r),N.get().streaming.abr.autoSwitchBitrate[e]&&(n=L(e),r=w(e,a),i=(a=d.getMaxQuality(i)).quality,void 0!==n&&(i>ee.default.NO_CHANGE?i:t)<n&&(i=n),r<i&&(i=r),A[e].push({oldValue:t,newValue:i}),i>ee.default.NO_CHANGE&&i!=t?(h[e].state===z.default.ALLOW_LOAD||t<i)&&F(e,t,i,r,a.reason):N.get().debug.logLevel===ie.default.LOG_LEVEL_DEBUG&&(a=D.getCurrentBufferLevel(e,!0),l.debug("["+e+"] stay on "+t+"/"+r+" (buffer: "+a+")"))))},getTopQualityIndexFor:w,setElementSize:q,setWindowResizeEventCalled:function(e){g=e},createAbrRulesCollection:n,registerStreamType:function(e,t){A[e]=A[e]||(0,te.default)(o).create(),c[e]=t,h[e]=h[e]||{},h[e].state=z.default.ALLOW_LOAD,b[e]=!1,r[e]=!1,M[e]=!1,u.on($.default.LOADING_PROGRESS,K,s),e===W.default.VIDEO&&(u.on($.default.QUALITY_CHANGE_RENDERED,C,s),I=I||(0,ne.default)(o).create(),q()),u.on($.default.METRIC_ADDED,O,s),u.on($.default.PERIOD_SWITCH_COMPLETED,n,s),R=R||(0,re.default)(o).create({settings:N})},unRegisterStreamType:function(e){delete c[e]},setConfig:function(e){e&&(e.streamController&&(i=e.streamController),e.domStorage&&(T=e.domStorage),e.mediaPlayerModel&&(v=e.mediaPlayerModel),e.dashMetrics&&(D=e.dashMetrics),e.adapter&&(E=e.adapter),e.videoModel&&(y=e.videoModel),e.settings&&(N=e.settings))},reset:function(){t(),u.off($.default.LOADING_PROGRESS,K,s),u.off($.default.QUALITY_CHANGE_RENDERED,C,s),u.off($.default.METRIC_ADDED,O,s),u.off($.default.PERIOD_SWITCH_COMPLETED,n,s),d&&d.reset()}},l=e.getLogger(s),t(),s}a.__dashjs_factory_name="AbrController";e=i.default.getSingletonFactory(a);e.QUALITY_DEFAULT=0,i.default.updateSingletonFactory(a.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{112:112,113:113,154:154,191:191,192:192,193:193,194:194,195:195,196:196,232:232,238:238,255:255,45:45,46:46,47:47,54:54}],116:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(152)),l=r(e(218)),d=r(e(234)),f=r(e(86)),i=r(e(47)),c=r(e(46)),h=r(e(54));function a(){var e=void 0,t=void 0,n=this.context,r=(0,c.default)(n).getInstance(),i=(0,d.default)(n).getInstance(),a=void 0,o=void 0;function s(e){a.invalidateSelectedIndexes(e.entry)}return e={reset:function(){a.reset(),o.reset()},initialize:function(e){a.setConfig({adapter:t}),e=e,a.update(e),o.chooseSelector(t.getIsDVB(e))},resolve:function(e){if(e=a.getForPath(e).reduce(function(e,t){t=o.select(t);return t?(i.isRelative(t.url)?e.url=i.resolve(t.url,e.url):(e.url=t.url,e.serviceLocation=t.serviceLocation),e.availabilityTimeOffset=t.availabilityTimeOffset,e.availabilityTimeComplete=t.availabilityTimeComplete,e):new f.default},new f.default),!i.isRelative(e.url))return e},setConfig:function(e){e.baseURLTreeModel&&(a=e.baseURLTreeModel),e.baseURLSelector&&(o=e.baseURLSelector),e.adapter&&(t=e.adapter)}},a=(0,u.default)(n).create(),o=(0,l.default)(n).create(),r.on(h.default.SERVICE_LOCATION_BLACKLIST_CHANGED,s,e),e}a.__dashjs_factory_name="BaseURLController",n.default=i.default.getClassFactory(a),t.exports=n.default},{152:152,218:218,234:234,46:46,47:47,54:54,86:86}],117:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),u=r(e(46));function a(e){e=e||{};var t=void 0,n=[],r=(0,u.default)(this.context).getInstance(),i=e.updateEventName,a=e.addBlacklistEventName;function o(e){-1===n.indexOf(e)&&(n.push(e),r.trigger(i,{entry:e}))}function s(e){o(e.entry)}return t={add:o,contains:function(e){return!!(n.length&&e&&e.length)&&-1!==n.indexOf(e)},reset:function(){n=[]}},a&&r.on(a,s,t),t}a.__dashjs_factory_name="BlackListController",n.default=i.default.getClassFactory(a),t.exports=n.default},{46:46,47:47}],118:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var _e=r(e(112)),me=r(e(113)),Ee=r(e(154)),ye=r(e(107)),ve=r(e(106)),Te=r(e(115)),Se=r(e(46)),Ae=r(e(54)),i=r(e(47)),Ie=r(e(45)),Re=r(e(227)),be=r(e(239)),Me=r(e(51)),De=e(255),Ne="BufferController";function a(e){e=e||{};var r=this.context,n=(0,Se.default)(r).getInstance(),i=e.errHandler,s=e.fragmentModel,a=e.representationController,t=e.mediaController,o=e.adapter,u=e.textController,l=e.abrController,d=e.playbackController,f=e.streamInfo,c=e.type,h=e.settings,p=void 0,g=void 0,_=void 0,m=void 0,E=void 0,y=void 0,v=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,M=void 0,D=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0,x=void 0,F=void 0;function U(e){return o.convertDataToRepresentationInfo(a.getRepresentationForQuality(e))}function B(e,t){if(!O||!e)return null;var n=e[0];if(v)try{A=t&&t[c]?(0,ye.default)(r).create(v,n,H.bind(this),t[c]):(0,ye.default)(r).create(v,n,H.bind(this),null),h.get().streaming.useAppendWindow&&A.updateAppendWindow(f),"function"==typeof A.getBuffer().initialize&&A.getBuffer().initialize(c,f,e,s)}catch(e){g.fatal("Caught error on create SourceBuffer: "+e),i.error(new be.default(Me.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Me.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+c))}else A=(0,ve.default)(r).create(H.bind(this));return ae(U(_)),A}function k(e){g.info("Init fragment finished loading saving to",c+"'s init cache"),O.save(e.chunk),g.debug("Append Init fragment",c," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),j(e.chunk)}function G(e){var t=e.chunk;x?(F=t,(e=A&&A.getAllBufferRanges())&&0<e.length&&d.getTimeToStreamEnd()>h.get().streaming.stallThreshold&&(g.debug("Clearing buffer because track changed - "+(e.end(e.length-1)+.5)),ne([{start:0,end:e.end(e.length-1)+.5,force:!0}]))):j(t)}function j(e){A.append(e),e.mediaInfo.type===_e.default.VIDEO&&pe(Ae.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function Y(e){if(e&&0<e.length)for(var t=0,n=e.length;t<n;t++)g.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",d.getTime())}function H(e){var t,n,r;if(e.error)return 22===e.error.code&&(C=!0,y=.8*ce(),g.warn("Quota exceeded, Critical Buffer: "+y),0<y&&(t=Math.max(.2*y,1),r=y-t,n=Math.min(h.get().streaming.bufferTimeAtTopQuality,.9*r),r=Math.min(h.get().streaming.bufferTimeAtTopQualityLongForm,.9*r),r={streaming:{bufferToKeep:parseFloat(t.toFixed(5)),bufferTimeAtTopQuality:parseFloat(n.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(r.toFixed(5))}},h.update(r))),void(22!==e.error.code&&he()||(g.warn("Clearing playback buffer to overcome quota exceed situation"),pe(Ae.default.QUOTA_EXCEEDED,{criticalBufferLevel:y,quotaExceededTime:e.chunk.start}),ne(te())));C=!1,(M=e.chunk)&&!isNaN(M.index)&&(T=Math.max(M.index,T),$());e=A.getAllBufferRanges();M.segmentType===De.HTTPRequest.MEDIA_SEGMENT_TYPE?(Y(e),W(),function(){if(c!==_e.default.AUDIO&&c!==_e.default.VIDEO)return;if(isNaN(w))return;var e=d.getTime(),t=Q(w,0);if(e===w&&t)return;var n=a.getCurrentRepresentation().segmentDuration;if(!(t=Q(w,n)))return;Math.abs(e-w)>n?w<=t.end&&(d.seek(Math.max(w,t.start),!1,!0),w=NaN):e<t.start&&(d.seek(t.start,!1,!0),w=NaN)}()):x&&(i=d.getTime(),g.debug("AppendToBuffer seek target should be "+i),pe(Ae.default.SEEK_TARGET,{time:i}));var i=!1;R&&(0<R.indexOf(M)&&(i=!0),R=null),M&&!i&&pe(M.endFragment?Ae.default.BYTES_APPENDED_END_FRAGMENT:Ae.default.BYTES_APPENDED,{quality:M.quality,startTime:M.start,index:M.index,bufferedRanges:e,mediaType:c})}function q(e){_!==e.newQuality&&(ae(this.getRepresentationInfo(e.newQuality)),_=e.newQuality)}function K(e){A&&(w=e.seekTime,m&&(m=!(P=!0),S=Number.POSITIVE_INFINITY),(c!==_e.default.FRAGMENTED_TEXT?function(){if(!A)return;A.waitForUpdateEnd(function(){var e=function(){if(!A)return;var e=[],t=A.getAllBufferRanges();if(!t||0===t.length)return e;var n=d.getTime(),r=t.end(t.length-1)+.5,i=s.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];{var a;i?(a={start:0,end:i.startTime-h.get().streaming.stallThreshold},(n=s.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime-i.duration/2,threshold:.01})[0])&&n.startTime!=i.startTime&&(a.end=n.startTime),a.start<a.end&&a.end>t.start(0)&&e.push(a),t={start:i.startTime+i.duration+h.get().streaming.stallThreshold,end:r},(a=s.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime+i.duration+h.get().streaming.stallThreshold,threshold:.01})[0])&&a.startTime!==i.startTime&&(t.start=a.startTime+a.duration+h.get().streaming.stallThreshold),t.start<t.end&&t.start<r&&e.push(t)):(g.debug("getAllRangesWithSafetyFactor - No request found in current time position, removing full buffer 0 -",r),e.push({start:0,end:r}))}return e}();e&&0!==e.length||W(),ne(e)})}:W)())}function V(){w=NaN}function W(){(!x||c===_e.default.FRAGMENTED_TEXT&&u.isTextEnabled())&&Z()}function z(){J()}function X(){w=NaN,J()}function Q(e,t){var n,r,i,a=A.getAllBufferRanges(),o=null,s=null,u=0,l=void 0,d=isNaN(t)?.15:t;if(null!=a){for(l=0,i=a.length;l<i;l++)if(n=a.start(l),r=a.end(l),null===o)u=Math.abs(n-e),(n<=e&&e<r||u<=d)&&(o=n,s=r);else{if(!((u=n-s)<=d))break;s=r}if(null!==o)return{start:o,end:s}}return null}function Z(){var e,t;d&&(e=(isNaN(w)?d.getTime():w)||0,h.get().streaming.jumpGaps&&(t=h.get().streaming.smallGapLimit),E=null===(t=Q(e,t))?0:t.end-e,pe(Ae.default.BUFFER_LEVEL_UPDATED,{bufferLevel:E}),J())}function $(){S-1<=T&&!m&&void 0===A.discharge&&(m=!0,g.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for "+c),pe(Ae.default.BUFFERING_COMPLETED))}function J(){c!==_e.default.AUDIO&&c!==_e.default.VIDEO||(P&&!m&&0<E&&d&&d.getTimeToStreamEnd()-E<.1&&(m=!(P=!1),g.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED for type "+c),pe(Ae.default.BUFFERING_COMPLETED)),(!h.get().streaming.lowLatencyEnabled&&E<h.get().streaming.stallThreshold||0===E)&&!m?ee(me.default.BUFFER_EMPTY):(m||E>=f.manifestInfo.minBufferTime)&&ee(me.default.BUFFER_LOADED))}function ee(e){b===e||e===me.default.BUFFER_EMPTY&&0===d.getTime()||c===_e.default.FRAGMENTED_TEXT&&!u.isTextEnabled()||(b=e,pe(Ae.default.BUFFER_LEVEL_STATE_CHANGED,{state:e}),pe(e===me.default.BUFFER_LOADED?Ae.default.BUFFER_LOADED:Ae.default.BUFFER_EMPTY),g.debug(e===me.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function te(){var e=[],t=A.getAllBufferRanges();if(!t||0===t.length)return e;var n=d.getTime(),r=Math.max(0,n-h.get().streaming.bufferToKeep),i=s.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i)r=Math.min(i.startTime,r);else if(0===n&&d.getIsDynamic())return[];if(t.start(0)<=r){for(var a={start:0,end:r},o=0;o<t.length&&t.end(o)<=r;o++)a.end=t.end(o);a.start<a.end&&e.push(a)}return e}function ne(e){e&&A&&0!==e.length&&(L.push.apply(L,e),N||re())}function re(){if(0===L.length||!A)return g.debug("Nothing to prune, halt pruning"),void(N=!(L=[]));var e=A.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return g.debug("SourceBuffer is empty (or does not exist), halt pruning"),void(N=!(L=[]));e=L.shift();g.debug("Removing buffer from:",e.start,"to",e.end),N=!0,d.getTime()<e.end&&(m=!1,T=0),A.remove(e.start,e.end,e.force)}function ie(e){A===e.buffer&&(g.debug("onRemoved buffer from:",e.from,"to",e.to),Y(A.getAllBufferRanges()),0===L.length&&(N=!1),e.unintended&&(g.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),pe(Ae.default.SEEK_TARGET,{time:e.from,mediaType:c,streamId:f.id})),N?re():(x?(x=!1,F&&j(F)):Z(),pe(Ae.default.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:he(),quotaExceeded:C})))}function ae(e){e&&void 0!==e.MSETimeOffset&&A&&A.updateTimestampOffset&&A.updateTimestampOffset(e.MSETimeOffset)}function oe(e){e.error||m||ae(e.currentRepresentation)}function se(e){S=e.request.index,$()}function ue(e){e.newMediaInfo.streamInfo.id!==f.id||e.newMediaInfo.type!==c||(e=A&&A.getAllBufferRanges())&&(g.info("Track change asked"),t.getSwitchMode(c)===_e.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&e&&0<e.length&&d.getTimeToStreamEnd()>h.get().streaming.stallThreshold&&(m=!1,S=Number.POSITIVE_INFINITY))}function le(){++D*(h.get().streaming.wallclockTimeUpdateInterval/1e3)>=h.get().streaming.bufferPruningInterval&&(D=0,A&&c!==_e.default.FRAGMENTED_TEXT&&(m||ne(te())))}function de(){J()}function fe(e,t){v=e,A&&t&&"function"==typeof A.discharge&&(I=A,B(t))}function ce(){var e,t=A.getAllBufferRanges(),n=0,r=void 0;if(!t)return n;for(r=0,e=t.length;r<e;r++)n+=t.end(r)-t.start(r);return n}function he(){return ce()<y}function pe(e,t){t=t||{};n.trigger(e,t,{streamId:f.id,mediaType:c})}function ge(e,t){y=Number.POSITIVE_INFINITY,b=void 0,_=Te.default.QUALITY_DEFAULT,S=Number.POSITIVE_INFINITY,M=null,P=C=N=m=!1,D=E=T=0,L=[],w=NaN,A&&(e||A.abort(),A.reset(t),A=null),x=!1}return p={initialize:function(e){fe(e),_=l.getQualityFor(c),n.on(Ae.default.DATA_UPDATE_COMPLETED,oe,this),n.on(Ae.default.INIT_FRAGMENT_LOADED,k,this),n.on(Ae.default.MEDIA_FRAGMENT_LOADED,G,this),n.on(Ae.default.QUALITY_CHANGE_REQUESTED,q,this),n.on(Ae.default.STREAM_COMPLETED,se,this),n.on(Ae.default.PLAYBACK_PLAYING,X,this),n.on(Ae.default.PLAYBACK_PROGRESS,W,this),n.on(Ae.default.PLAYBACK_TIME_UPDATED,W,this),n.on(Ae.default.PLAYBACK_RATE_CHANGED,de,this),n.on(Ae.default.PLAYBACK_SEEKING,K,this),n.on(Ae.default.PLAYBACK_SEEKED,V,this),n.on(Ae.default.PLAYBACK_STALLED,z,this),n.on(Ae.default.WALLCLOCK_TIME_UPDATED,le,this),n.on(Ae.default.CURRENT_TRACK_CHANGED,ue,this,{priority:Se.default.EVENT_PRIORITY_HIGH}),n.on(Ae.default.SOURCEBUFFER_REMOVE_COMPLETED,ie,this)},getStreamId:function(){return f.id},getType:function(){return c},getBufferControllerType:function(){return Ne},getRepresentationInfo:U,createBuffer:B,dischargePreBuffer:function(){if(A&&I&&"function"==typeof I.discharge){var e=I.getAllBufferRanges();if(0<e.length){for(var t="Beginning "+c+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";g.debug(t)}else g.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");R=[];for(var r=I.discharge(),i=null,a=0;a<r.length;a++){var o,s=r[a];"InitializationSegment"===s.segmentType||(o=O.extract(s.streamId,s.representationId))&&i!==o&&(R.push(o),A.append(o),i=o),R.push(s),A.append(s)}I.reset(),I=null}},getBuffer:function(){return A},setBuffer:function(e){A=e},getBufferLevel:function(){return E},getRangeAt:Q,setMediaSource:fe,getMediaSource:function(){return v},appendInitSegment:function(e){return!!(e=O.extract(f.id,e))&&(g.info("Append Init fragment",c," with representationId:",e.representationId," and quality:",e.quality,", data size:",e.bytes.byteLength),j(e),!0)},replaceBuffer:function(){x=!0},getIsBufferingCompleted:function(){return m},getIsPruningInProgress:function(){return N},reset:function(e,t){n.off(Ae.default.DATA_UPDATE_COMPLETED,oe,this),n.off(Ae.default.INIT_FRAGMENT_LOADED,k,this),n.off(Ae.default.MEDIA_FRAGMENT_LOADED,G,this),n.off(Ae.default.QUALITY_CHANGE_REQUESTED,q,this),n.off(Ae.default.STREAM_COMPLETED,se,this),n.off(Ae.default.PLAYBACK_PLAYING,X,this),n.off(Ae.default.PLAYBACK_PROGRESS,W,this),n.off(Ae.default.PLAYBACK_TIME_UPDATED,W,this),n.off(Ae.default.PLAYBACK_RATE_CHANGED,de,this),n.off(Ae.default.PLAYBACK_SEEKING,K,this),n.off(Ae.default.PLAYBACK_SEEKED,V,this),n.off(Ae.default.PLAYBACK_STALLED,z,this),n.off(Ae.default.WALLCLOCK_TIME_UPDATED,le,this),n.off(Ae.default.CURRENT_TRACK_CHANGED,ue,this),n.off(Ae.default.SOURCEBUFFER_REMOVE_COMPLETED,ie,this),ge(e,t)},updateAppendWindow:function(){A&&!m&&A.updateAppendWindow(f)}},g=(0,Ie.default)(r).getInstance().getLogger(p),O=(0,Re.default)(r).getInstance(),ge(),p}a.__dashjs_factory_name=Ne,n.default=i.default.getClassFactory(a),t.exports=n.default},{106:106,107:107,112:112,113:113,115:115,154:154,227:227,239:239,255:255,45:45,46:46,47:47,51:51,54:54}],119:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),N=r(e(45)),C=r(e(46)),O=r(e(104)),w=r(e(164));function a(){var a="urn:mpeg:dash:event:2012",o=1,s="urn:mpeg:dash:event:callback:2015",u=1,l=300,d={DISCARDED:"discarded",UPDATED:"updated",ADDED:"added"},f=this.context,c=(0,C.default)(f).getInstance(),e=void 0,h=void 0,i=void 0,r=void 0,t=void 0,n=void 0,p=void 0,g=void 0,_=void 0,m=void 0,E=void 0;function y(){if(!p||!g)throw new Error("setConfig function has to be called previously")}function v(){E=!1,i={},t=null,m=!(r={}),n=Date.now()/1e3}function T(){try{null!==t&&E&&(clearInterval(t),t=null,E=!1,function(){try{R(r),R(i)}catch(e){}}())}catch(e){throw e}}function S(e,t,n){var r=!(arguments.length<=2||void 0===n)&&n,i=e.eventStream.schemeIdUri,a=e.eventStream.value,o=e.id,s=d.DISCARDED;t[i]||(t[i]=[]);n=t[i].findIndex(function(e){return(!a||e.eventStream.value&&e.eventStream.value===a)&&e.id===o});return-1===n?(t[i].push(e),s=d.ADDED):r&&(t[i][n]=e,s=d.UPDATED),s}function A(){try{var e,t;m||(m=!0,t=(e=g.getTime())-n,t=0<n?Math.max(0,t):0,I(r,t,e),I(i,t,e),n=e,m=!1)}catch(e){m=!1}}function I(n,r,i){try{b(n,function(e){var t;void 0!==e&&(t=isNaN(e.duration)?0:e.duration,e.calculatedPresentationTime<=i&&e.calculatedPresentationTime+r+t>=i?M(e,n,O.default.EVENT_MODE_ON_START):(function(e,t,n){try{return n<e-t}catch(e){return!1}}(i,t+r,e.calculatedPresentationTime)||function(e){try{var t=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime>t}catch(e){return!1}}(e))&&(h.debug("Deleting event "+e.id+" as it is expired or invalid"),D(n,e)))})}catch(e){}}function R(e){try{i=g.getTime(),b(e,(n=t.eventStream&&t.eventStream.period&&!isNaN(t.eventStream.period.duration)?t.eventStream.period.duration:NaN,r=t.eventStream&&t.eventStream.period&&!isNaN(t.eventStream.period.start)?t.eventStream.period.start:NaN,void(isNaN(n)||isNaN(r)||(r=t.calculatedPresentationTime,Math.abs(r-i)<l&&M(t,e,O.default.EVENT_MODE_ON_START)))))}catch(e){}var t,n,r,i}function b(e,t){try{if(e)for(var n=Object.keys(e),r=0;r<n.length;r++){e[n[r]].forEach(function(e){void 0!==e&&t(e)})}}catch(e){}}function M(e,t,n){try{var r=g.getTime(),i=e.id;if(n===O.default.EVENT_MODE_ON_RECEIVE)return h.debug("Received event "+i),void c.trigger(e.eventStream.schemeIdUri,{event:e},{mode:n});e.eventStream.schemeIdUri===a&&e.eventStream.value===o?0===e.duration&&0===e.presentationTimeDelta||(h.debug("Starting manifest refresh event "+i+" at "+r),D(t,e),function(){try{y(),p.refreshManifest()}catch(e){}}()):e.eventStream.schemeIdUri===s&&e.eventStream.value===u?(h.debug("Starting callback event "+i+" at "+r),D(t,e),function(e){try{(0,w.default)(f).create({}).load({method:"get",url:e,request:{responseType:"arraybuffer"}})}catch(e){throw e}}(e.messageData)):(h.debug("Starting event "+i+" at "+r),D(t,e),c.trigger(e.eventStream.schemeIdUri,{event:e},{mode:n}))}catch(e){}}function D(e,t){var n=t.eventStream.schemeIdUri,r=t.eventStream.value,i=t.id;e[n]=e[n].filter(function(e){return r&&e.eventStream.value&&e.eventStream.value!==r||e.id!==i}),0===e[n].length&&delete e[n]}return e={addInlineEvents:function(e){try{if(y(),e)for(var t=0;t<e.length;t++){var n=e[t],r=S(n,i,!0);r===d.ADDED?(h.debug("Added inline event with id "+n.id),M(n,e,O.default.EVENT_MODE_ON_RECEIVE)):r===d.UPDATED&&h.debug("Updated inline event with id "+n.id)}h.debug("Added "+e.length+" inline events")}catch(e){throw e}},addInbandEvents:function(e){try{y();for(var t=0;t<e.length;t++){var n=e[t];S(n,r,!1)===d.ADDED?(n.eventStream.schemeIdUri===a&&void 0===r[n.id]&&function(e){try{var t,n;e.eventStream.value==o&&(t=e.calculatedPresentationTime,n=void 0,n=4294967295==e.calculatedPresentationTime?NaN:e.calculatedPresentationTime+e.duration,c.trigger(O.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:t,newDuration:n,newManifestValidAfter:NaN},{mode:O.default.EVENT_MODE_ON_START}))}catch(e){}}(n),h.debug("Added inband event with id "+n.id),M(n,e,O.default.EVENT_MODE_ON_RECEIVE)):h.debug("Inband event with scheme_id_uri "+n.eventStream.schemeIdUri+", value "+n.eventStream.value+" and id "+n.id+" was ignored because it has been added before.")}A()}catch(e){throw e}},getInbandEvents:function(){return r},getInlineEvents:function(){return i},start:function(){try{y(),h.debug("Start Event Controller");var e=_.get().streaming.eventControllerRefreshDelay;E||isNaN(e)||(E=!0,t=setInterval(A,e))}catch(e){throw e}},setConfig:function(e){try{if(!e)return;e.manifestUpdater&&(p=e.manifestUpdater),e.playbackController&&(g=e.playbackController),e.settings&&(_=e.settings)}catch(e){throw e}},reset:function(){T(),v()}},h=(0,N.default)(f).getInstance().getLogger(e),v(),e}a.__dashjs_factory_name="EventController",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{104:104,164:164,45:45,46:46,47:47}],120:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(112)),p=r(e(240)),g=r(e(154)),_=r(e(100)),m=r(e(231)),E=r(e(46)),y=r(e(54)),v=r(e(51)),i=r(e(47)),T=r(e(45));function a(n){n=n||{};var r=this.context,u=(0,E.default)(r).getInstance(),i=n.errHandler,a=n.mediaPlayerModel,o=n.dashMetrics,s=(0,T.default)(r).getInstance(),l=n.streamInfo,e=void 0,d=void 0,f=void 0;function t(){for(var e in f)f[e].reset();f={}}function c(e){var t,n,r,i,a,o,s;e.sender&&(t=e.request,s=e.response,n=t.isInitializationRequest(),r=t.mediaInfo.streamInfo,e.error&&(t.mediaType!==h.default.AUDIO&&t.mediaType!==h.default.VIDEO&&t.mediaType!==h.default.FRAGMENTED_TEXT||u.trigger(y.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),s&&r?(i=s,a=t,o=l.id,s=e.type!==y.default.FRAGMENT_LOADING_PROGRESS,(e=new p.default).streamId=o,e.mediaInfo=a.mediaInfo,e.segmentType=a.type,e.start=a.startTime,e.duration=a.duration,e.end=e.start+e.duration,e.bytes=i,e.index=a.index,e.quality=a.quality,e.representationId=a.representationId,e.endFragment=s,e=e,u.trigger(n?y.default.INIT_FRAGMENT_LOADED:y.default.MEDIA_FRAGMENT_LOADED,{chunk:e,request:t},{streamId:r.id,mediaType:t.mediaType})):d.warn("No "+t.mediaType+" bytes to push or stream is inactive."))}return e={getStreamId:function(){return l.id},getModel:function(e){var t=f[e];return t||(t=(0,g.default)(r).create({streamInfo:l,type:e,dashMetrics:o,fragmentLoader:(0,_.default)(r).create({dashMetrics:o,mediaPlayerModel:a,errHandler:i,requestModifier:(0,m.default)(r).getInstance(),settings:n.settings,boxParser:n.boxParser,eventBus:u,events:y.default,errors:v.default,dashConstants:n.dashConstants,urlUtils:n.urlUtils}),debug:s,eventBus:u,events:y.default}),f[e]=t),t},reset:function(){u.off(y.default.FRAGMENT_LOADING_COMPLETED,c,this),u.off(y.default.FRAGMENT_LOADING_PROGRESS,c,this),t()}},d=s.getLogger(e),t(),u.on(y.default.FRAGMENT_LOADING_COMPLETED,c,e),u.on(y.default.FRAGMENT_LOADING_PROGRESS,c,e),e}a.__dashjs_factory_name="FragmentController",n.default=i.default.getClassFactory(a),t.exports=n.default},{100:100,112:112,154:154,231:231,240:240,45:45,46:46,47:47,51:51,54:54}],121:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),y=r(e(45)),v=r(e(54)),T=r(e(46));function a(){var e=this.context,c=(0,T.default)(e).getInstance(),t=void 0,n=void 0,h=void 0,r=void 0,i=void 0,p=void 0,g=void 0,a=void 0,_=void 0,m=void 0,E=void 0;function o(){E.debug("Stopping the gap controller"),i&&(clearInterval(i),i=null),function(){c.off(v.default.WALLCLOCK_TIME_UPDATED,l,this),c.off(v.default.PLAYBACK_SEEKING,u,this),c.off(v.default.BYTES_APPENDED_END_FRAGMENT,s,t)}(),p=NaN,r=0,m=i=null}function s(){i||function(){try{i||(E.debug("Starting the gap controller"),i=setInterval(function(){d()&&f(g.getTime())},100))}catch(e){}}()}function u(){m&&(clearTimeout(m),m=null)}function l(){var e;d()&&30<=++r&&(e=g.getTime(),n===e?f(e,!0):(n=e,p=NaN),r=0)}function d(){return h.get().streaming.jumpGaps&&0<a.getActiveStreamProcessors().length&&(!g.isSeeking()||a.hasStreamFinishedBuffering(a.getActiveStream()))&&!g.isPaused()&&!a.getIsStreamSwitchInProgress()&&!a.getHasMediaOrIntialisationError()}function f(e,t){var n=!(arguments.length<=1||void 0===t)&&t,r=h.get().streaming.smallGapLimit,i=h.get().streaming.jumpLargeGaps,a=_.getBufferRange(),o=NaN,s=!1,u=function(e,t){try{if(!e||e.length<=1&&0<t)return NaN;for(var n=NaN,r=0;isNaN(n)&&r<e.length;){var i=0<r?e.end(r-1):0;t<e.start(r)&&i-t<.1&&(n=r),r+=1}return n}catch(e){return null}}(a,e);isNaN(u)||0<(t=(f=a.start(u))-e)&&(t<=r||i)&&(o=f);var l,d,f=g.getTimeToStreamEnd();isNaN(o)&&n&&isFinite(f)&&!isNaN(f)&&f<r&&(o=parseFloat(g.getStreamEndTime().toFixed(5)),s=!0),0<o&&p!==o&&e<o&&!m&&(d=o-e,s?(E.warn("Jumping to end of stream because of gap from "+e+" to "+o+". Gap duration: "+d),c.trigger(v.default.GAP_CAUSED_SEEK_TO_PERIOD_END,{seekTime:o,duration:d})):(s=g.getIsDynamic(),l=0<u?a.end(u-1):e,s=s?1e3*d:0,m=window.setTimeout(function(){g.seek(o,!0,!0),E.warn("Jumping gap starting at "+l+" and ending at "+o+". Jumping by: "+d),c.trigger(v.default.GAP_CAUSED_INTERNAL_SEEK,{seekTime:o,duration:d}),m=null},s)),p=o)}return t={reset:o,setConfig:function(e){e&&(e.settings&&(h=e.settings),e.playbackController&&(g=e.playbackController),e.streamController&&(a=e.streamController),e.videoModel&&(_=e.videoModel),e.timelineConverter&&e.timelineConverter,e.adapter&&e.adapter)},initialize:function(){!function(){c.on(v.default.WALLCLOCK_TIME_UPDATED,l,this),c.on(v.default.PLAYBACK_SEEKING,u,this),c.on(v.default.BYTES_APPENDED_END_FRAGMENT,s,t)}()}},E=(0,y.default)(e).getInstance().getLogger(t),o(),t}a.__dashjs_factory_name="GapController",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{45:45,46:46,47:47,54:54}],122:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var I=r(e(112)),R=r(e(54)),b=r(e(46)),i=r(e(47)),M=r(e(45));function a(){var e=this.context,a=(0,b.default)(e).getInstance(),t=void 0,r=void 0,o=void 0,i=void 0,n=void 0,s=void 0,u=[I.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,I.default.TRACK_SWITCH_MODE_NEVER_REPLACE],l=[I.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE,I.default.TRACK_SELECTION_MODE_FIRST_TRACK,I.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY,I.default.TRACK_SELECTION_MODE_WIDEST_RANGE];function d(e,t){if(!e||!t)return[];t=t.id;return o[t]&&o[t][e]?o[t][e].list:[]}function f(e,t){return!e||!t||t&&!o[t.id]?null:o[t.id][e].current}function c(e,t){if(e&&e.streamInfo){var n=e.type,r=e.streamInfo,i=r.id,r=f(n,r);if(o[i]&&o[i][n]&&!E(e,r)&&(o[i][n].current=e,!o[i][n].current||t&&n===I.default.FRAGMENTED_TEXT||a.trigger(R.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:r,newMediaInfo:e,switchMode:g(n)}),!t)){e=function(e){e={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration};return e.lang||e.viewpoint||e.role&&0<e.role.length||e.accessibility&&0<e.accessibility.length||e.audioChannelConfiguration&&0<e.audioChannelConfiguration.length?e:null}(e);if(!e||!o[i][n].storeLastSettings)return;e.roles&&(e.role=e.roles[0],delete e.roles),e.accessibility&&(e.accessibility=e.accessibility[0]),e.audioChannelConfiguration&&(e.audioChannelConfiguration=e.audioChannelConfiguration[0]),s.setSavedMediaSettings(n,e)}}}function h(e,t){e&&t&&(n[e]=t)}function p(e){return e?n[e]:null}function g(e){return i.get().streaming.trackSwitchMode[e]}function _(){return i.get().streaming.selectionModeForInitialTrack}function m(e){return e===I.default.AUDIO||e===I.default.VIDEO||e===I.default.TEXT||e===I.default.FRAGMENTED_TEXT||e===I.default.IMAGE}function E(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),t=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&t}function y(){o={},n={audio:null,video:null,fragmentedText:null}}function v(t,e){var n=!t.lang||e.lang.match(t.lang),r=void 0===t.index||null===t.index||e.index===t.index,i=!t.viewpoint||t.viewpoint===e.viewpoint,a=!t.role||!!e.roles.filter(function(e){return e===t.role})[0],o=!t.accessibility||!!e.accessibility.filter(function(e){return e===t.accessibility})[0],e=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0];return n&&r&&i&&a&&o&&e}function T(e){var t,n=0,r=[];return e.forEach(function(e){t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),n<t?(n=t,r=[e]):t===n&&r.push(e)}),r}function S(e){var n,r=1/0,i=[];return e.forEach(function(e){var t=e.bitrateList.reduce(function(e,t){var n=Math.max(1,t.width*t.height);return e+t.bandwidth/n},0);(n=t/e.bitrateList.length)<r?(r=n,i=[e]):n===r&&i.push(e)}),i}function A(e){var t,n=0,r=[];return e.forEach(function(e){t=e.representationCount,n<t?(n=t,r=[e]):t===n&&r.push(e)}),r}return t={checkInitialMediaSettingsForType:function(e,t){var n=p(e),t=d(e,t),r=[];n||h(e,n=s.getSavedMediaSettings(e)),t&&0!==t.length&&(n&&t.forEach(function(e){v(n,e)&&r.push(e)}),0===r.length?c(this.selectInitialTrack(e,t),!0):1<r.length?c(this.selectInitialTrack(e,r)):c(r[0]))},addTrack:function(e){if(e){var t=e.type;if(m(t)){var n=e.streamInfo.id;o[n]||(o[n]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var r=o[n][t].list,i=0,a=r.length;i<a;++i)if(E(r[i],e))return;r.push(e);n=p(t);n&&v(n,e)&&!f(t,e.streamInfo)&&c(e)}}},getTracksFor:d,getCurrentTrackFor:f,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,n=e.streamInfo.id;return o[n]&&o[n][t]&&E(o[n][t].current,e)},setTrack:c,setInitialSettings:h,getInitialSettings:p,setSwitchMode:function(e,t){var n;r.warn("deprecated: Please use updateSettings({streaming: { trackSwitchMode: mode } }) instead"),-1!==u.indexOf(t)?((n={})[e]=t,i.update({streaming:{trackSwitchMode:n}})):r.warn("Track switch mode is not supported: "+t)},getSwitchMode:g,selectInitialTrack:function(e,t){if(e===I.default.FRAGMENTED_TEXT)return t[0];var n=_(),e=[];switch(n){case I.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:1<(e=T(t)).length&&(e=A(e));break;case I.default.TRACK_SELECTION_MODE_FIRST_TRACK:e.push(t[0]);break;case I.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:1<(e=S(t)).length&&(e=T(e));break;case I.default.TRACK_SELECTION_MODE_WIDEST_RANGE:1<(e=A(t)).length&&(e=T(t));break;default:r.warn("Track selection mode is not supported: "+n)}return e[0]},getTracksWithHighestBitrate:T,getTracksWithHighestEfficiency:S,getTracksWithWidestRange:A,setSelectionModeForInitialTrack:function(e){r.warn("deprecated: Please use updateSettings({streaming: { selectionModeForInitialTrack: mode } }) instead"),-1!==l.indexOf(e)?i.update({streaming:{selectionModeForInitialTrack:e}}):r.warn("Track selection mode is not supported: "+e)},getSelectionModeForInitialTrack:_,isMultiTrackSupportedByType:m,isTracksEqual:E,matchSettings:v,saveTextSettingsDisabled:function(){s.setSavedMediaSettings(I.default.FRAGMENTED_TEXT,null)},setConfig:function(e){e&&(e.domStorage&&(s=e.domStorage),e.settings&&(i=e.settings))},reset:y},r=(0,M.default)(e).getInstance().getLogger(t),y(),t}a.__dashjs_factory_name="MediaController";e=i.default.getSingletonFactory(a);i.default.updateSingletonFactory(a.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{112:112,45:45,46:46,47:47,54:54}],123:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45));function o(){var e=void 0,r=void 0,t=this.context;function n(e,t){e&&"open"===e.readyState&&(null===t&&isNaN(t)||e.duration!==t&&(!function(e){for(var t=e.sourceBuffers,n=0;n<t.length;n++)if(t[n].updating)return!0;return!1}(e)?(r.info("Set MediaSource duration:"+t),e.duration=t):setTimeout(n.bind(null,e,t),50)))}return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){return e=window.URL.createObjectURL(e),t.setSource(e),e},detachMediaSource:function(e){e.setSource(null)},setDuration:n,setSeekable:function(e,t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&0<=t&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var t=e.sourceBuffers,n=0;n<t.length;n++){if(t[n].updating)return;if(0===t[n].buffered.length)return}r.info("call to mediaSource endOfStream"),e.endOfStream()}}},r=(0,a.default)(t).getInstance().getLogger(e),e}o.__dashjs_factory_name="MediaSourceController",n.default=i.default.getSingletonFactory(o),t.exports=n.default},{45:45,47:47}],124:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ge=r(e(112)),_e=r(e(113)),me=r(e(46)),Ee=r(e(54)),i=r(e(47)),ye=r(e(45));function a(){var e=this.context,r=(0,me.default)(e).getInstance(),t=void 0,l=void 0,i=void 0,o=void 0,s=void 0,u=void 0,n=void 0,a=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=void 0,_=void 0,m=void 0,E=void 0,y=void 0,v=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0;function b(e){var t,n;a&&isNaN(d)||(t=d,isNaN(t)&&(p?(t=e.liveStartTime,(e=(e=o.getCurrentDVRInfo())?e.range:null)&&(n=j(!0),isNaN(n)||(l.info("Start time from URI parameters: "+n),t=Math.max(Math.min(t,n),e.start)))):(t=h.start,n=j(!1),!isNaN(n)&&n<t+h.duration&&(l.info("Start time from URI parameters: "+n),t=Math.max(t,n)))),isNaN(t)||t===u.getTime()||(r.trigger(Ee.default.PLAYBACK_SEEKING,{seekTime:t}),P(t,!1,!0)))}function M(){return parseFloat((D()-L()).toFixed(5))}function D(){return h.start+h.duration}function N(){h&&u&&u.getElement()?u.play():_=!0}function C(){return h&&u?u.isPaused():null}function O(){h&&u&&u.pause()}function w(){return h&&u?u.isSeeking():null}function P(e,t,n){h&&u&&e!==(isNaN(y)?u.getTime():y)&&((v=!0===n)||(y=e,r.trigger(Ee.default.PLAYBACK_SEEK_ASKED)),l.info("Requesting seek to time: "+e+(v?" (internal)":"")),u.setCurrentTime(e,t))}function L(){return h&&u?u.getTime():null}function x(){var e,t=L();return!p||isNaN(E)||(e=E/1e3)<t&&(t-=e),t}function F(){return h&&u?u.getPlaybackRate():null}function U(){return h&&u?u.getEnded():null}function B(){return p}function k(){if(!p||isNaN(E))return NaN;var e=x();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*n.getClientTimeOffset();return Math.max(((t-E-1e3*e)/1e3).toFixed(3),0)}function G(){a=_=!1,E=c=0,y=d=NaN,u&&(r.off(Ee.default.STREAM_INITIALIZED,b,this),r.off(Ee.default.DATA_UPDATE_COMPLETED,K,this),r.off(Ee.default.BUFFER_LEVEL_STATE_CHANGED,ce,this),r.off(Ee.default.LOADING_PROGRESS,fe,this),r.off(Ee.default.PLAYBACK_PROGRESS,oe,this),r.off(Ee.default.PLAYBACK_TIME_UPDATED,oe,this),r.off(Ee.default.PLAYBACK_ENDED,ie,this),r.off(Ee.default.STREAM_INITIALIZING,pe,this),H(),u.removeEventListener("canplay",V),u.removeEventListener("play",W),u.removeEventListener("waiting",z),u.removeEventListener("playing",X),u.removeEventListener("pause",Q),u.removeEventListener("error",ae),u.removeEventListener("seeking",Z),u.removeEventListener("seeked",$),u.removeEventListener("timeupdate",J),u.removeEventListener("progress",ee),u.removeEventListener("ratechange",te),u.removeEventListener("loadedmetadata",ne),u.removeEventListener("stalled",he),u.removeEventListener("ended",re)),p=h=u=f=null}function j(e){var t=I.getURIFragmentData();if(!t||!t.t)return NaN;var n=i.getStreams()[0].getStreamInfo().start;t.t=t.t.split(",")[0];var r=-1!==t.t.indexOf("posix:")?"now"===t.t.substring(6)?Date.now()/1e3:parseInt(t.t.substring(6)):NaN;return e&&!isNaN(r)?r-E/1e3:parseInt(t.t)+n}function Y(){null===f&&(f=setInterval(function(){r.trigger(Ee.default.WALLCLOCK_TIME_UPDATED,{isDynamic:p,time:new Date}),p&&C()&&function(){var e=Date.now();(!m||m+500<e)&&(m=e,J())}()},R.get().streaming.wallclockTimeUpdateInterval))}function H(){clearInterval(f),f=null}function q(e){var t,n;!C()&&p&&0!==u.getReadyState()&&(t=x(),n=t,e=e,n=(e=(e=o.getCurrentDVRInfo(e))?e.range:null)?(l.debug("Checking DVR window for at "+n+" with DVR window range "+e.start+" - "+e.end),n>e.end?Math.max(e.end-c,e.start):0<n&&n+.25<e.start&&Math.abs(n-e.start)<31536e4?e.start:n):NaN,isNaN(n)||n===t||w()||(l.debug("UpdateCurrentTime: Seek to actual time: "+n+" from currentTime: "+t),P(n)))}function K(e){e.error||null!==(e=(e=s.convertDataToRepresentationInfo(e.currentRepresentation))?e.mediaInfo.streamInfo:null)&&h.id===e.id&&(h=e,q())}function V(){r.trigger(Ee.default.CAN_PLAY)}function W(){l.info("Native video element event: play"),q(),Y(),r.trigger(Ee.default.PLAYBACK_STARTED,{startTime:L()})}function z(){l.info("Native video element event: waiting"),r.trigger(Ee.default.PLAYBACK_WAITING,{playingTime:L()})}function X(){l.info("Native video element event: playing"),r.trigger(Ee.default.PLAYBACK_PLAYING,{playingTime:L()})}function Q(){l.info("Native video element event: pause"),r.trigger(Ee.default.PLAYBACK_PAUSED,{ended:U()})}function Z(){var e;v?v=!1:(e=L(),isNaN(y)||y===e||(e=y),y=NaN,l.info("Seeking to: "+e),Y(),r.trigger(Ee.default.PLAYBACK_SEEKING,{seekTime:e}))}function $(){l.info("Native video element event: seeked"),r.trigger(Ee.default.PLAYBACK_SEEKED)}function J(){h&&r.trigger(Ee.default.PLAYBACK_TIME_UPDATED,{timeToEnd:M(),time:L()})}function ee(){r.trigger(Ee.default.PLAYBACK_PROGRESS)}function te(){var e=F();l.info("Native video element event: ratechange: ",e),r.trigger(Ee.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function ne(){l.info("Native video element event: loadedmetadata"),r.trigger(Ee.default.PLAYBACK_METADATA_LOADED),Y()}function re(){l.info("Native video element event: ended"),O(),H();var e=i?i.getActiveStreamInfo():null;e&&r.trigger(Ee.default.PLAYBACK_ENDED,{isLast:e.isLast})}function ie(e){f&&e.isLast&&(l.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),e=e.seekTime?e.seekTime:D(),u.setCurrentTime(e),O(),H())}function ae(e){e=e.target||e.srcElement;r.trigger(Ee.default.PLAYBACK_ERROR,{error:e.error})}function oe(){p&&se()&&0<R.get().streaming.liveCatchup.playbackRate&&!C()&&!w()&&(!function(){try{if(se()&&0<R.get().streaming.liveCatchup.playbackRate&&0<L()){var e=le(),t=k(),n=g.getLiveDelay(),r=g.getLiveCatchupLatencyThreshold(),i=R.get().streaming.liveCatchup.minDrift;if(e!==ge.default.LIVE_CATCHUP_MODE_LOLP)return function(e,t,n,r){try{var i=Math.abs(e-t);return r<i&&(isNaN(n)||e<=n)}catch(e){return!1}}(t,n,r,i);var a=ue(),e=R.get().streaming.liveCatchup.playbackBufferMin;return function(e,t,n,r,i,a){try{var o=Math.abs(e-t);return(isNaN(a)||e<=a)&&(n<o||r<i)}catch(e){return!1}}(t,n,i,a,e,r)}}catch(e){return!1}}()?de:function(){{var e,t,n,r,i,a;u&&(i=u.getPlaybackRate(),e=R.get().streaming.liveCatchup.playbackRate,t=k(),a=g.getLiveDelay(),n=ue(),(i=(le()===ge.default.LIVE_CATCHUP_MODE_LOLP?(R.get().streaming.liveCatchup.minDrift,r=R.get().streaming.liveCatchup.playbackBufferMin,function(e,t,n,r,i,a){var o=e,e=void 0;{var s,u;i<r?(s=5*(i-r),u=2*o/(1+Math.pow(Math.E,-s)),e=1-o+u,l.debug("[LoL+ playback control_buffer-based] bufferLevel: "+i+", newRate: "+e)):(e=Math.abs(t-n)<=.02*n?1:(s=5*(t-n),u=2*o/(1+Math.pow(Math.E,-s)),1-o+u),l.debug("[LoL+ playback control_latency-based] latency: "+t+", newRate: "+e))}S&&n/2<i&&(S=!1);Math.abs(a-e)<=A&&(e=null);return{newRate:e}}(e,t,a,r,n,i)):function(e,t,n,r,i){var a=e,e=t-n,t=5*e,t=2*a/(1+Math.pow(Math.E,-t)),t=1-a+t;S&&(n/2<r?S=!1:0<e&&(t=1));Math.abs(i-t)<=A&&(t=null);return{newRate:t}}(e,t,a,n,i)).newRate)&&u.setPlaybackRate(i),a=t-a,0<R.get().streaming.liveCatchup.maxDrift&&!T&&a>R.get().streaming.liveCatchup.maxDrift?(l.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),T=!0,function(){var e=o.getCurrentDVRInfo();P((e?e.range:null).end-g.getLiveDelay(),!0,!1)}()):T=!1)}})()}function se(){return R.get().streaming.liveCatchup.enabled||R.get().streaming.lowLatencyEnabled}function ue(){var t=null;return i.getActiveStreamProcessors().forEach(function(e){e=e.getBufferLevel();t=null===t?e:Math.min(t,e)}),t}function le(){var e=R.get().streaming.liveCatchup.playbackBufferMin;return R.get().streaming.liveCatchup.mode!==ge.default.LIVE_CATCHUP_MODE_LOLP||null===e||isNaN(e)?ge.default.LIVE_CATCHUP_MODE_DEFAULT:ge.default.LIVE_CATCHUP_MODE_LOLP}function de(){u&&u.setPlaybackRate(1)}function fe(e){!1!==e.stream||!R.get().streaming.lowLatencyEnabled||isNaN(e.request.duration)||(e=1.2*e.request.duration)>g.getLiveDelay()&&(l.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",e.toFixed(2)),e={streaming:{liveDelay:e}},R.update(e))}function ce(e){e.streamId===h.id&&(se()?e.state!==_e.default.BUFFER_EMPTY||w()||S||(S=!0,de()):u.setStallState(e.mediaType,e.state===_e.default.BUFFER_EMPTY))}function he(e){r.trigger(Ee.default.PLAYBACK_STALLED,{e:e})}function pe(e){!function(e,t){if(e&&e.manifestInfo&&e.manifestInfo.serviceDescriptions){for(var n=void 0,r=0;r<e.manifestInfo.serviceDescriptions.length;r++){var i=e.manifestInfo.serviceDescriptions[r];if(i.schemeIdUri===ge.default.SERVICE_DESCRIPTION_LL_SCHEME){n=i;break}}n&&t&&t.supplementalProperties&&"true"===t.supplementalProperties[ge.default.SUPPLEMENTAL_PROPERTY_LL_SCHEME]&&(n.latency&&0<n.latency.target&&(l.debug("Apply LL properties coming from service description. Target Latency (ms):",n.latency.target),R.update({streaming:{lowLatencyEnabled:!0,liveDelay:n.latency.target/1e3,liveCatchup:{minDrift:n.latency.max>n.latency.target?(n.latency.max-n.latency.target)/1e3:void 0}}})),n.playbackRate&&1<n.playbackRate.max&&(l.debug("Apply LL properties coming from service description. Max PlaybackRate:",n.playbackRate.max),R.update({streaming:{lowLatencyEnabled:!0,liveCatchup:{playbackRate:n.playbackRate.max-1}}})))}}(e.streamInfo,e.mediaInfo)}return t={initialize:function(e,t,n){h=e,u.addEventListener("canplay",V),u.addEventListener("play",W),u.addEventListener("waiting",z),u.addEventListener("playing",X),u.addEventListener("pause",Q),u.addEventListener("error",ae),u.addEventListener("seeking",Z),u.addEventListener("seeked",$),u.addEventListener("timeupdate",J),u.addEventListener("progress",ee),u.addEventListener("ratechange",te),u.addEventListener("loadedmetadata",ne),u.addEventListener("stalled",he),u.addEventListener("ended",re),p=h.manifestInfo.isDynamic,a=!(S=T=!1)===t,d=n,v=!1,n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",n=/safari/.test(n)&&!/chrome/.test(n),A=n?.25:.02,r.on(Ee.default.STREAM_INITIALIZED,b,this),r.on(Ee.default.DATA_UPDATE_COMPLETED,K,this),r.on(Ee.default.LOADING_PROGRESS,fe,this),r.on(Ee.default.BUFFER_LEVEL_STATE_CHANGED,ce,this),r.on(Ee.default.PLAYBACK_PROGRESS,oe,this),r.on(Ee.default.PLAYBACK_TIME_UPDATED,oe,this),r.on(Ee.default.PLAYBACK_ENDED,ie,this,{priority:me.default.EVENT_PRIORITY_HIGH}),r.on(Ee.default.STREAM_INITIALIZING,pe,this),_&&(_=!1,N())},setConfig:function(e){e&&(e.streamController&&(i=e.streamController),e.dashMetrics&&(o=e.dashMetrics),e.mediaPlayerModel&&(g=e.mediaPlayerModel),e.adapter&&(s=e.adapter),e.videoModel&&(u=e.videoModel),e.timelineConverter&&(n=e.timelineConverter),e.uriFragmentModel&&(I=e.uriFragmentModel),e.settings&&(R=e.settings))},getStartTimeFromUriParameters:j,getTimeToStreamEnd:M,getTime:L,getNormalizedTime:x,getPlaybackRate:F,getPlayedRanges:function(){return h&&u?u.getPlayedRanges():null},getEnded:U,getIsDynamic:B,getStreamController:function(){return i},computeAndSetLiveDelay:function(e,t,n){var r=void 0,i=void 0,a=void 0,o=!isNaN(e)&&isFinite(e)?e:NaN,e=s.getSuggestedPresentationDelay(),r=R.get().streaming.lowLatencyEnabled?0:g.getLiveDelay()?g.getLiveDelay():null===R.get().streaming.liveDelayFragmentCount||isNaN(R.get().streaming.liveDelayFragmentCount)||isNaN(o)?!0===R.get().streaming.useSuggestedPresentationDelay&&null!==e&&!isNaN(e)&&0<e?e:isNaN(o)?isNaN(n)?4*h.manifestInfo.minBufferTime:4*n:4*o:o*R.get().streaming.liveDelayFragmentCount;return null!==(a=s.getAvailabilityStartTime())&&(E=a),i=0<t?(t=Math.max(t-10,t/2),Math.min(r,t)):r,c=i},getLiveDelay:function(){return c},setLiveDelay:function(e){!(arguments.length<=1||void 0===arguments[1])&&arguments[1]&&e<c||(c=e)},getCurrentLiveLatency:k,play:N,isPaused:C,pause:O,isSeeking:w,getStreamEndTime:D,seek:P,updateCurrentTime:q,reset:G},l=(0,ye.default)(e).getInstance().getLogger(t),G(),t}a.__dashjs_factory_name="PlaybackController",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{112:112,113:113,45:45,46:46,47:47,54:54}],125:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ae=r(e(112)),oe=r(e(113)),se=r(e(209)),ue=r(e(154)),le=r(e(46)),de=r(e(54)),i=r(e(47)),fe=r(e(45));function a(e){e=e||{};var t=this.context,r=(0,le.default)(t).getInstance(),s=e.adapter,u=e.dashMetrics,n=e.mediaPlayerModel,l=e.fragmentModel,d=e.abrController,f=e.playbackController,i=e.textController,c=e.type,h=e.mimeType,p=e.mediaController,g=e.bufferController,_=e.settings,a=void 0,o=void 0,m=void 0,E=void 0,y=void 0,v=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,M=void 0,D=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0;function x(){return!1===y}function F(){o&&(x()||E&&!g.getIsBufferingCompleted()&&(m.debug("Schedule Controller starts"),y=!1,u.createPlaylistTraceMetrics(E.id,1e3*f.getTime(),f.getPlaybackRate()),k(0)))}function U(){y||(m.debug("Schedule Controller stops"),m.debug(c+" Schedule Controller stops"),y=!0,clearTimeout(S))}function B(){var e,t,n;o&&(y||v||f.isPaused()&&!_.get().streaming.scheduleWhilePaused||(c===ae.default.FRAGMENTED_TEXT||c===ae.default.TEXT)&&!i.isTextEnabled()||g.getIsBufferingCompleted()?U():(function(){if(!isNaN(A))return;if(!D)return;var e=f.getTime(),t=1.5;{isNaN(D.fragmentDuration)&&(o=u.getCurrentSchedulingInfo(E.mediaInfo.type),t=o?1.5*o.duration:1.5)}var n=l.getRequests({state:ue.default.FRAGMENT_MODEL_EXECUTED,time:e+t,threshold:0})[0];{var r,i,a,o;n&&-1===N.indexOf(n)&&!s.getIsTextTrack(h)&&(r=_.get().streaming.fastSwitchEnabled,i=g.getBufferLevel(),a=d.getAbandonmentStateFor(c),o=!p.isCurrentTrack(n.mediaInfo)&&p.getSwitchMode(n.mediaInfo.type)===ae.default.TRACK_SWITCH_MODE_NEVER_REPLACE,e=n.quality<D.quality,r&&(o||e)&&t<=i&&a!==oe.default.ABANDON_LOAD?(j(n),L=!0,m.debug("Reloading outdated fragment at index: ",n.index)):n.quality>D.quality&&!O&&ne(f.getTime()+i))}}(),e=0<N.length,t=D?D.quality:NaN,O||isNaN(t)||C||e||function(e,t){M[t]=M[t]||{};var n=d.getTopQualityIndexFor(e,t);return M[t][e]!=n&&(m.info("Top quality "+e+" index has changed from "+M[t][e]+" to "+n),M[t][e]=n,1)}(c,o.id)||R.execute(c,E,I)?(G(!0),!e&&P&&d.checkPlaybackQuality(c),P=E.quality===t&&!C||O?(n=N.shift())&&n.isInitializationRequest()?(r.trigger(de.default.INIT_FRAGMENT_NEEDED,{representationId:n.representationId,sender:a},{streamId:o.id,mediaType:c}),!1):(r.trigger(de.default.MEDIA_FRAGMENT_NEEDED,{seekTarget:A,replacement:n},{streamId:o.id,mediaType:c}),!0):(C?(m.debug("Switch track for "+c+", representation id = "+E.id),(O=p.getSwitchMode(c)===ae.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE)&&g.replaceBuffer&&g.replaceBuffer(),C=!1):m.debug("Quality has changed, get init request for representationid = "+E.id),r.trigger(de.default.INIT_FRAGMENT_NEEDED,{representationId:E.id,sender:a},{streamId:o.id,mediaType:c}),!1)):k(500)))}function k(e){clearTimeout(S),S=setTimeout(B,e)}function G(e){v!==e?v=e:m.debug("isFragmentProcessingInProgress is already equal to",e)}function j(e){N.push(e)}function Y(e){var t;f&&l&&((t=l.getRequests({state:ue.default.FRAGMENT_MODEL_EXECUTED,time:f.getTime(),threshold:0})[0])&&f.getTime()>=t.startTime&&((!b.mediaInfo||t.mediaInfo.type===b.mediaInfo.type&&t.mediaInfo.id!==b.mediaInfo.id)&&e&&r.trigger(de.default.TRACK_CHANGE_RENDERED,{mediaType:c,oldMediaInfo:b.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===b.quality&&t.adaptationIndex===b.adaptationIndex||!e||r.trigger(de.default.QUALITY_CHANGE_RENDERED,{mediaType:c,oldQuality:b.quality,newQuality:t.quality}),b={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex}))}function H(){U(),G(!1),m.info("Stream "+o.id+" is complete")}function q(e){e.request.mediaInfo.streamInfo.id===o.id&&e.request.mediaType===c&&(m.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),s.getIsTextTrack(h)&&G(!1),e.error&&e.request.serviceLocation&&!y&&(j(e.request),G(!1),k(0)),O&&(w=e.request))}function K(){Y(!0)}function V(e){var t,n;O&&!isNaN(e.startTime)&&(O=!1,l.addExecutedRequest(w)),G(!1),isNaN(e.index)&&(D=g.getRepresentationInfo(e.quality),m.info("["+c+"] lastInitializedRepresentationInfo changed to "+e.quality)),L&&!isNaN(e.startTime)?(t=f.getTime(),k((n=e.startTime+E.fragmentDuration)<=t+(e=1.5*E.fragmentDuration)?0:1e3*(n-(t+e))),L=!1):k(0)}function W(e){m.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),f.isSeeking()||C||(m.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),j(e.request)),G(!1),k(0)}function z(){}function X(){U()}function Q(e){O&&_.get().streaming.flushBufferAtTrackSwitch&&f.seek(f.getTime()+.001,!1,!0),e.hasEnoughSpaceToAppend&&e.quotaExceeded&&F()}function Z(){U(),G(!1)}function $(){l.abortRequests(),U()}function J(){!y&&_.get().streaming.scheduleWhilePaused||F()}function ee(e){o&&(ne(e.seekTime),re(0),y&&F(),e=E&&E.DVRWindow&&f?E.DVRWindow.end-f.getTime():NaN,u.updateManifestUpdateInfo({latency:e}),v?l.abortRequests():k(0))}function te(e){u.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function ne(e){A=e}function re(e){T=e}function ie(){b={mediaInfo:D=void(T=0),quality:A=NaN,adaptationIndex:NaN},M={},N=[],L=O=C=!(y=!(v=!(P=!(w=null))))}return a={initialize:function(e){I=e,R=(0,se.default)(t).create({abrController:d,dashMetrics:u,mediaPlayerModel:n,textController:i,settings:_}),r.on(de.default.DATA_UPDATE_STARTED,z,this),r.on(de.default.FRAGMENT_LOADING_COMPLETED,q,this),r.on(de.default.STREAM_COMPLETED,H,this),r.on(de.default.BUFFER_CLEARED,Q,this),r.on(de.default.BYTES_APPENDED_END_FRAGMENT,V,this),r.on(de.default.QUOTA_EXCEEDED,Z,this),r.on(de.default.PLAYBACK_SEEKING,ee,this),r.on(de.default.PLAYBACK_STARTED,J,this),r.on(de.default.PLAYBACK_RATE_CHANGED,te,this),r.on(de.default.PLAYBACK_TIME_UPDATED,K,this),r.on(de.default.URL_RESOLUTION_FAILED,$,this),r.on(de.default.FRAGMENT_LOADING_ABANDONED,W,this),r.on(de.default.BUFFERING_COMPLETED,X,this)},getType:function(){return c},getStreamId:function(){return o.id},setCurrentRepresentation:function(e){E=e},setSeekTarget:ne,setTimeToLoadDelay:re,getTimeToLoadDelay:function(){return T},switchTrackAsked:function(){C=!0},isStarted:x,start:F,stop:U,reset:function(){r.off(de.default.DATA_UPDATE_STARTED,z,this),r.off(de.default.FRAGMENT_LOADING_COMPLETED,q,this),r.off(de.default.STREAM_COMPLETED,H,this),r.off(de.default.BUFFER_CLEARED,Q,this),r.off(de.default.BYTES_APPENDED_END_FRAGMENT,V,this),r.off(de.default.QUOTA_EXCEEDED,Z,this),r.off(de.default.PLAYBACK_SEEKING,ee,this),r.off(de.default.PLAYBACK_STARTED,J,this),r.off(de.default.PLAYBACK_RATE_CHANGED,te,this),r.off(de.default.PLAYBACK_TIME_UPDATED,K,this),r.off(de.default.URL_RESOLUTION_FAILED,$,this),r.off(de.default.FRAGMENT_LOADING_ABANDONED,W,this),r.off(de.default.BUFFERING_COMPLETED,X,this),U(),Y(!1),ie(),o=null},getBufferTarget:function(){return R.getBufferTarget(c,E,I)},processInitRequest:function(e){e&&(G(!0),l.executeRequest(e))},processMediaRequest:function(e){e?(m.debug("Next fragment request url is "+e.url),l.executeRequest(e)):(f.getIsDynamic()&&m.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling."),G(!1),k(_.get().streaming.lowLatencyEnabled?100:500))},getPlaybackController:function(){return f}},m=(0,fe.default)(t).getInstance().getLogger(a),ie(),o=e.streamInfo,a}a.__dashjs_factory_name="ScheduleController",n.default=i.default.getClassFactory(a),t.exports=n.default},{112:112,113:113,154:154,209:209,45:45,46:46,47:47,54:54}],126:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ve=r(e(112)),Te=r(e(113)),Se=r(e(108)),Ae=r(e(102)),Ie=r(e(46)),Re=r(e(54)),i=r(e(47)),be=e(257),Me=r(e(45)),De=r(e(227)),Ne=r(e(234)),Ce=r(e(104)),Oe=r(e(127)),we=r(e(123)),Pe=r(e(239)),Le=r(e(51)),xe=r(e(119)),Fe=r(e(111));function a(){var s=this.context,u=(0,Ie.default)(s).getInstance(),n=void 0,l=void 0,d=void 0,f=void 0,c=void 0,r=void 0,h=void 0,p=void 0,g=void 0,o=void 0,i=void 0,_=void 0,m=void 0,E=void 0,y=void 0,v=void 0,a=void 0,T=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,M=void 0,D=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0,L=void 0,x=void 0,t=void 0,F=void 0,U=void 0,B=void 0,k=void 0,G=void 0,j=void 0,Y=void 0;function H(){var e;!le()||(e=P.getPlaybackQuality())&&g.addDroppedFrames(e)}function q(e){var t=J(e.seekTime);t===R&&G&&0<G.length&&G.forEach(function(e){e.deactivate(!0)}),t&&t!==R?(fe(be.PlayListTrace.END_OF_PERIOD_STOP_REASON),ne(t,R,e.seekTime)):fe(be.PlayListTrace.USER_REQUEST_STOP_REASON),ce(be.PlayList.SEEK_START_REASON)}function K(e){var t=te();fe(be.PlayListTrace.END_OF_PERIOD_STOP_REASON),ne(t,R,e.seekTime),ce(be.PlayList.SEEK_START_REASON)}function V(){l.debug("[onPlaybackStarted]"),F?(F=!1,ce(be.PlayList.INITIAL_PLAYOUT_START_REASON)):t&&(t=!1,ce(be.PlayList.RESUME_FROM_PAUSE_START_REASON))}function W(e){l.debug("[onPlaybackPaused]"),e.ended||(t=!0,fe(be.PlayListTrace.USER_REQUEST_STOP_REASON))}function z(){U&&(clearInterval(U),U=null)}function X(){B=B||setInterval(function(){!function(){if(!R||!Q(R))return;function e(){var e,n,t=i[a],r=0===a?R:i[a-1];!t.getPreloadingScheduled()&&Q(r)&&w&&(e=[ve.default.VIDEO,ve.default.AUDIO],n=!0,e.forEach(function(e){e=p.getMediaInfoForType(t.getStreamInfo(),e);p.getVoRepresentations(e).forEach(function(e){var t=p.getIsDynamic(),t=A.calcSegmentAvailabilityRange(e,t);t.end<t.start&&(n=!1)})}),n&&function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];{w&&!t.getPreloaded()&&$(t,e)&&(t.setPreloadingScheduled(!0),l.info("[onStreamCanLoadNext] Preloading next stream with id "+t.getId()),t.preload(w,k),G.push(t),t.getProcessors().forEach(function(e){e.setBufferingTime(t.getStartTime())}))}}(t,r)),a+=1}var i=function(e){try{var n=e||(R||null);if(n){var t=function(){var t=n.getStreamInfo().start;return{v:I.filter(function(e){return e.getStreamInfo().start>t})}}();if("object"==typeof t)return t.v}}catch(e){return[]}}(R),a=0;for(;a<i.length;)e()}()},500)}function Q(e){try{if(!e)return!1;var t=e.getProcessors().filter(function(e){return e.getType()===ve.default.AUDIO||e.getType()===ve.default.VIDEO});if(!t||0===t.length)return!1;t=t.filter(function(e){return!e.isBufferingCompleted()});return t&&0===t.length}catch(e){return!1}}function Z(){var e=pe().isLast;w&&e&&(l.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),o.signalEndOfStream(w))}function $(e,t){try{return Y.get().streaming.reuseExistingSourceBuffers&&t.isProtectionCompatible(e,t)&&(j||t.isMediaCodecCompatible(e,t))&&!function(e){try{var t=e.getStreamInfo(),t=p.getAdaptationForType(t.index,ve.default.FRAGMENTED_TEXT,t);return t?-1!==t.codecs.indexOf("stpp")||-1!==t.codecs.indexOf("wvtt"):!1}catch(e){return!1}}(e)}catch(e){return!1}}function J(e){if(isNaN(e))return null;var t=0,n=null,r=I.length;0<r&&(t+=I[0].getStartTime());for(var i=0;i<r;i++)if(n=I[i],e<(t=parseFloat((t+n.getDuration()).toFixed(5))))return n;return null}function e(){return R?R.getProcessors():[]}function ee(e){var t;R.getIsEndedEventSignaled()||(R.setIsEndedEventSignaled(!0),(t=te())?(l.debug("StreamController onEnded, found next stream with id "+t.getStreamInfo().id),ne(t,R,NaN)):(l.debug("StreamController no next stream found"),R.setIsEndedEventSignaled(!1)),fe(t?be.PlayListTrace.END_OF_PERIOD_STOP_REASON:be.PlayListTrace.END_OF_CONTENT_STOP_REASON),0),e&&e.isLast&&z()}function te(e){var t=arguments.length<=0||void 0===e?null:e,e=t||(R||null);if(e){for(var t=e.getStreamInfo().start,e=e.getStreamInfo().duration,n=parseFloat((t+e).toFixed(5)),r=0,i=-1,a=NaN;r<I.length;){var o=I[r].getStreamInfo().start-n;0<=o&&(isNaN(a)||o<a)&&(a=o,i=r),r+=1}return 0<=i?I[i]:null}return null}function ne(e,t,n){var r;N||!e||t===e&&e.isActive()||(N=!0,u.trigger(Re.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:t?t.getStreamInfo():null,toStreamInfo:e.getStreamInfo()}),r=!1,t&&(r=$(e,t),t.deactivate(r)),n=isNaN(n)?!r&&t?e.getStreamInfo().start:NaN:n,l.info("Switch to stream "+e.getId()+". Seektime is "+n+", current playback time is "+L.getTime()),l.info("Seamless period switch is set to "+r),R=e,G=G.filter(function(e){return e.getId()!==R.getId()}),L.initialize(pe(),!!t,n),P.getElement()?re(n,null===t,!1,r):ie(n,r),0)}function re(e,t,n,r){var i=void 0;function a(){w&&"open"===w.readyState&&(l.debug("MediaSource is open!"),window.URL.revokeObjectURL(i),w.removeEventListener("sourceopen",a),w.removeEventListener("webkitsourceopen",a),ae(),t||u.trigger(Re.default.SOURCE_INITIALIZED),n?R.setMediaSource(w):ie(e,r))}w?r?(ie(e,r),t||u.trigger(Re.default.SOURCE_INITIALIZED)):(o.detachMediaSource(P),w.addEventListener("sourceopen",a,!1),w.addEventListener("webkitsourceopen",a,!1),i=o.attachMediaSource(w,P),l.debug("MediaSource attached to element.  Waiting on open...")):((w=o.createMediaSource()).addEventListener("sourceopen",a,!1),w.addEventListener("webkitsourceopen",a,!1),i=o.attachMediaSource(w,P),l.debug("MediaSource attached to element.  Waiting on open..."))}function ie(e,t){!(k=R.activate(w,t?k:void 0))||0<(t=Object.keys(k)).length&&k[t[0]].changeType&&(j=!0),F||isNaN(e)||(e===L.getTime()?u.trigger(Re.default.SEEK_TARGET,{time:e},{streamId:R.getId()}):L.seek(e)),!D&&F||L.play(),N=!1,u.trigger(Re.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:pe()})}function ae(e){e=e||pe().manifestInfo.duration;o.setDuration(w,e)}function oe(){try{!function(){var n=p.getStreamsInfo();if(0===n.length)throw new Error("There are no streams");g.updateManifestUpdateInfo({currentTime:L.getTime(),buffered:P.getBufferRange(),presentationStartTime:n[0].start,clientTimeOffset:A.getClientTimeOffset()}),0<I.length&&(I=I.filter(function(t){var e=0<n.filter(function(e){return e.id===t.getId()}).length||t.getId()===R.getId();return e||l.debug("Removing stream "+t.getId()),e}));for(var e,t,r=0,i=n.length;r<i;r++){var a=n[r],o=function(e){for(var t=0,n=I.length;t<n;t++)if(I[t].getId()===e.id)return I[t];return null}(a);o?o.updateData(a):(o=(0,Se.default)(s).create({manifestModel:h,mediaPlayerModel:x,dashMetrics:g,manifestUpdater:c,adapter:p,timelineConverter:A,capabilities:d,capabilitiesFilter:f,errHandler:S,baseURLController:_,abrController:m,playbackController:L,eventController:y,mediaController:E,textController:v,protectionController:b,videoModel:P,streamInfo:a,settings:Y}),I.push(o),o.initialize()),g.addManifestUpdateStreamInfo(a)}R||(p.getIsDynamic()&&I.length&&(t=n[0].manifestInfo,e=function(t,e){try{var r=NaN;return e&&!isNaN(e.maxFragmentDuration)&&isFinite(e.maxFragmentDuration)?e.maxFragmentDuration:(t&&1===t.length&&function(){var n=t[0],e=[ve.default.VIDEO,ve.default.AUDIO,ve.default.FRAGMENTED_TEXT].reduce(function(e,t){t=p.getMediaInfoForType(n,t);return t&&e.push(t),e},[]).reduce(function(t,e){e=p.getVoRepresentations(e);return e&&0<e.length&&e.forEach(function(e){e&&t.push(e)}),t},[]).reduce(function(e,t){t=p.convertDataToRepresentationInfo(t);return t&&t.fragmentDuration&&!isNaN(t.fragmentDuration)&&e.push(t.fragmentDuration),e},[]);r=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))}(),isFinite(r)?r:NaN)}catch(e){return NaN}}(n,t),L.computeAndSetLiveDelay(e,t.DVRWindowSize,t.minBufferTime)),t=null,!(t=J(L.getStartTimeFromUriParameters(p.getIsDynamic())))&&p.getIsDynamic()&&I.length&&(l.debug("Dynamic stream: Trying to find the correct starting period"),t=function(){try{var e=A.calcPresentationTimeFromWallTime(new Date,p.getRegularPeriods()[0]),t=L.getLiveDelay();return J(e-t)}catch(e){return null}}()),ne(null!==t?t:I[0],null,NaN),U=U||setInterval(function(){!N&&L.getTimeToStreamEnd()<=0&&u.trigger(Re.default.PLAYBACK_ENDED,{isLast:pe().isLast})},200),X()),u.trigger(Re.default.STREAMS_COMPOSED)}()}catch(e){S.error(new Pe.default(Le.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+"nostreamscomposed",h.getValue())),O=!0,Ee()}}function se(){var e=h.getValue();b&&(u.trigger(Re.default.PROTECTION_CREATED,{controller:b,manifest:e}),b.setMediaElement(P.getElement()),M&&b.setProtectionData(M)),oe()}function ue(r){r.error?(O=!0,Ee()):function(){var e=r.manifest;p.updatePeriods(e);var t=p.getUTCTimingSources();!p.getIsDynamic()||t&&0!==t.length||u.trigger(Ce.default.CONFORMANCE_VIOLATION,{level:Fe.default.LEVELS.WARNING,event:Fe.default.EVENTS.NO_UTC_TIMING_ELEMENT});var t=p.getIsDynamic()?t.concat(x.getUTCTimingSources()):t,n=T.isHTTPS(r.manifest.url);t.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===x.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(n?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),n?"https://":"http://"),l.debug("Matching default timing source protocol to manifest protocol: ",e.value))}),_.initialize(e),i.attemptSync(t)}()}function le(){return!!R&&R.getHasVideoTrack()}function de(){return!!R&&R.getHasAudioTrack()}function fe(t,n){n=n||new Date,e().forEach(function(e){e.finalisePlayList(n,t)}),g.addPlayList()}function ce(e){g.createPlaylistMetrics(1e3*L.getTime(),e)}function he(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}C=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),l.fatal("Video Element Error: "+t),e.error&&l.fatal(e.error),S.error(new Pe.default(e.error.code,t)),Ee()}}function pe(){return R?R.getStreamInfo():null}function ge(){if(!(r&&r.hasOwnProperty("load")&&A&&A.hasOwnProperty("initialize")&&A.hasOwnProperty("reset")&&A.hasOwnProperty("getClientTimeOffset")&&h&&S&&g&&L))throw new Error(ve.default.MISSING_CONFIG_ERROR)}function _e(e){isNaN(e.newDuration)||ae(e.newDuration)}function me(){B=U=R=b=null,D=!(t=!(F=!(O=C=N=!(I=[])))),G=[]}function Ee(){ge(),i.reset(),fe(C||O?be.PlayListTrace.FAILURE_STOP_REASON:be.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=I?I.length:0;e<t;e++){I[e].reset(C)}u.off(Re.default.PLAYBACK_TIME_UPDATED,H,n),u.off(Re.default.PLAYBACK_SEEKING,q,n),u.off(Re.default.GAP_CAUSED_SEEK_TO_PERIOD_END,K,n),u.off(Re.default.PLAYBACK_ERROR,he,n),u.off(Re.default.PLAYBACK_STARTED,V,n),u.off(Re.default.PLAYBACK_PAUSED,W,n),u.off(Re.default.PLAYBACK_ENDED,ee,n),u.off(Re.default.MANIFEST_UPDATED,ue,n),u.off(Re.default.STREAM_BUFFERING_COMPLETED,Z,n),u.off(Re.default.MANIFEST_VALIDITY_CHANGED,_e,n),u.off(Re.default.TIME_SYNCHRONIZATION_COMPLETED,se,n),u.off(Ce.default.METRIC_ADDED,ye,n),_.reset(),c.reset(),y.reset(),g.clearAllCurrentMetrics(),h.setValue(null),r.reset(),A.reset(),a.reset(),w&&(o.detachMediaSource(P),w=null),P=null,b&&(b.setMediaElement(null),M=b=null,h.getValue()&&u.trigger(Re.default.PROTECTION_DESTROYED,{data:h.getValue().url})),z(),clearInterval(B),B=null,u.trigger(Re.default.STREAM_TEARDOWN_COMPLETE),me()}function ye(e){var t;e.metric===Te.default.DVR_INFO&&(t=de()?ve.default.AUDIO:ve.default.VIDEO,e.mediaType===t&&o.setSeekable(w,e.value.range.start,e.value.range.end))}return n={initialize:function(e,t){ge(),D=e,M=t,A.initialize(),(c=(0,Ae.default)(s).create()).setConfig({manifestModel:h,adapter:p,manifestLoader:r,errHandler:S,settings:Y}),c.initialize(),(y=(0,xe.default)(s).getInstance()).setConfig({manifestUpdater:c,playbackController:L,settings:Y}),y.start(),i.setConfig({dashMetrics:g,baseURLController:_,settings:Y}),i.initialize(),u.on(Re.default.PLAYBACK_TIME_UPDATED,H,n),u.on(Re.default.PLAYBACK_SEEKING,q,n),u.on(Re.default.GAP_CAUSED_SEEK_TO_PERIOD_END,K,n),u.on(Re.default.PLAYBACK_ERROR,he,n),u.on(Re.default.PLAYBACK_STARTED,V,n),u.on(Re.default.PLAYBACK_PAUSED,W,n),u.on(Re.default.PLAYBACK_ENDED,ee,n,{priority:Ie.default.EVENT_PRIORITY_HIGH}),u.on(Re.default.MANIFEST_UPDATED,ue,n),u.on(Re.default.STREAM_BUFFERING_COMPLETED,Z,n),u.on(Re.default.MANIFEST_VALIDITY_CHANGED,_e,n),u.on(Re.default.TIME_SYNCHRONIZATION_COMPLETED,se,n),u.on(Ce.default.METRIC_ADDED,ye,n)},getActiveStreamInfo:pe,hasVideoTrack:le,hasAudioTrack:de,switchToVideoElement:function(e){R&&(L.initialize(pe()),re(e,!1,!0,!1))},getStreamById:function(t){return I.filter(function(e){return e.getId()===t})[0]},getStreamForTime:J,getTimeRelativeToStreamId:function(e,t){for(var n,r,i=null,a=0,o=0;o<I.length;o++){if(n=(i=I[o]).getStartTime(),r=i.getDuration(),Number.isFinite(n)&&(a=n),i.getId()===t)return e-a;Number.isFinite(r)&&(a+=r)}return null},load:function(e){ge(),r.load(e)},loadWithManifest:function(e){!function(){if(!c||!c.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),c.setManifest(e)},getActiveStreamProcessors:e,setConfig:function(e){e&&(e.capabilities&&(d=e.capabilities),e.capabilitiesFilter&&(f=e.capabilitiesFilter),e.manifestLoader&&(r=e.manifestLoader),e.manifestModel&&(h=e.manifestModel),e.mediaPlayerModel&&(x=e.mediaPlayerModel),e.protectionController&&(b=e.protectionController),e.adapter&&(p=e.adapter),e.dashMetrics&&(g=e.dashMetrics),e.errHandler&&(S=e.errHandler),e.timelineConverter&&(A=e.timelineConverter),e.videoModel&&(P=e.videoModel),e.playbackController&&(L=e.playbackController),e.abrController&&(m=e.abrController),e.mediaController&&(E=e.mediaController),e.textController&&(v=e.textController),e.settings&&(Y=e.settings),e.baseURLController&&(_=e.baseURLController))},setProtectionData:function(e){M=e},getIsStreamSwitchInProgress:function(){return N},getHasMediaOrIntialisationError:function(){return C||O},hasStreamFinishedBuffering:Q,getStreams:function(){return I},getActiveStream:function(){return R},reset:Ee},l=(0,Me.default)(s).getInstance().getLogger(n),i=(0,Oe.default)(s).getInstance(),o=(0,we.default)(s).getInstance(),a=(0,De.default)(s).getInstance(),T=(0,Ne.default)(s).getInstance(),me(),n}a.__dashjs_factory_name="StreamController",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{102:102,104:104,108:108,111:111,112:112,113:113,119:119,123:123,127:127,227:227,234:234,239:239,257:257,45:45,46:46,47:47,51:51,54:54}],127:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var w=r(e(239)),P=e(255),L=r(e(46)),x=r(e(54)),F=r(e(51)),i=r(e(47)),U=r(e(45)),B=r(e(234));function a(){var e=this.context,r=(0,L.default)(e).getInstance(),c=(0,B.default)(e).getInstance(),t=void 0,s=void 0,i=void 0,n=void 0,u=void 0,a=void 0,o=void 0,l=void 0,d=void 0,f=void 0,h=void 0,p=void 0,g=void 0,_=void 0,m=void 0;function E(){l=[],g=h=f=null,p=NaN,n=i=!(d=[]),_=u.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function y(){i||n||!g||!g.value||!g.schemeIdUri||isNaN(p)||isNaN(u.get().streaming.utcSynchronization.backgroundAttempts)||h&&(Date.now()-h)/1e3<30||(l=[],n=!0,function r(i){try{var e=function(){if(i<=0)return C(),{v:void 0};var n=Date.now();a[g.schemeIdUri](g.value,function(e){var t=Date.now(),e=v(n,t,e);l.push(e),r(i-1)},function(){C()})}();if("object"==typeof e)return e.v}catch(e){C()}}(isNaN(u.get().streaming.utcSynchronization.backgroundAttempts)?2:u.get().streaming.utcSynchronization.backgroundAttempts))}function v(e,t,n){return n-(t-(t-e)/2)}function T(e){var t=arguments.length<=0||void 0===e?NaN:e,e=isNaN(t);e&&u.get().streaming.useManifestDateHeaderTimeSource?function(){var e=o.getLatestMPDRequestHeaderValueByID("Date"),e=null!==e?new Date(e).getTime():Number.NaN;{isNaN(e)?N(!0):N(!1,e-Date.now())}}():N(e,t)}function S(e){var t,n,r=Date.parse(e);return isNaN(r)&&(n=void 0,t=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(t=e),n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&(parseInt(t[6],10)||0),t[7]&&1e3*parseFloat(t[7])||0),t[9]&&t[10]&&(e=60*parseInt(t[9],10)+parseInt(t[10],10),n+=("+"===t[8]?-1:1)*e*60*1e3),r=new Date(n).getTime()),r}function A(e){return Date.parse(e)}function I(e){return Date.parse(e)}function R(e,t,n){n()}function b(e,t,n){e=S(e);isNaN(e)?n():t(e)}function M(n,e,r,t,i){var a,o,s,u=!1,l=new XMLHttpRequest,d=i?P.HTTPRequest.HEAD:P.HTTPRequest.GET,f=e.match(/\S+/g);e=f.shift(),a=function(){u||(u=!0,f.length?M(n,f.join(" "),r,t,i):t())},o=function(){var e,t;200===l.status&&(e=i?l.getResponseHeader("Date"):l.response,t=n(e),isNaN(t)||(r(t),u=!0))},!c.isRelative(e)||(s=m.resolve())&&(e=c.resolve(e,s.url)),l.open(d,e),l.timeout=5e3,l.onload=o,l.onloadend=a,l.send()}function D(e,t,n){M(I,e,t,n,!0)}function N(e,t){var n;isNaN(p)||isNaN(t)||e||function(e){try{var t=O(e),n=isNaN(_)?30:_,r=isNaN(u.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:u.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,i=isNaN(u.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:u.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,a=isNaN(u.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:u.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts,o=void 0;t?(o=Math.min(n*r,i),s.debug("Increasing timeBetweenSyncAttempts to "+o)):(o=Math.max(n/r,a),s.debug("Decreasing timeBetweenSyncAttempts to "+o)),_=o}catch(e){}}(t),e||isNaN(t)||(f=Date.now(),i=!1,n=isNaN(p),p=t,n&&y(),s.debug("Completed UTC sync. Setting client - server offset to "+t)),e&&(g=null),r.trigger(x.default.UPDATE_TIME_SYNC_OFFSET,{offset:t,error:e?new w.default(F.default.TIME_SYNC_FAILED_ERROR_CODE,F.default.TIME_SYNC_FAILED_ERROR_MESSAGE):null}),r.trigger(x.default.TIME_SYNCHRONIZATION_COMPLETED)}function C(){var e;l&&0!==l.length&&(O(e=l.reduce(function(e,t){return e+t},0)/l.length)?s.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(s.debug("Completed background UTC sync. Setting client - server offset to "+e),p=e,r.trigger(x.default.UPDATE_TIME_SYNC_OFFSET,{offset:p})),n=!1,h=Date.now())}function O(e){try{if(isNaN(p))return!0;var t=u.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(u.get().streaming.utcSynchronization.maximumAllowedDrift)?u.get().streaming.utcSynchronization.maximumAllowedDrift:100;return p-t<=e&&e<=p+t}catch(e){return!0}}return t={initialize:function(){E(),a={"urn:mpeg:dash:utc:http-head:2014":D,"urn:mpeg:dash:utc:http-xsdate:2014":M.bind(null,S),"urn:mpeg:dash:utc:http-iso:2014":M.bind(null,A),"urn:mpeg:dash:utc:direct:2014":b,"urn:mpeg:dash:utc:http-head:2012":D,"urn:mpeg:dash:utc:http-xsdate:2012":M.bind(null,S),"urn:mpeg:dash:utc:http-iso:2012":M.bind(null,A),"urn:mpeg:dash:utc:direct:2012":b,"urn:mpeg:dash:utc:http-ntp:2014":R,"urn:mpeg:dash:utc:ntp:2014":R,"urn:mpeg:dash:utc:sntp:2014":R}},attemptSync:function(e){d=e,i||(!function(){try{var e=isNaN(_)?30:_;return f&&e&&!isNaN(e)?(Date.now()-f)/1e3>=e:!0}catch(e){return!0}}()?r.trigger(x.default.TIME_SYNCHRONIZATION_COMPLETED):(i=!0,function e(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0];var r=t||0;if(!d||0===d.length||r>=d.length)return void T();var i=d[r];i?a.hasOwnProperty(i.schemeIdUri)?function(){var n=(new Date).getTime();a[i.schemeIdUri](i.value,function(e){var t=(new Date).getTime(),e=v(n,t,e);g=i,T(e)},function(){e(r+1)})}():e(r+1):T()}()))},setConfig:function(e){e&&(e.dashMetrics&&(o=e.dashMetrics),e.baseURLController&&(m=e.baseURLController),e.settings&&(u=e.settings))},reset:function(){E(),r.off(x.default.ATTEMPT_BACKGROUND_SYNC,y,t)}},s=(0,U.default)(e).getInstance().getLogger(t),r.on(x.default.ATTEMPT_BACKGROUND_SYNC,y,t),t}a.__dashjs_factory_name="TimeSyncController";e=i.default.getSingletonFactory(a);e.HTTP_TIMEOUT_MS=5e3,i.default.updateSingletonFactory(a.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{234:234,239:239,255:255,45:45,46:46,47:47,51:51,54:54}],128:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(110)),g=r(e(46)),_=r(e(54)),i=r(e(47)),m=r(e(3)),E=r(e(234)),y=r(e(61)),v="onLoad";function a(e){e=e||{};var t=this.context,i=(0,g.default)(t).getInstance(),s=(0,E.default)(t).getInstance(),n=void 0,r=void 0,u=void 0,l=void 0,a=void 0,d=void 0;function o(e,t,n){var r,i={},a=void 0;i.elements=e,i.type=t,i.resolveType=n,0===i.elements.length&&c(i);for(var o=0;o<i.elements.length;o++)r=i.elements[o],a=s.isHTTPURL(r.url)?r.url:r.originalContent.BaseURL+r.url,d.load(a,r,i)}function f(e){var t,n=void 0,n=e.element,r=e.resolveObject;n.resolvedContent&&((e=0)===n.resolvedContent.indexOf("<?xml")&&(e=n.resolvedContent.indexOf("?>")+2),t=n.resolvedContent.substr(0,e)+"<response>"+n.resolvedContent.substr(e)+"</response>",n.resolvedContent=a.xml_str2json(t)),function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0}(r)&&c(r)}function c(e){var t=[],n=void 0,r=void 0;if(!function(e){var t=[],n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;for(a=e.elements.length-1;0<=a;a--){if(n=e.elements[a],r=n.type+"_asArray",n.resolvedContent){if(n.resolvedContent)for(o=0;o<n.resolvedContent[r].length;o++)i=n.resolvedContent[r][o],t.push(i)}else delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);for(n.parentElement[r].splice(n.index,1),s=0;s<t.length;s++)n.parentElement[r].splice(n.index+s,0,t[s]);t=[]}0<e.elements.length&&u.run(l)}(e),"onActuate"===e.resolveType&&i.trigger(_.default.XLINK_READY,{manifest:l}),e.resolveType===v)switch(e.type){case y.default.PERIOD:for(n=0;n<l[y.default.PERIOD+"_asArray"].length;n++)(r=l[y.default.PERIOD+"_asArray"][n]).hasOwnProperty(y.default.ADAPTATION_SET+"_asArray")&&(t=t.concat(h(r[y.default.ADAPTATION_SET+"_asArray"],r,y.default.ADAPTATION_SET,v))),r.hasOwnProperty(y.default.EVENT_STREAM+"_asArray")&&(t=t.concat(h(r[y.default.EVENT_STREAM+"_asArray"],r,y.default.EVENT_STREAM,v)));o(t,y.default.ADAPTATION_SET,v);break;case y.default.ADAPTATION_SET:i.trigger(_.default.XLINK_READY,{manifest:l})}}function h(e,t,n,r){for(var i,a=[],o=void 0,s=void 0,s=e.length-1;0<=s;s--)(o=e[s]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===o["xlink:href"]&&e.splice(s,1);for(s=0;s<e.length;s++)(o=e[s]).hasOwnProperty("xlink:href")&&o.hasOwnProperty("xlink:actuate")&&o["xlink:actuate"]===r&&(i={url:o["xlink:href"],parentElement:t,type:n,index:s,resolveType:r,originalContent:o,resolvedContent:null,resolved:!1},a.push(i));return a}return n={resolveManifestOnLoad:function(e){a=new m.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:r}),(l=e).Period_asArray?o(h(l.Period_asArray,l,y.default.PERIOD,v),y.default.PERIOD,v):i.trigger(_.default.XLINK_READY,{manifest:l})},setMatchers:function(e){e&&(r=e)},setIron:function(e){e&&(u=e)},reset:function(){i.off(_.default.XLINK_ELEMENT_LOADED,f,n),d&&(d.reset(),d=null)}},i.on(_.default.XLINK_ELEMENT_LOADED,f,n),d=(0,p.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),n}a.__dashjs_factory_name="XlinkController",n.default=i.default.getClassFactory(a),t.exports=n.default},{110:110,234:234,3:3,46:46,47:47,54:54,61:61}],129:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(143)),a=r(e(130)),o=r(e(131)),s=r(e(136)),u=r(e(141));function l(){var t=this.context;return{createMetricsReporting:function(e){return(0,i.default)(t).getInstance({eventBus:e.eventBus,dashMetrics:e.dashMetrics,metricsConstants:e.metricsConstants,events:e.events}),(0,o.default)(t).create(e)},getReportingFactory:function(){return(0,u.default)(t).getInstance()},getMetricsHandlerFactory:function(){return(0,s.default)(t).getInstance()}}}l.__dashjs_factory_name="MetricsReporting";e=dashjs.FactoryMaker.getClassFactory(l);e.events=a.default,dashjs.FactoryMaker.updateClassFactory(l.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{130:130,131:131,136:136,141:141,143:143}],130:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};var i,a=e(55);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",this.CMCD_DATA_GENERATED="cmcdDataGenerated"}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((i=a)&&i.__esModule?i:{default:i})["default"]),o);n.default=e,t.exports=n.default},{55:55}],131:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(132)),l=r(e(145)),d=r(e(130));function i(i){i=i||{};var e=void 0,a={},o=this.context,t=i.eventBus,n=i.events;function r(e){var r;e.error||(r=Object.keys(a),(0,l.default)(o).getInstance({adapter:i.adapter,constants:i.constants}).getMetrics(e.manifest).forEach(function(e){var t=JSON.stringify(e);if(a.hasOwnProperty(t))r.splice(t,1);else try{var n=(0,u.default)(o).create(i);n.initialize(e),a[t]=n}catch(e){}}),r.forEach(function(e){a[e].reset(),delete a[e]}),t.trigger(d.default.METRICS_INITIALISATION_COMPLETE))}function s(){Object.keys(a).forEach(function(e){a[e].reset()}),a={}}return e={reset:function(){t.off(n.MANIFEST_UPDATED,r,e),t.off(n.STREAM_TEARDOWN_COMPLETE,s,e)}},t.on(n.MANIFEST_UPDATED,r,e),t.on(n.STREAM_TEARDOWN_COMPLETE,s,e),e}i.__dashjs_factory_name="MetricsCollectionController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{130:130,132:132,145:145}],132:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(134)),u=r(e(135)),l=r(e(133));function i(t){t=t||{};var n=void 0,r=void 0,i=void 0,a=this.context;function o(){n&&n.reset(),r&&r.reset(),i&&i.reset()}return{initialize:function(e){try{(i=(0,s.default)(a).create({mediaElement:t.mediaElement})).initialize(e.Range),(r=(0,u.default)(a).create({debug:t.debug,metricsConstants:t.metricsConstants})).initialize(e.Reporting,i),(n=(0,l.default)(a).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(e.metrics,r)}catch(e){throw o(),e}},reset:o}}i.__dashjs_factory_name="MetricsController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{133:133,134:134,135:135}],133:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(136),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var o=[],t=void 0,n=this.context,r=e.eventBus,i=e.events,s=(0,a.default)(n).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function u(t){o.forEach(function(e){e.handleNewMetric(t.metric,t.value,t.mediaType)})}return t={initialize:function(e,a){e.split(",").forEach(function(e,t,n){var r,i;-1===e.indexOf("(")||-1!==e.indexOf(")")||(i=n[t+1])&&-1===i.indexOf("(")&&-1!==i.indexOf(")")&&(e+=","+i,delete n[t+1]),(r=s.create(e,a))&&o.push(r)}),r.on(i.METRIC_ADDED,u,t),r.on(i.METRIC_UPDATED,u,t)},reset:function(){r.off(i.METRIC_ADDED,u,t),r.off(i.METRIC_UPDATED,u,t),o.forEach(function(e){return e.reset()}),o=[]}}}o.__dashjs_factory_name="MetricsHandlersController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{136:136}],134:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(222),u=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var t,a=!1,n=this.context,o=void 0,s=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,e=t+e.duration;o.add(t,e)}),a=!!e[0]._useWallClockTime)},reset:function(){o.clear()},isEnabled:function(){var e,t=o.length;if(!t)return!0;e=a?(new Date).getTime()/1e3:s.currentTime;for(var n=0;n<t;n+=1){var r=o.start(n),i=o.end(n);if(r<=e&&e<i)return!0}return!1}},o=(0,u.default)(n).create(),t}a.__dashjs_factory_name="RangeController",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default},{222:222}],135:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(141),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var r=[],n=(0,a.default)(this.context).getInstance(e);return{initialize:function(e,t){e.some(function(e){e=n.create(e,t);if(e)return r.push(e),!0})},reset:function(){r.forEach(function(e){return e.reset()}),r=[]},report:function(t,n){r.forEach(function(e){return e.report(t,n)})}}}o.__dashjs_factory_name="ReportingController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{141:141}],136:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(137)),d=r(e(138)),f=r(e(140)),c=r(e(139));function i(i){var e=void 0,a=(i=i||{}).debug?i.debug.getLogger(e):{},o=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,s=this.context,u={BufferLevel:l.default,DVBErrors:d.default,HttpList:f.default,PlayList:c.default,RepSwitchList:c.default,TcpList:c.default};return e={create:function(e,t){var n,r=e.match(o);if(r){try{(n=u[r[1]](s).create({eventBus:i.eventBus,metricsConstants:i.metricsConstants})).initialize(r[1],t,r[3],r[5])}catch(e){n=null,a.error("MetricsHandlerFactory: Could not create handler for type "+r[1]+" with args "+r[3]+", "+r[5]+" ("+e.message+")")}return n}},register:function(e,t){u[e]=t},unregister:function(e){delete u[e]}}}i.__dashjs_factory_name="MetricsHandlerFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{137:137,138:138,139:139,140:140}],137:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(144),f=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var r=void 0,i=void 0,a=void 0,o=void 0,t=void 0,n=this.context,s=(0,f.default)(n).getInstance(),u=[],l=e.metricsConstants;function d(){var e=function(){try{return Object.keys(u).map(function(e){return u[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&t!==e.t&&(t=e.t,r.report(a,e))}return{initialize:function(e,t,n){t&&(i=s.validateN(n),r=t,a=s.reconstructFullMetricName(e,n),o=setInterval(d,i))},reset:function(){clearInterval(o),i=0,t=r=o=null},handleNewMetric:function(e,t,n){e===l.BUFFER_LEVEL&&(u[n]=t)}}}a.__dashjs_factory_name="BufferLevelHandler",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default},{144:144}],138:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(130),o=(r=i)&&r.__esModule?r:{default:r};n.default=dashjs.FactoryMaker.getClassFactory(function(e){var n=void 0,r=(e=e||{}).eventBus,i=e.metricsConstants;function a(){r.off(o.default.METRICS_INITIALISATION_COMPLETE,a,this),r.trigger(o.default.BECAME_REPORTING_PLAYER)}return{initialize:function(e,t){t&&(n=t,r.on(o.default.METRICS_INITIALISATION_COMPLETE,a,this))},reset:function(){n=null},handleNewMetric:function(e,t){e===i.DVB_ERRORS&&n&&n.report(e,t)}}}),t.exports=n.default},{130:130}],139:[function(e,t,n){"use strict";function r(){var n=void 0,r=void 0;return{initialize:function(e,t){n=e,r=t},reset:function(){r=null,n=void 0},handleNewMetric:function(e,t){e===n&&r&&r.report(n,t)}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="GenericMetricHandler",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{}],140:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(144),f=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,n=[],l=(0,f.default)(this.context).getInstance(),r=e.metricsConstants;function d(){n.length&&i&&i.report(s,n),n=[]}return{initialize:function(e,t,n,r){t&&(a=l.validateN(n),i=t,r&&r.length&&(o=r),s=l.reconstructFullMetricName(e,n,r),u=setInterval(d,a))},reset:function(){clearInterval(u),n=[],i=o=a=u=null},handleNewMetric:function(e,t){e===r.HTTP_REQUEST&&(o&&o!==t.type||n.push(t))}}}a.__dashjs_factory_name="HttpListHandler",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default},{144:144}],141:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(142),s=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var r={"urn:dvb:dash:reporting:2014":s.default},i=this.context,t=void 0,a=e.debug?e.debug.getLogger(t):{},o=e.metricsConstants;return t={create:function(t,e){var n=void 0;try{(n=r[t.schemeIdUri](i).create({metricsConstants:o})).initialize(t,e)}catch(e){n=null,a.error("ReportingFactory: could not create Reporting with schemeIdUri "+t.schemeIdUri+" ("+e.message+")")}return n},register:function(e,t){r[e]=t},unregister:function(e){delete r[e]}}}a.__dashjs_factory_name="ReportingFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=n.default},{142:142}],142:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(146)),p=r(e(147));function i(e){e=e||{};var t,n=this.context,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=[],d=e.metricsConstants;function f(e,t,n){function r(){var e=l.indexOf(i);-1!==e&&(l.splice(e,1),200<=i.status&&i.status<300?t&&t():n&&n())}var i=new XMLHttpRequest;l.push(i);try{i.open("GET",e),i.onloadend=r,i.onerror=r,i.send()}catch(e){i.onerror()}}function c(){o=a=!1,u=s=null}return t={report:function(t,e){Array.isArray(e)||(e=[e]),o&&u.isEnabled()&&e.forEach(function(e){e=r.serialise(e);t!==d.DVB_ERRORS&&(e="metricname="+t+"&"+e),f(e=s+"?"+e,null,function(){o=!1})})},initialize:function(e,t){if(u=t,!(s=e.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");a||((e=e.dvb_probability)&&(1e3===e||e/1e3>=i.random())&&(o=!0),a=!0)},reset:function(){c()}},r=(0,h.default)(n).getInstance(),i=(0,p.default)(n).getInstance(),c(),t}i.__dashjs_factory_name="DVBReporting",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{146:146,147:147}],143:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(148)),g=r(e(130));function i(e){var t=void 0,r=void 0,n=(e=e||{}).eventBus,i=e.dashMetrics,a=e.metricsConstants,o=e.events;function s(e){var t=new p.default;if(r){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=r.originalUrl||r.url),t.terror||(t.terror=new Date),i.addDVBErrors(t)}}function u(e){e.error||(r=e.manifest)}function l(e){s({errorcode:p.default.BASE_URL_CHANGED,servicelocation:e.entry})}function d(){s({errorcode:p.default.BECAME_REPORTER})}function f(e){var t;e.metric===a.HTTP_REQUEST&&(0===(t=e.value).responsecode||400<=t.responsecode||t.responsecode<100||600<=t.responsecode)&&s({errorcode:t.responsecode||p.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation})}function c(e){var t=void 0;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=p.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=p.default.CORRUPT_MEDIA_OTHER;break;default:return}s({errorcode:t})}function h(){n.on(o.MANIFEST_UPDATED,u,t),n.on(o.SERVICE_LOCATION_BLACKLIST_CHANGED,l,t),n.on(o.METRIC_ADDED,f,t),n.on(o.METRIC_UPDATED,f,t),n.on(o.PLAYBACK_ERROR,c,t),n.on(g.default.BECAME_REPORTING_PLAYER,d,t)}return t={initialise:h,reset:function(){n.off(o.MANIFEST_UPDATED,u,t),n.off(o.SERVICE_LOCATION_BLACKLIST_CHANGED,l,t),n.off(o.METRIC_ADDED,f,t),n.off(o.METRIC_UPDATED,f,t),n.off(o.PLAYBACK_ERROR,c,t),n.off(g.default.BECAME_REPORTING_PLAYER,d,t)}},h(),t}i.__dashjs_factory_name="DVBErrorsTranslator",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{130:130,148:148}],144:[function(e,t,n){"use strict";function r(){return{reconstructFullMetricName:function(e,t,n){return t&&(e+="("+t,n&&n.length&&(e+=","+n),e+=")"),e},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="HandlerHelpers",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],145:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(149)),f=r(e(150)),a=r(e(151));function o(e){var l=(e=e||{}).adapter,d=e.constants;return{getMetrics:function(u){var t=[];return u&&u.Metrics_asArray&&u.Metrics_asArray.forEach(function(e){var o=new i.default,s=l.getIsDynamic(u);e.hasOwnProperty("metrics")&&(o.metrics=e.metrics,e.Range_asArray&&e.Range_asArray.forEach(function(e){var t,n,r,i,a=new f.default;a.starttime=(t=u,n=e,r=void 0,i=0,s?i=l.getAvailabilityStartTime(t)/1e3:(t=l.getRegularPeriods(t)).length&&(i=t[0].start),r=i,n&&n.hasOwnProperty(d.START_TIME)&&(r+=n.starttime),r),e.hasOwnProperty("duration")?a.duration=e.duration:a.duration=l.getDuration(u),a._useWallClockTime=s,o.Range.push(a)}),e.Reporting_asArray&&(e.Reporting_asArray.forEach(function(e){var t=new a.default;e.hasOwnProperty(d.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty(d.DVB_REPORTING_URL)&&(t.dvb_reportingUrl=e[d.DVB_REPORTING_URL]),e.hasOwnProperty(d.DVB_PROBABILITY)&&(t.dvb_probability=e[d.DVB_PROBABILITY]),o.Reporting.push(t))}),t.push(o)))}),t}}}o.__dashjs_factory_name="ManifestParsing",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default},{149:149,150:150,151:151}],146:[function(e,t,n){"use strict";function r(){return{serialise:function n(e){var t=[],r=[],i=void 0,a=void 0;for(i in e)if(e.hasOwnProperty(i)&&0!==i.indexOf("_")){if(null==(a=e[i])&&(a=""),Array.isArray(a)){if(!a.length)continue;r=[],a.forEach(function(e){var t="Object"!==Object.prototype.toString.call(e).slice(8,-1);r.push(t?e:n(e))}),a=r.map(encodeURIComponent).join(",")}else"string"==typeof a?a=encodeURIComponent(a):a instanceof Date?a=a.toISOString():"number"==typeof a&&(a=Math.round(a));t.push(i+"="+a)}return t.join("&")}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="MetricSerialiser",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],147:[function(e,t,n){"use strict";function r(){var e,r=window.crypto||window.msCrypto,t=Uint32Array,i=Math.pow(2,8*t.BYTES_PER_ELEMENT)-1,n=10,a=void 0,o=void 0;function s(){r&&(a=a||new t(n),r.getRandomValues(a),o=0)}return e={random:function(e,t){var n=void 0;return e=e||0,t=t||1,r?(o===a.length&&s(),n=a[o]/i,o+=1):n=Math.random(),n*(t-e)+e}},s(),e}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="RNG",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],148:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",n.default=r,t.exports=n.default},{}],149:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.metrics="",this.Range=[],this.Reporting=[]}n.default=r,t.exports=n.default},{}],150:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}n.default=r,t.exports=n.default},{}],151:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3}n.default=r,t.exports=n.default},{}],152:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.data={baseUrls:e||null,selectedIdx:t||NaN},this.children=[]}var l=r(e(230)),e=r(e(47));function i(){var e,i=void 0,a=void 0,t=this.context,r=(0,l.default)(t).getInstance();function o(e,t,n){n=a.getBaseURLsFromElement(n);e[t]?r.areEqual(n,e[t].data.baseUrls)||(e[t].data.baseUrls=n,e[t].data.selectedIdx=NaN):e[t]=new u(n)}function n(e){!function(){if(!a||!a.hasOwnProperty("getBaseURLsFromElement")||!a.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var t=a.getBaseURLsFromElement(e);r.areEqual(t,i.data.baseUrls)||(i.data.baseUrls=t,i.data.selectedIdx=NaN),e&&e.Period_asArray&&e.Period_asArray.forEach(function(e,r){o(i.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,n){o(i.children[r].children,n,e),e.Representation_asArray&&e.Representation_asArray.sort(a.getRepresentationSortFunction()).forEach(function(e,t){o(i.children[r].children[n].children,t,e)})})})}function s(){i=new u}return e={reset:s,update:function(e){n(e)},getForPath:function(e){var t=i,n=[t.data];return e&&e.forEach(function(e){(t=t.children[e])&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(t){!function t(n,e){e=e||i;n(e.data),e.children&&e.children.forEach(function(e){return t(n,e)})}(function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=NaN)})},setConfig:function(e){e.adapter&&(a=e.adapter)}},s(),e}i.__dashjs_factory_name="BaseURLTreeModel",n.default=e.default.getClassFactory(i),t.exports=n.default},{230:230,47:47}],153:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var R=r(e(46)),b=r(e(104)),M=r(e(130)),i=r(e(47)),D=r(e(45)),N=r(e(48)),C=r(e(112)),O=e(255),w=r(e(65)),P=r(e(49)),L="m",x="a",F="v",U="i",B="c",k="tt",G="k",j="o",Y="d",H="s",q="v",K="l";function a(){var r=void 0,e=void 0,c=void 0,h=void 0,p=void 0,g=void 0,_=void 0,m=void 0,E=void 0,y=void 0,t=this.context,o=(0,R.default)(t).getInstance(),v=(0,N.default)(t).getInstance();function n(){c={pr:1,nor:null,st:null,sf:null,sid:""+P.default.generateUuid(),cid:null},E={},m={},y={},a()}function i(){a()}function a(){var e;!g||(e=g.getStreamController())&&("function"!=typeof e.getActiveStream||(e=e.getActiveStream())&&(_=e.getProcessors()))}function s(e,t){var n={},r=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var s=s.value;e[s]&&(n[s]=e[s])}}catch(e){i=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw a}}return n}function u(e){try{return e.type===O.HTTPRequest.MPD_TYPE?((n=T()).ot=""+L,n):e.type===O.HTTPRequest.MEDIA_SEGMENT_TYPE?(function(e){y.hasOwnProperty(e)||(y[e]=!1);m.hasOwnProperty(e)||(m[e]=!1);E.hasOwnProperty(e)||(E[e]=!1)}(e.mediaType),function(e){var t=T(),n=function(e){try{var t=e.quality,n=e.mediaInfo.bitrateList;return parseInt(n[t].bandwidth/1e3)}catch(e){return null}}(e),r=function(e){try{return isNaN(e.duration)?null:Math.round(1e3*e.duration)}catch(e){return null}}(e),i=function(e){try{return 100*parseInt(h.getThroughputHistory().getSafeAverageThroughput(e)/100)}catch(e){return null}}(e.mediaType),a=function(e){try{var t=c.pr,n=p.getCurrentBufferLevel(e);return isNaN(t)||isNaN(n)?null:100*parseInt(n/t*10)}catch(e){return null}}(e.mediaType),o=S(e.mediaType),s=function(e){try{var t=h.getTopBitrateInfoFor(e);return Math.round(t.bitrate/1e3)}catch(e){return null}}(e.mediaType),u=c.pr,l=function(e){if(!_||0===_.length)return;var t=!0,n=!1,r=void 0;try{for(var i=_[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var a=a.value;if(a.getType()===e)return a.probeNextRequest()}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}(e.mediaType),d=void 0;e.mediaType===C.default.VIDEO&&(d=F);e.mediaType===C.default.AUDIO&&(d=x);e.mediaType===C.default.FRAGMENTED_TEXT&&(d="application/mp4"===e.mediaInfo.mimeType?k:B);var f=v.get().streaming.cmcd.rtp;f=f||function(e){var t=g.getPlaybackRate();t=t||1;var n=e.quality,r=e.mediaType,i=e.mediaInfo,e=e.duration,r=S(r);0===r&&(r=500);r=i.bitrateList[n].bandwidth*e/1e3/(r/t/1e3),t=v.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(v.get().streaming.cmcd.rtpSafetyFactor)?v.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(r*t/100)+1)}(e);{t.rtp=f,l&&(e.url!==l.url?(f=new URL(l.url),t.nor=f.pathname):l.range&&(t.nrr=l.range))}n&&(t.br=n);d&&(t.ot=d);isNaN(r)||(t.d=r);isNaN(i)||(t.mtp=i);isNaN(a)||(t.dl=a);isNaN(o)||(t.bl=o);isNaN(s)||(t.tb=s);isNaN(u)||1===u||(t.pr=u);E[e.mediaType]&&(t.bs=!0,E[e.mediaType]=!1);!m[e.mediaType]&&y[e.mediaType]||(t.su=!0,m[e.mediaType]=!1,y[e.mediaType]=!0);return t}(e)):e.type===O.HTTPRequest.INIT_SEGMENT_TYPE?((n=T()).ot=""+U,n.su=!0,n):e.type===O.HTTPRequest.OTHER_TYPE||e.type===O.HTTPRequest.XLINK_EXPANSION_TYPE?((t=T()).ot=""+j,t):e.type===O.HTTPRequest.LICENSE?((t=T()).ot=G,t):null}catch(e){return null}var t,n}function T(){var e={},t=(v.get().streaming.cmcd.cid?v.get().streaming.cmcd:c).cid;return e.v=1,e.sid=(v.get().streaming.cmcd.sid?v.get().streaming.cmcd:c).sid,e.sid=""+e.sid,t&&(e.cid=""+t),isNaN(c.pr)||1===c.pr||null===c.pr||(e.pr=c.pr),c.st&&(e.st=c.st),c.sf&&(e.sf=c.sf),e}function S(e){try{var t=p.getCurrentBufferLevel(e);return isNaN(t)?null:100*parseInt(10*t)}catch(e){return null}}function l(e){try{c.pr=e.playbackRate}catch(e){}}function d(e){try{var t=r.getIsDynamic(e.data)?""+K:""+q,n=e.protocol&&"MSS"===e.protocol?""+H:""+Y;c.st=t,c.sf=n}catch(e){}}function f(e){try{e.state&&e.mediaType&&e.state===b.default.BUFFER_EMPTY&&(E[e.mediaType]||(E[e.mediaType]=!0),m[e.mediaType]||(m[e.mediaType]=!0))}catch(e){}}function A(){for(var e in E)E.hasOwnProperty(e)&&(E[e]=!0);for(var e in m)m.hasOwnProperty(e)&&(m[e]=!0)}function I(i){try{var e=function(){if(!i)return{v:null};var e=Object.keys(i).sort(function(e,t){return e.localeCompare(t)}),r=e.length;return{v:e.reduce(function(e,t,n){return"v"===t&&1===i[t]||("string"!=typeof i[t]||"ot"===t&&"sf"===t&&"st"===t?e+=t+"="+i[t]:e+=t+'="'+i[t].replace(/"/g,'"')+'"',n<r-1&&(e+=",")),e},"").replace(/=true/g,"")}}();if("object"==typeof e)return e.v}catch(e){return null}}return e={getQueryParameter:function(e){try{if(v.get().streaming.cmcd&&v.get().streaming.cmcd.enabled){var t=u(e),n=I(t);return o.trigger(M.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,cmcdString:n}),{key:"CMCD",value:n}}return null}catch(e){return null}},getHeaderParameters:function(e){try{if(v.get().streaming.cmcd&&v.get().streaming.cmcd.enabled){var t=u(e),n=s(t,["br","d","ot","tb"]),r=s(t,["bl","dl","mtp","nor","nrr","su"]),i=s(t,["bs","rtp"]),a=s(t,["cid","pr","sf","sid","st","v"]),a={"CMCD-Object":I(n),"CMCD-Request":I(r),"CMCD-Status":I(i),"CMCD-Session":I(a)};return o.trigger(M.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t}),a}return null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(h=e.abrController),e.dashMetrics&&(p=e.dashMetrics),e.playbackController&&(g=e.playbackController))},reset:function(){o.off(b.default.PLAYBACK_RATE_CHANGED,l,this),o.off(b.default.MANIFEST_LOADED,d,this),o.off(b.default.BUFFER_LEVEL_STATE_CHANGED,f,e),o.off(b.default.PLAYBACK_SEEKED,A,e),n()},initialize:function(){o.on(b.default.PLAYBACK_RATE_CHANGED,l,e),o.on(b.default.MANIFEST_LOADED,d,e),o.on(b.default.BUFFER_LEVEL_STATE_CHANGED,f,e),o.on(b.default.PLAYBACK_SEEKED,A,e),o.on(b.default.PERIOD_SWITCH_COMPLETED,i,e)}},(0,D.default)(t).getInstance().getLogger(e),r=(0,w.default)(t).getInstance(),n(),e}a.__dashjs_factory_name="CmcdModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{104:104,112:112,130:130,255:255,45:45,46:46,47:47,48:48,49:49,65:65}],154:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),T=r(e(241)),S="loading",A="executed";function a(e){var t,n=(e=e||{}).eventBus,r=e.events,i=e.dashMetrics,a=e.fragmentLoader,o=e.debug,s=e.streamInfo,u=e.type,l=void 0,d=void 0,f=void 0;function c(i){var a;return!!i&&(a=!1,d.some(function(e){if(n=i,r=e,!isNaN(n.index)&&n.startTime===r.startTime&&n.adaptationIndex===r.adaptationIndex&&n.type===r.type||(r=i,t=e,isNaN(r.index)&&isNaN(t.index)&&r.quality===t.quality)||(t=e,(e=i).action===T.default.ACTION_COMPLETE&&e.action===t.action))return a=!0;var t,n,r}),a)}function h(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function p(n){d=d.filter(function(e){var t=h(e);return isNaN(e.startTime)||void 0!==n&&e.startTime>=n-t})}function g(n,r){r<=n+.5||(d=d.filter(function(e){var t=h(e);return isNaN(e.startTime)||e.startTime>=r-t||isNaN(e.duration)||e.startTime+e.duration<=n+t}))}function _(e,t){i.addSchedulingInfo(e,t),i.addRequestsQueue(e.mediaType,f,d)}function m(e){e.sender===a&&(f.splice(f.indexOf(e.request),1),e.response&&!e.error&&d.push(e.request),_(e.request,e.error?"failed":A),n.trigger(r.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:s.id,mediaType:u}))}function E(e){e.sender===a&&n.trigger(r.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:s.id,mediaType:u})}function y(e){e.sender===a&&n.trigger(r.FRAGMENT_LOADING_ABANDONED,{request:e.request},{streamId:s.id,mediaType:u})}function v(){d=[],f=[]}return t={getStreamId:function(){return s.id},getType:function(){return u},getRequests:function(t){var e=t?t.state instanceof Array?t.state:[t.state]:[],n=[];return e.forEach(function(e){e=function(e){var t=void 0;switch(e){case S:t=f;break;case A:t=d;break;default:t=[]}return t}(e);n=n.concat(function(e,n){if(n.hasOwnProperty("time"))return[function(e,t,n){for(var r=e.length-1;0<=r;r--){var i=e[r],a=i.startTime,o=a+i.duration;if(n=isNaN(n)?h(i):n,!isNaN(a)&&!isNaN(o)&&a<=t+n&&t-n<o||isNaN(a)&&isNaN(t))return i}return null}(e,n.time,n.threshold)];return e.filter(function(e){for(var t in n)if("state"!==t&&n.hasOwnProperty(t)&&e[t]!=n[t])return!1;return!0})}(e,t))}),n},isFragmentLoaded:c,isFragmentLoadedOrPending:function(e){var t,n=!1,r=0;if(!(n=c(e)))for(r=0;r<f.length;r++)t=f[r],e.url===t.url&&e.startTime===t.startTime&&(n=!0);return n},removeExecutedRequestsBeforeTime:p,removeExecutedRequestsAfterTime:function(t){d=d.filter(function(e){return isNaN(e.startTime)||void 0!==t&&e.startTime<t})},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=e.length;r<i;r++)g(n,e.start(r)),n=e.end(r);0<t&&g(n,t)}else p()},abortRequests:function(){l.debug("abort requests"),a.abort(),f=[]},executeRequest:function(e){switch(e.action){case T.default.ACTION_COMPLETE:d.push(e),_(e,A),l.debug("STREAM_COMPLETED"),n.trigger(r.STREAM_COMPLETED,{request:e},{streamId:e.mediaInfo.streamInfo.id,mediaType:e.mediaType});break;case T.default.ACTION_DOWNLOAD:_(e,S),f.push(e),e=e,n.trigger(r.FRAGMENT_LOADING_STARTED,{request:e},{streamId:s.id,mediaType:u}),a.load(e);break;default:l.warn("Unknown request action.")}},reset:function(){n.off(r.LOADING_COMPLETED,m,this),n.off(r.LOADING_DATA_PROGRESS,E,this),n.off(r.LOADING_ABANDONED,y,this),a&&a.reset(),v()},addExecutedRequest:function(e){d.push(e)}},l=o.getLogger(t),v(),n.on(r.LOADING_COMPLETED,m,t),n.on(r.LOADING_DATA_PROGRESS,E,t),n.on(r.LOADING_ABANDONED,y,t),t}a.__dashjs_factory_name="FragmentModel";e=i.default.getClassFactory(a);e.FRAGMENT_MODEL_LOADING=S,e.FRAGMENT_MODEL_EXECUTED=A,e.FRAGMENT_MODEL_CANCELED="canceled",e.FRAGMENT_MODEL_FAILED="failed",i.default.updateClassFactory(a.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{241:241,47:47}],155:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),a=r(e(54)),e=r(e(47));function o(){var e=this.context,t=(0,i.default)(e).getInstance(),n=void 0;return{getValue:function(){return n},setValue:function(e){(n=e)&&t.trigger(a.default.MANIFEST_LOADED,{data:e})}}}o.__dashjs_factory_name="ManifestModel",n.default=e.default.getSingletonFactory(o),t.exports=n.default},{46:46,47:47,54:54}],156:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var d=r(e(99)),i=r(e(47)),f=r(e(112)),c=r(e(196)),h=r(e(48)),p=e(232);function a(){var e,i=void 0,r=void 0,a=void 0,t=this.context,n=(0,h.default)(t).getInstance();function o(e){for(var t=void 0,t=0;t<a.length;t++)if(a[t].rulename===e)return t;return-1}function s(){return n.get().streaming.lowLatencyEnabled?n.get().streaming.liveDelay||3:n.get().streaming.liveDelay}function u(e,t){l(e,t);var n=new d.default;n.schemeIdUri=e,n.value=t,i.push(n)}function l(n,r){(0,p.checkParameterType)(n,"string"),(0,p.checkParameterType)(r,"string"),i.forEach(function(e,t){e.schemeIdUri===n&&e.value===r&&i.splice(t,1)})}return e={getABRCustomRules:function(){return a},addABRCustomRule:function(e,t,n){if("string"!=typeof e||e!==c.default.ABANDON_FRAGMENT_RULES&&e!==c.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw f.default.BAD_ARGUMENT_ERROR;var r=o(t);-1===r?a.push({type:e,rulename:t,rule:n}):(a[r].type=e,a[r].rule=n)},removeABRCustomRule:function(e){e?-1!==(e=o(e))&&a.splice(e,1):a=[]},getStableBufferTime:function(){if(n.get().streaming.lowLatencyEnabled)return.6*s();var e=n.get().streaming.stableBufferTime;return-1<e?e:n.get().streaming.fastSwitchEnabled?20:12},getRetryAttemptsForType:function(e){var t=isNaN(n.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:n.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return n.get().streaming.lowLatencyEnabled?n.get().streaming.retryAttempts[e]*t:n.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){var t=isNaN(n.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:n.get().streaming.retryIntervals.lowLatencyReductionFactor;return n.get().streaming.lowLatencyEnabled?n.get().streaming.retryIntervals[e]/t:n.get().streaming.retryIntervals[e]},getLiveDelay:s,getLiveCatchupLatencyThreshold:function(){try{var e=n.get().streaming.liveCatchup.latencyThreshold,t=s();if(null!==e&&!isNaN(e))return Math.max(e,t);e=n.get().streaming.liveCatchup.minDrift,e=!isNaN(t)&&t?isNaN(e)?s():n.get().streaming.liveCatchup.minDrift+s():NaN;return e&&!isNaN(e)?Math.max(4*e,5):NaN}catch(e){return NaN}},addUTCTimingSource:u,removeUTCTimingSource:l,getUTCTimingSources:function(){return i},clearDefaultUTCTimingSources:function(){i=[]},restoreDefaultUTCTimingSources:function(){var e=n.get().streaming.utcSynchronization.defaultTimingSource;u(e.scheme,e.value)},setXHRWithCredentialsForType:function t(e,n){e?r[e]=!!n:Object.keys(r).forEach(function(e){t(e,n)})},getXHRWithCredentialsForType:function(e){return void 0===(e=r[e])?r.default:e},getDefaultUtcTimingSource:function(){return n.get().streaming.utcSynchronization.defaultTimingSource},reset:function(){}},r={default:!(i=[])},a=[],e}a.__dashjs_factory_name="MediaPlayerModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{112:112,196:196,232:232,47:47,48:48,99:99}],157:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(112)),E=r(e(113)),u=r(e(245)),y=e(255),d=r(e(258)),p=r(e(251)),g=r(e(252)),_=r(e(253)),v=r(e(254)),T=e(256),S=r(e(260)),A=r(e(46)),I=r(e(259)),R=r(e(54)),e=r(e(47));function i(e){var r=(e=e||{}).settings,e=this.context,i=(0,A.default)(e).getInstance(),e=void 0,a=void 0;function t(){i.trigger(R.default.METRICS_CHANGED)}function o(e){i.trigger(R.default.METRIC_CHANGED,{mediaType:e}),t()}function l(e,t,n){i.trigger(R.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),o(e)}function f(e,t,n){i.trigger(R.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),o(e)}function s(e,t){var n=null;return e&&(a.hasOwnProperty(e)?n=a[e]:t||(n=new u.default,a[e]=n)),n}function c(e,t,n){e=s(e);null!==e&&(e[t].push(n),e[t].length>r.get().streaming.metricsMaxListDepth&&e[t].shift())}function m(e,t,n){c(e,t,n),f(e,t,n)}return e={clearCurrentMetricsForType:function(e){delete a[e],o(e)},clearAllCurrentMetrics:function(){a={},t()},getMetricsFor:s,addHttpRequest:function e(t,n,r,i,a,o,s,u,l,d,f,c,h,p,g){var _=new y.HTTPRequest;o&&o!==i&&(e(t,null,r,i,a,null,null,u,l,null,null,null,h,null,null),_.actualurl=o),_.tcpid=n,_.type=r,_.url=i,_.range=u,_.trequest=l,_.tresponse=d,_.responsecode=c,_._tfinish=f,_._stream=t,_._mediaduration=h,_._quality=a,_._responseHeaders=p,_._serviceLocation=s,g?g.forEach(function(e){var t,n,r,i;t=_,n=e.s,r=e.d,i=e.b,(e=new y.HTTPRequestTrace).s=n,e.d=r,e.b=i,t.trace.push(e),t.interval||(t.interval=0),t.interval+=r}):(delete _.interval,delete _.trace),m(t,E.default.HTTP_REQUEST,_)},addRepresentationSwitch:function(e,t,n,r,i){var a=new d.default;a.t=t,a.mt=n,a.to=r,i?a.lto=i:delete a.lto,m(e,E.default.TRACK_SWITCH,a)},addBufferLevel:function(e,t,n){var r=new p.default;r.t=t,r.level=n,m(e,E.default.BUFFER_LEVEL,r)},addBufferState:function(e,t,n){var r=new g.default;r.target=n,r.state=t,m(e,E.default.BUFFER_STATE,r)},addDVRInfo:function(e,t,n,r){var i=new _.default;i.time=t,i.range=r,i.manifestInfo=n,m(e,E.default.DVR_INFO,i)},addDroppedFrames:function(e,t){var n=new v.default,r=s(e).DroppedFrames;t&&(n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,0<r.length&&r[r.length-1]==n||m(e,E.default.DROPPED_FRAMES,n))},addSchedulingInfo:function(e,t,n,r,i,a,o,s,u){var l=new S.default;l.mediaType=e,l.t=t,l.type=n,l.startTime=r,l.availabilityStartTime=i,l.duration=a,l.quality=o,l.range=s,l.state=u,m(e,E.default.SCHEDULING_INFO,l)},addRequestsQueue:function(e,t,n){var r=new I.default;r.loadingRequests=t,r.executedRequests=n,s(e).RequestsQueue=r,f(e,E.default.REQUESTS_QUEUE,r)},addManifestUpdate:function(e,t,n,r,i,a,o,s,u,l){var d=new T.ManifestUpdate;d.mediaType=e,d.type=t,d.requestTime=n,d.fetchTime=r,d.availabilityStartTime=i,d.presentationStartTime=a,d.clientTimeOffset=o,d.currentTime=s,d.buffered=u,d.latency=l,c(h.default.STREAM,E.default.MANIFEST_UPDATE,d),f(e,E.default.MANIFEST_UPDATE,d)},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];l(e.mediaType,E.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,r,i){var a;e&&((a=new T.ManifestUpdateStreamInfo).id=t,a.index=n,a.start=r,a.duration=i,e.streamInfo.push(a),l(e.mediaType,E.default.MANIFEST_UPDATE_STREAM_INFO,e))},addManifestUpdateRepresentationInfo:function(e,t,n,r,i,a,o,s){var u;e&&e.representationInfo&&((u=new T.ManifestUpdateRepresentationInfo).id=t,u.index=n,u.streamIndex=r,u.mediaType=i,u.startNumber=o,u.fragmentInfoType=s,u.presentationTimeOffset=a,e.representationInfo.push(u),l(e.mediaType,E.default.MANIFEST_UPDATE_TRACK_INFO,e))},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,m(h.default.STREAM,E.default.PLAY_LIST,e)},addDVBErrors:function(e){m(h.default.STREAM,E.default.DVB_ERRORS,e)}},a={},e}i.__dashjs_factory_name="MetricsModel",n.default=e.default.getSingletonFactory(i),t.exports=n.default},{112:112,113:113,245:245,251:251,252:252,253:253,254:254,255:255,256:256,258:258,259:259,260:260,46:46,47:47,54:54}],158:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(250)),e=r(e(47));function i(){var u=void 0;return{initialize:function(e){if(u=new l.default,!e)return null;var t=e.indexOf("#");if(-1!==t)for(var n=e.substr(t+1).split("&"),r=0,i=n.length;r<i;++r){var a,o=n[r],s=o.indexOf("=");-1!==s&&(a=o.substring(0,s),u.hasOwnProperty(a)&&(u[a]=o.substr(s+1)))}},getURIFragmentData:function(){return u}}}i.__dashjs_factory_name="URIFragmentModel",n.default=e.default.getSingletonFactory(i),t.exports=n.default},{250:250,47:47}],159:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),g=r(e(46)),_=r(e(54)),m=r(e(45));function a(){var e=void 0,t=void 0,o=void 0,n=void 0,r=void 0,i="element is not video or audio DOM type!",a=this.context,s=(0,g.default)(a).getInstance(),u=[];function l(){o&&(o.playbackRate=r||1,o.removeEventListener("canplay",l))}function d(e){o&&(o.readyState<=2&&0<e?o.addEventListener("canplay",l):o.playbackRate=e)}function f(){return 0<u.length}function c(){var e;o&&f()&&0===o.playbackRate&&((e=document.createEvent("Event")).initEvent("waiting",!0,!1),o.dispatchEvent(e))}function h(){return o?o.buffered:null}function p(e,t,n,r,i){if(o)for(var a=0;a<o.textTracks.length;a++)if(o.textTracks[a].kind===e&&(!t||o.textTracks[a].label==t)&&o.textTracks[a].language===n&&o.textTracks[a].isTTML===r&&o.textTracks[a].isEmbedded===i)return o.textTracks[a];return null}return e={initialize:function(){s.on(_.default.PLAYBACK_PLAYING,c,this)},setCurrentTime:function(t,e){if(o){if(o.currentTime==t)return;try{t=e?function(e){var t=h(),n=e,r=9999999999;if(t)for(var i=0;i<t.length;i++){var a=t.start(i),o=t.end(i),s=Math.abs(a-e),u=Math.abs(o-e);if(a<=e&&e<=o)return e;s<r&&(r=s,n=a),u<r&&(r=u,n=o)}return n}(t):t,o.currentTime=t}catch(e){0===o.readyState&&e.code===e.INVALID_STATE_ERR&&setTimeout(function(){o.currentTime=t},400)}}},play:function(){var e;o&&(o.autoplay=!0,(e=o.play())&&e.catch&&"undefined"!=typeof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&s.trigger(_.default.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing ("+e+")")}))},isPaused:function(){return o?o.paused:null},pause:function(){o&&(o.pause(),o.autoplay=!1)},isStalled:f,isSeeking:function(){return o?o.seeking:null},getTime:function(){return o?o.currentTime:null},getPlaybackRate:function(){return o?o.playbackRate:null},setPlaybackRate:d,getPlayedRanges:function(){return o?o.played:null},getEnded:function(){return o?o.ended:null},setStallState:function(e,t){(t?function(e){var t=void 0;if(null===e||!o||o.seeking||-1!==u.indexOf(e))return;u.push(e),o&&1===u.length&&((t=document.createEvent("Event")).initEvent("waiting",!0,!1),r=o.playbackRate,d(0),o.dispatchEvent(t))}:function(e){var t=u.indexOf(e),n=void 0;if(null===e)return;-1!==t&&u.splice(t,1);o&&!1===f()&&0===o.playbackRate&&(d(r||1),o.paused||((n=document.createEvent("Event")).initEvent("playing",!0,!1),o.dispatchEvent(n)))})(e)},getElement:function(){return o},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw i;(o=e)&&(o.preload="auto")},setSource:function(e){o&&(e?o.src=e:(o.removeAttribute("src"),o.load()))},getSource:function(){return o?o.src:null},getTTMLRenderingDiv:function(){return n},setTTMLRenderingDiv:function(e){(n=e).style.position="absolute",n.style.display="flex",n.style.overflow="hidden",n.style.pointerEvents="none",n.style.top=0,n.style.left=0},getPlaybackQuality:function(){if(!o)return null;var e="webkitDroppedFrameCount"in o&&"webkitDecodedFrameCount"in o,t=null;return"getVideoPlaybackQuality"in o?t=o.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:o.webkitDroppedFrameCount,totalVideoFrames:o.webkitDroppedFrameCount+o.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:function(e,t){o&&o.addEventListener(e,t)},removeEventListener:function(e,t){o&&o.removeEventListener(e,t)},getReadyState:function(){return o?o.readyState:NaN},getBufferRange:h,getClientWidth:function(){return o?o.clientWidth:NaN},getClientHeight:function(){return o?o.clientHeight:NaN},getTextTracks:function(){return o?o.textTracks:[]},getTextTrack:p,addTextTrack:function(e,t,n,r,i){if(!o)return null;var a=p(e,t,n,r,i);return a||((a=o.addTextTrack(e,t,n)).isEmbedded=i,a.isTTML=r),a},appendChild:function(e){o&&(o.appendChild(e),void 0!==e.isTTML&&(o.textTracks[o.textTracks.length-1].isTTML=e.isTTML,o.textTracks[o.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){o&&o.removeChild(e)},getVideoWidth:function(){return o?o.videoWidth:NaN},getVideoHeight:function(){return o?o.videoHeight:NaN},getVideoRelativeOffsetTop:function(){var e=o.parentNode.host||o.parentNode;return e?o.getBoundingClientRect().top-e.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){var e=o.parentNode.host||o.parentNode;return e?o.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN},reset:function(){s.off(_.default.PLAYBACK_PLAYING,c,this)}},t=(0,m.default)(a).getInstance().getLogger(e),e}a.__dashjs_factory_name="VideoModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{45:45,46:46,47:47,54:54}],160:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),s=r(e(48)),S=r(e(112));function a(e){e=e||{};var t=this.context,a=e.requestModifier,E=e.boxParser,y=(0,s.default)(t).getInstance();function v(t,e){t.reader.read().then(e).catch(function(e){t.onerror&&200===t.response.status&&t.onerror(e)})}function T(e,t,n,r,i){switch(e){case S.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING:return function(n,r){try{var e=void 0,t=void 0;e=n.filter(function(e,t){return 0<t&&t<n.length-1}),t=r.filter(function(e,t){return 0<t&&t<r.length-1});var i=0;if(1<e.length){for(var a,o=0;o<e.length;o++){e[o]&&t[o]&&(a=t[o].ts-e[o].ts,i+=a)}return i}return null}catch(e){return null}}(t,n);case S.default.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA:default:return o(r,i)}}function o(n,t){try{if(1<(n=n.filter(function(e){return e.bytes>t/4/n.length})).length){var e=(r=0,i=(n[n.length-1].ts-n[0].ts)/n.length,n.forEach(function(e,t){t=n[t+1];t&&(e=t.ts-e.ts,r+=e<i?e:0)}),{v:r});if("object"==typeof e)return e.v}return null}catch(e){return null}var r,i}return{load:function(m){var e=new Date,t=m.request,n=new Headers;if(t.range&&n.append("Range","bytes="+t.range),m.headers)for(var r in m.headers){var i=m.headers[r];i&&n.append(r,i)}t.requestStartDate||(t.requestStartDate=e),a&&a.modifyRequestHeader({setRequestHeader:function(e,t){n.append(e,t)}}),e=void 0,"function"==typeof window.AbortController&&(e=new AbortController,(m.abortController=e).signal.onabort=m.onabort),e={method:m.method,headers:n,credentials:m.withCredentials?"include":void 0,signal:e?e.signal:void 0},fetch(m.url,e).then(function(e){m.response||(m.response={}),m.response.status=e.status,m.response.statusText=e.statusText,m.response.responseURL=e.url,e.ok||m.onerror();var t="",n=!0,r=!1,i=void 0;try{for(var a=e.headers.keys()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var o=o.value;t+=o+": "+e.headers.get(o)+"\r\n"}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}if(m.response.responseHeaders=t,!e.body)return e.arrayBuffer().then(function(e){e={loaded:(m.response.response=e).byteLength,total:e.byteLength,stream:!1};m.progress(e),m.onload(),m.onend()});var s=parseInt(e.headers.get("Content-Length"),10),u=0,l=!1,d=new Uint8Array,f=0;m.reader=e.body.getReader();var c=[],h=[],p=[],g=!0,_=y.get().streaming.abr.fetchThroughputCalculationMode,i=function e(t){var n,r=t.value;if(t.done)return d&&(m.progress({loaded:u,total:isNaN(s)?u:s,lengthComputable:!0,time:T(_,h,p,c,u),stream:!0}),m.response.response=d.buffer),m.onload(),void m.onend();r&&0<r.length&&(d=function(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(d,r),u+=r.length,c.push({ts:Date.now(),bytes:r.length}),_===S.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&g&&E.findLastTopIsoBoxCompleted(["moof"],d,f).found&&(g=!1,h.push({ts:performance.now(),bytes:r.length})),(n=E.findLastTopIsoBoxCompleted(["moov","mdat"],d,f)).found?(t=n.lastCompletedOffset+n.size,_===S.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&(g=!0,p.push({ts:performance.now(),bytes:d.length})),r=void 0,d=t===d.length?(r=d,new Uint8Array):(r=new Uint8Array(d.subarray(0,t)),d.subarray(t)),m.progress({data:r.buffer,lengthComputable:!1,noTrace:!0}),f=0):(f=n.lastCompletedOffset,l||(m.progress({lengthComputable:!1,noTrace:!0}),l=!0))),v(m,e)};v(m,i)}).catch(function(e){m.onerror&&m.onerror(e)})},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort()}catch(e){}},calculateDownloadedTime:T}}a.__dashjs_factory_name="FetchLoader";i=i.default.getClassFactory(a);n.default=i,t.exports=n.default},{112:112,47:47,48:48}],161:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var x=r(e(164)),F=r(e(160)),U=e(255),a=r(e(47)),B=r(e(239)),o=r(e(153)),k=r(e(49)),s=r(e(45)),u=r(e(46)),G=r(e(54)),l=r(e(48)),j=r(e(112));function d(e){e=e||{};var t,E=this.context,y=e.errHandler,v=e.dashMetrics,T=e.mediaPlayerModel,S=e.requestModifier,A=e.boxParser,I=e.useFetch||!1,n=e.errors,R=e.requestTimeout||0,b=(0,u.default)(E).getInstance(),M=(0,l.default)(E).getInstance(),r=void 0,D=void 0,N=void 0,C=void 0,O=void 0,w=void 0,P=void 0;function L(n,t){var r=n.request,i=[],a=!0,o=!0,s=new Date,u=s,l=0,d=void 0;if(!S||!v||!y)throw new Error("config object is not correct or missing");function e(e){o=!1,r.requestStartDate=s,r.requestEndDate=new Date,r.firstByteDate=r.firstByteDate||s,r.checkExistenceOnly||(v.addHttpRequest(r,d.response?d.response.responseURL:null,d.response?d.response.status:null,d.response&&d.response.getAllResponseHeaders?d.response.getAllResponseHeaders():d.response?d.response.responseHeaders:[],e?i:null),r.type===U.HTTPRequest.MPD_TYPE&&v.addManifestUpdate(r))}function f(){if(-1!==D.indexOf(d)&&(D.splice(D.indexOf(d),1),o))if(e(!1),0<t)!function(){try{M.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&r.type===U.HTTPRequest.MEDIA_SEGMENT_TYPE&&T.getRetryAttemptsForType(U.HTTPRequest.MEDIA_SEGMENT_TYPE)===t&&b.trigger(G.default.ATTEMPT_BACKGROUND_SYNC)}catch(e){}t--;var e={config:n};C.push(e),e.timeout=setTimeout(function(){-1!==C.indexOf(e)&&(C.splice(C.indexOf(e),1),L(n,t))},T.getRetryIntervalsForType(r.type))}();else{if(r.type===U.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;y.error(new B.default(O[r.type],r.url+" is not available",{request:r,response:d.response})),n.error&&n.error(r,"error",d.response.statusText),n.complete&&n.complete(r,d.response.statusText)}}var c,h,p=void 0,p=I&&window.fetch&&"arraybuffer"===r.responseType&&r.type===U.HTTPRequest.MEDIA_SEGMENT_TYPE?(0,F.default)(E).create({requestModifier:S,boxParser:A}):(0,x.default)(E).create({requestModifier:S}),g=null,_=S.modifyRequestURL(r.url);M.get().streaming.cmcd&&M.get().streaming.cmcd.enabled&&((c=M.get().streaming.cmcd.mode)===j.default.CMCD_MODE_QUERY?(h=function(e){try{var t=[],n=w.getQueryParameter(e);return n&&t.push(n),t}catch(e){return[]}}(r),_=k.default.addAditionalQueryParameterToUrl(_,h)):c===j.default.CMCD_MODE_HEADER&&(g=w.getHeaderParameters(r)));var m,d={url:_,method:r.checkExistenceOnly?U.HTTPRequest.HEAD:U.HTTPRequest.GET,withCredentials:T.getXHRWithCredentialsForType(r.type),request:r,onload:function(){200<=d.response.status&&d.response.status<=299&&(e(!0),n.success&&n.success(d.response.response,d.response.statusText,d.response.responseURL),n.complete&&n.complete(r,d.response.statusText))},onend:f,onerror:f,progress:function(e){var t=new Date;a&&(a=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(r.firstByteDate=t)),e.lengthComputable&&(r.bytesLoaded=e.loaded,r.bytesTotal=e.total),e.noTrace||(i.push({s:u,d:e.time?e.time:t.getTime()-u.getTime(),b:[e.loaded?e.loaded-l:0]}),u=t,l=e.loaded),n.progress&&e&&n.progress(e)},onabort:function(){n.abort&&n.abort(r)},ontimeout:function(e){var t,n=void 0;n=e.lengthComputable?(t=e.loaded/e.total*100,"Request timeout: loaded: "+e.loaded+", out of: "+e.total+" : "+t.toFixed(3)+"% Completed"):"Request timeout: non-computable download size",P.warn(n)},loader:p,timeout:R,headers:g},g=(new Date).getTime();isNaN(r.delayLoadingTime)||g>=r.delayLoadingTime?(D.push(d),p.load(d)):(m={httpRequest:d},N.push(m),m.delayTimeout=setTimeout(function(){if(-1!==N.indexOf(m)){N.splice(N.indexOf(m),1);try{s=new Date,u=s,D.push(m.httpRequest),p.load(m.httpRequest)}catch(e){m.httpRequest.onerror()}}},r.delayLoadingTime-g))}return r={load:function(e){e.request?L(e,T.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){C.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)}),C=[],N.forEach(function(e){return clearTimeout(e.delayTimeout)}),N=[],D.forEach(function(e){e.request.type!==U.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e))}),D=[]}},P=(0,s.default)(E).getInstance().getLogger(r),D=[],N=[],C=[],w=(0,o.default)(E).getInstance(),i(t={},U.HTTPRequest.MPD_TYPE,n.DOWNLOAD_ERROR_ID_MANIFEST_CODE),i(t,U.HTTPRequest.XLINK_EXPANSION_TYPE,n.DOWNLOAD_ERROR_ID_XLINK_CODE),i(t,U.HTTPRequest.INIT_SEGMENT_TYPE,n.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),i(t,U.HTTPRequest.MEDIA_SEGMENT_TYPE,n.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(t,U.HTTPRequest.INDEX_SEGMENT_TYPE,n.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(t,U.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,n.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(t,U.HTTPRequest.OTHER_TYPE,n.DOWNLOAD_ERROR_ID_CONTENT_CODE),O=t,r}d.__dashjs_factory_name="HTTPLoader";a=a.default.getClassFactory(d);n.default=a,t.exports=n.default},{112:112,153:153,160:160,164:164,239:239,255:255,45:45,46:46,47:47,48:48,49:49,54:54}],162:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(161));function o(){var n=void 0;function e(){n={}}function t(){e()}return t(),{getLoader:function(e){for(var t in n)if(n.hasOwnProperty(t)&&e.startsWith(t))return n[t];return a.default},registerLoader:function(e,t){n[e]=t},unregisterLoader:function(e){n[e]&&delete n[e]},unregisterAllLoader:e,reset:t}}o.__dashjs_factory_name="SchemeLoaderFactory";i=i.default.getSingletonFactory(o);n.default=i,t.exports=n.default},{161:161,47:47}],163:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(162));function a(n){n=n||{};var r=this.context,i=void 0,a=void 0;return i=(0,o.default)(r).getInstance(),{load:function(e){var t=i.getLoader(e&&e.request?e.request.url:null);(a=t(r).create({errHandler:n.errHandler,mediaPlayerModel:n.mediaPlayerModel,requestModifier:n.requestModifier,useFetch:n.useFetch||null,dashMetrics:n.dashMetrics,boxParser:n.boxParser?n.boxParser:null,constants:n.constants?n.constants:null,dashConstants:n.dashConstants?n.dashConstants:null,urlUtils:n.urlUtils?n.urlUtils:null,requestTimeout:isNaN(n.requestTimeout)?0:n.requestTimeout,errors:n.errors})).load(e)},abort:function(){a&&a.abort()}}}a.__dashjs_factory_name="URLLoader";i=i.default.getClassFactory(a);n.default=i,t.exports=n.default},{162:162,47:47}],164:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),e=(r=i)&&r.__esModule?r:{default:r};function a(e){var o=(e=e||{}).requestModifier;return{load:function(e){var t=new Date,n=e.request,r=new XMLHttpRequest;if(r.open(e.method,e.url,!0),n.responseType&&(r.responseType=n.responseType),n.range&&r.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=t),o&&(r=o.modifyRequestHeader(r)),e.headers)for(var i in e.headers){var a=e.headers[i];a&&r.setRequestHeader(i,a)}r.withCredentials=e.withCredentials,r.onload=e.onload,r.onloadend=e.onend,r.onerror=e.onerror,r.onprogress=e.progress,r.onabort=e.onabort,r.ontimeout=e.ontimeout,r.timeout=e.timeout,r.send(),e.response=r},abort:function(e){(e=e.response).onloadend=e.onerror=e.onprogress=void 0,e.abort()}}}a.__dashjs_factory_name="XHRLoader";e=e.default.getClassFactory(a);n.default=e,t.exports=n.default},{47:47}],165:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"!==r.schemeIdUri.toLowerCase()||"cenc"!==r.value.toLowerCase()&&"cbcs"!==r.value.toLowerCase()||(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,0<r&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,t){t=a.parsePSSHList(t);return e&&t.hasOwnProperty(e.uuid.toLowerCase())?t[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),n={},r=0;;){var i,a,o=void 0,s=r;if(r>=t.buffer.byteLength)break;if(i=r+t.getUint32(r),r+=4,1886614376===t.getUint32(r))if(r+=4,0===(a=t.getUint8(r))||1===a){r++,r+=3,o="";for(var u=void 0,l=void 0,u=0;u<4;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=4,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<6;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;r+=6,o=o.toLowerCase(),t.getUint32(r),r+=4,n[o]=t.buffer.slice(s,i),r=i}else r=i;else r=i}return n}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}n.default=i,t.exports=n.default},{}],166:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var c=r(e(168)),h=r(e(169)),i=r(e(167)),a=r(e(174)),p=r(e(176)),g=r(e(177)),_=r(e(175)),m=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],E=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function o(){var l=void 0,d=this.context;function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}return l={createProtectionSystem:function(e){var t=null,n=(0,h.default)(d).getInstance();n.setConfig({debug:e.debug,BASE64:e.BASE64}),n.initialize();var r,i,a,o,s,u=(r=(u=e).debug,i=r.getLogger(l),a=u.eventBus,o=u.errHandler,(s=u.videoModel?u.videoModel.getElement():null)&&void 0===s.onencrypted||s&&void 0===s.mediaKeys?f(s,E)?(i.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,g.default)(d).create({debug:r,eventBus:a,events:u.events,api:f(s,E)})):f(s,m)?(i.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,_.default)(d).create({debug:r,eventBus:a,errHandler:o,events:u.events,api:f(s,m)})):(i.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(i.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,p.default)(d).create({debug:r,eventBus:a,events:u.events})));return!t&&u&&(t=(0,c.default)(d).create({protectionModel:u,protectionKeyController:n,eventBus:e.eventBus,debug:e.debug,events:e.events,BASE64:e.BASE64,constants:e.constants,cmcdModel:e.cmcdModel,settings:e.settings}),e.capabilities.setEncryptedMediaSupported(!0)),t}}}o.__dashjs_factory_name="Protection";e=dashjs.FactoryMaker.getClassFactory(o);e.events=i.default,e.errors=a.default,dashjs.FactoryMaker.updateClassFactory(o.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{167:167,168:168,169:169,174:174,175:175,176:176,177:177}],167:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};var i,a=e(55);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.LICENSE_REQUEST_SENDING="public_licenseRequestSending",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((i=a)&&i.__esModule?i:{default:i})["default"]),o);n.default=e,t.exports=n.default},{55:55}],168:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var x=r(e(165)),F=r(e(189)),U=r(e(186)),B=r(e(174)),k=r(e(239)),G=r(e(187)),j=r(e(188)),Y=e(255),H=r(e(49)),q=r(e(112));function i(e){var t,y=(e=e||{}).protectionKeyController,v=e.protectionModel,T=e.eventBus,S=e.events,n=e.debug,d=e.BASE64,s=e.constants,i=[],A=e.cmcdModel,I=e.settings,R=void 0,f=void 0,b=void 0,a=void 0,r=void 0,u=void 0,M=void 0,D=void 0,N=void 0;function o(){if(!(T&&T.hasOwnProperty("on")&&y&&y.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function c(e,t){var n=x.default.getPSSHForKeySystem(M,e),r=C(M);if(n){if(l(n))return;try{v.createKeySession(n,r,_(M),t)}catch(e){T.trigger(S.KEY_SESSION_CREATED,{data:null,error:new k.default(B.default.KEY_SESSION_CREATED_ERROR_CODE,B.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e?v.createKeySession(e,r,_(M),t):T.trigger(S.KEY_SESSION_CREATED,{data:null,error:new k.default(B.default.KEY_SESSION_CREATED_ERROR_CODE,B.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(M?M.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function l(e){if(e)try{for(var t=v.getAllInitData(),n=0;n<t.length;n++)if(y.initDataEquals(e,t[n]))return R.debug("DRM: Ignoring initData because we have already seen it!"),1;return}catch(e){return}}function h(e,t){o(),v.loadKeySession(e,t,_(M))}function p(e){o(),e?(v.setMediaElement(e),T.on(S.NEED_KEY,P,this)):null===e&&(v.setMediaElement(e),T.off(S.NEED_KEY,P,this))}function C(e){var t=null;return e&&(e=e.systemString,a&&(t=e in a?a[e]:null)),t}function g(e){var t=C(e),n=[],r=[],i=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:u,a=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:u,o=_(e),e=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",t=t&&t.persistentState?t.persistentState:"temporary"===o?"optional":"required";return b.forEach(function(e){e.type===s.AUDIO?n.push(new F.default(e.codec,i)):e.type===s.VIDEO&&r.push(new F.default(e.codec,a))}),new U.default(n,r,e,t,[o])}function _(e){e=C(e);return e&&e.sessionType?e.sessionType:r}function m(n,e){n=n.sort(function(e,t){return(a&&a[e.ks.systemString]&&0<=a[e.ks.systemString].priority?a[e.ks.systemString].priority:n.length)-(a&&a[t.ks.systemString]&&0<=a[t.ks.systemString].priority?a[t.ks.systemString].priority:n.length)}),void 0===M?function(e,a){var o=this,t=[],s=void 0;M=null,f.push(e);for(var n=0;n<e.length;n++)t.push({ks:e[n].ks,configs:[g(e[n].ks)]});function u(e){T.off(S.KEY_SYSTEM_ACCESS_COMPLETE,u,o),e.error?(M=void 0,T.off(S.INTERNAL_KEY_SYSTEM_SELECTED,r,o),a||T.trigger(S.KEY_SYSTEM_SELECTED,{data:null,error:new k.default(B.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,B.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+e.error)})):(l=e.data,R.info("DRM: KeySystem Access Granted ("+l.keySystem.systemString+")!  Selecting key system..."),v.selectKeySystem(l))}var l=void 0,r=function e(t){if(T.off(S.INTERNAL_KEY_SYSTEM_SELECTED,e,o),T.off(S.KEY_SYSTEM_ACCESS_COMPLETE,u,o),t.error)M=void 0,a||T.trigger(S.KEY_SYSTEM_SELECTED,{data:null,error:new k.default(B.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,B.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+t.error)});else{if(!v)return;M=v.getKeySystem(),T.trigger(S.KEY_SYSTEM_SELECTED,{data:l});var n=C(M);n&&n.serverCertificate&&0<n.serverCertificate.length&&v.setServerCertificate(d.decodeArray(n.serverCertificate).buffer);for(var r,i=0;i<f.length;i++)for(s=0;s<f[i].length;s++)if(M===f[i][s].ks){y.isClearKey(M)&&n&&n.hasOwnProperty("clearkeys")&&(r={kids:Object.keys(n.clearkeys)},f[i][s].initData=(new TextEncoder).encode(JSON.stringify(r))),f[i][s].sessionId?h(f[i][s].sessionId,f[i][s].initData):null!==f[i][s].initData&&c(f[i][s].initData,f[i][s].cdmData);break}}};T.on(S.INTERNAL_KEY_SYSTEM_SELECTED,r,o),T.on(S.KEY_SYSTEM_ACCESS_COMPLETE,u,o),v.requestKeySystemAccess(t)}(n,e):M?function(t,n){var r=this,e=[],i=t.findIndex(function(e){return e.ks===M});if(-1===i||!t[i].initData)return;if(l(x.default.getPSSHForKeySystem(M,t[i].initData)))return;e.push({ks:t[i].ks,configs:[g(M)]});function a(e){T.off(S.KEY_SYSTEM_ACCESS_COMPLETE,a,r),e.error?n||T.trigger(S.KEY_SYSTEM_SELECTED,{error:new k.default(B.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,B.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+e.error)}):(R.info("DRM: KeySystem Access Granted"),T.trigger(S.KEY_SYSTEM_SELECTED,{data:e.data}),e=C(M),y.isClearKey(M)&&e&&e.hasOwnProperty("clearkeys")&&(e={kids:Object.keys(e.clearkeys)},t[i].initData=(new TextEncoder).encode(JSON.stringify(e))),t[i].sessionId?h(t[i].sessionId,t[i].initData):t[i].initData&&c(t[i].initData,t[i].cdmData))}T.on(S.KEY_SYSTEM_ACCESS_COMPLETE,a,r),v.requestKeySystemAccess(e)}(n,e):f.push(n)}function O(e,t){T.trigger(S.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function E(e){e.error?T.trigger(S.KEY_STATUSES_CHANGED,{data:null,error:e.error}):R.debug("DRM: key status = "+e.status)}function w(e){R.debug("DRM: onKeyMessage");var t=e.data;T.trigger(S.KEY_MESSAGE,{data:t});var r=t.messageType?t.messageType:"license-request",n=t.message,i=t.sessionToken,a=C(M),o=M?M.systemString:null,s=y.getLicenseServer(M,a,r),u={sessionToken:i,messageType:r};if(n&&0!==n.byteLength){if(!s)return R.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+i.getSessionID()),void O(u);if(y.isClearKey(M)){var l=y.processClearKeyLicenseRequest(M,a,n);if(l)return R.debug("DRM: ClearKey license request handled by application!"),O(u),void v.updateKeySession(i,l)}var d,f,c,h,p,g,_,m,E,t=null;a&&a.serverURL?"string"==typeof(l=a.serverURL)&&""!==l?t=l:"object"==typeof l&&l.hasOwnProperty(r)&&(t=l[r]):t=a&&a.laURL&&""!==a.laURL?a.laURL:y.isClearKey(M)?M.getLicenseServerUrlFromMediaInfo(b):(_=x.default.getPSSHData(i.initData),(t=M.getLicenseServerURLFromInitData(_))||e.data.laURL),(t=s.getServerURLFromMessage(t,n,r))?(f=!(d={}),_=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(f=!0),d[t]=e[t]},a&&_(a.httpRequestHeaders),_(M.getRequestHeadersFromMessage(n)),a&&"boolean"==typeof a.withCredentials&&(f=a.withCredentials),c=function(e,t,n,r){r=e.response?s.getErrorResponse(e.response,n,r):"NONE";O(t,new k.default(B.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,B.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+r))},h=function(t){var n;v&&(200===t.status?(n=new j.default(t.responseURL,H.default.parseHttpHeaders(t.getAllResponseHeaders?t.getAllResponseHeaders():null),t.response),L(N,n).then(function(){var e=s.getLicenseMessage(n.data,o,r);null!==e?(O(u),v.updateKeySession(i,e)):c(t,u,o,r)})):c(t,u,o,r))},p=function(e){O(u,new k.default(B.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,B.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+o+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},g=function(e){O(u,new k.default(B.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,B.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+o+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},e=M.getLicenseRequestFromMessage(n),_=s.getHTTPMethod(r),n=s.getResponseType(o,r),m=a&&!isNaN(a.httpTimeout)?a.httpTimeout:8e3,a=i.getSessionID()||null,E=new G.default(t,_,n,d,f,r,a,e),L(D,E).then(function(){!function e(t,n,r,i,a,o){var s=new XMLHttpRequest;{var u;I.get().streaming.cmcd&&I.get().streaming.cmcd.enabled&&((d=I.get().streaming.cmcd.mode)!==q.default.CMCD_MODE_QUERY||(u=A.getQueryParameter({url:t.url,type:Y.HTTPRequest.LICENSE}))&&(t.url=H.default.addAditionalQueryParameterToUrl(t.url,[u])))}s.open(t.method,t.url,!0);s.responseType=t.responseType;s.withCredentials=t.withCredentials;0<r&&(s.timeout=r);for(var l in t.headers)s.setRequestHeader(l,t.headers[l]);if(I.get().streaming.cmcd&&I.get().streaming.cmcd.enabled){var d=I.get().streaming.cmcd.mode;if(d===q.default.CMCD_MODE_HEADER){var f=A.getHeaderParameters({url:t.url,type:Y.HTTPRequest.LICENSE});if(f)for(var c in f){var h=f[c];h&&s.setRequestHeader(c,h)}}}var p=function(){n--,setTimeout(function(){e(t,n,r,i,a,o)},1e3)};s.onload=function(){200===this.status||n<=0?i(this):(R.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+n),p())};s.ontimeout=s.onerror=function(){n<=0?o(this):(R.warn("License request network request failed . Retrying it... Pending retries: "+n),p())};s.onabort=function(){a(this)};T.trigger(S.LICENSE_REQUEST_SENDING,{url:t.url,headers:t.headers,payload:t.data,sessionId:t.sessionId});s.send(t.data)}(E,3,m,h,p,g)})):O(u,new k.default(B.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,B.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else O(u,new k.default(B.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,B.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function P(e,t){if(R.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===b.length&&(R.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))i.push(setTimeout(function(){P(e,t)},500));else{var n=e.key.initData;if(ArrayBuffer.isView(n)&&(n=n.buffer),M){var r=x.default.getPSSHForKeySystem(M,n);if(r&&l(r))return}R.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(n)));n=y.getSupportedKeySystems(n,a);0!==n.length?m(n,!1):R.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else R.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}function L(e,n){return e?e.reduce(function(e,t){return e.then(function(){return t(n)})},Promise.resolve()):Promise.resolve()}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");o(),T.on(S.INTERNAL_KEY_MESSAGE,w,this),T.on(S.INTERNAL_KEY_STATUS_CHANGED,E,this),b.push(e),(e=y.getSupportedKeySystemsFromContentProtection(e.contentProtection))&&0<e.length&&m(e,!0)},clearMediaInfoArrayByStreamId:function(t){b=b.filter(function(e){return e.streamInfo.id!==t})},createKeySession:c,loadKeySession:h,removeKeySession:function(e){o(),v.removeKeySession(e)},closeKeySession:function(e){o(),v.closeKeySession(e)},setServerCertificate:function(e){o(),v.setServerCertificate(e)},setMediaElement:p,setSessionType:function(e){r=e},setRobustnessLevel:function(e){u=e},setProtectionData:function(e){a=e,y.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return o(),y.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return y?y.getKeySystems():[]},setKeySystems:function(e){y&&y.setKeySystems(e)},setLicenseRequestFilters:function(e){D=e},setLicenseResponseFilters:function(e){N=e},stop:function(){v&&v.stop()},reset:function(){o(),D=[],N=[],T.off(S.INTERNAL_KEY_MESSAGE,w,this),T.off(S.INTERNAL_KEY_STATUS_CHANGED,E,this),p(null),M=void 0,v&&(v.reset(),v=null),i.forEach(function(e){return clearTimeout(e)}),i=[],b=[]}},R=n.getLogger(t),f=[],b=[],r="temporary",u="",D=[],N=[],t}i.__dashjs_factory_name="ProtectionController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{112:112,165:165,174:174,186:186,187:187,188:188,189:189,239:239,255:255,49:49}],169:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(165)),d=r(e(170)),f=r(e(172)),c=r(e(173)),h=r(e(171)),p=r(e(179)),g=r(e(180)),_=r(e(181)),m=r(e(178)),E=r(e(114));function i(){var r=this.context,t=void 0,n=void 0,i=void 0,u=void 0,a=void 0,o=void 0,s=void 0;return t={initialize:function(){u=[];var e=(0,h.default)(r).getInstance({BASE64:a});u.push(e),e=(0,c.default)(r).getInstance({BASE64:a}),u.push(e),e=(0,d.default)(r).getInstance({BASE64:a}),u.push(e),o=e,e=(0,f.default)(r).getInstance({BASE64:a,debug:n}),u.push(e),s=e},setProtectionData:function(e){for(var t,n=0;n<u.length;n++){var r=u[n];r.hasOwnProperty("init")&&r.init((t=r.systemString,r=void 0,r=null,e&&(r=t in e?e[t]:null),r))}},isClearKey:function(e){return e===o||e===s},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0},getKeySystems:function(){return u},setKeySystems:function(e){u=e},getKeySystemBySystemString:function(e){for(var t=0;t<u.length;t++)if(u[t].systemString===e)return u[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t=void 0,n=void 0,r=void 0,i=void 0,a=[];if(e)for(var o,s=l.default.findCencContentProtection(e),r=0;r<u.length;++r)for(n=u[r],i=0;i<e.length;++i){(t=e[i]).schemeIdUri.toLowerCase()===n.schemeIdURI&&(o=n.getInitData(t,s),a.push({ks:u[r],initData:o,cdmData:n.getCDMData(),sessionId:n.getSessionId(t)}))}return a},getSupportedKeySystems:function(e,t){for(var n,r=[],i=l.default.parsePSSHList(e),a=void 0,o=0;o<u.length;++o)n=(a=u[o]).systemString,n=!t||n in t,a.uuid in i&&n&&r.push({ks:a,initData:i[a.uuid],cdmData:a.getCDMData(),sessionId:a.getSessionId()});return r},getLicenseServer:function(e,t,n){return"license-release"===n||"individualization-request"===n?null:(n=null,t&&t.hasOwnProperty("drmtoday")?n=(0,p.default)(r).getInstance({BASE64:a}):e.systemString===E.default.WIDEVINE_KEYSTEM_STRING?n=(0,_.default)(r).getInstance():e.systemString===E.default.PLAYREADY_KEYSTEM_STRING?n=(0,g.default)(r).getInstance():e.systemString===E.default.CLEARKEY_KEYSTEM_STRING&&(n=(0,m.default)(r).getInstance()),n)},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return i.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,i=n.getLogger(t)),e.BASE64&&(a=e.BASE64))}}}i.__dashjs_factory_name="ProtectionKeyController",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{114:114,165:165,170:170,171:171,172:172,173:173,178:178,179:179,180:180,181:181}],170:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(184)),l=r(e(182)),a=r(e(165)),e=r(e(114)),o="e2719d58-a985-b3c9-781a-b030af78d30e",s=e.default.CLEARKEY_KEYSTEM_STRING,c="urn:uuid:"+o;function i(e){var i=(e=e||{}).BASE64,f={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]};return{uuid:o,schemeIdURI:c,systemString:s,getInitData:function(e,t){try{var n,r=a.default.parseInitDataFromContentProtection(e,i);return!r&&t&&(n={kids:[function(e){try{var t=e.replace(/-/g,"");return(t=btoa(t.match(/\w{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join(""))).replace(/=/g,"")}catch(e){return null}}(t["cenc:default_KID"])]},r=(new TextEncoder).encode(JSON.stringify(n))),r}catch(e){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e)))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getLicenseServerUrlFromMediaInfo:function(e){try{if(!e||0===e.length)return null;for(var t=0,n=null;t<e.length&&!n;){var r=e[t];if(r&&r.contentProtection&&0<r.contentProtection.length){var i=r.contentProtection.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===c});if(i&&0<i.length)for(var a=0;a<i.length&&!n;){for(var o=i[a],s=0;s<f.attributes.length&&!n;){for(var u=0,l=f.attributes[s];u<f.prefixes.length&&!n;){var d=f.prefixes[u];o[l]&&o[l].__prefix&&o[l].__prefix===d&&o[l].__text&&(n=o[l].__text),u+=1}s+=1}a+=1}}t+=1}return n}catch(e){return null}},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var o=r.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");i.push(new u.default(o,s))}n=new l.default(i)}return n}}}i.__dashjs_factory_name="KeySystemClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{114:114,165:165,182:182,184:184}],171:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var f=r(e(165)),e=r(e(114)),i="9a04f079-9840-4286-ab92-e65be0885f95",a=e.default.PLAYREADY_KEYSTEM_STRING,o=void 0;function s(e){var s="utf-16",l=(e=e||{}).BASE64;function d(){if(!l||!l.hasOwnProperty("decodeArray")||!l.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:i,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:a,getInitData:function(e){var t,n,r=new Uint8Array([112,115,115,104,0,0,0,0]),i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),a=0,o=null,s=void 0,u=void 0;if(d(),!e)return null;if("pssh"in e)return f.default.parseInitDataFromContentProtection(e,l);if("pro"in e)o=l.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;o=l.decodeArray(e.prheader.__text)}return t=o.length,n=4+r.length+i.length+4+t,e=new ArrayBuffer(n),s=new Uint8Array(e),(u=new DataView(e)).setUint32(0,n),a+=4,s.set(r,4),a+=r.length,s.set(i,a),a+=i.length,u.setUint32(a,t),a+=4,s.set(o,a),s.buffer},getRequestHeadersFromMessage:function(e){for(var t=void 0,n={},r=new DOMParser,e=new("utf-16"===s?Uint16Array:Uint8Array)(e),e=String.fromCharCode.apply(null,e),i=(t=r.parseFromString(e,"application/xml")).getElementsByTagName("name"),a=t.getElementsByTagName("value"),o=0;o<i.length;o++)n[i[o].childNodes[0].nodeValue]=a[o].childNodes[0].nodeValue;return n.hasOwnProperty("Content")&&(n["Content-Type"]=n.Content,delete n.Content),n.hasOwnProperty("Content-Type")||(n["Content-Type"]="text/xml; charset=utf-8"),n},getLicenseRequestFromMessage:function(e){var t=null,n=new DOMParser,r=new("utf-16"===s?Uint16Array:Uint8Array)(e);return d(),r=String.fromCharCode.apply(null,r),(r=n.parseFromString(r,"application/xml")).getElementsByTagName("PlayReadyKeyMessage")[0]?((r=r.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue)&&(t=l.decode(r)),t):e},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,a=0;a<n;a++){var o=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===o){var u=e.slice(r,r+s),o=String.fromCharCode.apply(null,new Uint16Array(u)),u=i.parseFromString(o,"application/xml");if(u.getElementsByTagName("LA_URL")[0]){o=u.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(o)return o}if(u.getElementsByTagName("LUI_URL")[0]){u=u.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(u)return u}}else r+=s}return null},getCDMData:function(){var e=void 0,t=void 0,n=void 0,r=void 0;if(d(),o&&o.cdmData){for(e=[],r=0;r<o.cdmData.length;++r)e.push(o.cdmData.charCodeAt(r)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=l.encode(e),t='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),n=[],r=0;r<t.length;++r)n.push(t.charCodeAt(r)),n.push(0);return new Uint8Array(n).buffer}return null},getSessionId:function(e){return o&&o.sessionId?o.sessionId:e&&e.sessionId?e.sessionId:null},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');s=e},init:function(e){e&&(o=e)}}}s.__dashjs_factory_name="KeySystemPlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(s),t.exports=n.default},{114:114,165:165}],172:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(184)),d=r(e(182)),i=r(e(165)),e=r(e(114)),a="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",o=e.default.CLEARKEY_KEYSTEM_STRING;function s(e){var t=e.BASE64,u=e.debug.getLogger(void 0);return{uuid:a,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:o,getInitData:function(e){return i.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var o=r.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");i.push(new l.default(o,s))}n=new d.default(i),u.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}s.__dashjs_factory_name="KeySystemW3CClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(s),t.exports=n.default},{114:114,165:165,182:182,184:184}],173:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(165)),e=r(e(114)),a="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",o=e.default.WIDEVINE_KEYSTEM_STRING;function s(e){var t=null,n=(e=e||{}).BASE64;return{uuid:a,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:o,init:function(e){e&&(t=e)},getInitData:function(e){return i.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}}}s.__dashjs_factory_name="KeySystemWidevine",n.default=dashjs.FactoryMaker.getSingletonFactory(s),t.exports=n.default},{114:114,165:165}],174:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};var i,a=e(52);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((i=a)&&i.__esModule?i:{default:i})["default"]),o);n.default=e,t.exports=n.default},{52:52}],175:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var v=r(e(169)),T=r(e(190)),S=r(e(239)),A=r(e(183)),I=r(e(186)),R=r(e(185)),b=r(e(174));function i(e){e=e||{};var t=this.context,h=e.eventBus,p=e.events,n=e.debug,i=e.api,a=e.errHandler,r=void 0,o=void 0,g=void 0,s=void 0,_=void 0,u=void 0,l=void 0,d=void 0,f=void 0;function c(){g&&y();for(var e=0;e<l.length;e++)m(l[e]);h.trigger(p.TEARDOWN_COMPLETE)}function m(t){try{g[i.cancelKeyRequest](s.systemString,t.sessionID)}catch(e){h.trigger(p.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionID+") "+e.message})}}function E(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID==t)return e[r];return null}return null}function y(){g.removeEventListener(i.keyerror,f),g.removeEventListener(i.needkey,f),g.removeEventListener(i.keymessage,f),g.removeEventListener(i.keyadded,f)}return r={getAllInitData:function(){for(var e=[],t=0;t<u.length;t++)e.push(u[t].initData);for(t=0;t<l.length;t++)e.push(l[t].initData);return e},requestKeySystemAccess:function(e){for(var t=(t=g)||document.createElement("video"),n=!1,r=0;r<e.length;r++)for(var i=e[r].ks.systemString,a=e[r].configs,o=null,s=null,u=0;u<a.length;u++){var l=a[u].videoCapabilities;if(l&&0!==l.length){s=[];for(var d=0;d<l.length;d++)""!==t.canPlayType(l[d].contentType,i)&&s.push(l[d])}if(s&&(!s||0!==s.length)){n=!0;var f=new I.default(o,s),c=_.getKeySystemBySystemString(i);h.trigger(p.KEY_SYSTEM_ACCESS_COMPLETE,{data:new R.default(c,f)});break}}n||h.trigger(p.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return s},selectKeySystem:function(e){s=e.keySystem,h.trigger(p.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){if(g!==e){if(g){y();for(var t=0;t<l.length;t++)m(l[t]);l=[]}(g=e)&&(g.addEventListener(i.keyerror,f),g.addEventListener(i.needkey,f),g.addEventListener(i.keymessage,f),g.addEventListener(i.keyadded,f),h.trigger(p.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!s)throw new Error("Can not create sessions until you have selected a key system");if(d||0===l.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return u.push(t),g[i.generateKeyRequest](s.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionID;if(_.isClearKey(s))for(var r=0;r<t.keyPairs.length;r++)g[i.addKey](s.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else g[i.addKey](s.systemString,new Uint8Array(t),new Uint8Array(e.initData),n)},closeKeySession:m,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:c,reset:c},o=n.getLogger(r),u=[],l=[],_=(s=g=null,v.default)(t).getInstance(),f={handleEvent:function(e){var t=null;switch(e.type){case i.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;h.trigger(p.NEED_KEY,{key:new T.default(n,"cenc")});break;case i.keyerror:if(t=(t=E(l,e.sessionId))||E(u,e.sessionId)){var n=b.default.MEDIA_KEYERR_CODE,r="";switch(e.errorCode.code){case 1:n=b.default.MEDIA_KEYERR_UNKNOWN_CODE,r+="MEDIA_KEYERR_UNKNOWN - "+b.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:n=b.default.MEDIA_KEYERR_CLIENT_CODE,r+="MEDIA_KEYERR_CLIENT - "+b.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:n=b.default.MEDIA_KEYERR_SERVICE_CODE,r+="MEDIA_KEYERR_SERVICE - "+b.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:n=b.default.MEDIA_KEYERR_OUTPUT_CODE,r+="MEDIA_KEYERR_OUTPUT - "+b.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:n=b.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,r+="MEDIA_KEYERR_HARDWARECHANGE - "+b.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:n=b.default.MEDIA_KEYERR_DOMAIN_CODE,r+="MEDIA_KEYERR_DOMAIN - "+b.default.MEDIA_KEYERR_DOMAIN_MESSAGE}r+="  System Code = "+e.systemCode,h.trigger(p.KEY_ERROR,{data:new S.default(n,r,t)})}else o.error("No session token found for key error");break;case i.keyadded:(t=(t=E(l,e.sessionId))||E(u,e.sessionId))?(o.debug("DRM: Key added."),h.trigger(p.KEY_ADDED,{data:t})):o.debug("No session token found for key added");break;case i.keymessage:(d=null!==e.sessionId&&void 0!==e.sessionId)?!(t=E(l,e.sessionId))&&0<u.length&&(t=u.shift(),l.push(t),t.sessionID=e.sessionId,h.trigger(p.KEY_SESSION_CREATED,{data:t})):0<u.length&&(t=u.shift(),l.push(t),0!==u.length&&a.error(new S.default(b.default.MEDIA_KEY_MESSAGE_ERROR_CODE,b.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),t?(r=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,t.keyMessage=r,h.trigger(p.INTERNAL_KEY_MESSAGE,{data:new A.default(t,r,e.defaultURL)})):o.warn("No session token found for key message")}}},r}i.__dashjs_factory_name="ProtectionModel_01b",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{169:169,174:174,183:183,185:185,186:186,190:190,239:239}],176:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var m=r(e(169)),E=r(e(190)),y=r(e(174)),v=r(e(239)),T=r(e(183)),S=r(e(185)),A=r(e(114));function i(e){e=e||{};var t=this.context,o=e.eventBus,s=e.events,n=e.debug,r=void 0,u=void 0,l=void 0,i=void 0,d=void 0,f=void 0,a=void 0,c=void 0;function h(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function p(e){for(var t=0;t<f.length;t++)if(f[t]===e){f.splice(t,1);break}}function g(e){var t=void 0,n=void 0;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function _(t,e,n,r){var i={session:t,initData:e,sessionId:r,handleEvent:function(e){switch(e.type){case"keystatuseschange":o.trigger(s.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=g(arguments);"expired"===e.status?o.trigger(s.INTERNAL_KEY_STATUS_CHANGED,{error:new v.default(y.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,y.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):o.trigger(s.INTERNAL_KEY_STATUS_CHANGED,e)});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;o.trigger(s.INTERNAL_KEY_MESSAGE,{data:new T.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return t.sessionId},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){var e=!1;return t.keyStatuses.forEach(function(){"usable"===g(arguments).status&&(e=!0)}),e},getSessionType:function(){return n}};return t.addEventListener("keystatuseschange",i),t.addEventListener("message",i),t.closed.then(function(){p(i),u.debug("DRM: Session closed.  SessionID = "+i.getSessionID()),o.trigger(s.KEY_SESSION_CLOSED,{data:i.getSessionID()})}),f.push(i),i}return r={getAllInitData:function(){for(var e=[],t=0;t<f.length;t++)f[t].initData&&e.push(f[t].initData);return e},requestKeySystemAccess:function(e){!function i(a,e){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess)return void o.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"});!function(t){var n=a[t].ks,e=a[t].configs,r=n.systemString;r===A.default.PLAYREADY_KEYSTEM_STRING&&"required"===e[0].persistentState&&(r+=".recommendation"),navigator.requestMediaKeySystemAccess(r,e).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,t=new S.default(n,t);t.mksa=e,o.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{data:t})}).catch(function(e){++t<a.length?i(a,t):o.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+e.message})})}(e)}(e,0)},getKeySystem:function(){return l},selectKeySystem:function(t){t.mksa.createMediaKeys().then(function(e){l=t.keySystem,d=e,i?i.setMediaKeys(d).then(function(){o.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED)}):o.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED)}).catch(function(){o.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})},setMediaElement:function(e){i!==e&&(i&&(i.removeEventListener("encrypted",a),i.setMediaKeys&&i.setMediaKeys(null)),(i=e)&&(i.addEventListener("encrypted",a),i.setMediaKeys&&d&&i.setMediaKeys(d)))},setServerCertificate:function(e){if(!l||!d)throw new Error("Can not set server certificate until you have selected a key system");d.setServerCertificate(e).then(function(){u.info("DRM: License server certificate successfully updated."),o.trigger(s.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){o.trigger(s.SERVER_CERTIFICATE_UPDATED,{error:new v.default(y.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,y.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})},createKeySession:function(e,t,n){if(!l||!d)throw new Error("Can not create sessions until you have selected a key system");var r=d.createSession(n),i=_(r,e,n),t=this.getKeySystem().systemString===A.default.CLEARKEY_KEYSTEM_STRING&&(e||t&&t.clearkeys)?"keyids":"cenc";r.generateRequest(t,e).then(function(){u.debug("DRM: Session created.  SessionID = "+i.getSessionID()),o.trigger(s.KEY_SESSION_CREATED,{data:i})}).catch(function(e){p(i),o.trigger(s.KEY_SESSION_CREATED,{data:null,error:new v.default(y.default.KEY_SESSION_CREATED_ERROR_CODE,y.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})},updateKeySession:function(t,e){var n=t.session;c.isClearKey(l)&&(e=e.toJWK()),n.update(e).catch(function(e){o.trigger(s.KEY_ERROR,{data:new v.default(y.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)})})},loadKeySession:function(t,e,n){if(!l||!d)throw new Error("Can not load sessions until you have selected a key system");for(var r=0;r<f.length;r++)if(t===f[r].sessionId)return void u.warn("DRM: Ignoring session ID because we have already seen it!");var i=d.createSession(n),a=_(i,e,n,t);i.load(t).then(function(e){e?(u.debug("DRM: Session loaded.  SessionID = "+a.getSessionID()),o.trigger(s.KEY_SESSION_CREATED,{data:a})):(p(a),o.trigger(s.KEY_SESSION_CREATED,{data:null,error:new v.default(y.default.KEY_SESSION_CREATED_ERROR_CODE,y.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))}).catch(function(e){p(a),o.trigger(s.KEY_SESSION_CREATED,{data:null,error:new v.default(y.default.KEY_SESSION_CREATED_ERROR_CODE,y.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})})},removeKeySession:function(t){t.session.remove().then(function(){u.debug("DRM: Session removed.  SessionID = "+t.getSessionID()),o.trigger(s.KEY_SESSION_REMOVED,{data:t.getSessionID()})},function(e){o.trigger(s.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionID()+"). "+e.name})})},closeKeySession:function(t){h(t).catch(function(e){p(t),o.trigger(s.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionID()+") "+e.name})})},stop:function(){for(var e=void 0,t=0;t<f.length;t++)(e=f[t]).getUsable()||h(e).catch(function(){p(e)})},reset:function(){var n=f.length,r=void 0;0!==n?function(){for(var t=function(e){p(e),0===f.length&&(i?(i.removeEventListener("encrypted",a),i.setMediaKeys(null).then(function(){o.trigger(s.TEARDOWN_COMPLETE)})):o.trigger(s.TEARDOWN_COMPLETE))},e=0;e<n;e++)!function(e){r.session.closed.then(function(){t(e)}),h(r).catch(function(){t(e)})}(r=f[e])}():o.trigger(s.TEARDOWN_COMPLETE)}},u=n.getLogger(r),f=[],c=(d=i=l=null,m.default)(t).getInstance(),a={handleEvent:function(e){var t;"encrypted"===e.type&&e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,o.trigger(s.NEED_KEY,{key:new E.default(t,e.initDataType)}))}},r}i.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{114:114,169:169,174:174,183:183,185:185,190:190,239:239}],177:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var E=r(e(169)),y=r(e(190)),v=r(e(239)),T=r(e(174)),S=r(e(183)),A=r(e(186)),I=r(e(185));function i(e){e=e||{};var t=this.context,p=e.eventBus,g=e.events,n=e.debug,_=e.api,r=void 0,a=void 0,i=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,m=void 0;function f(){try{for(var e=0;e<l.length;e++)c(l[e]);i&&i.removeEventListener(_.needkey,d),p.trigger(g.TEARDOWN_COMPLETE)}catch(e){p.trigger(g.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function c(e){var t=e.session;t.removeEventListener(_.error,e),t.removeEventListener(_.message,e),t.removeEventListener(_.ready,e),t.removeEventListener(_.close,e);for(var n=0;n<l.length;n++)if(l[n]===e){l.splice(n,1);break}t[_.release]()}function h(){function e(){i.removeEventListener("loadedmetadata",t),i[_.setMediaKeys](s),p.trigger(g.VIDEO_ELEMENT_SELECTED)}var t=null;1<=i.readyState?e():(t=e.bind(this),i.addEventListener("loadedmetadata",t))}return r={getAllInitData:function(){for(var e=[],t=0;t<l.length;t++)e.push(l[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++)for(var r=e[n].ks.systemString,i=e[n].configs,a=null,o=null,s=0;s<i.length;s++){var u=i[s].audioCapabilities,l=i[s].videoCapabilities;if(u&&0!==u.length){a=[];for(var d=0;d<u.length;d++)window[_.MediaKeys].isTypeSupported(r,u[d].contentType)&&a.push(u[d])}if(l&&0!==l.length){o=[];for(var f=0;f<l.length;f++)window[_.MediaKeys].isTypeSupported(r,l[f].contentType)&&o.push(l[f])}if(!(!a&&!o||a&&0===a.length||o&&0===o.length)){t=!0;var c=new A.default(a,o),h=m.getKeySystemBySystemString(r);p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{data:new I.default(h,c)});break}}t||p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return o},selectKeySystem:function(e){try{s=e.mediaKeys=new window[_.MediaKeys](e.keySystem.systemString),o=e.keySystem,u=e,i&&h(),p.trigger(g.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){p.trigger(g.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+o.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(e){i!==e&&(i&&i.removeEventListener(_.needkey,d),(i=e)&&(i.addEventListener(_.needkey,d),s&&h()))},createKeySession:function(e,t,n,r){if(!o||!s||!u)throw new Error("Can not create sessions until you have selected a key system");var i=null;if(u.ksConfiguration.videoCapabilities&&0<u.ksConfiguration.videoCapabilities.length&&(i=u.ksConfiguration.videoCapabilities[0]),null===i&&u.ksConfiguration.audioCapabilities&&0<u.ksConfiguration.audioCapabilities.length&&(i=u.ksConfiguration.audioCapabilities[0]),null===i)throw new Error("Can not create sessions for unknown content types.");i=i.contentType,r=s.createSession(i,new Uint8Array(e),r?new Uint8Array(r):null),e={session:r,initData:e,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case _.error:p.trigger(g.KEY_ERROR,{data:new v.default(T.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case _.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;p.trigger(g.INTERNAL_KEY_MESSAGE,{data:new S.default(this,t,e.destinationURL)});break;case _.ready:a.debug("DRM: Key added."),p.trigger(g.KEY_ADDED);break;case _.close:a.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),p.trigger(g.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}},r.addEventListener(_.error,e),r.addEventListener(_.message,e),r.addEventListener(_.ready,e),r.addEventListener(_.close,e),l.push(e),a.debug("DRM: Session created.  SessionID = "+e.getSessionID()),p.trigger(g.KEY_SESSION_CREATED,{data:e})},updateKeySession:function(e,t){e=e.session,m.isClearKey(o)?e.update(new Uint8Array(t.toJWK())):e.update(new Uint8Array(t))},closeKeySession:c,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:f,reset:f},a=n.getLogger(r),l=[],m=(u=s=o=i=null,E.default)(t).getInstance(),d={handleEvent:function(e){e.type===_.needkey&&e.initData&&(e=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,p.trigger(g.NEED_KEY,{key:new y.default(e,"cenc")}))}},r}i.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{169:169,174:174,183:183,185:185,186:186,190:190,239:239}],178:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(184)),o=r(e(182));function i(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],i=r.kid.replace(/=/g,""),r=r.k.replace(/=/g,"");t.push(new a.default(i,r))}return new o.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}i.__dashjs_factory_name="ClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{182:182,184:184}],179:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(114),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var n=(e=e||{}).BASE64,r={};r[a.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return n.decodeArray(e.license)},getErrorResponse:function(e){return e}},r[a.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}};return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return r[e].responseType},getLicenseMessage:function(e,t){return function(){if(!n||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),r[t].getLicenseMessage(e)},getErrorResponse:function(e,t){return r[t].getErrorResponse(e)}}}o.__dashjs_factory_name="DRMToday",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default},{114:114}],180:[function(e,t,n){"use strict";function r(){var s="http://schemas.xmlsoap.org/soap/envelope/";function u(e){e=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(e))}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return function(e){if(window.DOMParser){var t=u(e),t=(new window.DOMParser).parseFromString(t,"text/xml"),t=t?t.getElementsByTagNameNS(s,"Envelope")[0]:null,t=t?t.getElementsByTagNameNS(s,"Body")[0]:null;if(t?t.getElementsByTagNameNS(s,"Fault")[0]:null)return null}return e}.call(this,e)},getErrorResponse:function(e){return function(e){var t="",n="",r="";if(window.DOMParser){var i=u(e),a=(new window.DOMParser).parseFromString(i,"text/xml"),o=a?a.getElementsByTagNameNS(s,"Envelope")[0]:null,e=o?o.getElementsByTagNameNS(s,"Body")[0]:null,a=e?e.getElementsByTagNameNS(s,"Fault")[0]:null,o=a?a.getElementsByTagName("detail")[0]:null,e=o?o.getElementsByTagName("Exception")[0]:null,o=null;if(null===a)return i;t=(o=a.getElementsByTagName("faultstring")[0].firstChild)?o.nodeValue:null,null!==e&&(n=(o=e.getElementsByTagName("StatusCode")[0])?o.firstChild.nodeValue:null,e=(r=(o=e.getElementsByTagName("Message")[0])?o.firstChild.nodeValue:null)?r.lastIndexOf("[")+1:-1,o=r?r.indexOf("]"):-1,r=r?r.substring(e,o):"")}return t="code: "+n+", name: "+t,r&&(t+=", message: "+r),t}.call(this,e)}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="PlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],181:[function(e,t,n){"use strict";function r(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="Widevine",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],182:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"toJWK",value:function(){for(var e=void 0,t=this.keyPairs.length,n={keys:[]},e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),a=i.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(e=0;e<a;e++)s[e]=i.charCodeAt(e);return o}}]),a);function a(e,t){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}n.default=i,t.exports=n.default},{}],183:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.sessionToken=e,this.message=t,this.defaultURL=n,this.messageType=r||"license-request"}n.default=i,t.exports=n.default},{}],184:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.keyID=e,this.key=t}n.default=r,t.exports=n.default},{}],185:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.keySystem=e,this.ksConfiguration=t}n.default=r,t.exports=n.default},{}],186:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function a(e,t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.initDataTypes=["cenc"],e&&e.length&&(this.audioCapabilities=e),t&&t.length&&(this.videoCapabilities=t),this.distinctiveIdentifier=n,this.persistentState=r,this.sessionTypes=i}n.default=a,t.exports=n.default},{}],187:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function u(e,t,n,r,i,a,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.url=e,this.method=t,this.responseType=n,this.headers=r,this.withCredentials=i,this.messageType=a,this.sessionId=o,this.data=s}n.default=u,t.exports=n.default},{}],188:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.url=e,this.headers=t,this.data=n}n.default=r,t.exports=n.default},{}],189:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.contentType=e,this.robustness=t}n.default=r,t.exports=n.default},{}],190:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.initData=e,this.initDataType=t}n.default=r,t.exports=n.default},{}],191:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),e=(r=i)&&r.__esModule?r:{default:r};function a(){var i=[],a=0,o=0;return{push:function(e,t){var n=t&&t.droppedVideoFrames?t.droppedVideoFrames:0,r=t&&t.totalVideoFrames?t.totalVideoFrames:0,t=n-a;a=n,n=r-o,o=r,isNaN(e)||(i[e]?(i[e].droppedVideoFrames+=t,i[e].totalVideoFrames+=n):i[e]={droppedVideoFrames:t,totalVideoFrames:n})},getFrameHistory:function(){return i},reset:function(e){i=[],a=e.droppedVideoFrames,o=e.totalVideoFrames}}}a.__dashjs_factory_name="DroppedFramesHistory";e=e.default.getClassFactory(a);n.default=e,t.exports=n.default},{47:47}],192:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),e=(r=i)&&r.__esModule?r:{default:r};function a(e){var t=(e=e||{}).abrController,n=e.switchHistory,r=e.droppedFramesHistory,i=e.currentRequest,a=e.useBufferOccupancyABR,o=e.useL2AABR,s=e.useLoLPABR,u=e.streamProcessor?e.streamProcessor.getScheduleController():null,l=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null,d=e.videoModel?e.videoModel:null;function f(){return l?l.mediaInfo:null}return{getMediaType:function(){var e=f();return e?e.type:null},getMediaInfo:f,getDroppedFramesHistory:function(){return r},getCurrentRequest:function(){return i},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=f();return e?e.streamInfo:null},getScheduleController:function(){return u},getAbrController:function(){return t},getRepresentationInfo:function(){return l},useBufferOccupancyABR:function(){return a},useL2AABR:function(){return o},useLoLPABR:function(){return s},getVideoModel:function(){return d}}}a.__dashjs_factory_name="RulesContext",n.default=e.default.getClassFactory(a),t.exports=n.default},{47:47}],193:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r},o={DEFAULT:.5,STRONG:1,WEAK:0};function s(e,t,n){var r;return{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:(r=n)!==o.DEFAULT&&r!==o.STRONG&&r!==o.WEAK?o.DEFAULT:r}}s.__dashjs_factory_name="SwitchRequest";e=a.default.getClassFactory(s);e.NO_CHANGE=-1,e.PRIORITY=o,a.default.updateClassFactory(s.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{47:47}],194:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(193));function a(){var i=[],a=[];return{push:function(e){e.newValue===o.default.NO_CHANGE&&(e.newValue=e.oldValue),i[e.oldValue]||(i[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=(r=e.newValue-e.oldValue)<0?1:0,n=t?-r:0,r=t?0:1;i[e.oldValue].drops+=t,i[e.oldValue].dropSize+=n,i[e.oldValue].noDrops+=r,a.push({idx:e.oldValue,noDrop:r,drop:t,dropSize:n}),8<a.length&&(n=a.shift(),i[n.idx].drops-=n.drop,i[n.idx].dropSize-=n.dropSize,i[n.idx].noDrops-=n.noDrop)},getSwitchRequests:function(){return i},reset:function(){i=[],a=[]}}}a.__dashjs_factory_name="SwitchRequestHistory";i=i.default.getClassFactory(a);n.default=i,t.exports=n.default},{193:193,47:47}],195:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var v=r(e(112)),e=r(e(47));function i(e){var s=3,u=4,l=4,d=1.3,f=1.3,c=(e=e||{}).settings,h=void 0,p=void 0,g=void 0,_=void 0,m=void 0;function E(e,t,n,r){var i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;r=Math.pow(.5,n/r.slow);e.slowEstimate=(1-r)*t+r*e.slowEstimate,e.totalWeight+=n}function n(e,t,n){return c.get().streaming.abr.movingAverageMethod!==v.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var n=e?m.throughputHalfLife:m.latencyHalfLife,r=(e?g:_)[t];if(!r||r.totalWeight<=0)return NaN;t=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),n=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return e?Math.min(t,n):Math.max(t,n)}(e,t):function(e,t,n){n=function(e,t,n){var r=void 0,i=void 0,i=e?(r=h[t],n?s:u):(r=p[t],l);if(r){if(i>=r.length)i=r.length;else if(e)for(var a=1;a<i;++a){var o=r[r.length-a]/r[r.length-a-1];if((f<=o||o<=1/d)&&(i+=1)===r.length)break}}else i=0;return i}(e,t,n),t=(e?h:p)[t];return 0!==n&&t&&0!==t.length?(t=t.slice(-n)).reduce(function(e,t){return e+t})/t.length:NaN}(e,t,n)}function r(e,t){return n(!0,e,t)}function y(e){h[e]=h[e]||[],p[e]=p[e]||[],g[e]=g[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},_[e]=_[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function t(){h={},p={},g={},_={}}e={push:function(e,t,n){if(t.trace&&t.trace.length){var r=t.tresponse.getTime()-t.trequest.getTime()||1,i=t._tfinish.getTime()-t.tresponse.getTime()||1,a=t.trace.reduce(function(e,t){return e+t.b[0]},0),o=void 0,o=c.get().streaming.lowLatencyEnabled?t.trace.reduce(function(e,t){return e+t.d},0):n?i:r+i,n=Math.round(8*a/o);if(y(e),a=i,(o=e)===v.default.VIDEO?a<c.get().streaming.cacheLoadThresholds[v.default.VIDEO]:o===v.default.AUDIO&&a<c.get().streaming.cacheLoadThresholds[v.default.AUDIO]){if(0<h[e].length&&!h[e].hasCachedEntries)return;h[e].hasCachedEntries=!0}else h[e]&&h[e].hasCachedEntries&&(delete h[a=e],delete p[a],delete g[a],delete _[a],y(a));h[e].push(n),20<h[e].length&&h[e].shift(),p[e].push(r),20<p[e].length&&p[e].shift(),E(g[e],n,.001*i,m.throughputHalfLife),E(_[e],r,1,m.latencyHalfLife)}},getAverageThroughput:r,getSafeAverageThroughput:function(e,t){return t=r(e,t),isNaN(t)||(t*=c.get().streaming.abr.bandwidthSafetyFactor),t},getAverageLatency:function(e){return n(!1,e)},reset:t};return m={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},t(),e}i.__dashjs_factory_name="ThroughputHistory",n.default=e.default.getClassFactory(i),t.exports=n.default},{112:112,47:47}],196:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(203)),d=r(e(200)),f=r(e(197)),c=r(e(199)),h=r(e(202)),p=r(e(198)),g=r(e(201)),_=r(e(206)),i=r(e(47)),m=r(e(193)),E=r(e(112)),y="qualitySwitchRules",v="abandonFragmentRules";function a(e){e=e||{};var u=this.context,t=e.mediaPlayerModel,n=e.dashMetrics,r=e.settings,i=void 0,a=void 0;function o(e){return e.filter(function(e){return e.quality>m.default.NO_CHANGE})}function s(e){var t,n,r={},i=null,a=void 0,o=void 0,s=void 0;if(0!==e.length){for(r[m.default.PRIORITY.STRONG]={quality:m.default.NO_CHANGE,reason:null},r[m.default.PRIORITY.WEAK]={quality:m.default.NO_CHANGE,reason:null},r[m.default.PRIORITY.DEFAULT]={quality:m.default.NO_CHANGE,reason:null},a=0,t=e.length;a<t;a+=1)(n=e[a]).quality!==m.default.NO_CHANGE&&(r[n.priority].quality===m.default.NO_CHANGE||r[n.priority].quality>n.quality)&&(r[n.priority].quality=n.quality,r[n.priority].reason=n.reason||null);return r[m.default.PRIORITY.WEAK].quality!==m.default.NO_CHANGE&&(i=r[m.default.PRIORITY.WEAK]),r[m.default.PRIORITY.DEFAULT].quality!==m.default.NO_CHANGE&&(i=r[m.default.PRIORITY.DEFAULT]),r[m.default.PRIORITY.STRONG].quality!==m.default.NO_CHANGE&&(i=r[m.default.PRIORITY.STRONG]),i&&(o=i.quality,s=i.reason),(0,m.default)(u).create(o,s)}}return{initialize:function(){i=[],a=[],r.get().streaming.abr.useDefaultABRRules&&(r.get().streaming.abr.ABRStrategy===E.default.ABR_STRATEGY_L2A?i.push((0,g.default)(u).create({dashMetrics:n,mediaPlayerModel:t,settings:r})):r.get().streaming.abr.ABRStrategy===E.default.ABR_STRATEGY_LoLP?i.push((0,_.default)(u).create({dashMetrics:n})):(i.push((0,p.default)(u).create({dashMetrics:n,mediaPlayerModel:t,settings:r})),i.push((0,l.default)(u).create({dashMetrics:n})),i.push((0,d.default)(u).create({dashMetrics:n})),i.push((0,h.default)(u).create()),i.push((0,c.default)(u).create()),a.push((0,f.default)(u).create({dashMetrics:n,mediaPlayerModel:t,settings:r})))),t.getABRCustomRules().forEach(function(e){e.type===y&&i.push(e.rule(u).create()),e.type===v&&a.push(e.rule(u).create())})},reset:function(){[i,a].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),i=[],a=[]},getMaxQuality:function(t){return s(o(i.map(function(e){return e.getMaxIndex(t)})))||(0,m.default)(u).create()},getMinSwitchRequest:s,shouldAbandonFragment:function(t){return s(o(a.map(function(e){return e.shouldAbandon(t)})))||(0,m.default)(u).create()},getQualitySwitchRules:function(){return i}}}a.__dashjs_factory_name="ABRRulesCollection";e=i.default.getClassFactory(a);e.QUALITY_SWITCH_RULES=y,e.ABANDON_FRAGMENT_RULES=v,i.default.updateSingletonFactory(a.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{112:112,193:193,197:197,198:198,199:199,200:200,201:201,202:202,203:203,206:206,47:47}],197:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var m=r(e(193)),i=r(e(47)),a=r(e(45));function E(e){e=e||{};var l=this.context,d=e.mediaPlayerModel,f=e.dashMetrics,c=e.settings,t=void 0,h=void 0,p=void 0,g=void 0,_=void 0;function n(){p={},g={},_=[]}return t={shouldAbandon:function(e){var t=(0,m.default)(l).create(m.default.NO_CHANGE,{name:E.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var n,r=e.getMediaInfo(),i=e.getMediaType(),a=e.getCurrentRequest();if(!isNaN(a.index)){if(n=i,o=a.index,p[n]=p[n]||{},p[n][o]=p[n][o]||{},d.getStableBufferTime()<f.getCurrentBufferLevel(i))return t;var o=p[i][a.index];if(null===o||null===a.firstByteDate||g.hasOwnProperty(o.id))return t;if(void 0===o.firstByteTime&&(_[i]=[],o.firstByteTime=a.firstByteDate.getTime(),o.segmentDuration=a.duration,o.bytesTotal=a.bytesTotal,o.id=a.index),o.bytesLoaded=a.bytesLoaded,o.elapsedTime=(new Date).getTime()-o.firstByteTime,0<o.bytesLoaded&&0<o.elapsedTime&&(s=i,u=Math.round(8*o.bytesLoaded/o.elapsedTime),_[s]=_[s]||[],_[s].push(u)),5<=_[i].length&&500<o.elapsedTime&&o.bytesLoaded<o.bytesTotal){var s,u,a=_[i].reduce(function(e,t){return e+t},0);if(o.measuredBandwidthInKbps=Math.round(a/_[i].length),o.estimatedTimeOfDownload=+(8*o.bytesTotal/o.measuredBandwidthInKbps/1e3).toFixed(2),o.estimatedTimeOfDownload<1.8*o.segmentDuration||0===e.getRepresentationInfo().quality)return t;g.hasOwnProperty(o.id)||(s=e.getAbrController(),u=o.bytesTotal-o.bytesLoaded,a=s.getBitrateList(r),e=s.getQualityForBitrate(r,o.measuredBandwidthInKbps*c.get().streaming.abr.bandwidthSafetyFactor),e=void 0!==(r=s.getMinAllowedIndexFor(i))?Math.max(r,e):e,o.bytesTotal*a[e].bitrate/a[s.getQualityFor(i)].bitrate<u&&(t.quality=e,t.reason.throughput=o.measuredBandwidthInKbps,t.reason.fragmentID=o.id,g[o.id]=o,h.debug("["+i+"] frag id",o.id," is asking to abandon and switch to quality to ",e," measured bandwidth was",o.measuredBandwidthInKbps),delete p[i][o.id]))}else o.bytesLoaded===o.bytesTotal&&delete p[i][o.id]}return t},reset:n},h=(0,a.default)(l).getInstance().getLogger(t),n(),t}E.__dashjs_factory_name="AbandonRequestsRule",n.default=i.default.getClassFactory(E),t.exports=n.default},{193:193,45:45,47:47}],198:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(113)),R=r(e(193)),i=r(e(47)),p=e(255),g=r(e(46)),b=r(e(54)),M=r(e(45));function a(e){e=e||{};var _=this.context,m=e.dashMetrics,a=e.mediaPlayerModel,t=(0,g.default)(_).getInstance(),n=void 0,E=void 0,y=void 0;function o(e,t,r){var n=r.reduce(function(e,t,n){return t>r[e]?n:e},0);if(0===n)return null;t=Math.max(e,10+2*t.length),t=(r[n]-1)/(t/10-1);return{gp:t,Vp:10/t}}function v(e){var t={},n=e.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),r=(r=n.map(function(e){return Math.log(e)})).map(function(e){return e-r[0]+1}),i=a.getStableBufferTime(),e=o(i,n,r);return e?(t.state=1,t.bitrates=n,t.utilities=r,t.stableBufferTime=i,t.Vp=e.Vp,t.gp=e.gp,t.lastQuality=0,T(t)):t.state=0,t}function T(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function S(e,t){var n,r,i=a.getStableBufferTime();e.stableBufferTime!==i&&((n=o(i,e.bitrates,e.utilities)).Vp===e.Vp&&n.gp===e.gp||(t=(r=m.getCurrentBufferLevel(t))+e.placeholderBuffer,t-=10,t*=n.Vp/e.Vp,t+=10,e.stableBufferTime=i,e.Vp=n.Vp,e.gp=n.gp,e.placeholderBuffer=Math.max(0,t-r)))}function A(e,t){return e.Vp*(e.utilities[t]+e.gp)}function I(e,t){for(var n,r,i=e.bitrates[t],a=e.utilities[t],o=0,s=t-1;0<=s;--s){e.utilities[s]<e.utilities[t]&&(r=e.bitrates[s],n=e.utilities[s],r=e.Vp*(e.gp+(i*n-r*a)/(i-r)),o=Math.max(o,r))}return o}function r(){for(var e in y)y.hasOwnProperty(e)&&2===y[e].state&&(y[e].placeholderBuffer=0)}function i(){for(var e in y){var t;!y.hasOwnProperty(e)||0!==(t=y[e]).state&&(t.state=1,T(t))}}function s(e){var t,n;e&&e.chunk&&e.chunk.mediaInfo&&((t=y[e.chunk.mediaInfo.type])&&0!==t.state&&(n=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,l(t,e.chunk.mediaInfo.type)))}function u(e){var t;e&&e.metric===h.default.HTTP_REQUEST&&e.value&&e.value.type===p.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&((t=y[e.mediaType])&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),l(t,e.mediaType)))}function l(e,t){var n;isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||isNaN(e.placeholderBuffer)||(e.placeholderBuffer*=.99,isNaN(e.lastSegmentFinishTimeMs)||(n=m.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),t=A(e,e.lastQuality),n=Math.max(0,t-n),e.placeholderBuffer=Math.min(n,e.placeholderBuffer)),e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function d(e){var t;!e||(t=y[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality)}function f(e){var t,n;!e||(t=y[e.mediaType])&&0!==t.state&&(n=m.getCurrentBufferLevel(e.mediaType),e=void 0,e=0<t.abrQuality?I(t,t.abrQuality):10,n=Math.max(0,e-n),t.placeholderBuffer=Math.min(t.placeholderBuffer,n))}function c(){y={}}return n={getMaxIndex:function(e){var t=(0,R.default)(_).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")))return t;var n=e.getMediaInfo(),r=e.getMediaType(),i=e.getScheduleController(),a=e.getStreamInfo(),o=e.getAbrController(),s=o.getThroughputHistory(),u=a?a.id:null,l=a&&a.manifestInfo&&a.manifestInfo.isDynamic,d=e.useBufferOccupancyABR();if(t.reason=t.reason||{},!d)return t;i.setTimeToLoadDelay(0);var f=(g=(p=e).getMediaType(),(c=y[g])?0!==c.state&&S(c,g):(c=v(p),y[g]=c),c);if(0===f.state)return t;var c,h,a=m.getCurrentBufferLevel(r),d=s.getAverageThroughput(r,l),e=s.getSafeAverageThroughput(r,l),p=s.getAverageLatency(r),g=void 0;if(t.reason.state=f.state,t.reason.throughput=d,t.reason.latency=p,isNaN(d))return t;switch(f.state){case 1:g=o.getQualityForBitrate(n,e,p),t.quality=g,t.reason.throughput=e,f.placeholderBuffer=Math.max(0,I(f,g)-a),f.lastQuality=g,!isNaN(f.lastSegmentDurationS)&&a>=f.lastSegmentDurationS&&(f.state=2);break;case 2:c=f,l=r,s=Date.now(),isNaN(c.lastSegmentFinishTimeMs)?isNaN(c.lastCallTimeMs)||(h=.001*(s-c.lastCallTimeMs),c.placeholderBuffer+=Math.max(0,h)):(h=.001*(s-c.lastSegmentFinishTimeMs),c.placeholderBuffer+=Math.max(0,h)),c.lastCallTimeMs=s,c.lastSegmentStart=NaN,c.lastSegmentRequestTimeMs=NaN,c.lastSegmentFinishTimeMs=NaN,S(c,l),g=function(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||i<=o)&&(i=o,r=a)}return r}(f,a+f.placeholderBuffer);l=o.getQualityForBitrate(n,e,p);g>f.lastQuality&&l<g&&(g=Math.max(l,f.lastQuality));l=Math.max(0,a+f.placeholderBuffer-A(f,g));l<=f.placeholderBuffer?(f.placeholderBuffer-=l,l=0):(l-=f.placeholderBuffer,f.placeholderBuffer=0,g<o.getTopQualityIndexFor(r,u)?i.setTimeToLoadDelay(1e3*l):l=0),t.quality=g,t.reason.throughput=d,t.reason.latency=p,t.reason.bufferLevel=a,t.reason.placeholderBuffer=f.placeholderBuffer,t.reason.delay=l,f.lastQuality=g;break;default:E.debug("BOLA ABR rule invoked in bad state."),t.quality=o.getQualityForBitrate(n,e,p),t.reason.state=f.state,t.reason.throughput=e,t.reason.latency=p,f.state=1,T(f)}return t},reset:function(){c(),t.off(b.default.BUFFER_EMPTY,r,n),t.off(b.default.PLAYBACK_SEEKING,i,n),t.off(b.default.MEDIA_FRAGMENT_LOADED,s,n),t.off(b.default.METRIC_ADDED,u,n),t.off(b.default.QUALITY_CHANGE_REQUESTED,d,n),t.off(b.default.FRAGMENT_LOADING_ABANDONED,f,n)}},E=(0,M.default)(_).getInstance().getLogger(n),c(),t.on(b.default.BUFFER_EMPTY,r,n),t.on(b.default.PLAYBACK_SEEKING,i,n),t.on(b.default.MEDIA_FRAGMENT_LOADED,s,n),t.on(b.default.METRIC_ADDED,u,n),t.on(b.default.QUALITY_CHANGE_REQUESTED,d,n),t.on(b.default.FRAGMENT_LOADING_ABANDONED,f,n),n}a.__dashjs_factory_name="BolaRule",n.default=i.default.getClassFactory(a),t.exports=n.default},{113:113,193:193,255:255,45:45,46:46,47:47,54:54}],199:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),l=r(e(193)),a=r(e(45));function o(){var s=this.context,e=void 0,u=void 0;return e={getMaxIndex:function(e){var t=(0,l.default)(s).create();if(!e||!e.hasOwnProperty("getDroppedFramesHistory"))return t;if(e=e.getDroppedFramesHistory()){for(var n,r=e.getFrameHistory(),i=0,a=l.default.NO_CHANGE,o=1;o<r.length;o++)if(r[o]&&(i=r[o].droppedVideoFrames,375<(n=r[o].totalVideoFrames)&&.15<i/n)){a=o-1,u.debug("index: "+a+" Dropped Frames: "+i+" Total Frames: "+n);break}return(0,l.default)(s).create(a,{droppedFrames:i})}return t}},u=(0,a.default)(s).getInstance().getLogger(e),e}o.__dashjs_factory_name="DroppedFramesRule",n.default=i.default.getClassFactory(o),t.exports=n.default},{193:193,45:45,47:47}],200:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(46)),h=r(e(54)),i=r(e(47)),p=r(e(45)),g=r(e(193)),_=r(e(112)),m=r(e(113));function a(e){e=e||{};var u=.5,t=2,l=this.context,n=(0,s.default)(l).getInstance(),d=e.dashMetrics,r=void 0,f=void 0,c=void 0;function i(){(c={})[_.default.VIDEO]={ignoreCount:t},c[_.default.AUDIO]={ignoreCount:t}}function a(){i()}function o(e){isNaN(e.startTime)||e.mediaType!==_.default.AUDIO&&e.mediaType!==_.default.VIDEO||0<c[e.mediaType].ignoreCount&&c[e.mediaType].ignoreCount--}return r={getMaxIndex:function(e){var t=(0,g.default)(l).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;!function(){if(!d||!d.hasOwnProperty("getCurrentBufferLevel")||!d.hasOwnProperty("getCurrentBufferState"))throw new Error(_.default.MISSING_CONFIG_ERROR)}();var n,r,i,a=e.getMediaType(),o=d.getCurrentBufferState(a),s=e.getRepresentationInfo().fragmentDuration;return 0<c[a].ignoreCount||!s||(o&&o.state===m.default.BUFFER_EMPTY?(f.debug("["+a+"] Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty"):(n=e.getMediaInfo(),i=(r=e.getAbrController()).getThroughputHistory(),o=d.getCurrentBufferLevel(a),e=i.getAverageThroughput(a),a=i.getAverageLatency(a),s=e*(o/s)*u,t.quality=r.getQualityForBitrate(n,s,a),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering")),t},reset:function(){i(),n.off(h.default.PLAYBACK_SEEKING,a,r),n.off(h.default.BYTES_APPENDED_END_FRAGMENT,o,r)}},f=(0,p.default)(l).getInstance().getLogger(r),i(),n.on(h.default.PLAYBACK_SEEKING,a,r),n.on(h.default.BYTES_APPENDED_END_FRAGMENT,o,r),r}a.__dashjs_factory_name="InsufficientBufferRule",n.default=i.default.getClassFactory(a),t.exports=n.default},{112:112,113:113,193:193,45:45,46:46,47:47,54:54}],201:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(113)),P=r(e(193)),i=r(e(47)),d=e(255),f=r(e(46)),c=r(e(54)),h=r(e(45)),L=r(e(112));function a(e){e=e||{};var R=this.context,b=e.dashMetrics,t=(0,f.default)(R).getInstance(),n=void 0,M=void 0,D=void 0,N=void 0;function C(e){var t={},n=e.getMediaInfo(),e=n.bitrateList.map(function(e){return e.bandwidth/1e3});return t.state=1,t.bitrates=e,t.lastQuality=0,function(e){if(!e||!e.type)return;D[e.type]={},D[e.type].w=[],D[e.type].prev_w=[],D[e.type].Q=0,D[e.type].segment_request_start_s=0,D[e.type].segment_download_finish_s=0,D[e.type].B_target=1.5}(n),O(t),t}function O(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function r(){for(var e in M){var t;!M.hasOwnProperty(e)||0!==(t=M[e]).state&&(t.state=1,O(t))}}function i(e){var t,n,r;e&&e.chunk&&e.chunk.mediaInfo&&(t=M[e.chunk.mediaInfo.type],n=D[e.chunk.mediaInfo.type],t&&0!==t.state&&(r=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||r>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=r,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=r,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,o(t,n)))}function a(e){var t,n;e&&e.metric===l.default.HTTP_REQUEST&&e.value&&e.value.type===d.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&(t=M[e.mediaType],n=D[e.mediaType],t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),o(t,n)))}function o(e,t){isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||(t.segment_request_start_s=.001*e.lastSegmentRequestTimeMs,t.segment_download_finish_s=.001*e.lastSegmentFinishTimeMs,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function s(e){var t;e&&e.mediaType&&((t=M[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality))}function w(e,t){if(e.length!==t.length)return-1;for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function u(){M={},D={}}return n={getMaxIndex:function(e){var t=(0,P.default)(R).create(),n=Math.pow(4,.99),r=Math.max(Math.pow(4,1),n*Math.sqrt(4)),i=e.getMediaInfo(),a=e.getMediaType(),o=i.bitrateList.map(function(e){return e.bandwidth}),s=o.length,u=e.getScheduleController(),l=e.getStreamInfo(),d=e.getAbrController(),f=d.getThroughputHistory(),c=l&&l.manifestInfo&&l.manifestInfo.isDynamic,h=e.useL2AABR(),p=b.getCurrentBufferLevel(a,!0),g=f.getSafeAverageThroughput(a,c),l=f.getAverageThroughput(a,c),c=f.getAverageLatency(a),f=void 0,_=e.getVideoModel().getPlaybackRate();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useL2AABR")))return t;if(t.reason=t.reason||{},!h||a===L.default.AUDIO)return t;u.setTimeToLoadDelay(0);var m=(u=(h=e).getMediaType(),(e=M[u])||(e=C(h),M[u]=e),e);if(0===m.state)return t;var E=D[a];if(!E)return t;if(t.reason.state=m.state,t.reason.throughput=l,t.reason.latency=c,isNaN(l))return t;switch(m.state){case 1:if(f=d.getQualityForBitrate(i,g,c),t.quality=f,t.reason.throughput=g,m.lastQuality=f,!isNaN(m.lastSegmentDurationS)&&p>=E.B_target){m.state=2,E.Q=n;for(var y=0;y<s;++y)y===m.lastQuality?E.prev_w[y]=1:E.prev_w[y]=0}break;case 2:var v=[],e=b.getCurrentHttpRequest(a).trace.reduce(function(e,t){return e+t.d},0),a=b.getCurrentHttpRequest(a).trace.reduce(function(e,t){return e+t.b[0]},0),T=Math.round(8*a/e);T<1&&(T=1);for(var S=m.lastSegmentDurationS,A=1,y=0;y<s;++y)o[y]=o[y]/1e3,_*o[y]>T&&(A=-1),E.w[y]=E.prev_w[y]+A*(S/(2*r))*((E.Q+n)*(_*o[y]/T));E.w=function(e){for(var t=e.length,n=!1,r=[],i=0;i<t;++i)r[i]=e[i];for(var a=e.sort(function(e,t){return t-e}),o=0,s=0,u=[],i=0;i<t-1;++i)if((s=((o+=a[i])-1)/(i+1))>=a[i+1]){n=!0;break}for(n||(s=(o+a[t-1]-1)/t),i=0;i<t;++i)u[i]=Math.max(r[i]-s,0);return u}(E.w);for(y=0;y<s;++y)v[y]=E.w[y]-E.prev_w[y],E.prev_w[y]=E.w[y];E.Q=Math.max(0,E.Q-S+S*_*((w(o,E.prev_w)+w(o,v))/T));for(var I=[],y=0;y<s;++y)I[y]=Math.abs(o[y]-w(E.w,o));(f=I.indexOf(Math.min.apply(Math,I)))>m.lastQuality&&o[m.lastQuality+1]<=T&&(f=m.lastQuality+1),o[f]>=T&&(E.Q=2*Math.max(n,E.Q)),t.quality=f,t.reason.throughput=l,t.reason.latency=c,t.reason.bufferLevel=p,m.lastQuality=t.quality;break;default:N.debug("L2A ABR rule invoked in bad state."),t.quality=d.getQualityForBitrate(i,g,c),t.reason.state=m.state,t.reason.throughput=g,t.reason.latency=c,m.state=1,O(m)}return t},reset:function(){u(),t.off(c.default.PLAYBACK_SEEKING,r,n),t.off(c.default.MEDIA_FRAGMENT_LOADED,i,n),t.off(c.default.METRIC_ADDED,a,n),t.off(c.default.QUALITY_CHANGE_REQUESTED,s,n)}},N=(0,h.default)(R).getInstance().getLogger(n),u(),t.on(c.default.PLAYBACK_SEEKING,r,n),t.on(c.default.MEDIA_FRAGMENT_LOADED,i,n),t.on(c.default.METRIC_ADDED,a,n),t.on(c.default.QUALITY_CHANGE_REQUESTED,s,n),n}a.__dashjs_factory_name="L2ARule",n.default=i.default.getClassFactory(a),t.exports=n.default},{112:112,113:113,193:193,255:255,45:45,46:46,47:47,54:54}],202:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45)),l=r(e(193));function o(){var s=this.context,e=void 0,u=void 0;return e={getMaxIndex:function(e){for(var t=(e=e?e.getSwitchHistory():null)?e.getSwitchRequests():[],n=0,r=0,i=0,a=(0,l.default)(s).create(),o=0;o<t.length;o++)if(void 0!==t[o]&&(n+=t[o].drops,r+=t[o].noDrops,i+=t[o].dropSize,6<=n+r&&.075<n/r)){a.quality=0<o&&0<t[o].drops?o-1:o,a.reason={index:a.quality,drops:n,noDrops:r,dropSize:i},u.debug("Switch history rule index: "+a.quality+" samples: "+(n+r)+" drops: "+n);break}return a}},u=(0,a.default)(s).getInstance().getLogger(e),e}o.__dashjs_factory_name="SwitchHistoryRule",n.default=i.default.getClassFactory(o),t.exports=n.default},{193:193,45:45,47:47}],203:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45)),h=r(e(193)),p=r(e(112)),g=r(e(113));function o(e){e=e||{};var d=this.context,f=e.dashMetrics,t=void 0,c=void 0;return t={getMaxIndex:function(e){var t=(0,h.default)(d).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return t;!function(){if(!f||!f.hasOwnProperty("getCurrentBufferState"))throw new Error(p.default.MISSING_CONFIG_ERROR)}();var n=e.getMediaInfo(),r=e.getMediaType(),i=f.getCurrentBufferState(r),a=e.getScheduleController(),o=e.getAbrController(),s=(u=e.getStreamInfo())&&u.manifestInfo?u.manifestInfo.isDynamic:null,u=(l=o.getThroughputHistory()).getSafeAverageThroughput(r,s),l=l.getAverageLatency(r),e=e.useBufferOccupancyABR();return isNaN(u)||!i||e||o.getAbandonmentStateFor(r)!==g.default.ABANDON_LOAD&&(i.state!==g.default.BUFFER_LOADED&&!s||(t.quality=o.getQualityForBitrate(n,u,l),a.setTimeToLoadDelay(0),c.debug("["+r+"] requesting switch to index: ",t.quality,"Average throughput",Math.round(u),"kbps"),t.reason={throughput:u,latency:l})),t},reset:function(){}},c=(0,a.default)(d).getInstance().getLogger(t),t}o.__dashjs_factory_name="ThroughputRule",n.default=i.default.getClassFactory(o),t.exports=n.default},{112:112,113:113,193:193,45:45,47:47}],204:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45)),L="manual_weight_selection",x="random_weight_selection",F="dynamic_weight_selection";function o(){var e=this.context,t=void 0,S=void 0,A=void 0,I=void 0,R=void 0,b=void 0,M=void 0,D=void 0,N=void 0;function n(){I=1,R=100,b=0,D=M=A=null,N=F}function C(){var e=0;if(A)for(var t=0;t<A.length;t++){var n=A[t];n.state.throughput>e&&(e=n.state.throughput)}return e}function O(e,n,r){e=e.map(function(e,t){return r[t]*Math.pow(e-n[t],2)}).reduce(function(e,t){return e+t});return(e<0?-1:1)*Math.sqrt(Math.abs(e))}function w(e,t,n){for(var r,i=0;i<t.length;i++){var a=t[i],o=(r=e,O([(s=a).state.throughput,s.state.latency,s.state.rebuffer,s.state.switch],[r.state.throughput,r.state.latency,r.state.rebuffer,r.state.switch],[1,1,1,1])),s=Math.exp(-1*Math.pow(o,2)/(2*Math.pow(.1,2)));r=n,o=s,s=void 0,s=(a=a).state,a=[.01,.01,.01,.01],s.throughput=s.throughput+(r[0]-s.throughput)*a[0]*o,s.latency=s.latency+(r[1]-s.latency)*a[1]*o,s.rebuffer=s.rebuffer+(r[2]-s.rebuffer)*a[2]*o,s.switch=s.switch+(r[3]-s.switch)*a[3]*o}}function P(e,t,n,r,i,a,o){M=M||D[D.length-1];o=e.findWeightVector(t,n,r,i,a,o);null!==o&&-1!==o&&(M=o)}return t={getNextQuality:function(e,t,n,r,i,a,o){var s=n,u=r,l=t,d=function(a){A||function(){A=[];var e,t=a.bitrateList,n=[];b=t[0].bandwidth,t.forEach(function(e){n.push(e.bandwidth),e.bandwidth<b&&(b=e.bandwidth)}),e=(e=n).map(function(e){return Math.pow(e,2)}).reduce(function(e,t){return e+t}),I=Math.sqrt(e);for(var r=0;r<t.length;r++){var i={qualityIndex:r,bitrate:t[r].bandwidth,state:{throughput:t[r].bandwidth/I,latency:0,rebuffer:0,switch:0}};A.push(i),i.bitrate===b&&0}D=function(e){var t=[],n=function(e){for(var t=[],n=0;n<e;n++){var r=[Math.random()*C(),Math.random(),Math.random(),Math.random()];t.push(r)}return t}(Math.pow(e.length,2));t.push(n[0]);for(var r=[1,1,1,1],i=1;i<e.length;i++){for(var a=null,o=null,s=0;s<n.length;s++){for(var u=n[s],l=null,d=0;d<t.length;d++){var f=O(u,t[d],r);(null===l||f<l)&&(l=f)}(null===o||o<l)&&(a=u,o=l)}t.push(a)}for(var c=null,h=null,s=0;s<t.length;s++){for(f=0,d=0;d<t.length;d++)s!==d&&(f+=O(t[s],t[d],r));(null===c||c<f)&&(c=f,h=s)}var p=[];p.push(t[h]),t.splice(h,1);for(;0<t.length;){for(var l=null,g=null,s=0;s<t.length;s++){f=O(p[0],t[s],r);(null===l||f<l)&&(l=f,g=s)}p.push(t[g]),t.splice(g,1)}return p}(A)}();return A}(e),f=t/I;1<f&&(f=C()),n/=R,S.debug("getNextQuality called throughput:"+f+" latency:"+n+" bufferSize:"+r+" currentQualityIndex:"+a+" playbackRate:"+i);var c=(r=d[a]).bitrate*o.getSegmentDuration()/l,a=Math.max(0,c-u);if(u-c<o.getMinBuffer())return S.debug("Buffer is low for bitrate= "+r.bitrate+" downloadTime="+c+" currentBuffer="+u+" rebuffer="+a),function(e,t){var n=0,r=e;if(A)for(var i=0;i<A.length;i++){var a=A[i];a.bitrate<e.bitrate&&a.bitrate>n&&t>a.bitrate&&(n=a.bitrate,r=a)}return r}(r,l).qualityIndex;switch(N){case L:M=[.4,.4,.4,.4];break;case x:M=function(e,t){for(var n=[],r=Math.sqrt(2/e),i=0;i<t;i++)n.push(Math.random()*r);return M=n}(d.length,4);break;case F:P(o,d,s,u,a,l,i);break;default:P(o,d,s,u,a,l,i)}for(var h=null,p=null,g=null,_=0;_<d.length;_++){var m=d[_],E=m.state,y=[E.throughput,E.latency,E.rebuffer,E.switch],v=M.slice(),T=o.getNextBufferWithBitrate(m.bitrate,u,l),E=T<o.getMinBuffer();E&&S.debug("Buffer is low for bitrate="+m.bitrate+" downloadTime="+c+" currentBuffer="+u+" nextBuffer="+T),(m.bitrate>t-1e4||E)&&m.bitrate!==b&&(v[0]=100);y=O(y,[f,0,0,0],v);(null===h||y<h)&&(h=y,p=m.qualityIndex,g=m,0)}return i=Math.abs(r.bitrate-g.bitrate)/I,w(r,d,[f,n,a,i]),w(g,d,[f,0,0,i]),p},reset:function(){n()}},S=(0,a.default)(e).getInstance().getLogger(t),n(),t}o.__dashjs_factory_name="LearningAbrController",n.default=i.default.getClassFactory(o),t.exports=n.default},{45:45,47:47}],205:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),d=r(e(208));function a(){var e,i=void 0,a=void 0,o=void 0,s=void 0;function t(){s=o=a=i=null}function u(e,t,n,r){var i=new d.default;return i.type=e,i.weights.bitrateReward=t||1,i.weights.bitrateSwitchPenalty=1,i.weights.rebufferPenalty=n||1e3,i.weights.latencyPenalty=[],i.weights.latencyPenalty.push({threshold:1.1,penalty:.05*r}),i.weights.latencyPenalty.push({threshold:1e8,penalty:.1*n}),i.weights.playbackSpeedPenalty=r||200,i}function l(e,t,n,r,i){i.bitrateWSum+=i.weights.bitrateReward*e,i.lastBitrate&&(i.bitrateSwitchWSum+=i.weights.bitrateSwitchPenalty*Math.abs(e-i.lastBitrate)),i.lastBitrate=e,i.rebufferWSum+=i.weights.rebufferPenalty*t;for(var a=0;a<i.weights.latencyPenalty.length;a++){var o=i.weights.latencyPenalty[a];if(n<=o.threshold){i.latencyWSum+=o.penalty*n;break}}i.playbackSpeedWSum+=i.weights.playbackSpeedPenalty*Math.abs(1-r),i.totalQoe=i.bitrateWSum-i.bitrateSwitchWSum-i.rebufferWSum-i.latencyWSum-i.playbackSpeedWSum}return e={setupPerSegmentQoe:function(e,t,n){i=u("segment",e,t,n),a=e,o=t,s=n},logSegmentMetrics:function(e,t,n,r){i&&l(e,t,n,r,i)},getPerSegmentQoe:function(){return i},calculateSingleUseQoe:function(e,t,n,r){var i=null;return a&&o&&s&&(i=u("segment",a,o,s)),i?(l(e,t,n,r,i),i.totalQoe):0},reset:function(){t()}},t(),e}a.__dashjs_factory_name="LoLpQoeEvaluator",n.default=i.default.getClassFactory(a),t.exports=n.default},{208:208,47:47}],206:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(45)),a=r(e(47)),o=r(e(204)),s=r(e(205)),A=r(e(193)),I=r(e(113)),R=r(e(207)),b=r(e(112));function u(e){var E=(e=e||{}).dashMetrics,y=this.context,v=void 0,t=void 0,T=void 0,S=void 0;return t={getMaxIndex:function(e){try{var t=(0,A.default)(y).create(),n=e.getMediaInfo().type,r=e.getAbrController(),i=e.getStreamInfo(),a=r.getQualityFor(n,i),o=e.getMediaInfo(),s=E.getCurrentBufferState(n),u=e.getScheduleController(),l=E.getCurrentBufferLevel(n,!0),d=i&&i.manifestInfo?i.manifestInfo.isDynamic:null,f=u.getPlaybackController(),c=f.getCurrentLiveLatency();if(!e.useLoLPABR()||n===b.default.AUDIO)return t;c=c||0;i=f.getPlaybackRate(),f=r.getThroughputHistory().getSafeAverageThroughput(n,d);if(v.debug("Throughput "+Math.round(f)+" kbps"),isNaN(f)||!s)return t;if(r.getAbandonmentStateFor(n)===I.default.ABANDON_LOAD)return t;for(var h=o.bitrateList,d=e.getRepresentationInfo().fragmentDuration,p=h[0].bandwidth/1e3,g=h[h.length-1].bandwidth/1e3,_=0;_<h.length;_++){var m=h[_].bandwidth/1e3;g<m?g=m:m<p&&(p=m)}s=h[a].bandwidth/1e3,r=E.getCurrentHttpRequest(n,!0),r=(r.tresponse.getTime()-r.trequest.getTime())/1e3,r=d<r?r-d:0;S.setupPerSegmentQoe(d,g,p),S.logSegmentMetrics(s,r,c,i);d=(0,R.default)(y).create({targetLatency:1.5,bufferMin:.3,segmentDuration:d,qoeEvaluator:S});return t.quality=T.getNextQuality(o,1e3*f,c,l,i,a,d),t.reason={throughput:f,latency:c},t.priority=A.default.PRIORITY.STRONG,u.setTimeToLoadDelay(0),t.quality!==a&&console.log("[TgcLearningRule]["+n+"] requesting switch to index: ",t.quality,"Average throughput",Math.round(f),"kbps"),t}catch(e){throw e}},reset:function(){T.reset(),S.reset()}},v=(0,i.default)(y).getInstance().getLogger(t),T=(0,o.default)(y).create(),S=(0,s.default)(y).create(),t}u.__dashjs_factory_name="LoLPRule",n.default=a.default.getClassFactory(u),t.exports=n.default},{112:112,113:113,193:193,204:204,205:205,207:207,45:45,47:47}],207:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),e=(r=i)&&r.__esModule?r:{default:r};function a(e){var p=e.targetLatency,g=e.bufferMin,_=e.segmentDuration,m=e.qoeEvaluator,e=void 0,n=void 0,r=void 0;function t(){return _}function E(e,t){return _<t?e-_:e+_-t}return e={getMinBuffer:function(){return g},getSegmentDuration:t,getNextBufferWithBitrate:function(e,t,n){return E(t,e*_/n)},getNextBuffer:E,findWeightVector:function(e,o,s,t,u,l){var d=null,f=null,c=null,h=Math.abs(o-r);return e.forEach(function(a){n.forEach(function(e){e[0];var t=e[1],n=e[2],r=(e[3],a.bitrate*_/u),i=E(s,r),r=(0===n?10:1/n)*Math.max(1e-5,r-i),t=(0===t?10:1/t)*a.state.latency,t=m.calculateSingleUseQoe(a.bitrate,r,t,l);(null===d||d<t)&&function(e,t,n){if(p+n<e)return!1;return g<=t}(o,i,h)&&(d=t,f=e,c=a.bitrate)})}),null===f&&null===c&&(f=-1),r=o,f}},n=function(f,e){return function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;if(o===a)return i;for(var s=i.length,u=0;u<s;u++)for(var l=i.shift(),d=0;d<f.length;d++)i.push(l.concat(f[d]));e=i,t=a,n=o+1,r=!0,s=u=l=d=void 0}}(f.map(function(e){return[e]}),e,1)}([.2,.4,.6,.8,1],4),r=0,e}a.__dashjs_factory_name="LoLpWeightSelector",n.default=e.default.getClassFactory(a),t.exports=n.default},{47:47}],208:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}n.default=r,t.exports=n.default},{}],209:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var d=r(e(112)),i=r(e(47)),f=r(e(113));function a(e){var a=(e=e||{}).dashMetrics,o=e.mediaPlayerModel,s=e.textController,u=e.abrController,l=e.settings;function r(e,t,n){var r,i=NaN;return e&&t?i=e===d.default.FRAGMENTED_TEXT?s.isTextEnabled()?isNaN(t.fragmentDuration)?(r=a.getCurrentSchedulingInfo(f.default.SCHEDULING_INFO))?r.duration:0:t.fragmentDuration:0:e===d.default.AUDIO&&n?(n=a.getCurrentBufferLevel(d.default.VIDEO),isNaN(t.fragmentDuration)?n:Math.max(n,t.fragmentDuration)):(t=t.mediaInfo.streamInfo,u.isPlayingAtTopQuality(t)?t.manifestInfo.duration>=l.get().streaming.longFormContentDurationThreshold?l.get().streaming.bufferTimeAtTopQualityLongForm:l.get().streaming.bufferTimeAtTopQuality:o.getStableBufferTime()):i}return{execute:function(e,t,n){return!e||!t||a.getCurrentBufferLevel(e)<r(e,t,n)},getBufferTarget:r}}a.__dashjs_factory_name="BufferLevelRule",n.default=i.default.getClassFactory(a),t.exports=n.default},{112:112,113:113,47:47}],210:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),e=(r=i)&&r.__esModule?r:{default:r};function a(){var U=0;function n(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function B(e,t){e=e.videoHeight/15;return t?"font-size: "+e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?n(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?n(t.background):"transparent")+";":"font-size: "+e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}return{createHTMLCaptionsFromScreen:function(e,t,n,r){for(var i=null,a=!1,o=-1,s={start:t,end:n,spans:[]},u="style_cea608_white_black",l={},d={},f=[],c=void 0,h=void 0,c=0;c<15;++c){var p=r.rows[c],g="",_=null;if(!1===p.isEmpty()){var m=function(e){for(var t="",n=0;n<e.length;++n){t+=e[n].uchar}return t.length-t.replace(/^\s+/,"").length}(p.chars);null===i&&(i={x:m,y1:c,y2:c+1,p:[]}),m!==o&&a&&(i.p.push(s),s={start:t,end:n,spans:[]},i.y2=c,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(f.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i={x:m,y1:c,y2:c+1,p:[]});for(var E=0;E<p.chars.length;++E){var y,v=p.chars[E],T=v.penState;null!==_&&T.equals(_)||(0<g.trim().length&&(s.spans.push({name:u,line:g,row:c}),g=""),y="style_cea608_"+T.foreground+"_"+T.background,T.underline&&(y+="_underline"),T.italics&&(y+="_italics"),d.hasOwnProperty(y)||(d[y]=JSON.parse(JSON.stringify(T))),_=T,u=y),g+=v.uchar}0<g.trim().length&&s.spans.push({name:u,line:g,row:c}),a=!0,o=m}else a=!1,o=-1,i&&(i.p.push(s),s={start:t,end:n,spans:[]},i.y2=c,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(f.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i=null)}i&&(i.p.push(s),i.y2=c+1,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(f.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i=null);var S=[];for(c=0;c<f.length;++c){var A=f[c],I="sub_cea608_"+U++,R=document.createElement("div");R.id=I;var b="left: "+3.125*(b=A).x+"%; top: "+6.66*b.y1+"%; width: "+(100-3.125*b.x)+"%; height: "+6.66*Math.max(b.y2-1-b.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;";R.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+b;b=document.createElement("div");b.className="paragraph bodyStyle",b.style.cssText=B(e);var M=document.createElement("div");M.className="cueUniWrapper",M.style.cssText="unicode-bidi: normal; direction: ltr;";for(var D=0;D<A.p.length;++D)for(var N=A.p[D],C=0,h=0;h<N.spans.length;++h){var O,w,P,L=N.spans[h];0<L.line.length&&(0!==h&&C!=L.row&&((P=document.createElement("br")).className="lineBreak",M.appendChild(P)),O=!1,C===L.row&&(O=!0),C=L.row,w=d[L.name],(P=document.createElement("span")).className="spanPadding "+L.name+" customSpanColor",P.style.cssText=B(e,w),0!==h&&O?h===N.spans.length-1?P.textContent=L.line.replace(/\s+$/g,""):P.textContent=L.line:1<N.spans.length&&h<N.spans.length-1&&L.row===N.spans[h+1].row?P.textContent=L.line.replace(/^\s+/g,""):P.textContent=L.line.trim(),M.appendChild(P))}b.appendChild(M),R.appendChild(b);var x,F={bodyStyle:["%",90]};for(x in d)d.hasOwnProperty(x)&&(F[x]=["%",90]);S.push({type:"html",start:t,end:n,cueHTMLElement:R,cueID:I,cellResolution:[32,15],isFromCEA608:!0,fontSize:F,lineHeight:{},linePadding:{}})}return S}}}a.__dashjs_factory_name="EmbeddedTextHtmlRender",n.default=e.default.getSingletonFactory(a),t.exports=n.default},{47:47}],211:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var E=r(e(112)),y=r(e(46)),v=r(e(54)),i=r(e(47)),T=r(e(227)),S=r(e(107)),A=r(e(213)),I=r(e(239)),R=r(e(51)),b="NotFragmentedTextBufferController";function a(e){e=e||{};var r=this.context,t=(0,y.default)(r).getInstance(),i=(0,A.default)(r).getInstance(),a=e.errHandler,o=e.streamInfo,s=e.type,u=e.mimeType,l=e.fragmentModel,n=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0;function g(e){c=e}function _(e){null===p.extract(o.id,e.currentRepresentation.id)&&(d=!1,t.trigger(v.default.INIT_FRAGMENT_NEEDED,{representationId:e.currentRepresentation.id,sender:n},{streamId:o.id,mediaType:s}))}function m(e){e.chunk.bytes&&(p.save(e.chunk),h.append(e.chunk),d=!0,t.trigger(v.default.STREAM_COMPLETED,{request:e.request},{streamId:o.id,mediaType:s}))}return n={getBufferControllerType:function(){return b},initialize:function(e){g(e),p=(0,T.default)(r).getInstance()},createBuffer:function(e){var t,n=e[0];try{return h=(0,S.default)(r).create(c,n),f||((t=h.getBuffer()).hasOwnProperty(E.default.INITIALIZE)&&t.initialize(u,o,e,l),f=!0),h}catch(e){if(n&&(n.isText||-1!==n.codec.indexOf('codecs="stpp')||-1!==n.codec.indexOf('codecs="wvtt')))try{h=i.getTextSourceBuffer()}catch(e){a.error(new I.default(R.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,R.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+s+" : "+e.message))}else a.error(new I.default(R.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,R.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+s))}},getStreamId:function(){return o.id},getType:function(){return s},getBuffer:function(){return h},getBufferLevel:function(){return 0},setMediaSource:g,getMediaSource:function(){return c},getIsBufferingCompleted:function(){return d},getIsPruningInProgress:function(){return!1},dischargePreBuffer:function(){},appendInitSegment:function(e){return null!==p.extract(o.id,e)},getRangeAt:function(){return null},reset:function(e){t.off(v.default.DATA_UPDATE_COMPLETED,_,n),t.off(v.default.INIT_FRAGMENT_LOADED,m,n),!e&&h&&(h.abort(),h.reset(),h=null)},updateTimestampOffset:function(e){h.timestampOffset===e||isNaN(e)||(h.timestampOffset=e)}},c=null,d=f=!1,t.on(v.default.DATA_UPDATE_COMPLETED,_,n),t.on(v.default.INIT_FRAGMENT_LOADED,m,n),n}a.__dashjs_factory_name=b,n.default=i.default.getClassFactory(a),t.exports=n.default},{107:107,112:112,213:213,227:227,239:239,46:46,47:47,51:51,54:54}],212:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(112)),i=r(e(47)),o=r(e(118)),s=r(e(211));function u(e){e=e||{};var t,n=this.context,r=void 0;function i(){return r.getBuffer()}return t={getBufferControllerType:function(){return r.getBufferControllerType()},initialize:function(e,t){return r.initialize(e,t)},createBuffer:function(e,t){return r.createBuffer(e,t)},getType:function(){return r.getType()},getBuffer:i,setBuffer:function(e){r.setBuffer(e)},getBufferLevel:function(){return r.getBufferLevel()},setMediaSource:function(e){r.setMediaSource(e)},getMediaSource:function(){return r.getMediaSource()},getIsBufferingCompleted:function(){return r.getIsBufferingCompleted()},getIsPruningInProgress:function(){return r.getIsPruningInProgress()},dischargePreBuffer:function(){return r.dischargePreBuffer()},appendInitSegment:function(e){r.appendInitSegment(e)},getRangeAt:function(e){return r.getRangeAt(e)},reset:function(e){r.reset(e)},updateTimestampOffset:function(e){var t=i();t.timestampOffset===e||isNaN(e)||(t.timestampOffset=e)},updateAppendWindow:function(){r.updateAppendWindow()},getRepresentationInfo:function(e){return r.getRepresentationInfo(e)}},r=e.type===a.default.FRAGMENTED_TEXT?(0,o.default)(n).create({streamInfo:e.streamInfo,type:e.type,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,fragmentModel:e.fragmentModel,errHandler:e.errHandler,mediaController:e.mediaController,representationController:e.representationController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,settings:e.settings}):(0,s.default)(n).create({streamInfo:e.streamInfo,type:e.type,mimeType:e.mimeType,fragmentModel:e.fragmentModel,errHandler:e.errHandler}),t}u.__dashjs_factory_name="TextBufferController",n.default=i.default.getClassFactory(u),t.exports=n.default},{112:112,118:118,211:211,47:47}],213:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var N=r(e(112)),i=r(e(47)),C=r(e(214)),O=r(e(215)),w=r(e(235)),P=r(e(233)),L=r(e(46)),x=r(e(54)),F=e(232);function a(){var e=this.context,t=void 0,h=void 0,n=void 0,r=void 0,i=void 0,p=void 0,a=void 0,g=void 0,_=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,m=void 0,E=void 0,y=void 0,v=void 0,T=void 0;function S(e){void 0===T&&null!==e.fromStreamInfo&&(T=this.getCurrentTrackIdx())}function A(){void 0===T&&(T=this.getCurrentTrackIdx())}function I(){void 0!==T&&(this.setTextTrack(T),T=void 0)}function R(e){var n=this,t=e.tracks,r=e.index;l&&t.some(function(e,t){if(p.matchSettings(l,e))return n.setTextTrack(t),r=t,!0}),(!1===c||void 0===c&&!l||v)&&this.setTextTrack(-1),f=r,u.trigger(x.default.TEXT_TRACKS_ADDED,{enabled:M(),index:r,tracks:t}),y=!0}function b(e){d||!e||!e.newMediaInfo||(e=e.newMediaInfo).type===N.default.FRAGMENTED_TEXT&&(l={lang:e.lang,role:e.roles[0],accessibility:e.accessibility[0]})}function M(){return m&&!E?!1:!0}function D(){v=y=!(m=!0)}return t={setConfig:function(e){e&&(e.errHandler&&(n=e.errHandler),e.adapter&&(r=e.adapter),e.manifestModel&&(i=e.manifestModel),e.mediaController&&(p=e.mediaController),e.videoModel&&(a=e.videoModel),e.streamController&&(g=e.streamController),e.textTracks&&(_=e.textTracks),e.vttParser&&(o=e.vttParser),e.ttmlParser&&(s=e.ttmlParser),h.setConfig({errHandler:n,adapter:r,manifestModel:i,mediaController:p,videoModel:a,streamController:g,textTracks:_,vttParser:o,ttmlParser:s}))},getTextSourceBuffer:function(){return h},getAllTracksAreDisabled:function(){return m},addEmbeddedTrack:function(e){h.addEmbeddedTrack(e)},getTextDefaultLanguage:function(){return l&&l.lang||""},setTextDefaultLanguage:function(e){(0,F.checkParameterType)(e,"string"),(l=l||{}).lang=e,d=!0},setTextDefaultEnabled:function(e){(0,F.checkParameterType)(e,"boolean"),(c=e)?m=!1:this.setTextTrack(-1)},getTextDefaultEnabled:function(){return void 0!==c&&c},setInitialSettings:function(e){l=e,d=!0},enableText:function(e){(0,F.checkParameterType)(e,"boolean"),!c&&e&&(c=!0),M()!==e&&(e&&this.setTextTrack(f),e||(f=this.getCurrentTrackIdx(),y?this.setTextTrack(-1):v=!0))},isTextEnabled:M,setTextTrack:function(e){var t=h.getConfig(),n=t.fragmentModel,r=t.fragmentedTracks,i=t.videoModel,a=void 0,o=void 0;m=-1===e;var s=_.getCurrentTrackIdx();if(s!==e){m&&p&&p.saveTextSettingsDisabled(),_.setModeForTrackIdx(s,N.default.TEXT_HIDDEN),_.setCurrentTrackIdx(e),_.setModeForTrackIdx(e,N.default.TEXT_SHOWING);var u=_.getCurrentTrackInfo();if(u&&u.isFragmented&&!u.isEmbedded)for(var l=0;l<r.length;l++){var d=r[l];if(u.lang===d.lang&&u.index===d.index&&(d.id?u.id===d.id:u.id===d.index))if(d!==p.getCurrentTrackFor(N.default.FRAGMENTED_TEXT,g.getActiveStreamInfo()))n.abortRequests(),n.removeExecutedRequestsBeforeTime(),h.remove(),_.deleteCuesFromTrackIdx(s),p.setTrack(d),h.setCurrentFragmentedTrackIdx(l);else if(-1===s){for(var f=g.getActiveStreamProcessors(),c=0;c<f.length;c++)if(f[c].getType()===N.default.FRAGMENTED_TEXT){o=f[c];break}o.setBufferingTime(i.getTime()),o.getScheduleController().start()}}else if(u&&!u.isFragmented){for(f=g.getActiveStreamProcessors(),l=0;l<f.length;l++)if(f[l].getType()===N.default.TEXT){a=(o=f[l]).getMediaInfoArr();break}if(o&&a)for(l=0;l<a.length;l++)if(a[l].index===u.index&&a[l].lang===u.lang){o.selectMediaInfo(a[l]);break}}}},getCurrentTrackIdx:function(){return _.getCurrentTrackIdx()},enableForcedTextStreaming:function(e){(0,F.checkParameterType)(e,"boolean"),E=e},reset:function(){D(),h.resetEmbedded(),h.reset()}},l=null,_=(v=d=y=E=!(f=-1),O.default)(e).getInstance(),o=(0,w.default)(e).getInstance(),s=(0,P.default)(e).getInstance(),h=(0,C.default)(e).getInstance(),u=(0,L.default)(e).getInstance(),_.initialize(),u.on(x.default.TEXT_TRACKS_QUEUE_INITIALIZED,R,t),u.on(x.default.CURRENT_TRACK_CHANGED,b,t),u.on(x.default.PERIOD_SWITCH_STARTED,S,t),u.on(x.default.STREAM_COMPLETED,A,t),u.on(x.default.PERIOD_SWITCH_COMPLETED,I,t),D(),t}a.__dashjs_factory_name="TextController",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{112:112,214:214,215:215,232:232,233:233,235:235,46:46,47:47,54:54}],214:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ee=r(e(112)),te=e(255),E=r(e(247)),y=r(e(219)),v=r(e(222)),i=r(e(47)),T=r(e(45)),S=r(e(215)),A=r(e(210)),ne=r(e(9)),re=r(e(2)),I=r(e(46)),R=r(e(54)),ie=r(e(239)),ae=r(e(51));function a(){var o=this.context,n=(0,I.default)(o).getInstance(),i=!1,s=void 0,L=void 0,x=void 0,F=void 0,u=void 0,U=void 0,l=void 0,B=void 0,r=void 0,a=void 0,d=void 0,k=void 0,G=void 0,j=void 0,Y=void 0,f=void 0,H=void 0,c=void 0,q=void 0,K=void 0,V=void 0,W=void 0,z=void 0,X=void 0,Q=void 0,Z=void 0;function e(){Y=NaN,q=G=null,j=!(f=[])}function t(){e(),d=[],B=null}function h(e){e=e.chunk;e.mediaInfo.embeddedCaptions&&_(e.bytes,e)}function p(){V=[],(k=(0,S.default)(o).getInstance()).setConfig({videoModel:H}),k.initialize(),x=(0,y.default)(o).getInstance(),X=[],i=!(z=K=null),Q=(W=0,A.default)(o).getInstance();var e,t=c.getActiveStreamProcessors();for(e in t)if("video"===t[e].getType()){Z=t[e].getRepresentationInfo().MSETimeOffset;break}n.on(R.default.VIDEO_CHUNK_RECEIVED,h,this),n.on(R.default.BUFFER_CLEARED,m,this)}function g(e){K=e}function $(e,t){var n,r,i=new E.default,a={subtitle:"subtitles",caption:"captions"};i.captionData=e,i.lang=t.lang,i.labels=t.labels,i.id=t.id?t.id:t.index,i.index=t.index,i.isTTML=(n=!1,t.codec&&0<=t.codec.search(ee.default.STPP)&&(n=!0),t.mimeType&&0<=t.mimeType.search(ee.default.TTML)&&(n=!0),n),i.defaultTrack=function(e){var t=!1;1<V.length&&e.isEmbedded?t=e.id&&e.id===ee.default.CC1:1===V.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===V.length&&(t=e.index===d[0].index);return t}(t),i.isFragmented=!u.getIsTextTrack(t.mimeType),i.isEmbedded=!!t.isEmbedded,i.kind=r=(r=0<t.roles.length?a[t.roles[0]]:a.caption)===a.caption||r===a.subtitle?r:a.caption,i.roles=t.roles,i.accessibility=t.accessibility;e=(d?d.length:0)+V.length;k.addTextTrack(i,e)}function _(e,t){var n,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=t.mediaInfo,d=l.type,f=l.mimeType,c=l.codec||f;if(c){if(d===ee.default.FRAGMENTED_TEXT)if(j||"InitializationSegment"!==t.segmentType){if(!j)return;if(n=(s=x.getSamplesInfo(e)).sampleList,null===q&&0<n.length&&(q=n[0].cts-t.start*Y),0<=c.search(ee.default.STPP))for(B=null!==B?B:J(c),i=0;i<n.length;i++){var h=(v=n[i]).cts,p=h-q;this.buffered.add(p/Y,(p+v.duration)/Y);for(var g=new DataView(e,v.offset,v.subSizes[0]),u=ne.default.Utils.dataViewToString(g,ee.default.UTF8),_=[],m=v.offset+v.subSizes[0],a=1;a<v.subSizes.length;a++){var E=new Uint8Array(e,m,v.subSizes[a]),E=String.fromCharCode.apply(null,E);_.push(E),m+=v.subSizes[a]}try{var y=U.getValue().ttmlTimeIsRelative?h/Y:0,r=B.parse(u,y,h/Y,(h+v.duration)/Y,_);k.addCaptions(K,q/Y,r)}catch(e){G.removeExecutedRequestsBeforeTime(),this.remove(),L.error("TTML parser error: "+e.message)}}else{for(var v,T=[],i=0;i<n.length;i++){(v=n[i]).cts-=q,this.buffered.add(v.cts/Y,(v.cts+v.duration)/Y);var S=e.slice(v.offset,v.offset+v.size),A=ne.default.parseBuffer(S);for(a=0;a<A.boxes.length;a++){var I=A.boxes[a];if(L.debug("VTT box1: "+I.type),"vtte"!==I.type&&"vttc"===I.type)for(L.debug("VTT vttc boxes.length = "+I.boxes.length),o=0;o<I.boxes.length;o++){var R,b,M=I.boxes[o];L.debug("VTT box2: "+M.type),"payl"===M.type&&(R=M.cue_text,L.debug("VTT cue_text = "+R),b=v.cts/Y,M=(v.cts+v.duration)/Y,T.push({start:b,end:M,data:R,styles:{}}),L.debug("VTT "+b+"-"+M+" : "+R))}}}0<T.length&&k.addCaptions(K,0,T)}}else j=!0,Y=x.getMediaTimescaleFromMoov(e);else if(d===ee.default.TEXT){g=new DataView(e,0,e.byteLength);u=ne.default.Utils.dataViewToString(g,ee.default.UTF8);try{r=J(c).parse(u,0),k.addCaptions(k.getCurrentTrackIdx(),0,r)}catch(e){F.error(new ie.default(ae.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,ae.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,u))}}else if(d===ee.default.VIDEO)if(t.segmentType===te.HTTPRequest.INIT_SEGMENT_TYPE){if(0===W)for(W=x.getMediaTimescaleFromMoov(e),i=0;i<V.length;i++)$(null,V[i])}else{if(0===W)return void L.warn("CEA-608: No timescale for embeddedTextTrack yet");t=(s=x.getSamplesInfo(e)).lastSequenceNumber;if(!X[0]&&!X[1]){var D,N=void 0;for(i=0;i<V.length;i++){if(V[i].id===ee.default.CC1?N=k.getTrackIdxForId(ee.default.CC1):V[i].id===ee.default.CC3&&(N=k.getTrackIdxForId(ee.default.CC3)),-1===N)return void L.warn("CEA-608: data before track is ready.");D=function(i){return function(e,t,n){var r=null;(r=H.getTTMLRenderingDiv()?Q.createHTMLCaptionsFromScreen(H.getElement(),e,t,n):[{start:e,end:t,data:n.getDisplayText(),styles:{}}])&&k.addCaptions(i,0,r)}}(N),X[i]=new re.default.Cea608Parser(i+1,{newCue:D},null)}}if(W){if(null!==z&&t!==z+s.numSequences)for(i=0;i<X.length;i++)X[i]&&X[i].reset();for(var C=function(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(e),i=0;i<t.length;i++)for(var a=t[i],o=re.default.findCea608Nalus(r,a.offset,a.size),s=null,u=0,l=0;l<o.length;l++)for(var d=re.default.extractCea608DataFromRange(r,o[l]),f=0;f<2;f++)0<d[f].length&&(a.cts!==s?u=0:u+=1,n.fields[f].push([a.cts+Z*W,d[f],u]),s=a.cts);return n.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),n}(e,s.sampleList),O=0;O<X.length;O++){var w=C.fields[O],P=X[O];if(P)for(i=0;i<w.length;i++)P.addData(w[i][0]/W,w[i][1])}z=t}}}else L.error("No text type defined")}function J(e){var t=void 0;return 0<=e.search(ee.default.VTT)?t=r:(0<=e.search(ee.default.TTML)||0<=e.search(ee.default.STPP))&&(t=a),t}function m(t){V.forEach(function(e){e=k.getTrackIdxForId(e.id);0<=e&&k.deleteCuesFromTrackIdx(e,t.from,t.to)})}return s={initialize:function(e,t,n,r){i||p(),k.setConfig({videoModel:H}),k.initialize(),x=x||(0,y.default)(o).getInstance(),function(e,t,n,r){e=!u.getIsTextTrack(e);if(d=d.concat(n),e){G=r,s.buffered=(0,v.default)(o).create(),f=l.getTracksFor(ee.default.FRAGMENTED_TEXT,t);for(var i=l.getCurrentTrackFor(ee.default.FRAGMENTED_TEXT,t),a=0;a<f.length;a++)if(f[a]===i){g(a);break}}for(a=0;a<d.length;a++)$(null,d[a])}(e,t,n,r)},append:_,abort:function(){k.deleteAllTextTracks(),e(),x=null,d=[]},addEmbeddedTrack:function(e){if(i||p(),e)if(e.id===ee.default.CC1||e.id===ee.default.CC3){for(var t=0;t<V.length;t++)if(V[t].id===e.id)return;V.push(e)}else L.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){n.off(R.default.VIDEO_CHUNK_RECEIVED,h,this),n.off(R.default.BUFFER_CLEARED,m,this),k&&k.deleteAllTextTracks(),i=!1,V=[],X=[null,null],z=null},setConfig:function(e){e&&(e.errHandler&&(F=e.errHandler),e.adapter&&(u=e.adapter),e.manifestModel&&(U=e.manifestModel),e.mediaController&&(l=e.mediaController),e.videoModel&&(H=e.videoModel),e.streamController&&(c=e.streamController),e.textTracks&&(k=e.textTracks),e.vttParser&&(r=e.vttParser),e.ttmlParser&&(a=e.ttmlParser))},getConfig:function(){return{fragmentModel:G,fragmentedTracks:f,videoModel:H}},setCurrentFragmentedTrackIdx:g,remove:function(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)},reset:function(){t(),k=H=c=null}},L=(0,T.default)(o).getInstance().getLogger(s),t(),s}a.__dashjs_factory_name="TextSourceBuffer",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{112:112,2:2,210:210,215:215,219:219,222:222,239:239,247:247,255:255,45:45,46:46,47:47,51:51,54:54,9:9}],215:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var N=r(e(112)),C=r(e(46)),O=r(e(54)),i=r(e(47)),w=r(e(45)),P=e(17),L=e(232);function a(){var e=this.context,p=(0,C.default)(e).getInstance(),t=void 0,u=void 0,l=void 0,g=void 0,a=void 0,o=void 0,d=void 0,_=void 0,m=void 0,E=void 0,y=void 0,v=void 0,r=void 0,T=void 0,S=void 0,n=void 0,A=void 0,i=void 0;function s(e){var t=a[e].kind,n=void 0!==a[e].id?a[e].id:a[e].lang,r=a[e].lang,i=a[e].isTTML,e=a[e].isEmbedded;return g.addTextTrack(t,n,r,i,e)}function f(e,t){var n=g.getClientWidth(),r=g.getClientHeight(),i=g.getVideoWidth(),a=g.getVideoHeight(),o=g.getVideoRelativeOffsetTop(),s=g.getVideoRelativeOffsetLeft();if(0!==i&&0!==a){var u=i/a,l=!1;e.isFromCEA608&&(u=3.5/3,l=!0);i=function(e,t,n,r,i,a){var o=0,s=0;n/r<e/t?o=(s=t)/r*n:s=(o=e)/n*r;n=0,r=0;return i<o/s?n=(r=s)*i:r=(n=o)/i,e=(e-n)/2,t=(t-r)/2,a?{x:e+.1*n,y:t+.1*r,w:.8*n,h:.8*r}:{x:e,y:t,w:n,h:r}}.call(this,n,r,i,a,u,l),a=i.w,u=i.h,l=i.x,i=i.y;if(a!=E||u!=y||l!=_||i!=m||t){_=l+s,m=i+o,E=a,y=u,!v||(u=v.style)&&(u.left=_+"px",u.top=m+"px",u.width=E+"px",u.height=y+"px",u.zIndex=T&&document[T]||S?A:null,p.trigger(O.default.CAPTION_CONTAINER_RESIZE));var d=e.activeCues;if(d)for(var f=d.length,c=0;c<f;++c){var h=d[c];h.scaleCue(h)}}}}function c(e){var t,n=void 0,r=void 0,i=void 0,a=void 0,o=void 0;if(e.cellResolution){var s=[E/e.cellResolution[0],y/e.cellResolution[1]];if(e.linePadding)for(n in e.linePadding)if(e.linePadding.hasOwnProperty(n))for(var r=(e.linePadding[n]*s[0]).toString(),u=document.getElementsByClassName("spanPadding"),l=0;l<u.length;l++)u[l].style.cssText=u[l].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r),u[l].style.cssText=u[l].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r);if(e.fontSize){for(n in e.fontSize)if(e.fontSize.hasOwnProperty(n)){"%"===e.fontSize[n][0]?i=e.fontSize[n][1]/100:"c"===e.fontSize[n][0]&&(i=e.fontSize[n][1]),r=(i*s[1]).toString(),o="defaultFontSize"!==n?document.getElementsByClassName(n):document.getElementsByClassName("paragraph");for(var d=0;d<o.length;d++)o[d].style.cssText=o[d].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}if(e.lineHeight)for(n in e.lineHeight)if(e.lineHeight.hasOwnProperty(n)){"%"===e.lineHeight[n][0]?a=e.lineHeight[n][1]/100:"c"===e.fontSize[n][0]&&(a=e.lineHeight[n][1]),r=(a*s[1]).toString(),o=document.getElementsByClassName(n);for(var f=0;f<o.length;f++)o[f].style.cssText=o[f].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}}}e.isd&&((t=document.getElementById(e.cueID))&&v.removeChild(t),h(e))}function h(a){var e;v&&(e=document.createElement("div"),v.appendChild(e),n=(0,P.renderHTML)(a.isd,e,function(e){var t=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,n=/^#(.*)$/;if(t.test(e)){var r=t.exec(e),i=parseInt(r[4],10)-1;return"data:image/png;base64,"+btoa(a.images[i])}if(n.test(e)){i=(r=n.exec(e))[1];return"data:image/png;base64,"+a.embeddedImages[i]}return null},v.clientHeight,v.clientWidth,!1,function(e){u.info("renderCaption :",e)},n,!0),e.id=a.cueID,p.trigger(O.default.CAPTION_RENDERED,{captionDiv:e,currentTrackIdx:d}))}function I(e){return 0<=e&&a[e]?g.getTextTrack(a[e].kind,a[e].id,a[e].lang,a[e].isTTML,a[e].isEmbedded):null}function R(e){var t,n=this;e!==d&&(t=I(d=e),function(e){D.call(this),(e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(e)return;(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=g.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){u.info(""+e.message)}}:M).call(this)}.call(this,t),r&&(clearInterval(r),r=null),t&&"html"===t.renderingType&&(f.call(this,t,!0),window.ResizeObserver?(i=new window.ResizeObserver(function(){f.call(n,t,!0)})).observe(g.getElement()):r=setInterval(f.bind(this,t),500)))}function b(e,t,n){if(e.cues)for(var r=e.cues,i=r.length-1;0<=i;i--)a=r[i],o=t,s=n,(isNaN(o)||a.startTime>=o)&&(isNaN(s)||a.endTime<=s)&&e.removeCue(r[i]);var a,o,s}function M(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function D(){if(v)for(;v.firstChild;)v.removeChild(v.firstChild)}return t={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(l=window.VTTCue||window.TextTrackCue,a=[],o=[],S=!(d=-1),A=2147483647,n=r=v=null,void(y=E=m=_=0)!==document.fullscreenElement?T="fullscreenElement":void 0!==document.webkitIsFullScreen?T="webkitIsFullScreen":document.msFullscreenElement?T="msFullscreenElement":document.mozFullScreen&&(T="mozFullScreen"))},setDisplayCConTop:function(e){(0,L.checkParameterType)(e,"boolean"),S=e,v&&!document[T]&&(v.style.zIndex=e?A:null)},addTextTrack:function(e,t){var i=this;a.length!==t?(a.push(e),a.length===t&&function(){a.sort(function(e,t){return e.index-t.index}),v=g.getTTMLRenderingDiv();for(var r=-1,e=0;e<a.length;e++){var t=s.call(i,e);o.push(t),a[e].defaultTrack&&(t.default=!0,r=e);t=I(e);t&&(t.mode=N.default.TEXT_SHOWING,v&&(a[e].isTTML||a[e].isEmbedded)?t.renderingType="html":t.renderingType="default"),i.addCaptions(e,0,a[e].captionData),p.trigger(O.default.TEXT_TRACK_ADDED)}R.call(i,r),0<=r&&function(){function t(){var e=I(r);e&&f.call(this,e,!0),p.off(O.default.PLAYBACK_METADATA_LOADED,t,this)}p.on(O.default.PLAYBACK_METADATA_LOADED,t,i);for(var e=0;e<a.length;e++){var n=I(e);n&&(n.mode=e===r?N.default.TEXT_SHOWING:N.default.TEXT_HIDDEN)}}(),p.trigger(O.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:d,tracks:a})}()):u.error("Trying to add too many tracks.")},addCaptions:function(e,t,n){var r=I(e),i=this;if(r&&Array.isArray(n)&&0!==n.length)for(var a=0;a<n.length;a++){var o=void 0,s=n[a];r.cellResolution=s.cellResolution,r.isFromCEA608=s.isFromCEA608,"html"===s.type&&v?((o=new l(s.start-t,s.end-t,"")).cueHTMLElement=s.cueHTMLElement,o.isd=s.isd,o.images=s.images,o.embeddedImages=s.embeddedImages,o.cueID=s.cueID,o.scaleCue=c.bind(i),o.cellResolution=s.cellResolution,o.lineHeight=s.lineHeight,o.linePadding=s.linePadding,o.fontSize=s.fontSize,v.style.left=_+"px",v.style.top=m+"px",v.style.width=E+"px",v.style.height=y+"px",o.onenter=function(){r.mode===N.default.TEXT_SHOWING&&(this.isd?(h(this),u.debug("Cue enter id:"+this.cueID)):(v.appendChild(this.cueHTMLElement),c.call(i,this),p.trigger(O.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:d})))},o.onexit=function(){if(v)for(var e=v.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(u.debug("Cue exit id:"+e[t].id),v.removeChild(e[t]),--t)}):s.data&&(o=new l(s.start-t,s.end-t,s.data),s.styles&&(void 0!==s.styles.align&&"align"in o&&(o.align=s.styles.align),void 0!==s.styles.line&&"line"in o&&(o.line=s.styles.line),void 0!==s.styles.position&&"position"in o&&(o.position=s.styles.position),void 0!==s.styles.size&&"size"in o&&(o.size=s.styles.size)),o.onenter=function(){r.mode===N.default.TEXT_SHOWING&&p.trigger(O.default.CAPTION_RENDERED,{currentTrackIdx:d})});try{o?r.addCue(o):u.error("impossible to display subtitles.")}catch(e){throw b(r),r.addCue(o),e}}},getCurrentTrackIdx:function(){return d},setCurrentTrackIdx:R,getTrackIdxForId:function(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return a[d]},setModeForTrackIdx:function(e,t){(e=I(e))&&e.mode!==t&&(e.mode=t)},deleteCuesFromTrackIdx:function(e,t,n){(e=I(e))&&b(e,t,n)},deleteAllTextTracks:function(){for(var e=o?o.length:0,t=0;t<e;t++){var n=I(t);n&&(b.call(this,n),n.mode="disabled")}o=[],a=[],r&&(clearInterval(r),r=null),i&&g&&(i.unobserve(g.getElement()),i=null),d=-1,D.call(this)},deleteTextTrack:function(e){g.removeChild(o[e]),o.splice(e,1)},setConfig:function(e){e&&e.videoModel&&(g=e.videoModel)}},u=(0,w.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="TextTracks",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{112:112,17:17,232:232,45:45,46:46,47:47,54:54}],216:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(112)),s=r(e(248)),u=r(e(217)),l=r(e(238)),d=e(81);function o(e){var t,n=this.context,r=e.streamInfo,o=void 0;function i(){o&&o.reset()}return t={getStreamId:function(){return r.id},provide:function(e,t){if("function"==typeof t){var n=o.getCurrentTrack(),r=void 0;if(!n||n.segmentDuration<=0||null==e)t(null);else{isNaN(n.segmentDuration)&&(r=o.getThumbnailRequestForTime(e))&&(n.segmentDuration=r.duration),i=e%n.segmentDuration;var i=Math.floor(i*n.tilesHor*n.tilesVert/n.segmentDuration),a=new s.default;if(a.width=Math.floor(n.widthPerTile),a.height=Math.floor(n.heightPerTile),a.x=Math.floor(i%n.tilesHor)*n.widthPerTile,a.y=Math.floor(i/n.tilesHor)*n.heightPerTile,"readThumbnail"in n)return n.readThumbnail(e,function(e){a.url=e,t(a)});r?(a.url=r.url,n.segmentDuration=NaN):(r=Math.floor(e/n.segmentDuration),a.url=(n=(e=r)+(r=n).startNumber,e=(0,d.replaceTokenForTemplate)(r.templateUrl,"Number",n),e=(0,d.replaceTokenForTemplate)(e,"Time",(n-1)*r.segmentDuration*r.timescale),e=(0,d.replaceTokenForTemplate)(e,"Bandwidth",r.bandwidth),(0,d.unescapeDollarsInTemplate)(e))),t(a)}}},setTrackByIndex:function(e){o.setTrackByIndex(e)},getCurrentTrackIndex:function(){return o.getCurrentTrackIndex()},getBitrateList:function(){var e=o.getTracks(),n=0;return e.map(function(e){var t=new l.default;return t.mediaType=a.default.IMAGE,t.qualityIndex=n++,t.bitrate=e.bitrate,t.width=e.width,t.height=e.height,t})},reset:i},i(),o=(0,u.default)(n).create({streamInfo:r,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants}),t}o.__dashjs_factory_name="ThumbnailController",n.default=i.default.getClassFactory(o),t.exports=n.default},{112:112,217:217,238:238,248:248,47:47,81:81}],217:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var v=r(e(112)),T=r(e(61)),i=r(e(47)),S=r(e(249)),A=r(e(234)),I=e(81),R=r(e(54)),b=r(e(219)),M=r(e(164)),D=r(e(57)),N=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function a(e){var t=this.context,s=e.adapter,u=e.baseURLController,r=e.streamInfo,l=e.timelineConverter,n=e.debug,i=e.eventBus,a=e.events,o=e.dashConstants,d=(0,A.default)(t).getInstance(),e=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=void 0,_=void 0;function m(){y(),g=(0,M.default)(t).create({}),_=(0,b.default)(t).getInstance(),(c=(0,D.default)(t).create({streamInfo:r,timelineConverter:l,baseURLController:u,debug:n,eventBus:i,events:a,dashConstants:o,urlUtils:d})).initialize(!!s&&s.getIsDynamic()),function(){if(!r||!s)return;if(!(p=s.getMediaInfoForType(r,v.default.IMAGE)))return;var e=s.getVoRepresentations(p);e&&0<e.length&&e.forEach(function(e){(e.segmentInfoType===T.default.SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media||e.segmentInfoType===T.default.SEGMENT_TIMELINE)&&E(e),e.segmentInfoType===T.default.SEGMENT_BASE&&E(e,!0)});0<f.length&&(f.sort(function(e,t){return e.bitrate-t.bitrate}),h=f.length-1)}()}function E(e,t){var n=new S.default;n.id=e.id,n.bitrate=e.bandwidth,n.width=e.width,n.height=e.height,n.tilesHor=1,n.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach(function(e){0<=N.indexOf(e.schemeIdUri)&&e.value&&(2!==(e=e.value.split("x")).length||isNaN(e[0])||isNaN(e[1])||(n.tilesHor=parseInt(e[0],10),n.tilesVert=parseInt(e[1],10)))}),t?i.trigger(R.default.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,{streamId:r.id,mediaType:v.default.IMAGE,mimeType:p.mimeType,representation:e,callback:function(e,t,i,a){var o=[];i=function(e,t){for(var n,r=[],i=0,a=void 0,a=0,o=e.length;a<o;a++)n=e[a],(n=(0,I.getTimeBasedSegment)(l,s.getIsDynamic(),t,n.startTime,n.duration,n.timescale,n.media,n.mediaRange,i))&&(r.push(n),i++);return r}(i,a),n.segmentDuration=i[0].duration,n.readThumbnail=function(t,r){var n=null;o.some(function(e){if(e.start<=t&&e.end>t)return n=e.url,!0}),n?r(n):i.some(function(n){if(n.mediaStartTime<=t&&n.mediaStartTime+n.duration>t){var e=u.resolve(a.path);return g.load({method:"get",url:e.url,request:{range:n.mediaRange,responseType:"arraybuffer"},onload:function(e){var t=_.getSamplesInfo(e.target.response),t=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),t=window.URL.createObjectURL(t);o.push({start:n.mediaStartTime,end:n.mediaStartTime+n.duration,url:t}),r&&r(t)}}),!0}})}}}):(n.startNumber=e.startNumber,n.segmentDuration=e.segmentDuration,n.timescale=e.timescale,n.templateUrl=(t=e,(e=d.isRelative(t.media)?d.resolve(t.media,u.resolve(t.path).url):t.media)?(0,I.replaceIDForTemplate)(e,t.id):"")),0<n.tilesHor&&0<n.tilesVert&&(n.widthPerTile=n.width/n.tilesHor,n.heightPerTile=n.height/n.tilesVert,f.push(n))}function y(){f=[],h=-1,p=null}return e={initialize:m,getTracks:function(){return f},reset:y,setTrackByIndex:function(e){f&&0!==f.length&&(e>=f.length&&(e=f.length-1),h=e)},getCurrentTrack:function(){return h<0?null:f[h]},getCurrentTrackIndex:function(){return h},getThumbnailRequestForTime:function(e){for(var t=void 0,n=s.getVoRepresentations(p),r=0;r<n.length;r++)if(f[h].id===n[r].id){t=n[r];break}return c.getSegmentRequestForTime(p,t,e)}},m(),e}n.THUMBNAILS_SCHEME_ID_URIS=N,a.__dashjs_factory_name="ThumbnailTracks",n.default=i.default.getClassFactory(a)},{112:112,164:164,219:219,234:234,249:249,47:47,54:54,57:57,61:61,81:81}],218:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(51)),l=r(e(46)),d=r(e(54)),f=r(e(117)),c=r(e(237)),h=r(e(236)),i=r(e(47)),p=r(e(239)),g=e(232);function a(){var e,t=this.context,r=(0,l.default)(t).getInstance(),n=void 0,i=void 0,a=void 0,o=void 0;function s(){n.reset()}return e={chooseSelector:function(e){(0,g.checkParameterType)(e,"boolean"),o=e?a:i},select:function(e){if(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];n=o.select(t);return n?(e.selectedIdx=t.indexOf(n),n):(r.trigger(d.default.URL_RESOLUTION_FAILED,{error:new p.default(u.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,u.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(o===i&&s()))}},reset:s,setConfig:function(e){e.selector&&(o=e.selector)}},n=(0,f.default)(t).create({updateEventName:d.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:d.default.SERVICE_LOCATION_BLACKLIST_ADD}),i=(0,h.default)(t).create({blacklistController:n}),a=(0,c.default)(t).create({blacklistController:n}),o=i,e}a.__dashjs_factory_name="BaseURLSelector",n.default=i.default.getClassFactory(a),t.exports=n.default},{117:117,232:232,236:236,237:237,239:239,46:46,47:47,51:51,54:54}],219:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(45)),a=r(e(228)),o=r(e(47)),s=r(e(9)),d=r(e(244));function u(){var r=void 0,e=void 0,n=this.context;function O(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=s.default.parseBuffer(e),e=(0,a.default)(n).create();return e.setData(t),e}function u(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function l(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return e={parse:O,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new d.default(0,!1);for(var r=t instanceof ArrayBuffer?new Uint8Array(t):t,i=void 0,a=0;n<r.byteLength;){var o=u(r,n),s=l(r,n+4);if(0===o)break;n+o<=r.byteLength&&(0<=e.indexOf(s)?i=new d.default(n,!0,o):a=n+o),n+=o}return i||new d.default(a,!1)},getMediaTimescaleFromMoov:function(e){return(e=(e=O(e))?e.getBox("mdhd"):void 0)?e.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};for(var t,n,r,i=O(e),a=i.getBoxes("moof"),o=i.getBoxes("mfhd"),s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=void 0,e=void 0,_=void 0,e=i.getBoxes("moof").length,o=o[o.length-1].sequence_number,u=[],m=-1,E=-1,c=0;c<a.length;c++)for(var y=a[c],v=y.getChildBoxes("traf"),d=0;d<v.length;d++){for(var T=v[d],S=T.getChildBox("tfhd"),A=T.getChildBox("tfdt"),s=A.baseMediaDecodeTime,I=T.getChildBoxes("trun"),R=T.getChildBoxes("subs"),f=0;f<I.length;f++)for(var b=I[f],M=b.sample_count,g=(S.base_data_offset||0)+(b.data_offset||0),l=0;l<M;l++){t=void 0!==(r=b.samples[l]).sample_duration?r.sample_duration:S.default_sample_duration,n=void 0!==r.sample_size?r.sample_size:S.default_sample_size;var D={dts:s,cts:s+(void 0!==r.sample_composition_time_offset?r.sample_composition_time_offset:0),duration:t,offset:y.offset+g,size:n,subSizes:[n]};if(R)for(h=0;h<R.length;h++){var N=R[h];if(m<N.entry_count-1&&E<l&&(m++,E+=N.entries[m].sample_delta),l==E){D.subSizes=[];for(var C=N.entries[m],p=0;p<C.subsample_count;p++)D.subSizes.push(C.subsamples[p].subsample_size)}}u.push(D),g+=n,s+=t}_=s-A.baseMediaDecodeTime}return{sampleList:u,lastSequenceNumber:o,totalDuration:_,numSequences:e}},findInitRange:function(e){var t=null,n=O(e);return n&&(e=n.getBox("ftyp"),n=n.getBox("moov"),r.debug("Searching for initialization."),n&&n.isComplete&&(t=(e||n).offset+"-"+(n.offset+n.size-1),r.debug("Found the initialization.  Range: "+t))),t},parsePayload:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new d.default(0,!1);for(var r=t instanceof ArrayBuffer?new Uint8Array(t):t,i=void 0,a=0;n<r.byteLength;){var o=u(r,n),s=l(r,n+4);if(0===o)break;n+o<=r.byteLength&&(0<=e.indexOf(s)?i=new d.default(n,!0,o,s):a=n+o),n+=o}return i||new d.default(a,!1)}},r=(0,i.default)(n).getInstance().getLogger(e),e}u.__dashjs_factory_name="BoxParser",n.default=o.default.getSingletonFactory(u),t.exports=n.default},{228:228,244:244,45:45,47:47,9:9}],220:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.supportsMediaSource=u;var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r},o=e(217),s=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function u(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function l(){var e,t=void 0;return t=!(e={supportsMediaSource:u,supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return!!("MediaSource"in window&&MediaSource.isTypeSupported(e))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e},supportsEssentialProperty:function(e){try{return-1!==o.THUMBNAILS_SCHEME_ID_URIS.indexOf(e.schemeIdUri)}catch(e){return!0}},codecRootCompatibleWithCodec:function(e,t){for(var n=e.split(".")[0],e=0===t.indexOf(n),r=void 0,i=0;i<s.length;i++)if(s[i].codec===n){r=s[i];break}return r?e||r.compatibleCodecs.some(function(e){return 0===t.indexOf(e)}):e}}),e}l.__dashjs_factory_name="Capabilities",n.default=a.default.getSingletonFactory(l)},{217:217,47:47}],221:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),u=r(e(45)),l=r(e(112));function a(){var e=this.context,t=void 0,r=void 0,i=void 0,n=void 0,a=void 0,o=void 0;function s(e,t){t=r.getRealPeriodByIndex(t?t.index:null);t&&t.AdaptationSet_asArray&&0!==t.AdaptationSet_asArray.length&&(t.AdaptationSet_asArray=t.AdaptationSet_asArray.filter(function(n){return!n.Representation_asArray||0===n.Representation_asArray.length||!r.getIsTypeOf(n,e)||(n.Representation_asArray=n.Representation_asArray.filter(function(e,t){t=r.getCodec(n,t,!0);return!!i.supportsCodec(t)||(a.error("[Stream] codec not supported: "+t),!1)}),n.Representation_asArray&&0<n.Representation_asArray.length)}))}return t={setConfig:function(e){e&&(e.adapter&&(r=e.adapter),e.capabilities&&(i=e.capabilities),e.settings&&(n=e.settings))},filterUnsupportedFeaturesOfPeriod:function(e){s(l.default.VIDEO,e),s(l.default.AUDIO,e),n.get().streaming.filterUnsupportedEssentialProperties&&function(e){e=r.getRealPeriodByIndex(e?e.index:null);if(!e||!e.AdaptationSet_asArray||0===e.AdaptationSet_asArray.length)return;e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter(function(e){var t=r.getEssentialPropertiesForRepresentation(e);if(t&&0<t.length)for(var n=0;n<t.length;){if(!i.supportsEssentialProperty(t[n]))return a.debug("[Stream] EssentialProperty not supported: "+t[n].schemeIdUri),!1;n+=1}return!0}),e.Representation_asArray&&0<e.Representation_asArray.length)})}(e),function(e){if(!o||0===o.length)return;e=r.getRealPeriodByIndex(e?e.index:null);if(!e||!e.AdaptationSet_asArray||0===e.AdaptationSet_asArray.length)return;e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter(function(t){return!o.some(function(e){return!e(t)})}),e.Representation_asArray&&0<e.Representation_asArray.length)})}(e)},setCustomCapabilitiesFilters:function(e){o=e}},a=(0,u.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="CapabilitiesFilter",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{112:112,45:45,47:47}],222:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),a=(r=i)&&r.__esModule?r:{default:r},o=e(232);function s(){return{customTimeRangeArray:[],length:0,add:function(e,t){for(var n=0,n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}s.__dashjs_factory_name="CustomTimeRanges",n.default=a.default.getClassFactory(s),t.exports=n.default},{232:232,47:47}],223:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),d=r(e(45)),f=r(e(112)),c=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],h="dashjs_?_bitrate",p="dashjs_?_settings",g="localStorage",_="lastBitrate",m="lastMediaSettings";function a(e){e=e||{};var t=this.context,a=e.settings,n=void 0,o=void 0,r=void 0;function i(e){if(void 0!==r)return r;r=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return o.warn("DOMStorage access denied: "+e.message),r}if(!t||e!==g&&"sessionStorage"!==e)return r;try{t.setItem("1","1"),t.removeItem("1"),r=!0}catch(e){o.warn("DOMStorage is supported, but cannot be used: "+e.message)}return r}function s(){return 6e5*Math.round((new Date).getTime()/6e5)}function u(e,t){return i(e)&&a.get().streaming[t+"CachingInfo"].enabled}function l(){if(!a)throw new Error(f.default.MISSING_CONFIG_ERROR)}return n={getSavedBitrateSettings:function(e){var t=NaN;if(l(),u(g,_)){var n=h.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=a.get().streaming.lastBitrateCachingInfo.ttl||!1,r=parseFloat(r.bitrate);isNaN(r)||i?i&&localStorage.removeItem(n):(t=r,o.debug("Last saved bitrate for "+e+" was "+r))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(u(g,_)&&t){var n=h.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:s()}))}catch(e){o.error(e.message)}}},getSavedMediaSettings:function(e){var t=null;if(l(),u(g,m)){var n=p.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=a.get().streaming.lastMediaSettingsCachingInfo.ttl||!1,t=r.settings;i&&(localStorage.removeItem(n),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(u(g,m)){var n=p.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:s()}))}catch(e){o.error(e.message)}}}},o=(0,d.default)(t).getInstance().getLogger(n),i(g)&&c.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){o.error(e.message)}}}),n}a.__dashjs_factory_name="DOMStorage";i=i.default.getSingletonFactory(a);n.default=i,t.exports=n.default},{112:112,45:45,47:47}],224:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),e=(r=i)&&r.__esModule?r:{default:r};function a(){function e(t,e){try{return new window.URL(t,e).toString()}catch(e){return t}}function t(e,t){var n=s;return t&&d(e)?(f(e)&&(n=u),c(e)&&(n=l),n=n(t),t="/"!==n.charAt(n.length-1)&&"/"!==e.charAt(0)?"/":"",[n,e].join(t)):e}var n=void 0,r=/^[a-z][a-z0-9+\-_.]*:/i,i=/^https?:\/\//i,a=/^https:\/\//i,o=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i;function s(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function u(e){e=e.match(o);return e?e[1]:""}function l(e){e=e.match(r);return e?e[0]:""}function d(e){return!r.test(e)}function f(e){return d(e)&&"/"===e.charAt(0)}function c(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y");n=e}catch(e){}finally{n=n||t}}(),{parseBaseUrl:s,parseOrigin:u,parseScheme:l,isRelative:d,isPathAbsolute:f,isSchemeRelative:c,isHTTPURL:function(e){return i.test(e)},isHTTPS:function(e){return a.test(e)},removeHostname:function(e){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(e,t){return n(e,t)}}}a.__dashjs_factory_name="DefaultURLUtils",n.default=e.default.getSingletonFactory(a),t.exports=n.default},{47:47}],225:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),e=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var n=void 0,s=new DataView(e.data),u=0;function r(e,t){var n=!0,r=0;if(void 0===t&&(t=!1),r=16777215<e.tag?(s.getUint32(u)!==e.tag&&(n=!1),4):65535<e.tag?(256*s.getUint16(u)+s.getUint8(u+2)!==e.tag&&(n=!1),3):255<e.tag?(s.getUint16(u)!==e.tag&&(n=!1),2):(s.getUint8(u)!==e.tag&&(n=!1),1),!n&&e.required&&!t)throw new Error("required tag not found");return n&&(u+=r),n}function i(e){for(var t=1,n=128,r=-1,i=0,a=s.getUint8(u),o=0,o=0;o<8;o+=1){if((a&n)===n){i=void 0===e?a&~n:a,r=o;break}n>>=1}for(o=0;o<r;o+=1,t+=1)i=i<<8|255&s.getUint8(u+t);return u+=t,i}return n={getPos:function(){return u},setPos:function(e){u=e},consumeTag:r,consumeTagAndSize:function(e,t){return(t=r(e,t))&&i(),t},parseTag:function(e){var t;return r(e),t=i(),n[e.parse](t)},skipOverElement:function(e,t){return e=r(e,t),t=void 0,e&&(t=i(),u+=t),e},getMatroskaCodedNum:i,getMatroskaFloat:function(e){var t=void 0;switch(e){case 4:t=s.getFloat32(u),u+=4;break;case 8:t=s.getFloat64(u),u+=8}return t},getMatroskaUint:function(e){for(var t=0,n=0;n<e;n+=1)t<<=8,t|=255&s.getUint8(u+n);return u+=e,t},moreData:function(){return u<s.byteLength}}}a.__dashjs_factory_name="EBMLParser",n.default=e.default.getClassFactory(a),t.exports=n.default},{47:47}],226:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),a=r(e(54)),e=r(e(47));function o(){var e=this.context,t=(0,i.default)(e).getInstance();return{error:function(e){t.trigger(a.default.ERROR,{error:e})}}}o.__dashjs_factory_name="ErrorHandler",n.default=e.default.getSingletonFactory(o),t.exports=n.default},{46:46,47:47,54:54}],227:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),e=(r=i)&&r.__esModule?r:{default:r};function a(){var r={};return{save:function(e){var t=e.streamId,n=e.representationId;r[t]=r[t]||{},r[t][n]=e},extract:function(e,t){return r&&r[e]&&r[e][t]?r[e][t]:null},reset:function(){r={}}}}a.__dashjs_factory_name="InitCache",n.default=e.default.getSingletonFactory(a),t.exports=n.default},{47:47}],228:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(243)),e=r(e(47));function a(){var o=void 0;function t(e){var t=[];if(!e||!o||"function"!=typeof o.fetchAll)return t;for(var n,r=o.fetchAll(e),i=0,a=r.length;i<a;i++)(n=s(r[i]))&&t.push(n);return t}function s(e){if(!e)return null;var t=new i.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return{getBox:function(e){return e&&o&&o.boxes&&0!==o.boxes.length&&"function"==typeof o.fetch?s(o.fetch(e)):null},getBoxes:t,setData:function(e){o=e},getLastBox:function(){if(!o||!o.boxes||!o.boxes.length)return null;var e=t(o.boxes[o.boxes.length-1].type);return 0<e.length?e[e.length-1]:null}}}a.__dashjs_factory_name="IsoFile",n.default=e.default.getClassFactory(a),t.exports=n.default},{243:243,47:47}],229:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(112));function o(e){var t=(e=e||{}).timelineConverter;return{getLiveEdge:function(e){return function(){if(!t||!t.hasOwnProperty("getExpectedLiveEdge"))throw new Error(a.default.MISSING_CONFIG_ERROR)}(),e.DVRWindow?e.DVRWindow.end:0},reset:function(){t=null}}}o.__dashjs_factory_name="LiveEdgeFinder",n.default=i.default.getClassFactory(o),t.exports=n.default},{112:112,47:47}],230:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(12));function o(){return{areEqual:function(e,t){return(0,a.default)(e,t)}}}o.__dashjs_factory_name="ObjectUtils",n.default=i.default.getSingletonFactory(o),t.exports=n.default},{12:12,47:47}],231:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),e=(r=i)&&r.__esModule?r:{default:r};function a(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}a.__dashjs_factory_name="RequestModifier",n.default=e.default.getSingletonFactory(a),t.exports=n.default},{47:47}],232:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkParameterType=function(e,t){if(typeof e!==t)throw a.default.BAD_ARGUMENT_ERROR},n.checkInteger=function(e){if(null===e||isNaN(e)||e%1!=0)throw a.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"},n.checkRange=function(e,t,n){if(e<t||n<e)throw a.default.BAD_ARGUMENT_ERROR+" : argument out of range"},n.checkIsVideoOrAudioType=function(e){if("string"!=typeof e||e!==a.default.AUDIO&&e!==a.default.VIDEO)throw a.default.BAD_ARGUMENT_ERROR};var r,i=e(112),a=(r=i)&&r.__esModule?r:{default:r}},{112:112}],233:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45)),o=r(e(46)),S=r(e(54)),A=e(17),I=r(e(104)),R=r(e(111));function s(){var e=this.context,y=(0,o.default)(e).getInstance(),t=void 0,v=void 0,T=0;return t={parse:function(e,t,n,r,i){var a,o,s="",u=[],l=void 0,d={},f={},c="",h="",p={onOpenTag:function(e,t,n){if(n[" imagetype"]&&!n[" imageType"]&&(y.trigger(I.default.CONFORMANCE_VIOLATION,{level:R.default.LEVELS.ERROR,event:R.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),n[" imageType"]=n[" imagetype"]),"image"===t&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===e)){if(!n[" imageType"]||"PNG"!==n[" imageType"].value)return void v.warn("smpte-tt imageType != PNG. Discarded");c=n["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){c&&(f[c]=h.trim()),c=h=""},onText:function(e){c&&(h+=e)}};if(!e)throw s="no ttml data to parse",new Error(s);d.data=e,y.trigger(S.default.TTML_TO_PARSE,d);var g=(0,A.fromXML)(d.data,function(e){s=e},p);y.trigger(S.default.TTML_PARSED,{ttmlString:d.data,ttmlDoc:g});for(var _,m=g.getMediaTimeEvents(),l=0;l<m.length;l++){var E=(0,A.generateISD)(g,m[l],function(e){s=e});E.contents.some(function(e){return e.contents.length})&&(a=m[l]+t<n?n:m[l]+t)<(o=m[l+1]+t>r?r:m[l+1]+t)&&u.push({start:a,end:o,type:"html",cueID:(_=void 0,_="cue_TTML_"+T,T++,_),isd:E,images:i,embeddedImages:f})}if(""!==s)throw v.error(s),new Error(s);return u}},v=(0,a.default)(e).getInstance().getLogger(t),t}s.__dashjs_factory_name="TTMLParser",n.default=i.default.getSingletonFactory(s),t.exports=n.default},{104:104,111:111,17:17,45:45,46:46,47:47,54:54}],234:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(224));function a(){var i=void 0,a=[],e=this.context;function n(e,t,n){var r=function(e){for(var t=void 0,t=0;t<a.length;t++){if(a[t].regex.test(e))return a[t].utils}return i}(n||t);return(r&&"function"==typeof r[e]?r:i)[e](t,n)}return i=(0,o.default)(e).getInstance(),{registerUrlRegex:function(e,t){a.push({regex:e,utils:t})},parseBaseUrl:function(e){return n("parseBaseUrl",e)},parseOrigin:function(e){return n("parseOrigin",e)},parseScheme:function(e){return n("parseScheme",e)},isRelative:function(e){return n("isRelative",e)},isPathAbsolute:function(e){return n("isPathAbsolute",e)},isSchemeRelative:function(e){return n("isSchemeRelative",e)},isHTTPURL:function(e){return n("isHTTPURL",e)},isHTTPS:function(e){return n("isHTTPS",e)},removeHostname:function(e){return n("removeHostname",e)},resolve:function(e,t){return n("resolve",e,t)}}}a.__dashjs_factory_name="URLUtils";i=i.default.getSingletonFactory(a);n.default=i,t.exports=n.default},{224:224,47:47}],235:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(45));function o(){var e=this.context,t=void 0,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0;function p(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2==n&&(e+=3600*parseInt(t[0],10)),e}return t={parse:function(e){var t,n=[],r=void 0;if(!e)return n;t=(e=e.split(d)).length,r=-1;for(var i=0;i<t;i++){var a,o,s,u=e[i];0<u.length&&"WEBVTT"!==u&&u.match(f)&&(a=void 0,(o=(a=(o=u).split(f))[1].split(h)).shift(),a[1]=o[0],o.shift(),u=(s={cuePoints:a,styles:function(e){var n={};return e.forEach(function(e){var t;1<e.split(/:/).length&&((t=e.split(/:/)[1])&&-1!=t.search(/%/)&&(t=parseInt(t.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(n.align=t),(e.match(/line/)||e.match(/L/))&&(n.line=t),(e.match(/position/)||e.match(/P/))&&(n.position=t),(e.match(/size/)||e.match(/S/))&&(n.size=t))}),n}(o)}).cuePoints,a=s.styles,o=function(e,t){var n=t,r="",i="",a=void 0;for(;""!==e[n]&&n<e.length;)n++;if(1<(a=n-t))for(var o=0;o<a;o++){if((i=e[t+o]).match(f)){r="";break}r+=i,o!==a-1&&(r+="\n")}else(i=e[t]).match(f)||(r=i);return r}(e,i+1),s=p(u[0].replace(c,"")),u=p(u[1].replace(c,"")),!isNaN(s)&&!isNaN(u)&&r<=s&&s<u?""!==o?(r=s,n.push({start:s,end:u,data:o,styles:a})):l.error("Skipping cue due to empty/malformed cue text"):l.error("Skipping cue due to incorrect cue timing"))}return n}},l=(0,a.default)(e).getInstance().getLogger(t),d=/(?:\r\n|\r|\n)/gm,f=/-->/,c=/(^[\s]+|[\s]+$)/g,h=/\s\b/g,t}o.__dashjs_factory_name="VTTParser",n.default=i.default.getSingletonFactory(o),t.exports=n.default},{45:45,47:47}],236:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),e=(r=i)&&r.__esModule?r:{default:r};function a(e){var r=(e=e||{}).blacklistController;return{select:function(e){var n=0,t=void 0;return e&&e.some(function(e,t){return n=t,!r.contains(e.serviceLocation)})&&(t=e[n]),t}}}a.__dashjs_factory_name="BasicSelector",n.default=e.default.getClassFactory(a),t.exports=n.default},{47:47}],237:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(47),e=(r=i)&&r.__esModule?r:{default:r};function a(e){var n=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var n,t=0,r=[],i=0,a=void 0;if((a=e.sort(function(e,t){t=e.dvb_priority-t.dvb_priority;return isNaN(t)?0:t}).filter(function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority})).length)return 1<a.length&&(a.forEach(function(e){t+=e.dvb_weight,r.push(t)}),n=Math.floor(Math.random()*(t-1)),r.every(function(e,t){return i=t,!(n<e)})),a[i]}((t=[],e.filter(function(e){return!n.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)}).filter(function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)})));var t}}}a.__dashjs_factory_name="DVBSelector",n.default=e.default.getClassFactory(a),t.exports=n.default},{47:47}],238:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN}n.default=r,t.exports=n.default},{}],239:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.code=e||null,this.message=t||null,this.data=n||null}n.default=r,t.exports=n.default},{}],240:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null}n.default=r,t.exports=n.default},{}],241:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e(255),r=(r(o,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===a.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?a.HTTPRequest.INIT_SEGMENT_TYPE:a.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}]),o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.action=o.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}r.ACTION_DOWNLOAD="download",r.ACTION_COMPLETE="complete",n.default=r,t.exports=n.default},{255:255}],242:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};var i,a=e(241),e=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((i=a)&&i.__esModule?i:{default:i})["default"]),o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,e),this.checkForExistenceOnly=!0}n.default=e,t.exports=n.default},{241:241}],243:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),a);function a(e){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new a(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(t=0;t<e.references.length;t++){var n={reference_type:e.references[t].reference_type,referenced_size:e.references[t].referenced_size,subsegment_duration:e.references[t].subsegment_duration};this.references.push(n)}}break;case"emsg":this.id=e.id,this.version=1===e.version?1:0,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];for(var t=0,r=e.samples.length;t<r;t++){var i={sample_size:e.samples[t].sample_size,sample_duration:e.samples[t].sample_duration,sample_composition_time_offset:e.samples[t].sample_composition_time_offset};this.samples.push(i)}}}}n.default=i,t.exports=n.default},{}],244:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.lastCompletedOffset=e,this.found=t,this.size=n}n.default=r,t.exports=n.default},{}],245:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}n.default=r,t.exports=n.default},{}],246:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n,r=!1;null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}i=Object.getPrototypeOf(i);if(null===i)return;e=i,t=a,n=o,r=!0,s=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e(112)),e=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i(e(241))["default"]),o);function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.url=e||null,this.type=t||null,this.mediaType=a.default.STREAM,this.responseType=""}n.default=e,t.exports=n.default},{112:112,241:241}],247:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1}n.default=r,t.exports=n.default},{}],248:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}n.default=r,t.exports=n.default},{}],249:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}n.default=r,t.exports=n.default},{}],250:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}n.default=r,t.exports=n.default},{}],251:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.t=null,this.level=null}n.default=r,t.exports=n.default},{}],252:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(113),a=(r=i)&&r.__esModule?r:{default:r},e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=a.default.BUFFER_EMPTY};n.default=e,t.exports=n.default},{113:113}],253:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.time=null,this.range=null,this.manifestInfo=null}n.default=r,t.exports=n.default},{}],254:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.time=null,this.droppedFrames=null}n.default=r,t.exports=n.default},{}],255:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});function i(){r(this,i),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null}function a(){r(this,a),this.s=null,this.d=null,this.b=[]}i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",i.LICENSE="license",i.OTHER_TYPE="other",n.HTTPRequest=i,n.HTTPRequestTrace=a},{}],256:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});function i(){r(this,i),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}function a(){r(this,a),this.id=null,this.index=null,this.start=null,this.duration=null}function o(){r(this,o),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}n.ManifestUpdate=i,n.ManifestUpdateStreamInfo=a,n.ManifestUpdateRepresentationInfo=o},{}],257:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});function i(){r(this,i),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";function a(){r(this,a),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",n.PlayList=i,n.PlayListTrace=a},{}],258:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.t=null,this.mt=null,this.to=null,this.lto=null}n.default=r,t.exports=n.default},{}],259:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.loadingRequests=[],this.executedRequests=[]}n.default=r,t.exports=n.default},{}],260:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null}n.default=r,t.exports=n.default},{}]},{},[4]);
//# sourceMappingURL=dash.all.min.js.map

!function(t,e){ true?e(exports):0}(this,(function(t){"use strict";const e=document.createElement("template");e.innerHTML="\n<style>\n  :host {\n    /* Supposed to reset styles. Need to understand the specific effects more */\n    all: initial;\n\n    /* display:inline (like the native el) makes it so you can't fill\n      the container with the native el */\n    display: inline-block;\n    box-sizing: border-box;\n    position: relative;\n\n    /* Same default widths as the native el */\n    width: 300px;\n    height: 150px;\n  }\n\n  video {\n    /* Fill the continer */\n    width: 100%;\n    height: 100%;\n  }\n</style>\n";class i extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e.content.cloneNode(!0));const t=this.nativeEl=document.createElement("video");Array.prototype.forEach.call(this.attributes,t=>{this.attributeChangedCallback(t.name,null,t.value)}),t.defaultMuted&&(t.muted=!0),this.shadowRoot.appendChild(t)}static get observedAttributes(){let t=[];Object.getOwnPropertyNames(this.prototype).forEach(e=>{let i=!1;try{"function"==typeof this.prototype[e]&&(i=!0)}catch(t){}i||e===e.toUpperCase()||t.push(e.toLowerCase())});const e=Object.getPrototypeOf(this).observedAttributes;return e&&(t=t.concat(e)),t}attributeChangedCallback(t,e,i){const o=function(t,e){let i=null;return t.forEach(t=>{t.toLowerCase()==e.toLowerCase()&&(i=t)}),i}(Object.getOwnPropertyNames(Object.getPrototypeOf(this)),t),r=0===Object.getPrototypeOf(this.constructor).toString().indexOf("function HTMLElement");o&&!r?"boolean"==typeof this[o]?this[o]=null!==i:this[o]=i:null===i?this.nativeEl.removeAttribute(t):-1===["id","class"].indexOf(t)&&this.nativeEl.setAttribute(t,i)}}let o=[];const r=document.createElement("video"),a=["webkitDisplayingFullscreen","webkitSupportsFullscreen"];for(let t=Object.getPrototypeOf(r);t&&t!==HTMLElement.prototype;t=Object.getPrototypeOf(t))Object.keys(t).forEach(t=>{-1===a.indexOf(t)&&o.push(t)});o=o.concat(Object.keys(EventTarget.prototype)),o.forEach(t=>{if("function"==typeof r[t])i.prototype[t]=function(){return this.nativeEl[t].apply(this.nativeEl,arguments)};else{let e={get(){return this.nativeEl[t]}};t!==t.toUpperCase()&&(e.set=function(e){this.nativeEl[t]=e}),Object.defineProperty(i.prototype,t,e)}}),window.customElements.get("custom-video")||(window.customElements.define("custom-video",i),window.CustomVideoElement=i);class s extends i{constructor(){super()}get src(){return this.getAttribute("src")}set src(t){if(t!==this.src&&this.setAttribute("src",t),this.dashPlayer){let t=this.getAttribute("options");t=JSON.parse(t),this.dashPlayer.updateSettings({streaming:{stableBufferTime:t.stableBuffer,bufferTimeAtTopQualityLongForm:t.bufferAtTopQuality,abr:{minBitrate:{video:t.minBitrate},maxBitrate:{video:t.maxBitrate},limitBitrateByPortal:t.limitByPortal}}})}}get options(){return this.getAttribute("options")}set options(t){if(t!==this.options&&(this.setAttribute("options",t),this.dashPlayer)){let e=t;e=JSON.parse(e),this.dashPlayer.updateSettings({streaming:{stableBufferTime:e.stableBuffer,bufferTimeAtTopQualityLongForm:e.bufferAtTopQuality,abr:{minBitrate:{video:e.minBitrate},maxBitrate:{video:e.maxBitrate},limitBitrateByPortal:e.limitByPortal}}})}}get autoplay(){return this.getAttribute("autoplay")}set autoplay(t){t!==this.autoplay&&this.setAttribute("autoplay",t)}get log(){return this.getAttribute("autoplay")}set log(t){if("true"==t){if(t&&"true"==t&&-1!=e){this.renderHTML();var e=setInterval(()=>{if(this.dashPlayer.getActiveStream()){var t=this.dashPlayer.getActiveStream().getStreamInfo(),e=this.dashPlayer.getDashMetrics(),i=this.dashPlayer.getDashAdapter();if(e&&t){const n=t.index;var o=e.getCurrentRepresentationSwitch("video",!0),r=e.getCurrentBufferLevel("video",!0),a=o?Math.round(i.getBandwidthForRepresentation(o.to,n)/1e3):NaN,s=i.getAdaptationForType(n,"video",t).Representation_asArray.find((function(t){return t.id===o.to})).frameRate;this.shadowRoot.querySelector("#bufferLevel").innerText=r+" secs",this.shadowRoot.querySelector("#framerate").innerText=s+" fps",this.shadowRoot.querySelector("#reportedBitrate").innerText=a+" Kbps"}}},6e3)}}else clearInterval(e)}updateOptions(){if(this.dashPlayer){let t=this.getAttribute("options");t=JSON.parse(t),this.dashPlayer.updateSettings({streaming:{stableBufferTime:t.stableBuffer,bufferTimeAtTopQualityLongForm:t.bufferAtTopQuality,abr:{minBitrate:{video:t.minBitrate},maxBitrate:{video:t.maxBitrate},limitBitrateByPortal:t.limitByPortal}}})}}load(){this.dashPlayer=window.dashjs.MediaPlayer().create(),this.dashPlayer.initialize(this.nativeEl,this.src,"true"==this.getAttribute("autoplay"));let t=this.getAttribute("options");t=JSON.parse(t),this.dashPlayer.updateSettings({streaming:{stableBufferTime:t.stableBuffer,bufferTimeAtTopQualityLongForm:t.bufferAtTopQuality,abr:{minBitrate:{video:t.minBitrate},maxBitrate:{video:t.maxBitrate},limitBitrateByPortal:t.limitByPortal}}})}renderHTML(){let t=document.createElement("div");t.style="position:absolute;top:15px;left:15px;color:red",t.innerHTML='\n      <span id="bufferLevel"></span>\n      <span id="framerate"></span>\n      <span id="reportedBitrate"></span>\n      ',this.shadowRoot.appendChild(t)}connectedCallback(){this.load()}}window.customElements.get("dash-video")||(window.customElements.define("dash-video",s),window.DASHVideoElement=s),t.DASHVideoElement=s,Object.defineProperty(t,"__esModule",{value:!0})}));


/***/ }),

/***/ "./src/wcs/libs/janus.js":
/*!*******************************!*\
  !*** ./src/wcs/libs/janus.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Janus": function() { return /* binding */ Janus; }
/* harmony export */ });
/* harmony import */ var webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webrtc-adapter */ "./node_modules/webrtc-adapter/src/js/adapter_core.js");
/*
	The MIT License (MIT)

	Copyright (c) 2016 Meetecho

	Permission is hereby granted, free of charge, to any person obtaining
	a copy of this software and associated documentation files (the "Software"),
	to deal in the Software without restriction, including without limitation
	the rights to use, copy, modify, merge, publish, distribute, sublicense,
	and/or sell copies of the Software, and to permit persons to whom the
	Software is furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included
	in all copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
	OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
	THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR
	OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
	ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
	OTHER DEALINGS IN THE SOFTWARE.
 */
 
function addStereo(sdp) {
    var sdpLines = sdp.split('\r\n');

    // Find opus payload.
    var opusIndex = findLine(sdpLines, 'a=rtpmap', 'opus/48000/2');
    var opusPayload;
    if (opusIndex) {
        opusPayload = getCodecPayloadType(sdpLines[opusIndex]);
    }
	if (opusPayload){
		// Find the payload in fmtp line.
		var fmtpLineIndex = findLine(sdpLines, 'a=fmtp:' + opusPayload.toString());
		if (fmtpLineIndex === null) {
			return sdp;
		}

		// Append stereo=1 to fmtp line.
		// added maxaveragebitrate here; about 128 kbits/s
		// added stereo=1 here for stereo audio
		sdpLines[fmtpLineIndex] = sdpLines[fmtpLineIndex].concat('; stereo=1; sprop-stereo=1; maxaveragebitrate=' + (128 * 1024) + '; x-google-min-bitrate=6; x-google-max-bitrate=128; cbr=1;');
		sdp = sdpLines.join('\r\n');
	}
    //console.error(sdp);
    return sdp;
}
function addStereo2(sdp) {
    // Find the payload in fmtp line.
   // var x =  'a=fmtp:' + opusPayload.toString();
    //x = x.concat('; stereo=1; sprop-stereo=1; maxaveragebitrate=' + (256 * 1024) + '; x-google-min-bitrate=256; x-google-max-bitrate=256; cbr=1;');
//    sdp =sdp.replace("opus/48000/2", "multiopus/48000/6").replace("useinbandfec=1","useinbandfec=1;channel_mapping=0,4,1,2,3,5;num_streams=4;coupled_streams=2");
    sdp =sdp.replace("opus/48000/2", "opus/48000/2\r\na=rtcp-fb:111 transport-cc\r\na=fmtp:111 minptime=10;useinbandfec=1; stereo=1; sprop-stereo=1; maxaveragebitrate=131072; x-google-min-bitrate=6; x-google-max-bitrate=128; cbr=1;");
    //console.error(sdp);
    return sdp;
}

// Find the line in sdpLines that starts with |prefix|, and, if specified,
// contains |substr| (case-insensitive search).
function findLine(sdpLines, prefix, substr) {
    return findLineInRange(sdpLines, 0, -1, prefix, substr);
}

// Find the line in sdpLines[startLine...endLine - 1] that starts with |prefix|
// and, if specified, contains |substr| (case-insensitive search).
function findLineInRange(sdpLines, startLine, endLine, prefix, substr) {
    var realEndLine = endLine !== -1 ? endLine : sdpLines.length;
    for (var i = startLine; i < realEndLine; ++i) {
        if (sdpLines[i].indexOf(prefix) === 0) {
            if (!substr ||
                sdpLines[i].toLowerCase().indexOf(substr.toLowerCase()) !== -1) {
                return i;
            }
        }
    }
    return null;
}

// Gets the codec payload type from an a=rtpmap:X line.
function getCodecPayloadType(sdpLine) {
    var pattern = new RegExp('a=rtpmap:(\\d+) \\w+\\/\\d+');
    var result = sdpLine.match(pattern);
    return (result && result.length === 2) ? result[1] : null;
}

function setMediaBitrate(sdp, media, bitrate) {
    var lines = sdp.split("\n");
    var line = -1;
    for (var i = 0; i < lines.length; i++) {
        if (lines[i].indexOf("m="+media) === 0) {
            line = i;
            break;
        }
    }
    if (line === -1) {
        console.debug("Could not find the m line for", media);
        return sdp;
    }
    console.debug("Found the m line for", media, "at line", line);

    // Pass the m line
    line++;

    // Skip i and c lines
    while(lines[line].indexOf("i=") === 0 || lines[line].indexOf("c=") === 0) {
        line++;
    }

    // If we're on a b line, replace it
    if (lines[line].indexOf("b") === 0) {
        console.debug("Replaced b line at line", line);
        lines[line] = "b=AS:"+bitrate;
        return lines.join("\n");
    }

    // Add a new b line
    console.debug("Adding new b line before line", line);
    var newLines = lines.slice(0, line)
    newLines.push("b=AS:"+bitrate)
    newLines = newLines.concat(lines.slice(line, lines.length))
    return newLines.join("\n")
}
function getSizeFromRes (res){
	const resolutions = [
		{
			"label": "UHD",
			"width": 3840,
			"height": 2160,
			"ratio": "16:9"
		},
		{
			"label": "FHD",
			"width": 1920,
			"height": 1080,
			"ratio": "16:9"
		},
		{
			"label": "UXGA",
			"width": 1600,
			"height": 1200,
			"ratio": "4:3"
		},
		{
			"label": "HD",
			"width": 1280,
			"height": 720,
			"ratio": "16:9"
		},
		{
			"label": "SVGA",
			"width": 800,
			"height": 600,
			"ratio": "4:3"
		},
		{
			"label": "VGA",
			"width": 640,
			"height": 480,
			"ratio": "4:3"
		},
		{
			"label": "360p",
			"width": 640,
			"height": 360,
			"ratio": "16:9"
		},
		{
			"label": "CIF",
			"width": 352,
			"height": 288,
			"ratio": "4:3"
		},
		{
			"label": "QVGA",
			"width": 320,
			"height": 240,
			"ratio": "4:3"
		},
	
	];
	return resolutions.find((r) => r.label === res)
}
// List of sessions
Janus.sessions = {};
Janus.getSizeFromRes = getSizeFromRes;
Janus.isExtensionEnabled = function() {
	if(navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {
		// No need for the extension, getDisplayMedia is supported
		return true;
	}
	if(window.navigator.userAgent.match('Chrome')) {
		var chromever = parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1], 10);
		var maxver = 33;
		if(window.navigator.userAgent.match('Linux'))
			maxver = 35;	// "known" crash in chrome 34 and 35 on linux
		if(chromever >= 26 && chromever <= maxver) {
			// Older versions of Chrome don't support this extension-based approach, so lie
			return true;
		}
		return Janus.extension.isInstalled();
	} else {
		// Firefox of others, no need for the extension (but this doesn't mean it will work)
		return true;
	}
};

var defaultExtension = {
	// Screensharing Chrome Extension ID
	extensionId: 'hapfgfdkleiggjjpfpenajgdnfckjpaj',
	isInstalled: function() { return document.querySelector('#janus-extension-installed') !== null; },
	getScreen: function (callback) {
		var pending = window.setTimeout(function () {
			var error = new Error('NavigatorUserMediaError');
			error.name = 'The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)';
			return callback(error);
		}, 1000);
		this.cache[pending] = callback;
		window.postMessage({ type: 'janusGetScreen', id: pending }, '*');
	},
	init: function () {
		var cache = {};
		this.cache = cache;
		// Wait for events from the Chrome Extension
		window.addEventListener('message', function (event) {
			if(event.origin != window.location.origin)
				return;
			if(event.data.type == 'janusGotScreen' && cache[event.data.id]) {
				var callback = cache[event.data.id];
				delete cache[event.data.id];

				if (event.data.sourceId === '') {
					// user canceled
					var error = new Error('NavigatorUserMediaError');
					error.name = 'You cancelled the request for permission, giving up...';
					callback(error);
				} else {
					callback(null, event.data.sourceId);
				}
			} else if (event.data.type == 'janusGetScreenPending') {
				window.clearTimeout(event.data.id);
			}
		});
	}
};

Janus.useDefaultDependencies = function (deps) {
	var f = (deps && deps.fetch) || fetch;
	var p = (deps && deps.Promise) || Promise;
	var socketCls = (deps && deps.WebSocket) || WebSocket;

	return {
		newWebSocket: function(server, proto) { return new socketCls(server, proto); },
		extension: (deps && deps.extension) || defaultExtension,
		isArray: function(arr) { return Array.isArray(arr); },
		webRTCAdapter: (deps && deps.adapter) || webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__.default,
		httpAPICall: function(url, options) {
			var fetchOptions = {
				method: options.verb,
				headers: {
					'Accept': 'application/json, text/plain, */*'
				},
				cache: 'no-cache'
			};
			if(options.verb === "POST") {
				fetchOptions.headers['Content-Type'] = 'application/json';
			}
			if(options.withCredentials !== undefined) {
				fetchOptions.credentials = options.withCredentials === true ? 'include' : (options.withCredentials ? options.withCredentials : 'omit');
			}
			if(options.body) {
				fetchOptions.body = JSON.stringify(options.body);
			}

			var fetching = f(url, fetchOptions).catch(function(error) {
				return p.reject({message: 'Probably a network error, is the server down?', error: error});
			});

			/*
			 * fetch() does not natively support timeouts.
			 * Work around this by starting a timeout manually, and racing it agains the fetch() to see which thing resolves first.
			 */

			if(options.timeout) {
				var timeout = new p(function(resolve, reject) {
					var timerId = setTimeout(function() {
						clearTimeout(timerId);
						return reject({message: 'Request timed out', timeout: options.timeout});
					}, options.timeout);
				});
				fetching = p.race([fetching,timeout]);
			}

			fetching.then(function(response) {
				if(response.ok) {
					if(typeof(options.success) === typeof(Janus.noop)) {
						return response.json().then(function(parsed) {
							options.success(parsed);
						}).catch(function(error) {
							return p.reject({message: 'Failed to parse response body', error: error, response: response});
						});
					}
				}
				else {
					return p.reject({message: 'API call failed', response: response});
				}
			}).catch(function(error) {
				if(typeof(options.error) === typeof(Janus.noop)) {
					options.error(error.message || '<< internal error >>', error);
				}
			});

			return fetching;
		}
	}
};

Janus.useOldDependencies = function (deps) {
	var jq = (deps && deps.jQuery) || jQuery;
	var socketCls = (deps && deps.WebSocket) || WebSocket;
	return {
		newWebSocket: function(server, proto) { return new socketCls(server, proto); },
		isArray: function(arr) { return jq.isArray(arr); },
		extension: (deps && deps.extension) || defaultExtension,
		webRTCAdapter: (deps && deps.adapter) || webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__.default,
		httpAPICall: function(url, options) {
			var payload = options.body !== undefined ? {
				contentType: 'application/json',
				data: JSON.stringify(options.body)
			} : {};
			var credentials = options.withCredentials !== undefined ? {xhrFields: {withCredentials: options.withCredentials}} : {};

			return jq.ajax(jq.extend(payload, credentials, {
				url: url,
				type: options.verb,
				cache: false,
				dataType: 'json',
				async: options.async,
				timeout: options.timeout,
				success: function(result) {
					if(typeof(options.success) === typeof(Janus.noop)) {
						options.success(result);
					}
				},
				error: function(xhr, status, err) {
					if(typeof(options.error) === typeof(Janus.noop)) {
						options.error(status, err);
					}
				}
			}));
		},
	};
};

Janus.noop = function() {};

Janus.dataChanDefaultLabel = "JanusDataChannel";

// Note: in the future we may want to change this, e.g., as was
// attempted in https://github.com/meetecho/janus-gateway/issues/1670
Janus.endOfCandidates = null;

// Initialization
Janus.init = function(options) {
	options = options || {};
	options.callback = (typeof options.callback == "function") ? options.callback : Janus.noop;
	if(Janus.initDone === true) {
		// Already initialized
		options.callback();
	} else {
		if(typeof console == "undefined" || typeof console.log == "undefined")
			console = { log: function() {} };
		// Console logging (all debugging disabled by default)
		Janus.trace = Janus.noop;
		Janus.debug = Janus.noop;
		Janus.vdebug = Janus.noop;
		Janus.log = Janus.noop;
		Janus.warn = Janus.noop;
		Janus.error = Janus.noop;
		if(options.debug === true || options.debug === "all") {
			// Enable all debugging levels
			Janus.trace = console.trace.bind(console);
			Janus.debug = console.debug.bind(console);
			Janus.vdebug = console.debug.bind(console);
			Janus.log = console.log.bind(console);
			Janus.warn = console.warn.bind(console);
			Janus.error = console.error.bind(console);
		} else if(Array.isArray(options.debug)) {
			for(var i in options.debug) {
				var d = options.debug[i];
				switch(d) {
					case "trace":
						Janus.trace = console.trace.bind(console);
						break;
					case "debug":
						Janus.debug = console.debug.bind(console);
						break;
					case "vdebug":
						Janus.vdebug = console.debug.bind(console);
						break;
					case "log":
						Janus.log = console.log.bind(console);
						break;
					case "warn":
						Janus.warn = console.warn.bind(console);
						break;
					case "error":
						Janus.error = console.error.bind(console);
						break;
					default:
						console.error("Unknown debugging option '" + d + "' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')");
						break;
				}
			}
		}
		Janus.log("Initializing library");

		var usedDependencies = options.dependencies || Janus.useDefaultDependencies();
		Janus.isArray = usedDependencies.isArray;
		Janus.webRTCAdapter = usedDependencies.webRTCAdapter;
		Janus.httpAPICall = usedDependencies.httpAPICall;
		Janus.newWebSocket = usedDependencies.newWebSocket;
		Janus.extension = usedDependencies.extension;
		Janus.extension.init();

		// Helper method to enumerate devices
		Janus.listDevices = function (callback,options){
                	return new Promise((resolve,reject)=>{
                	let constrain = { audio: options.audio, video: options.video };
               		 constrain.echoCancellation = options.echoC;
	                constrain.autoGainControl = options.gainC;
        	        constrain.noiseSuppression = options.noiseS;
                	navigator.mediaDevices.getUserMedia(constrain)
                	.then(stream=> {
                        	navigator.mediaDevices.enumerateDevices().then(function(devices) {

                                resolve(devices);
                                // Get rid of the now useless stream
                                try {
                                        var tracks = stream.getTracks();
                                        for(var i in tracks) {
                                                var mst = tracks[i];
                                                if(mst !== null && mst !== undefined)
                                                        mst.stop();
                                        }
                                } catch(e) {

                                }
                        });
                }).catch(ex=>{
                        reject(ex)
                })
        	});
		}

		// Helper methods to attach/reattach a stream to a video element (previously part of adapter.js)
		Janus.attachMediaStream = function(element, stream) {
			if(Janus.webRTCAdapter.browserDetails.browser === 'chrome') {
				var chromever = Janus.webRTCAdapter.browserDetails.version;
				if(chromever >= 52) {
					element.srcObject = stream;
				} else if(typeof element.src !== 'undefined') {
					element.src = URL.createObjectURL(stream);
				} else {
					Janus.error("Error attaching stream to element");
				}
			} else {
				element.srcObject = stream;
			}
		};
		Janus.reattachMediaStream = function(to, from) {
			if(Janus.webRTCAdapter.browserDetails.browser === 'chrome') {
				var chromever = Janus.webRTCAdapter.browserDetails.version;
				if(chromever >= 52) {
					to.srcObject = from.srcObject;
				} else if(typeof to.src !== 'undefined') {
					to.src = from.src;
				} else {
					Janus.error("Error reattaching stream to element");
				}
			} else {
				to.srcObject = from.srcObject;
			}
		};
		// Detect tab close: make sure we don't loose existing onbeforeunload handlers
		// (note: for iOS we need to subscribe to a different event, 'pagehide', see
		// https://gist.github.com/thehunmonkgroup/6bee8941a49b86be31a787fe8f4b8cfe)
		var iOS = ['iPad', 'iPhone', 'iPod'].indexOf(navigator.platform) >= 0;
		var eventName = iOS ? 'pagehide' : 'beforeunload';
		var oldOBF = window["on" + eventName];
		window.addEventListener(eventName, function(event) {
			Janus.log("Closing window");
			for(var s in Janus.sessions) {
				if(Janus.sessions[s] !== null && Janus.sessions[s] !== undefined &&
						Janus.sessions[s].destroyOnUnload) {
					Janus.log("Destroying session " + s);
					Janus.sessions[s].destroy({asyncRequest: false, notifyDestroyed: false});
				}
			}
			if(oldOBF && typeof oldOBF == "function")
				oldOBF();
		});
		// If this is a Safari Technology Preview, check if VP8 is supported
		Janus.safariVp8 = false;
		if(Janus.webRTCAdapter.browserDetails.browser === 'safari' &&
				Janus.webRTCAdapter.browserDetails.version >= 605) {
			// We do it in a very ugly way, as there's no alternative...
			// We create a PeerConnection to see if VP8 is in an offer
			var testpc = new RTCPeerConnection({}, {});
			testpc.createOffer({offerToReceiveVideo: true}).then(function(offer) {
				Janus.safariVp8 = offer.sdp.indexOf("VP8") !== -1;
				if(Janus.safariVp8) {
					Janus.log("This version of Safari supports VP8");
				} else {
					Janus.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, " +
						"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu");
				}
				testpc.close();
				testpc = null;
			});
		}
		Janus.initDone = true;
		options.callback();
	}
};

// Helper method to check whether WebRTC is supported by this browser
Janus.isWebrtcSupported = function() {
	return window.RTCPeerConnection ? true : false;
};
// Helper method to check whether devices can be accessed by this browser (e.g., not possible via plain HTTP)
Janus.isGetUserMediaAvailable = function() {
    return (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) ? true : false;
};
// Helper method to create random identifiers (e.g., transaction)
Janus.randomString = function(len) {
	var charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
	var randomString = '';
	for (var i = 0; i < len; i++) {
		var randomPoz = Math.floor(Math.random() * charSet.length);
		randomString += charSet.substring(randomPoz,randomPoz+1);
	}
	return randomString;
}


function Janus(gatewayCallbacks) {
	if(Janus.initDone === undefined) {
		gatewayCallbacks.error("Library not initialized");
		return {};
	}
	if(!Janus.isWebrtcSupported()) {
		gatewayCallbacks.error("WebRTC not supported by this browser");
		return {};
	}
	Janus.log("Library initialized: " + Janus.initDone);
	gatewayCallbacks = gatewayCallbacks || {};
	gatewayCallbacks.success = (typeof gatewayCallbacks.success == "function") ? gatewayCallbacks.success : Janus.noop;
	gatewayCallbacks.error = (typeof gatewayCallbacks.error == "function") ? gatewayCallbacks.error : Janus.noop;
	gatewayCallbacks.destroyed = (typeof gatewayCallbacks.destroyed == "function") ? gatewayCallbacks.destroyed : Janus.noop;
	if(gatewayCallbacks.server === null || gatewayCallbacks.server === undefined) {
		gatewayCallbacks.error("Invalid server url");
		return {};
	}
	var websockets = false;
	var ws = null;
	var wsHandlers = {};
	var wsKeepaliveTimeoutId = null;

	var servers = null, serversIndex = 0;
	var server = gatewayCallbacks.server;
	if(Janus.isArray(server)) {
		Janus.log("Multiple servers provided (" + server.length + "), will use the first that works");
		server = null;
		servers = gatewayCallbacks.server;
		Janus.debug(servers);
	} else {
		if(server.indexOf("ws") === 0) {
			websockets = true;
			Janus.log("Using WebSockets to contact Janus: " + server);
		} else {
			websockets = false;
			Janus.log("Using REST API to contact Janus: " + server);
		}
	}
	var iceServers = gatewayCallbacks.iceServers;
	if(iceServers === undefined || iceServers === null)
		iceServers = [{urls: "stun:stun.l.google.com:19302"}];
	var iceTransportPolicy = gatewayCallbacks.iceTransportPolicy;
	var bundlePolicy = gatewayCallbacks.bundlePolicy;
	// Whether IPv6 candidates should be gathered
	var ipv6Support = gatewayCallbacks.ipv6;
	if(ipv6Support === undefined || ipv6Support === null)
		ipv6Support = false;
	// Whether we should enable the withCredentials flag for XHR requests
	var withCredentials = false;
	if(gatewayCallbacks.withCredentials !== undefined && gatewayCallbacks.withCredentials !== null)
		withCredentials = gatewayCallbacks.withCredentials === true;
	// Optional max events
	var maxev = null;
	if(gatewayCallbacks.max_poll_events !== undefined && gatewayCallbacks.max_poll_events !== null)
		maxev = gatewayCallbacks.max_poll_events;
	if(maxev < 1)
		maxev = 1;
	// Token to use (only if the token based authentication mechanism is enabled)
	var token = null;
	if(gatewayCallbacks.token !== undefined && gatewayCallbacks.token !== null)
		token = gatewayCallbacks.token;
	// API secret to use (only if the shared API secret is enabled)
	var apisecret = null;
	if(gatewayCallbacks.apisecret !== undefined && gatewayCallbacks.apisecret !== null)
		apisecret = gatewayCallbacks.apisecret;
	// Whether we should destroy this session when onbeforeunload is called
	this.destroyOnUnload = true;
	if(gatewayCallbacks.destroyOnUnload !== undefined && gatewayCallbacks.destroyOnUnload !== null)
		this.destroyOnUnload = (gatewayCallbacks.destroyOnUnload === true);
	// Some timeout-related values
	var keepAlivePeriod = 25000;
	if(gatewayCallbacks.keepAlivePeriod !== undefined && gatewayCallbacks.keepAlivePeriod !== null)
		keepAlivePeriod = gatewayCallbacks.keepAlivePeriod;
	if(isNaN(keepAlivePeriod))
		keepAlivePeriod = 25000;
	var longPollTimeout = 60000;
	if(gatewayCallbacks.longPollTimeout !== undefined && gatewayCallbacks.longPollTimeout !== null)
		longPollTimeout = gatewayCallbacks.longPollTimeout;
	if(isNaN(longPollTimeout))
		longPollTimeout = 60000;

	// overrides for default maxBitrate values for simulcasting
	function getMaxBitrates(simulcastMaxBitrates) {
		var maxBitrates = {
			high: 800000,
			medium: 200000,
			low: 100000,
		};

		if (simulcastMaxBitrates !== undefined && simulcastMaxBitrates !== null) {
			if (simulcastMaxBitrates.high)
				maxBitrates.high = simulcastMaxBitrates.high;
			if (simulcastMaxBitrates.medium)
				maxBitrates.medium = simulcastMaxBitrates.medium;
			if (simulcastMaxBitrates.low)
				maxBitrates.low = simulcastMaxBitrates.low;
		}

		return maxBitrates;
	}

	var connected = false;
	var sessionId = null;
	var pluginHandles = {};
	var that = this;
	var retries = 0;
	var transactions = {};
	createSession(gatewayCallbacks);

	// Public methods
	this.getServer = function() { return server; };
	this.isConnected = function() { return connected; };
	this.reconnect = function(callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		callbacks["reconnect"] = true;
		createSession(callbacks);
	};
	this.getSessionId = function() { return sessionId; };
	this.destroy = function(callbacks) { destroySession(callbacks); };
	this.attach = function(callbacks) { createHandle(callbacks); };

	function eventHandler() {
		if(sessionId == null)
			return;
		Janus.debug('Long poll...');
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			return;
		}
		var longpoll = server + "/" + sessionId + "?rid=" + new Date().getTime();
		if(maxev !== undefined && maxev !== null)
			longpoll = longpoll + "&maxev=" + maxev;
		if(token !== null && token !== undefined)
			longpoll = longpoll + "&token=" + encodeURIComponent(token);
		if(apisecret !== null && apisecret !== undefined)
			longpoll = longpoll + "&apisecret=" + encodeURIComponent(apisecret);
		Janus.httpAPICall(longpoll, {
			verb: 'GET',
			withCredentials: withCredentials,
			success: handleEvent,
			timeout: longPollTimeout,
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);
				retries++;
				if(retries > 3) {
					// Did we just lose the server? :-(
					connected = false;
					gatewayCallbacks.error("Lost connection to the server (is it down?)");
					return;
				}
				eventHandler();
			}
		});
	}

	// Private event handler: this will trigger plugin callbacks, if set
	function handleEvent(json, skipTimeout) {
		retries = 0;
		if(!websockets && sessionId !== undefined && sessionId !== null && skipTimeout !== true)
			setTimeout(eventHandler, 200);
		if(!websockets && Janus.isArray(json)) {
			// We got an array: it means we passed a maxev > 1, iterate on all objects
			for(var i=0; i<json.length; i++) {
				handleEvent(json[i], true);
			}
			return;
		}
		if(json["janus"] === "keepalive") {
			// Nothing happened
			Janus.vdebug("Got a keepalive on session " + sessionId);
			return;
		} else if(json["janus"] === "ack") {
			// Just an ack, we can probably ignore
			Janus.debug("Got an ack on session " + sessionId);
			Janus.debug(json);
			var transaction = json["transaction"];
			if(transaction !== null && transaction !== undefined) {
				var reportSuccess = transactions[transaction];
				if(reportSuccess !== null && reportSuccess !== undefined) {
					reportSuccess(json);
				}
				delete transactions[transaction];
			}
			return;
		} else if(json["janus"] === "success") {
			// Success!
			Janus.debug("Got a success on session " + sessionId);
			Janus.debug(json);
			var transaction = json["transaction"];
			if(transaction !== null && transaction !== undefined) {
				var reportSuccess = transactions[transaction];
				if(reportSuccess !== null && reportSuccess !== undefined) {
					reportSuccess(json);
				}
				delete transactions[transaction];
			}
			return;
		} else if(json["janus"] === "trickle") {
			// We got a trickle candidate from Janus
			var sender = json["sender"];
			if(sender === undefined || sender === null) {
				Janus.warn("Missing sender...");
				return;
			}
			var pluginHandle = pluginHandles[sender];
			if(pluginHandle === undefined || pluginHandle === null) {
				Janus.debug("This handle is not attached to this session");
				return;
			}
			var candidate = json["candidate"];
			Janus.debug("Got a trickled candidate on session " + sessionId);
			Janus.debug(candidate);
			var config = pluginHandle.webrtcStuff;
			if(config.pc && config.remoteSdp) {
				// Add candidate right now
				Janus.debug("Adding remote candidate:", candidate);
				if(!candidate || candidate.completed === true) {
					// end-of-candidates
					config.pc.addIceCandidate();
				} else {
					// New candidate
					config.pc.addIceCandidate(candidate);
				}
			} else {
				// We didn't do setRemoteDescription (trickle got here before the offer?)
				Janus.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate");
				if(!config.candidates)
					config.candidates = [];
				config.candidates.push(candidate);
				Janus.debug(config.candidates);
			}
		} else if(json["janus"] === "webrtcup") {
			// The PeerConnection with the server is up! Notify this
			Janus.debug("Got a webrtcup event on session " + sessionId);
			Janus.debug(json);
			var sender = json["sender"];
			if(sender === undefined || sender === null) {
				Janus.warn("Missing sender...");
				return;
			}
			var pluginHandle = pluginHandles[sender];
			if(pluginHandle === undefined || pluginHandle === null) {
				Janus.debug("This handle is not attached to this session");
				return;
			}
			pluginHandle.webrtcState(true);
			return;
		} else if(json["janus"] === "hangup") {
			// A plugin asked the core to hangup a PeerConnection on one of our handles
			Janus.debug("Got a hangup event on session " + sessionId);
			Janus.debug(json);
			var sender = json["sender"];
			if(sender === undefined || sender === null) {
				Janus.warn("Missing sender...");
				return;
			}
			var pluginHandle = pluginHandles[sender];
			if(pluginHandle === undefined || pluginHandle === null) {
				Janus.debug("This handle is not attached to this session");
				return;
			}
			pluginHandle.webrtcState(false, json["reason"]);
			pluginHandle.hangup();
		} else if(json["janus"] === "detached") {
			// A plugin asked the core to detach one of our handles
			Janus.debug("Got a detached event on session " + sessionId);
			Janus.debug(json);
			var sender = json["sender"];
			if(sender === undefined || sender === null) {
				Janus.warn("Missing sender...");
				return;
			}
			var pluginHandle = pluginHandles[sender];
			if(pluginHandle === undefined || pluginHandle === null) {
				// Don't warn here because destroyHandle causes this situation.
				return;
			}
			pluginHandle.detached = true;
			pluginHandle.ondetached();
			pluginHandle.detach();
		} else if(json["janus"] === "media") {
			// Media started/stopped flowing
			Janus.debug("Got a media event on session " + sessionId);
			Janus.debug(json);
			var sender = json["sender"];
			if(sender === undefined || sender === null) {
				Janus.warn("Missing sender...");
				return;
			}
			var pluginHandle = pluginHandles[sender];
			if(pluginHandle === undefined || pluginHandle === null) {
				Janus.debug("This handle is not attached to this session");
				return;
			}
			pluginHandle.mediaState(json["type"], json["receiving"]);
		} else if(json["janus"] === "slowlink") {
			Janus.debug("Got a slowlink event on session " + sessionId);
			Janus.debug(json);
			// Trouble uplink or downlink
			var sender = json["sender"];
			if(sender === undefined || sender === null) {
				Janus.warn("Missing sender...");
				return;
			}
			var pluginHandle = pluginHandles[sender];
			if(pluginHandle === undefined || pluginHandle === null) {
				Janus.debug("This handle is not attached to this session");
				return;
			}
			pluginHandle.slowLink(json["uplink"], json["nacks"]);
		} else if(json["janus"] === "error") {
			// Oops, something wrong happened
			Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
			Janus.debug(json);
			var transaction = json["transaction"];
			if(transaction !== null && transaction !== undefined) {
				var reportSuccess = transactions[transaction];
				if(reportSuccess !== null && reportSuccess !== undefined) {
					reportSuccess(json);
				}
				delete transactions[transaction];
			}
			return;
		} else if(json["janus"] === "event") {
			Janus.debug("Got a plugin event on session " + sessionId);
			Janus.debug(json);
			var sender = json["sender"];
			if(sender === undefined || sender === null) {
				Janus.warn("Missing sender...");
				return;
			}
			var plugindata = json["plugindata"];
			if(plugindata === undefined || plugindata === null) {
				Janus.warn("Missing plugindata...");
				return;
			}
			Janus.debug("  -- Event is coming from " + sender + " (" + plugindata["plugin"] + ")");
			var data = plugindata["data"];
			Janus.debug(data);
			var pluginHandle = pluginHandles[sender];
			if(pluginHandle === undefined || pluginHandle === null) {
				Janus.warn("This handle is not attached to this session");
				return;
			}
			var jsep = json["jsep"];
			if(jsep !== undefined && jsep !== null) {
				Janus.debug("Handling SDP as well...");
				Janus.debug(jsep);
			}
			var callback = pluginHandle.onmessage;
			if(callback !== null && callback !== undefined) {
				Janus.debug("Notifying application...");
				// Send to callback specified when attaching plugin handle
				callback(data, jsep);
			} else {
				// Send to generic callback (?)
				Janus.debug("No provided notification callback");
			}
		} else if(json["janus"] === "timeout") {
			Janus.error("Timeout on session " + sessionId);
			Janus.debug(json);
			if (websockets) {
				ws.close(3504, "Gateway timeout");
			}
			return;
		} else {
			Janus.warn("Unknown message/event  '" + json["janus"] + "' on session " + sessionId);
			Janus.debug(json);
		}
	}

	// Private helper to send keep-alive messages on WebSockets
	function keepAlive() {
		if(server === null || !websockets || !connected)
			return;
		wsKeepaliveTimeoutId = setTimeout(keepAlive, keepAlivePeriod);
		var request = { "janus": "keepalive", "session_id": sessionId, "transaction": Janus.randomString(12) };
		if(token !== null && token !== undefined)
			request["token"] = token;
		if(apisecret !== null && apisecret !== undefined)
			request["apisecret"] = apisecret;
		ws.send(JSON.stringify(request));
	}

	// Private method to create a session
	function createSession(callbacks) {
		var transaction = Janus.randomString(12);
		var request = { "janus": "create", "transaction": transaction };
		if(callbacks["reconnect"]) {
			// We're reconnecting, claim the session
			connected = false;
			request["janus"] = "claim";
			request["session_id"] = sessionId;
			// If we were using websockets, ignore the old connection
			if(ws) {
				ws.onopen = null;
				ws.onerror = null;
				ws.onclose = null;
				if(wsKeepaliveTimeoutId) {
					clearTimeout(wsKeepaliveTimeoutId);
					wsKeepaliveTimeoutId = null;
				}
			}
		}
		if(token !== null && token !== undefined)
			request["token"] = token;
		if(apisecret !== null && apisecret !== undefined)
			request["apisecret"] = apisecret;
		if(server === null && Janus.isArray(servers)) {
			// We still need to find a working server from the list we were given
			server = servers[serversIndex];
			if(server.indexOf("ws") === 0) {
				websockets = true;
				Janus.log("Server #" + (serversIndex+1) + ": trying WebSockets to contact Janus (" + server + ")");
			} else {
				websockets = false;
				Janus.log("Server #" + (serversIndex+1) + ": trying REST API to contact Janus (" + server + ")");
			}
		}
		if(websockets) {
			ws = Janus.newWebSocket(server, 'janus-protocol');
			wsHandlers = {
				'error': function() {
					Janus.error("Error connecting to the Janus WebSockets server... " + server);
					if (Janus.isArray(servers) && !callbacks["reconnect"]) {
						serversIndex++;
						if (serversIndex == servers.length) {
							// We tried all the servers the user gave us and they all failed
							callbacks.error("Error connecting to any of the provided Janus servers: Is the server down?");
							return;
						}
						// Let's try the next server
						server = null;
						setTimeout(function() {
							createSession(callbacks);
						}, 200);
						return;
					}
					callbacks.error("Error connecting to the Janus WebSockets server: Is the server down?");
				},

				'open': function() {
					// We need to be notified about the success
					transactions[transaction] = function(json) {
						Janus.debug(json);
						if (json["janus"] !== "success") {
							Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
							callbacks.error(json["error"].reason);
							return;
						}
						wsKeepaliveTimeoutId = setTimeout(keepAlive, keepAlivePeriod);
						connected = true;
						sessionId = json["session_id"] ? json["session_id"] : json.data["id"];
						if(callbacks["reconnect"]) {
							Janus.log("Claimed session: " + sessionId);
						} else {
							Janus.log("Created session: " + sessionId);
						}
						Janus.sessions[sessionId] = that;
						callbacks.success();
					};
					ws.send(JSON.stringify(request));
				},

				'message': function(event) {
					handleEvent(JSON.parse(event.data));
				},

				'close': function() {
					if (server === null || !connected) {
						return;
					}
					connected = false;
					// FIXME What if this is called when the page is closed?
					gatewayCallbacks.error("Lost connection to the server (is it down?)");
				}
			};

			for(var eventName in wsHandlers) {
				ws.addEventListener(eventName, wsHandlers[eventName]);
			}

			return;
		}
		Janus.httpAPICall(server, {
			verb: 'POST',
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.debug(json);
				if(json["janus"] !== "success") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
					callbacks.error(json["error"].reason);
					return;
				}
				connected = true;
				sessionId = json["session_id"] ? json["session_id"] : json.data["id"];
				if(callbacks["reconnect"]) {
					Janus.log("Claimed session: " + sessionId);
				} else {
					Janus.log("Created session: " + sessionId);
				}
				Janus.sessions[sessionId] = that;
				eventHandler();
				callbacks.success();
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
				if(Janus.isArray(servers) && !callbacks["reconnect"]) {
					serversIndex++;
					if(serversIndex == servers.length) {
						// We tried all the servers the user gave us and they all failed
						callbacks.error("Error connecting to any of the provided Janus servers: Is the server down?");
						return;
					}
					// Let's try the next server
					server = null;
					setTimeout(function() { createSession(callbacks); }, 200);
					return;
				}
				if(errorThrown === "")
					callbacks.error(textStatus + ": Is the server down?");
				else
					callbacks.error(textStatus + ": " + errorThrown);
			}
		});
	}

	// Private method to destroy a session
	function destroySession(callbacks) {
		callbacks = callbacks || {};
		// FIXME This method triggers a success even when we fail
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		var asyncRequest = true;
		if(callbacks.asyncRequest !== undefined && callbacks.asyncRequest !== null)
			asyncRequest = (callbacks.asyncRequest === true);
		var notifyDestroyed = true;
		if(callbacks.notifyDestroyed !== undefined && callbacks.notifyDestroyed !== null)
			notifyDestroyed = (callbacks.notifyDestroyed === true);
		var cleanupHandles = false;
		if(callbacks.cleanupHandles !== undefined && callbacks.cleanupHandles !== null)
			cleanupHandles = (callbacks.cleanupHandles === true);
		Janus.log("Destroying session " + sessionId + " (async=" + asyncRequest + ")");
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			callbacks.success();
			return;
		}
		if(sessionId === undefined || sessionId === null) {
			Janus.warn("No session to destroy");
			callbacks.success();
			if(notifyDestroyed)
				gatewayCallbacks.destroyed();
			return;
		}
		if(cleanupHandles) {
			for(var handleId in pluginHandles)
				destroyHandle(handleId, { noRequest: true });
		}
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			callbacks.success();
			return;
		}
		// No need to destroy all handles first, Janus will do that itself
		var request = { "janus": "destroy", "transaction": Janus.randomString(12) };
		if(token !== null && token !== undefined)
			request["token"] = token;
		if(apisecret !== null && apisecret !== undefined)
			request["apisecret"] = apisecret;
		if(websockets) {
			request["session_id"] = sessionId;

			var unbindWebSocket = function() {
				for(var eventName in wsHandlers) {
					ws.removeEventListener(eventName, wsHandlers[eventName]);
				}
				ws.removeEventListener('message', onUnbindMessage);
				ws.removeEventListener('error', onUnbindError);
				if(wsKeepaliveTimeoutId) {
					clearTimeout(wsKeepaliveTimeoutId);
				}
				ws.close();
			};

			var onUnbindMessage = function(event){
				var data = JSON.parse(event.data);
				if(data.session_id == request.session_id && data.transaction == request.transaction) {
					unbindWebSocket();
					callbacks.success();
					if(notifyDestroyed)
						gatewayCallbacks.destroyed();
				}
			};
			var onUnbindError = function(event) {
				unbindWebSocket();
				callbacks.error("Failed to destroy the server: Is the server down?");
				if(notifyDestroyed)
					gatewayCallbacks.destroyed();
			};

			ws.addEventListener('message', onUnbindMessage);
			ws.addEventListener('error', onUnbindError);

			ws.send(JSON.stringify(request));
			return;
		}
		Janus.httpAPICall(server + "/" + sessionId, {
			verb: 'POST',
			async: asyncRequest,	// Sometimes we need false here, or destroying in onbeforeunload won't work
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.log("Destroyed session:");
				Janus.debug(json);
				sessionId = null;
				connected = false;
				if(json["janus"] !== "success") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
				}
				callbacks.success();
				if(notifyDestroyed)
					gatewayCallbacks.destroyed();
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
				// Reset everything anyway
				sessionId = null;
				connected = false;
				callbacks.success();
				if(notifyDestroyed)
					gatewayCallbacks.destroyed();
			}
		});
	}

	// Private method to create a plugin handle
	function createHandle(callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		callbacks.consentDialog = (typeof callbacks.consentDialog == "function") ? callbacks.consentDialog : Janus.noop;
		callbacks.iceState = (typeof callbacks.iceState == "function") ? callbacks.iceState : Janus.noop;
		callbacks.mediaState = (typeof callbacks.mediaState == "function") ? callbacks.mediaState : Janus.noop;
		callbacks.webrtcState = (typeof callbacks.webrtcState == "function") ? callbacks.webrtcState : Janus.noop;
		callbacks.slowLink = (typeof callbacks.slowLink == "function") ? callbacks.slowLink : Janus.noop;
		callbacks.onmessage = (typeof callbacks.onmessage == "function") ? callbacks.onmessage : Janus.noop;
		callbacks.onlocalstream = (typeof callbacks.onlocalstream == "function") ? callbacks.onlocalstream : Janus.noop;
		callbacks.onremotestream = (typeof callbacks.onremotestream == "function") ? callbacks.onremotestream : Janus.noop;
		callbacks.ondata = (typeof callbacks.ondata == "function") ? callbacks.ondata : Janus.noop;
		callbacks.ondataopen = (typeof callbacks.ondataopen == "function") ? callbacks.ondataopen : Janus.noop;
		callbacks.oncleanup = (typeof callbacks.oncleanup == "function") ? callbacks.oncleanup : Janus.noop;
		callbacks.ondetached = (typeof callbacks.ondetached == "function") ? callbacks.ondetached : Janus.noop;
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			callbacks.error("Is the server down? (connected=false)");
			return;
		}
		var plugin = callbacks.plugin;
		if(plugin === undefined || plugin === null) {
			Janus.error("Invalid plugin");
			callbacks.error("Invalid plugin");
			return;
		}
		var opaqueId = callbacks.opaqueId;
		var handleToken = callbacks.token ? callbacks.token : token;
		var transaction = Janus.randomString(12);
		var request = { "janus": "attach", "plugin": plugin, "opaque_id": opaqueId, "transaction": transaction };
		if(handleToken !== null && handleToken !== undefined)
			request["token"] = handleToken;
		if(apisecret !== null && apisecret !== undefined)
			request["apisecret"] = apisecret;
		if(websockets) {
			transactions[transaction] = function(json) {
				Janus.debug(json);
				if(json["janus"] !== "success") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
					callbacks.error("Ooops: " + json["error"].code + " " + json["error"].reason);
					return;
				}
				var handleId = json.data["id"];
				Janus.log("Created handle: " + handleId);
				var pluginHandle =
					{
						session : that,
						plugin : plugin,
						id : handleId,
						token : handleToken,
						detached : false,
						webrtcStuff : {
							started : false,
							myStream : null,
							streamExternal : false,
							remoteStream : null,
							mySdp : null,
							mediaConstraints : null,
							pc : null,
							dataChannel : null,
							dtmfSender : null,
							trickle : true,
							iceDone : false,
							volume : {
								value : null,
								timer : null
							},
							bitrate : {
								value : null,
								bsnow : null,
								bsbefore : null,
								tsnow : null,
								tsbefore : null,
								timer : null
							}
						},
						getId : function() { return handleId; },
						getPlugin : function() { return plugin; },
						getVolume : function() { return getVolume(handleId, true); },
						getRemoteVolume : function() { return getVolume(handleId, true); },
						getLocalVolume : function() { return getVolume(handleId, false); },
						isAudioMuted : function() { return isMuted(handleId, false); },
						muteAudio : function() { return mute(handleId, false, true); },
						unmuteAudio : function() { return mute(handleId, false, false); },
						isVideoMuted : function() { return isMuted(handleId, true); },
						muteVideo : function() { return mute(handleId, true, true); },
						unmuteVideo : function() { return mute(handleId, true, false); },
						getBitrate : function() { return getBitrate(handleId); },
						send : function(callbacks) { sendMessage(handleId, callbacks); },
						data : function(callbacks) { sendData(handleId, callbacks); },
						dtmf : function(callbacks) { sendDtmf(handleId, callbacks); },
						consentDialog : callbacks.consentDialog,
						iceState : callbacks.iceState,
						mediaState : callbacks.mediaState,
						webrtcState : callbacks.webrtcState,
						slowLink : callbacks.slowLink,
						onmessage : callbacks.onmessage,
						createOffer : function(callbacks) { prepareWebrtc(handleId,true, callbacks); },
						createAnswer : function(callbacks) { prepareWebrtc(handleId,false,callbacks); },
						handleRemoteJsep : function(callbacks) { prepareWebrtcPeer(handleId, callbacks); },
						onlocalstream : callbacks.onlocalstream,
						onremotestream : callbacks.onremotestream,
						ondata : callbacks.ondata,
						ondataopen : callbacks.ondataopen,
						oncleanup : callbacks.oncleanup,
						ondetached : callbacks.ondetached,
						hangup : function(sendRequest) { cleanupWebrtc(handleId, sendRequest === true); },
						detach : function(callbacks) { destroyHandle(handleId, callbacks); }
					}
				pluginHandles[handleId] = pluginHandle;
				callbacks.success(pluginHandle);
			};
			request["session_id"] = sessionId;
			ws.send(JSON.stringify(request));
			return;
		}
		Janus.httpAPICall(server + "/" + sessionId, {
			verb: 'POST',
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.debug(json);
				if(json["janus"] !== "success") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
					callbacks.error("Ooops: " + json["error"].code + " " + json["error"].reason);
					return;
				}
				var handleId = json.data["id"];
				Janus.log("Created handle: " + handleId);
				var pluginHandle =
					{
						session : that,
						plugin : plugin,
						id : handleId,
						token : handleToken,
						detached : false,
						webrtcStuff : {
							started : false,
							myStream : null,
							streamExternal : false,
							remoteStream : null,
							mySdp : null,
							mediaConstraints : null,
							pc : null,
							dataChannel : null,
							dtmfSender : null,
							trickle : true,
							iceDone : false,
							volume : {
								value : null,
								timer : null
							},
							bitrate : {
								value : null,
								bsnow : null,
								bsbefore : null,
								tsnow : null,
								tsbefore : null,
								timer : null
							}
						},
						getId : function() { return handleId; },
						getPlugin : function() { return plugin; },
						getVolume : function() { return getVolume(handleId, true); },
						getRemoteVolume : function() { return getVolume(handleId, true); },
						getLocalVolume : function() { return getVolume(handleId, false); },
						isAudioMuted : function() { return isMuted(handleId, false); },
						muteAudio : function() { return mute(handleId, false, true); },
						unmuteAudio : function() { return mute(handleId, false, false); },
						isVideoMuted : function() { return isMuted(handleId, true); },
						muteVideo : function() { return mute(handleId, true, true); },
						unmuteVideo : function() { return mute(handleId, true, false); },
						getBitrate : function() { return getBitrate(handleId); },
						send : function(callbacks) { sendMessage(handleId, callbacks); },
						data : function(callbacks) { sendData(handleId, callbacks); },
						dtmf : function(callbacks) { sendDtmf(handleId, callbacks); },
						consentDialog : callbacks.consentDialog,
						iceState : callbacks.iceState,
						mediaState : callbacks.mediaState,
						webrtcState : callbacks.webrtcState,
						slowLink : callbacks.slowLink,
						onmessage : callbacks.onmessage,
						createOffer : function(callbacks) { prepareWebrtc(handleId, callbacks); },
						createAnswer : function(callbacks) { prepareWebrtc(handleId, callbacks); },
						handleRemoteJsep : function(callbacks) { prepareWebrtcPeer(handleId, callbacks); },
						onlocalstream : callbacks.onlocalstream,
						onremotestream : callbacks.onremotestream,
						ondata : callbacks.ondata,
						ondataopen : callbacks.ondataopen,
						oncleanup : callbacks.oncleanup,
						ondetached : callbacks.ondetached,
						hangup : function(sendRequest) { cleanupWebrtc(handleId, sendRequest === true); },
						detach : function(callbacks) { destroyHandle(handleId, callbacks); }
					}
				pluginHandles[handleId] = pluginHandle;
				callbacks.success(pluginHandle);
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
			}
		});
	}

	// Private method to send a message
	function sendMessage(handleId, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			callbacks.error("Is the server down? (connected=false)");
			return;
		}
		var pluginHandle = pluginHandles[handleId];
		if(pluginHandle === null || pluginHandle === undefined ||
				pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var message = callbacks.message;
		var jsep = callbacks.jsep;
		var transaction = Janus.randomString(12);
		var request = { "janus": "message", "body": message, "transaction": transaction };
		if(pluginHandle.token !== null && pluginHandle.token !== undefined)
			request["token"] = pluginHandle.token;
		if(apisecret !== null && apisecret !== undefined)
			request["apisecret"] = apisecret;
		if(jsep !== null && jsep !== undefined)
			request.jsep = jsep;
		Janus.debug("Sending message to plugin (handle=" + handleId + "):");
		Janus.debug(request);
		if(websockets) {
			request["session_id"] = sessionId;
			request["handle_id"] = handleId;
			transactions[transaction] = function(json) {
				Janus.debug("Message sent!");
				Janus.debug(json);
				if(json["janus"] === "success") {
					// We got a success, must have been a synchronous transaction
					var plugindata = json["plugindata"];
					if(plugindata === undefined || plugindata === null) {
						Janus.warn("Request succeeded, but missing plugindata...");
						callbacks.success();
						return;
					}
					Janus.log("Synchronous transaction successful (" + plugindata["plugin"] + ")");
					var data = plugindata["data"];
					Janus.debug(data);
					callbacks.success(data);
					return;
				} else if(json["janus"] !== "ack") {
					// Not a success and not an ack, must be an error
					if(json["error"] !== undefined && json["error"] !== null) {
						Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
						callbacks.error(json["error"].code + " " + json["error"].reason);
					} else {
						Janus.error("Unknown error");	// FIXME
						callbacks.error("Unknown error");
					}
					return;
				}
				// If we got here, the plugin decided to handle the request asynchronously
				callbacks.success();
			};
			ws.send(JSON.stringify(request));
			return;
		}
		Janus.httpAPICall(server + "/" + sessionId + "/" + handleId, {
			verb: 'POST',
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.debug("Message sent!");
				Janus.debug(json);
				if(json["janus"] === "success") {
					// We got a success, must have been a synchronous transaction
					var plugindata = json["plugindata"];
					if(plugindata === undefined || plugindata === null) {
						Janus.warn("Request succeeded, but missing plugindata...");
						callbacks.success();
						return;
					}
					Janus.log("Synchronous transaction successful (" + plugindata["plugin"] + ")");
					var data = plugindata["data"];
					Janus.debug(data);
					callbacks.success(data);
					return;
				} else if(json["janus"] !== "ack") {
					// Not a success and not an ack, must be an error
					if(json["error"] !== undefined && json["error"] !== null) {
						Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
						callbacks.error(json["error"].code + " " + json["error"].reason);
					} else {
						Janus.error("Unknown error");	// FIXME
						callbacks.error("Unknown error");
					}
					return;
				}
				// If we got here, the plugin decided to handle the request asynchronously
				callbacks.success();
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
				callbacks.error(textStatus + ": " + errorThrown);
			}
		});
	}

	// Private method to send a trickle candidate
	function sendTrickleCandidate(handleId, candidate) {
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			return;
		}
		var pluginHandle = pluginHandles[handleId];
		if(pluginHandle === null || pluginHandle === undefined ||
				pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {
			Janus.warn("Invalid handle");
			return;
		}
		var request = { "janus": "trickle", "candidate": candidate, "transaction": Janus.randomString(12) };
		if(pluginHandle.token !== null && pluginHandle.token !== undefined)
			request["token"] = pluginHandle.token;
		if(apisecret !== null && apisecret !== undefined)
			request["apisecret"] = apisecret;
		Janus.vdebug("Sending trickle candidate (handle=" + handleId + "):");
		Janus.vdebug(request);
		if(websockets) {
			request["session_id"] = sessionId;
			request["handle_id"] = handleId;
			ws.send(JSON.stringify(request));
			return;
		}
		Janus.httpAPICall(server + "/" + sessionId + "/" + handleId, {
			verb: 'POST',
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.vdebug("Candidate sent!");
				Janus.vdebug(json);
				if(json["janus"] !== "ack") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
					return;
				}
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
			}
		});
	}

	// Private method to create a data channel
	function createDataChannel(handleId, dclabel, incoming, pendingText) {
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		var onDataChannelMessage = function(event) {
			Janus.log('Received message on data channel:', event);
			var label = event.target.label;
			pluginHandle.ondata(event.data, label);
		}
		var onDataChannelStateChange = function(event) {
			Janus.log('Received state change on data channel:', event);
			var label = event.target.label;
			var dcState = config.dataChannel[label] ? config.dataChannel[label].readyState : "null";
			Janus.log('State change on <' + label + '> data channel: ' + dcState);
			if(dcState === 'open') {
				// Any pending messages to send?
				if(config.dataChannel[label].pending && config.dataChannel[label].pending.length > 0) {
					Janus.log("Sending pending messages on <" + label + ">:", config.dataChannel[label].pending.length);
					for(var text of config.dataChannel[label].pending) {
						Janus.log("Sending string on data channel <" + label + ">: " + text);
						config.dataChannel[label].send(text);
					}
					config.dataChannel[label].pending = [];
				}
				// Notify the open data channel
				pluginHandle.ondataopen(label);
			}
		}
		var onDataChannelError = function(error) {
			Janus.error('Got error on data channel:', error);
			// TODO
		}
		if(!incoming) {
			// FIXME Add options (ordered, maxRetransmits, etc.)
			config.dataChannel[dclabel] = config.pc.createDataChannel(dclabel, {ordered:false});
		} else {
			// The channel was created by Janus
			config.dataChannel[dclabel] = incoming;
		}
		config.dataChannel[dclabel].onmessage = onDataChannelMessage;
		config.dataChannel[dclabel].onopen = onDataChannelStateChange;
		config.dataChannel[dclabel].onclose = onDataChannelStateChange;
		config.dataChannel[dclabel].onerror = onDataChannelError;
		config.dataChannel[dclabel].pending = [];
		if(pendingText)
			config.dataChannel[dclabel].pending.push(pendingText);
	}

	// Private method to send a data channel message
	function sendData(handleId, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		var text = callbacks.text;
		if(!text) {
			Janus.warn("Invalid text");
			callbacks.error("Invalid text");
			return;
		}
		var label = callbacks.label ? callbacks.label : Janus.dataChanDefaultLabel;
		if(!config.dataChannel[label]) {
			// Create new data channel and wait for it to open
			createDataChannel(handleId, label, false, text);
			callbacks.success();
			return;
		}
		if(config.dataChannel[label].readyState !== "open") {
			config.dataChannel[label].pending.push(text);
			callbacks.success();
			return;
		}
		Janus.log("Sending string on data channel <" + label + ">: " + text);
		config.dataChannel[label].send(text);
		callbacks.success();
	}

	// Private method to send a DTMF tone
	function sendDtmf(handleId, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		if(!config.dtmfSender) {
			// Create the DTMF sender the proper way, if possible
			if(config.pc) {
				var senders = config.pc.getSenders();
				var audioSender = senders.find(function(sender) {
					return sender.track && sender.track.kind === 'audio';
				});
				if(!audioSender) {
					Janus.warn("Invalid DTMF configuration (no audio track)");
					callbacks.error("Invalid DTMF configuration (no audio track)");
					return;
				}
				config.dtmfSender = audioSender.dtmf;
				if(config.dtmfSender) {
					Janus.log("Created DTMF Sender");
					config.dtmfSender.ontonechange = function(tone) { Janus.debug("Sent DTMF tone: " + tone.tone); };
				}
			}
			if(!config.dtmfSender) {
				Janus.warn("Invalid DTMF configuration");
				callbacks.error("Invalid DTMF configuration");
				return;
			}
		}
		var dtmf = callbacks.dtmf;
		if(!dtmf) {
			Janus.warn("Invalid DTMF parameters");
			callbacks.error("Invalid DTMF parameters");
			return;
		}
		var tones = dtmf.tones;
		if(!tones) {
			Janus.warn("Invalid DTMF string");
			callbacks.error("Invalid DTMF string");
			return;
		}
		var duration = (typeof dtmf.duration === 'number') ? dtmf.duration : 500; // We choose 500ms as the default duration for a tone
		var gap = (typeof dtmf.gap === 'number') ? dtmf.gap : 50; // We choose 50ms as the default gap between tones
		Janus.debug("Sending DTMF string " + tones + " (duration " + duration + "ms, gap " + gap + "ms)");
		config.dtmfSender.insertDTMF(tones, duration, gap);
		callbacks.success();
	}

	// Private method to destroy a plugin handle
	function destroyHandle(handleId, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		var asyncRequest = true;
		if(callbacks.asyncRequest !== undefined && callbacks.asyncRequest !== null)
			asyncRequest = (callbacks.asyncRequest === true);
		var noRequest = true;
		if(callbacks.noRequest !== undefined && callbacks.noRequest !== null)
			noRequest = (callbacks.noRequest === true);
		Janus.log("Destroying handle " + handleId + " (async=" + asyncRequest + ")");
		cleanupWebrtc(handleId);
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || pluginHandle.detached) {
			// Plugin was already detached by Janus, calling detach again will return a handle not found error, so just exit here
			delete pluginHandles[handleId];
			callbacks.success();
			return;
		}
		if(noRequest) {
			// We're only removing the handle locally
			delete pluginHandles[handleId];
			callbacks.success();
			return;
		}
		if(!connected) {
			Janus.warn("Is the server down? (connected=false)");
			callbacks.error("Is the server down? (connected=false)");
			return;
		}
		var request = { "janus": "detach", "transaction": Janus.randomString(12) };
		if(pluginHandle.token)
			request["token"] = pluginHandle.token;
		if(apisecret)
			request["apisecret"] = apisecret;
		if(websockets) {
			request["session_id"] = sessionId;
			request["handle_id"] = handleId;
			ws.send(JSON.stringify(request));
			delete pluginHandles[handleId];
			callbacks.success();
			return;
		}
		Janus.httpAPICall(server + "/" + sessionId + "/" + handleId, {
			verb: 'POST',
			async: asyncRequest,	// Sometimes we need false here, or destroying in onbeforeunload won't work
			withCredentials: withCredentials,
			body: request,
			success: function(json) {
				Janus.log("Destroyed handle:");
				Janus.debug(json);
				if(json["janus"] !== "success") {
					Janus.error("Ooops: " + json["error"].code + " " + json["error"].reason);	// FIXME
				}
				delete pluginHandles[handleId];
				callbacks.success();
			},
			error: function(textStatus, errorThrown) {
				Janus.error(textStatus + ":", errorThrown);	// FIXME
				// We cleanup anyway
				delete pluginHandles[handleId];
				callbacks.success();
			}
		});
	}

	// WebRTC stuff
	function streamsDone(handleId, jsep, media, callbacks, stream) {
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		Janus.debug("streamsDone:", stream);
		if(stream) {
			Janus.debug("  -- Audio tracks:", stream.getAudioTracks());
			Janus.debug("  -- Video tracks:", stream.getVideoTracks());
		}
		// We're now capturing the new stream: check if we're updating or if it's a new thing
		var addTracks = false;
		if(!config.myStream || !media.update || config.streamExternal) {
			config.myStream = stream;
			addTracks = true;
		} else {
			// We only need to update the existing stream
			if(((!media.update && isAudioSendEnabled(media)) || (media.update && (media.addAudio || media.replaceAudio))) &&
					stream.getAudioTracks() && stream.getAudioTracks().length) {
				config.myStream.addTrack(stream.getAudioTracks()[0]);
				if(Janus.unifiedPlan) {
					// Use Transceivers
					Janus.log((media.replaceAudio ? "Replacing" : "Adding") + " audio track:", stream.getAudioTracks()[0]);
					var audioTransceiver = null;
					var transceivers = config.pc.getTransceivers();
					if(transceivers && transceivers.length > 0) {
						for(var t of transceivers) {
							if((t.sender && t.sender.track && t.sender.track.kind === "audio") ||
									(t.receiver && t.receiver.track && t.receiver.track.kind === "audio")) {
								audioTransceiver = t;
								break;
							}
						}
					}
					if(audioTransceiver && audioTransceiver.sender) {
						audioTransceiver.sender.replaceTrack(stream.getAudioTracks()[0]);
					} else {
						Janus.log((media.replaceAudio ? "Replacing" : "Adding") + " audio track:", stream.getAudioTracks()[0]);
						config.pc.addTrack(stream.getAudioTracks()[0], stream);
					}
				} else {
					Janus.log((media.replaceAudio ? "Replacing" : "Adding") + " audio track:", stream.getAudioTracks()[0]);
					config.pc.addTrack(stream.getAudioTracks()[0], stream);
				}
			}
			if(((!media.update && isVideoSendEnabled(media)) || (media.update && (media.addVideo || media.replaceVideo))) &&
					stream.getVideoTracks() && stream.getVideoTracks().length) {
				config.myStream.addTrack(stream.getVideoTracks()[0]);
				if(Janus.unifiedPlan) {
					// Use Transceivers
					Janus.log((media.replaceVideo ? "Replacing" : "Adding") + " video track:", stream.getVideoTracks()[0]);
					var videoTransceiver = null;
					var transceivers = config.pc.getTransceivers();
					if(transceivers && transceivers.length > 0) {
						for(var t of transceivers) {
							if((t.sender && t.sender.track && t.sender.track.kind === "video") ||
									(t.receiver && t.receiver.track && t.receiver.track.kind === "video")) {
								videoTransceiver = t;
								break;
							}
						}
					}
					if(videoTransceiver && videoTransceiver.sender) {
						videoTransceiver.sender.replaceTrack(stream.getVideoTracks()[0]);
					} else {
						config.pc.addTrack(stream.getVideoTracks()[0], stream);
					}
				} else {
					Janus.log((media.replaceVideo ? "Replacing" : "Adding") + " video track:", stream.getVideoTracks()[0]);
					config.pc.addTrack(stream.getVideoTracks()[0], stream);
				}
			}
		}
		// If we still need to create a PeerConnection, let's do that
		if(!config.pc) {
			var pc_config = {"iceServers": iceServers, "iceTransportPolicy": iceTransportPolicy, "bundlePolicy": bundlePolicy};
			if(Janus.webRTCAdapter.browserDetails.browser === "chrome") {
				// For Chrome versions before 72, we force a plan-b semantic, and unified-plan otherwise
				pc_config["sdpSemantics"] = (Janus.webRTCAdapter.browserDetails.version < 72) ? "plan-b" : "unified-plan";
			}
			var pc_constraints = {
				"optional": [{"DtlsSrtpKeyAgreement": true}]
			};
			if(ipv6Support) {
				pc_constraints.optional.push({"googIPv6":true});
			}
			// Any custom constraint to add?
			if(callbacks.rtcConstraints && typeof callbacks.rtcConstraints === 'object') {
				Janus.debug("Adding custom PeerConnection constraints:", callbacks.rtcConstraints);
				for(var i in callbacks.rtcConstraints) {
					pc_constraints.optional.push(callbacks.rtcConstraints[i]);
				}
			}
			if(Janus.webRTCAdapter.browserDetails.browser === "edge") {
				// This is Edge, enable BUNDLE explicitly
				pc_config.bundlePolicy = "max-bundle";
			}
			Janus.log("Creating PeerConnection");
			Janus.debug(pc_constraints);
			config.pc = new RTCPeerConnection(pc_config, pc_constraints);
			Janus.debug(config.pc);
			if(config.pc.getStats) {	// FIXME
				config.volume = {};
				config.bitrate.value = "0 kbits/sec";
			}
			Janus.log("Preparing local SDP and gathering candidates (trickle=" + config.trickle + ")");
			config.pc.oniceconnectionstatechange = function(e) {
				if(config.pc)
					pluginHandle.iceState(config.pc.iceConnectionState);
			};
			config.pc.onicecandidate = function(event) {
				if (!event.candidate ||
						(Janus.webRTCAdapter.browserDetails.browser === 'edge' && event.candidate.candidate.indexOf('endOfCandidates') > 0)) {
					Janus.log("End of candidates.");
					config.iceDone = true;
					if(config.trickle === true) {
						// Notify end of candidates
						sendTrickleCandidate(handleId, {"completed": true});
					} else {
						// No trickle, time to send the complete SDP (including all candidates)
						sendSDP(handleId, callbacks);
					}
				} else {
					// JSON.stringify doesn't work on some WebRTC objects anymore
					// See https://code.google.com/p/chromium/issues/detail?id=467366
					var candidate = {
						"candidate": event.candidate.candidate,
						"sdpMid": event.candidate.sdpMid,
						"sdpMLineIndex": event.candidate.sdpMLineIndex
					};
					if(config.trickle === true) {
						// Send candidate
						sendTrickleCandidate(handleId, candidate);
					}
				}
			};
			config.pc.ontrack = function(event) {
				Janus.log("Handling Remote Track");
				Janus.debug(event);
				if(!event.streams)
					return;
				config.remoteStream = event.streams[0];
				pluginHandle.onremotestream(config.remoteStream);
				if(event.track.onended)
					return;
				Janus.log("Adding onended callback to track:", event.track);
				event.track.onended = function(ev) {
					Janus.log("Remote track muted/removed:", ev);
					if(config.remoteStream) {
						config.remoteStream.removeTrack(ev.target);
						pluginHandle.onremotestream(config.remoteStream);
					}
				};
				/*event.track.onmute = event.track.onended;
				event.track.onunmute = function(ev) {
					Janus.log("Remote track flowing again:", ev);
					try {
						config.remoteStream.addTrack(ev.target);
						pluginHandle.onremotestream(config.remoteStream);
					} catch(e) {
						Janus.error(e);
					};
				};*/
			};
		}
		if(addTracks && stream) {
			Janus.log('Adding local stream');
			var simulcast2 = (callbacks.simulcast2 === true);
			stream.getTracks().forEach(function(track) {
				Janus.log('Adding local track:', track);
				if(!simulcast2) {
					config.pc.addTrack(track, stream);
				} else {
					if(track.kind === "audio") {
						config.pc.addTrack(track, stream);
					} else {
						Janus.log('Enabling rid-based simulcasting:', track);
						const maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);
						config.pc.addTransceiver(track, {
							direction: "sendrecv",
							streams: [stream],
							sendEncodings: [
								{ rid: "h", active: true, maxBitrate: maxBitrates.high },
								{ rid: "m", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2 },
								{ rid: "l", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4 }
							]
						});
					}
				}
			});
		}
		// Any data channel to create?
		if(isDataEnabled(media) && !config.dataChannel[Janus.dataChanDefaultLabel]) {
			Janus.log("Creating data channel");
			createDataChannel(handleId, Janus.dataChanDefaultLabel, false);
			config.pc.ondatachannel = function(event) {
				Janus.log("Data channel created by Janus:", event);
				createDataChannel(handleId, event.channel.label, event.channel);
			};
		}
		// If there's a new local stream, let's notify the application
		if(config.myStream)
			pluginHandle.onlocalstream(config.myStream);
		// Create offer/answer now
		if(!jsep) {
			createOffer(handleId, media, callbacks);
		} else {
			config.pc.setRemoteDescription(jsep)
				.then(function() {
					Janus.log("Remote description accepted!");
					config.remoteSdp = jsep.sdp;
					// Any trickle candidate we cached?
					if(config.candidates && config.candidates.length > 0) {
						for(var i = 0; i< config.candidates.length; i++) {
							var candidate = config.candidates[i];
							Janus.debug("Adding remote candidate:", candidate);
							if(!candidate || candidate.completed === true) {
								// end-of-candidates
								config.pc.addIceCandidate(Janus.endOfCandidates);
							} else {
								// New candidate
								config.pc.addIceCandidate(candidate);
							}
						}
						config.candidates = [];
					}
					// Create the answer now
					createAnswer(handleId, media, callbacks);
				}, callbacks.error);
		}
	}

	function prepareWebrtc(handleId, offer, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : webrtcError;
		var jsep = callbacks.jsep;
		if(offer && jsep) {
			Janus.error("Provided a JSEP to a createOffer");
			callbacks.error("Provided a JSEP to a createOffer");
			return;
		} else if(!offer && (!jsep || !jsep.type || !jsep.sdp)) {
			Janus.error("A valid JSEP is required for createAnswer");
			callbacks.error("A valid JSEP is required for createAnswer");
			return;
		}
		/* Check that callbacks.media is a (not null) Object */
		callbacks.media = (typeof callbacks.media === 'object' && callbacks.media) ? callbacks.media : { audio: true, video: true };
		var media = callbacks.media;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		config.trickle = isTrickleEnabled(callbacks.trickle);
		// Are we updating a session?
		if(!config.pc) {
			// Nope, new PeerConnection
			media.update = false;
			media.keepAudio = false;
			media.keepVideo = false;
		} else {
			Janus.log("Updating existing media session");
			media.update = true;
			// Check if there's anything to add/remove/replace, or if we
			// can go directly to preparing the new SDP offer or answer
			if(callbacks.stream) {
				// External stream: is this the same as the one we were using before?
				if(callbacks.stream !== config.myStream) {
					Janus.log("Renegotiation involves a new external stream");
				}
			} else {
				// Check if there are changes on audio
				if(media.addAudio) {
					media.keepAudio = false;
					media.replaceAudio = false;
					media.removeAudio = false;
					media.audioSend = true;
					if(config.myStream && config.myStream.getAudioTracks() && config.myStream.getAudioTracks().length) {
						Janus.error("Can't add audio stream, there already is one");
						callbacks.error("Can't add audio stream, there already is one");
						return;
					}
				} else if(media.removeAudio) {
					media.keepAudio = false;
					media.replaceAudio = false;
					media.addAudio = false;
					media.audioSend = false;
				} else if(media.replaceAudio) {
					media.keepAudio = false;
					media.addAudio = false;
					media.removeAudio = false;
					media.audioSend = true;
				}
				if(!config.myStream) {
					// No media stream: if we were asked to replace, it's actually an "add"
					if(media.replaceAudio) {
						media.keepAudio = false;
						media.replaceAudio = false;
						media.addAudio = true;
						media.audioSend = true;
					}
					if(isAudioSendEnabled(media)) {
						media.keepAudio = false;
						media.addAudio = true;
					}
				} else {
					if(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {
						// No audio track: if we were asked to replace, it's actually an "add"
						if(media.replaceAudio) {
							media.keepAudio = false;
							media.replaceAudio = false;
							media.addAudio = true;
							media.audioSend = true;
						}
						if(isAudioSendEnabled(media)) {
							media.keepVideo = false;
							media.addAudio = true;
						}
					} else {
						// We have an audio track: should we keep it as it is?
						if(isAudioSendEnabled(media) &&
								!media.removeAudio && !media.replaceAudio) {
							media.keepAudio = true;
						}
					}
				}
				// Check if there are changes on video
				if(media.addVideo) {
					media.keepVideo = false;
					media.replaceVideo = false;
					media.removeVideo = false;
					media.videoSend = true;
					if(config.myStream && config.myStream.getVideoTracks() && config.myStream.getVideoTracks().length) {
						Janus.error("Can't add video stream, there already is one");
						callbacks.error("Can't add video stream, there already is one");
						return;
					}
				} else if(media.removeVideo) {
					media.keepVideo = false;
					media.replaceVideo = false;
					media.addVideo = false;
					media.videoSend = false;
				} else if(media.replaceVideo) {
					media.keepVideo = false;
					media.addVideo = false;
					media.removeVideo = false;
					media.videoSend = true;
				}
				if(!config.myStream) {
					// No media stream: if we were asked to replace, it's actually an "add"
					if(media.replaceVideo) {
						media.keepVideo = false;
						media.replaceVideo = false;
						media.addVideo = true;
						media.videoSend = true;
					}
					if(isVideoSendEnabled(media)) {
						media.keepVideo = false;
						media.addVideo = true;
					}
				} else {
					if(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {
						// No video track: if we were asked to replace, it's actually an "add"
						if(media.replaceVideo) {
							media.keepVideo = false;
							media.replaceVideo = false;
							media.addVideo = true;
							media.videoSend = true;
						}
						if(isVideoSendEnabled(media)) {
							media.keepVideo = false;
							media.addVideo = true;
						}
					} else {
						// We have a video track: should we keep it as it is?
						if(isVideoSendEnabled(media) &&
								!media.removeVideo && !media.replaceVideo) {
							media.keepVideo = true;
						}
					}
				}
				// Data channels can only be added
				if(media.addData)
					media.data = true;
			}
			// If we're updating and keeping all tracks, let's skip the getUserMedia part
			if((isAudioSendEnabled(media) && media.keepAudio) &&
					(isVideoSendEnabled(media) && media.keepVideo)) {
				pluginHandle.consentDialog(false);
				streamsDone(handleId, jsep, media, callbacks, config.myStream);
				return;
			}
		}
		// If we're updating, check if we need to remove/replace one of the tracks
		if(media.update && !config.streamExternal) {
			if(media.removeAudio || media.replaceAudio) {
				if(config.myStream && config.myStream.getAudioTracks() && config.myStream.getAudioTracks().length) {
					var s = config.myStream.getAudioTracks()[0];
					Janus.log("Removing audio track:", s);
					config.myStream.removeTrack(s);
					try {
						s.stop();
					} catch(e) {};
				}
				if(config.pc.getSenders() && config.pc.getSenders().length) {
					var ra = true;
					if(media.replaceAudio && Janus.unifiedPlan) {
						// We can use replaceTrack
						ra = false;
					}
					if(ra) {
						for(var s of config.pc.getSenders()) {
							if(s && s.track && s.track.kind === "audio") {
								Janus.log("Removing audio sender:", s);
								config.pc.removeTrack(s);
							}
						}
					}
				}
			}
			if(media.removeVideo || media.replaceVideo) {
				if(config.myStream && config.myStream.getVideoTracks() && config.myStream.getVideoTracks().length) {
					var s = config.myStream.getVideoTracks()[0];
					Janus.log("Removing video track:", s);
					config.myStream.removeTrack(s);
					try {
						s.stop();
					} catch(e) {};
				}
				if(config.pc.getSenders() && config.pc.getSenders().length) {
					var rv = true;
					if(media.replaceVideo && Janus.unifiedPlan) {
						// We can use replaceTrack
						rv = false;
					}
					if(rv) {
						for(var s of config.pc.getSenders()) {
							if(s && s.track && s.track.kind === "video") {
								Janus.log("Removing video sender:", s);
								config.pc.removeTrack(s);
							}
						}
					}
				}
			}
		}
		// Was a MediaStream object passed, or do we need to take care of that?
		if(callbacks.stream) {
			var stream = callbacks.stream;
			Janus.log("MediaStream provided by the application");
			Janus.debug(stream);
			// If this is an update, let's check if we need to release the previous stream
			if(media.update) {
				if(config.myStream && config.myStream !== callbacks.stream && !config.streamExternal) {
					// We're replacing a stream we captured ourselves with an external one
					try {
						// Try a MediaStreamTrack.stop() for each track
						var tracks = config.myStream.getTracks();
						for(var mst of tracks) {
							Janus.log(mst);
							if(mst)
								mst.stop();
						}
					} catch(e) {
						// Do nothing if this fails
					}
					config.myStream = null;
				}
			}
			// Skip the getUserMedia part
			config.streamExternal = true;
			pluginHandle.consentDialog(false);
			streamsDone(handleId, jsep, media, callbacks, stream);
			return;
		}
		if(isAudioSendEnabled(media) || isVideoSendEnabled(media)) {
			if(!Janus.isGetUserMediaAvailable()) {
				callbacks.error("getUserMedia not available");
				return;
			}
			var constraints = { mandatory: {}, optional: []};
			pluginHandle.consentDialog(true);
			var audioSupport = isAudioSendEnabled(media);
			if(audioSupport && media && typeof media.audio === 'object')
				audioSupport = media.audio;
			var videoSupport = isVideoSendEnabled(media);
			if(videoSupport && media) {
				var simulcast = (callbacks.simulcast === true);
				var simulcast2 = (callbacks.simulcast2 === true);
				if((simulcast || simulcast2) && !jsep && !media.video)
					media.video = "hires";
				if(media.video && media.video != 'screen' && media.video != 'window') {
					if(typeof media.video === 'object') {
						videoSupport = media.video;
					} else {
						var width = 0;
						var height = 0, maxHeight = 0;
						if(media.video === 'lowres') {
							// Small resolution, 4:3
							height = 240;
							maxHeight = 240;
							width = 320;
						} else if(media.video === 'lowres-16:9') {
							// Small resolution, 16:9
							height = 180;
							maxHeight = 180;
							width = 320;
						} else if(media.video === 'hires' || media.video === 'hires-16:9' || media.video === 'hdres') {
							// High(HD) resolution is only 16:9
							height = 720;
							maxHeight = 720;
							width = 1280;
						} else if(media.video === 'fhdres') {
							// Full HD resolution is only 16:9
							height = 1080;
							maxHeight = 1080;
							width = 1920;
						} else if(media.video === '4kres') {
							// 4K resolution is only 16:9
							height = 2160;
							maxHeight = 2160;
							width = 3840;
						} else if(media.video === 'stdres') {
							// Normal resolution, 4:3
							height = 480;
							maxHeight = 480;
							width  = 640;
						} else if(media.video === 'stdres-16:9') {
							// Normal resolution, 16:9
							height = 360;
							maxHeight = 360;
							width = 640;
						} else {
							Janus.log("Default video setting is stdres 4:3");
							height = 480;
							maxHeight = 480;
							width = 640;
						}
						Janus.log("Adding media constraint:", media.video);
						videoSupport = {
							'height': {'ideal': height},
							'width':  {'ideal': width}
						};
						Janus.log("Adding video constraint:", videoSupport);
					}
				} else if(media.video === 'screen' || media.video === 'window') {
					if(!media.screenshareFrameRate) {
						media.screenshareFrameRate = 3;
					}
					if(navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) {
						// The new experimental getDisplayMedia API is available, let's use that
						// https://groups.google.com/forum/#!topic/discuss-webrtc/Uf0SrR4uxzk
						// https://webrtchacks.com/chrome-screensharing-getdisplaymedia/
						navigator.mediaDevices.getDisplayMedia({ video: true, audio: media.captureDesktopAudio })
							.then(function(stream) {
								pluginHandle.consentDialog(false);
								if(isAudioSendEnabled(media) && !media.keepAudio) {
									navigator.mediaDevices.getUserMedia({ audio: true, video: false })
									.then(function (audioStream) {
										stream.addTrack(audioStream.getAudioTracks()[0]);
										streamsDone(handleId, jsep, media, callbacks, stream);
									})
								} else {
									streamsDone(handleId, jsep, media, callbacks, stream);
								}
							}, function (error) {
								pluginHandle.consentDialog(false);
								callbacks.error(error);
							});
						return;
					}
					// We're going to try and use the extension for Chrome 34+, the old approach
					// for older versions of Chrome, or the experimental support in Firefox 33+
					function callbackUserMedia (error, stream) {
						pluginHandle.consentDialog(false);
						if(error) {
							callbacks.error(error);
						} else {
							streamsDone(handleId, jsep, media, callbacks, stream);
						}
					};
					function getScreenMedia(constraints, gsmCallback, useAudio) {
						Janus.log("Adding media constraint (screen capture)");
						Janus.debug(constraints);
						navigator.mediaDevices.getUserMedia(constraints)
							.then(function(stream) {
								if(useAudio) {
									navigator.mediaDevices.getUserMedia({ audio: true, video: false })
									.then(function (audioStream) {
										stream.addTrack(audioStream.getAudioTracks()[0]);
										gsmCallback(null, stream);
									})
								} else {
									gsmCallback(null, stream);
								}
							})
							.catch(function(error) { pluginHandle.consentDialog(false); gsmCallback(error); });
					};
					if(Janus.webRTCAdapter.browserDetails.browser === 'chrome') {
						var chromever = Janus.webRTCAdapter.browserDetails.version;
						var maxver = 33;
						if(window.navigator.userAgent.match('Linux'))
							maxver = 35;	// "known" crash in chrome 34 and 35 on linux
						if(chromever >= 26 && chromever <= maxver) {
							// Chrome 26->33 requires some awkward chrome://flags manipulation
							constraints = {
								video: {
									mandatory: {
										googLeakyBucket: true,
										maxWidth: window.screen.width,
										maxHeight: window.screen.height,
										minFrameRate: media.screenshareFrameRate,
										maxFrameRate: media.screenshareFrameRate,
										chromeMediaSource: 'screen'
									}
								},
								audio: isAudioSendEnabled(media) && !media.keepAudio
							};
							getScreenMedia(constraints, callbackUserMedia);
						} else {
							// Chrome 34+ requires an extension
							Janus.extension.getScreen(function (error, sourceId) {
								if (error) {
									pluginHandle.consentDialog(false);
									return callbacks.error(error);
								}
								constraints = {
									audio: false,
									video: {
										mandatory: {
											chromeMediaSource: 'desktop',
											maxWidth: window.screen.width,
											maxHeight: window.screen.height,
											minFrameRate: media.screenshareFrameRate,
											maxFrameRate: media.screenshareFrameRate,
										},
										optional: [
											{googLeakyBucket: true},
											{googTemporalLayeredScreencast: true}
										]
									}
								};
								constraints.video.mandatory.chromeMediaSourceId = sourceId;
								getScreenMedia(constraints, callbackUserMedia,
									isAudioSendEnabled(media) && !media.keepAudio);
							});
						}
					} else if(Janus.webRTCAdapter.browserDetails.browser === 'firefox') {
						if(Janus.webRTCAdapter.browserDetails.version >= 33) {
							// Firefox 33+ has experimental support for screen sharing
							constraints = {
								video: {
									mozMediaSource: media.video,
									mediaSource: media.video
								},
								audio: isAudioSendEnabled(media) && !media.keepAudio
							};
							getScreenMedia(constraints, function (err, stream) {
								callbackUserMedia(err, stream);
								// Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1045810
								if (!err) {
									var lastTime = stream.currentTime;
									var polly = window.setInterval(function () {
										if(!stream)
											window.clearInterval(polly);
										if(stream.currentTime == lastTime) {
											window.clearInterval(polly);
											if(stream.onended) {
												stream.onended();
											}
										}
										lastTime = stream.currentTime;
									}, 500);
								}
							});
						} else {
							var error = new Error('NavigatorUserMediaError');
							error.name = 'Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)';
							pluginHandle.consentDialog(false);
							callbacks.error(error);
							return;
						}
					}
					return;
				}
			}
			// If we got here, we're not screensharing
			if(!media || media.video !== 'screen') {
				// Check whether all media sources are actually available or not
				navigator.mediaDevices.enumerateDevices().then(function(devices) {
					var audioExist = devices.some(function(device) {
						return device.kind === 'audioinput';
					}),
					videoExist = isScreenSendEnabled(media) || devices.some(function(device) {
						return device.kind === 'videoinput';
					});

					// Check whether a missing device is really a problem
					var audioSend = isAudioSendEnabled(media);
					var videoSend = isVideoSendEnabled(media);
					var needAudioDevice = isAudioSendRequired(media);
					var needVideoDevice = isVideoSendRequired(media);
					if(audioSend || videoSend || needAudioDevice || needVideoDevice) {
						// We need to send either audio or video
						var haveAudioDevice = audioSend ? audioExist : false;
						var haveVideoDevice = videoSend ? videoExist : false;
						if(!haveAudioDevice && !haveVideoDevice) {
							// FIXME Should we really give up, or just assume recvonly for both?
							pluginHandle.consentDialog(false);
							callbacks.error('No capture device found');
							return false;
						} else if(!haveAudioDevice && needAudioDevice) {
							pluginHandle.consentDialog(false);
							callbacks.error('Audio capture is required, but no capture device found');
							return false;
						} else if(!haveVideoDevice && needVideoDevice) {
							pluginHandle.consentDialog(false);
							callbacks.error('Video capture is required, but no capture device found');
							return false;
						}
					}

					var gumConstraints = {
						audio: (audioExist && !media.keepAudio) ? audioSupport : false,
						video: (videoExist && !media.keepVideo) ? videoSupport : false
					};
					
				
					
					Janus.debug("getUserMedia constraints", gumConstraints);
					if (!gumConstraints.audio && !gumConstraints.video) {
						pluginHandle.consentDialog(false);
						streamsDone(handleId, jsep, media, callbacks, stream);
					} else {
						if ('res' in window){
							gumConstraints.video =  {};
							gumConstraints.video.deviceId = videoDeviceId ? {exact:videoDeviceId}:undefined;
							let _res = getSizeFromRes(res);
							gumConstraints.video.width = {exact: _res.width};
							gumConstraints.video.height = {exact: _res.height};
						}
						if ('audio' in gumConstraints){
							gumConstraints.audio =  {};
							gumConstraints.audio.echoCancellation =  echoC;
							gumConstraints.audio.autoGainControl = gainC ;
							gumConstraints.audio.noiseSuppression = noiseS;
							gumConstraints.audio["channelCount"] = 2;
						  }
						navigator.mediaDevices.getUserMedia(gumConstraints)
							.then(function(stream) {
									stream.contentHint= window.audioType? window.audioType: "";
									window.delay = window.delay || 0;
									if (window.delay !==0){
										var audioContext = new AudioContext();
										let recvAudioSource = audioContext.createMediaStreamSource(stream);
										const destination = audioContext.createMediaStreamDestination();
										const delayNode = audioContext.createDelay(10);
										delayNode.delayTime.value = window.delay || 0; // delay by 1 second
										recvAudioSource.connect(delayNode);
										recvAudioSource.muted =true;
										delayNode.connect(destination);
										pluginHandle.consentDialog(false);
										stream.addTrack(destination.stream.getAudioTracks()[0]);
										stream.removeTrack(stream.getAudioTracks()[0]);
									}
									if (window.volIncrease >0){
										var audioContext = new AudioContext();
										let recvAudioSource = audioContext.createMediaStreamSource(stream);
										const destination = audioContext.createMediaStreamDestination();
										var gainNode = audioContext.createGain();
										gainNode.gain.value = window.volIncrease;
										recvAudioSource.connect(gainNode);
										gainNode.connect(destination);
										pluginHandle.consentDialog(false);
										stream.addTrack(destination.stream.getAudioTracks()[0]);
										stream.removeTrack(stream.getAudioTracks()[0]);
									}
									streamsDone(handleId, jsep, media, callbacks, stream);
								  
								  
							}).catch(function(error) {
								alert("Not format supported");
								pluginHandle.consentDialog(false);
								callbacks.error({code: error.code, name: error.name, message: error.message});
							});
					}
				})
				.catch(function(error) {
					pluginHandle.consentDialog(false);
					callbacks.error('enumerateDevices error', error);
				});
			}
		} else {
			// No need to do a getUserMedia, create offer/answer right away
			streamsDone(handleId, jsep, media, callbacks);
		}
	}

	function prepareWebrtcPeer(handleId, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : webrtcError;
		var jsep = callbacks.jsep;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		if(jsep) {
			if(!config.pc) {
				Janus.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep");
				callbacks.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");
				return;
			}
                   //jsep.sdp = setMediaBitrate(jsep.sdp, 'audio', 128);
                   jsep.sdp = addStereo2(jsep.sdp);

			config.pc.setRemoteDescription(jsep)
				.then(function() {
					Janus.log("Remote description accepted!");
		   //jsep.sdp = setMediaBitrate(jsep.sdp, 'audio', 128);
                   jsep.sdp = addStereo(jsep.sdp);

					config.remoteSdp = jsep.sdp;
					// Any trickle candidate we cached?
					if(config.candidates && config.candidates.length > 0) {
						for(var i = 0; i< config.candidates.length; i++) {
							var candidate = config.candidates[i];
							Janus.debug("Adding remote candidate:", candidate);
							if(!candidate || candidate.completed === true) {
								// end-of-candidates
								config.pc.addIceCandidate(Janus.endOfCandidates);
							} else {
								// New candidate
								config.pc.addIceCandidate(candidate);
							}
						}
						config.candidates = [];
					}
					// Done
					callbacks.success();
				}, callbacks.error);
		} else {
			callbacks.error("Invalid JSEP");
		}
	}

	function createOffer(handleId, media, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		callbacks.customizeSdp = (typeof callbacks.customizeSdp == "function") ? callbacks.customizeSdp : Janus.noop;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		var simulcast = (callbacks.simulcast === true);
		if(!simulcast) {
			Janus.log("Creating offer (iceDone=" + config.iceDone + ")");
		} else {
			Janus.log("Creating offer (iceDone=" + config.iceDone + ", simulcast=" + simulcast + ")");
		}
		// https://code.google.com/p/webrtc/issues/detail?id=3508
		var mediaConstraints = {voiceActivityDetection:false};
		if(Janus.unifiedPlan) {
			// We can use Transceivers
			var audioTransceiver = null, videoTransceiver = null;
			var transceivers = config.pc.getTransceivers();
			if(transceivers && transceivers.length > 0) {
				for(var t of transceivers) {
					if((t.sender && t.sender.track && t.sender.track.kind === "audio") ||
							(t.receiver && t.receiver.track && t.receiver.track.kind === "audio")) {
						if(!audioTransceiver)
							audioTransceiver = t;
						continue;
					}
					if((t.sender && t.sender.track && t.sender.track.kind === "video") ||
							(t.receiver && t.receiver.track && t.receiver.track.kind === "video")) {
						if(!videoTransceiver)
							videoTransceiver = t;
						continue;
					}
				}
			}
			// Handle audio (and related changes, if any)
			var audioSend = isAudioSendEnabled(media);
			var audioRecv = isAudioRecvEnabled(media);
			if(!audioSend && !audioRecv) {
				// Audio disabled: have we removed it?
				if(media.removeAudio && audioTransceiver) {
					if (audioTransceiver.setDirection) {
						audioTransceiver.setDirection("inactive");
					} else {
						audioTransceiver.direction = "inactive";
					}
					Janus.log("Setting audio transceiver to inactive:", audioTransceiver);
				}
			} else {
				// Take care of audio m-line
				if(audioSend && audioRecv) {
					if(audioTransceiver) {
						if (audioTransceiver.setDirection) {
							audioTransceiver.setDirection("sendrecv");
						} else {
							audioTransceiver.direction = "sendrecv";
						}
						Janus.log("Setting audio transceiver to sendrecv:", audioTransceiver);
					}
				} else if(audioSend && !audioRecv) {
					if(audioTransceiver) {
						if (audioTransceiver.setDirection) {
							audioTransceiver.setDirection("sendonly");
						} else {
							audioTransceiver.direction = "sendonly";
						}
						Janus.log("Setting audio transceiver to sendonly:", audioTransceiver);
					}
				} else if(!audioSend && audioRecv) {
					if(audioTransceiver) {
						if (audioTransceiver.setDirection) {
							audioTransceiver.setDirection("recvonly");
						} else {
							audioTransceiver.direction = "recvonly";
						}
						Janus.log("Setting audio transceiver to recvonly:", audioTransceiver);
					} else {
						// In theory, this is the only case where we might not have a transceiver yet
						audioTransceiver = config.pc.addTransceiver("audio", { direction: "recvonly" });
						Janus.log("Adding recvonly audio transceiver:", audioTransceiver);
					}
				}
			}
			// Handle video (and related changes, if any)
			var videoSend = isVideoSendEnabled(media);
			var videoRecv = isVideoRecvEnabled(media);
			if(!videoSend && !videoRecv) {
				// Video disabled: have we removed it?
				if(media.removeVideo && videoTransceiver) {
					if (videoTransceiver.setDirection) {
						videoTransceiver.setDirection("inactive");
					} else {
						videoTransceiver.direction = "inactive";
					}
					Janus.log("Setting video transceiver to inactive:", videoTransceiver);
				}
			} else {
				// Take care of video m-line
				if(videoSend && videoRecv) {
					if(videoTransceiver) {
						if (videoTransceiver.setDirection) {
							videoTransceiver.setDirection("sendrecv");
						} else {
							videoTransceiver.direction = "sendrecv";
						}
						Janus.log("Setting video transceiver to sendrecv:", videoTransceiver);
					}
				} else if(videoSend && !videoRecv) {
					if(videoTransceiver) {
						if (videoTransceiver.setDirection) {
							videoTransceiver.setDirection("sendonly");
						} else {
							videoTransceiver.direction = "sendonly";
						}
						Janus.log("Setting video transceiver to sendonly:", videoTransceiver);
					}
				} else if(!videoSend && videoRecv) {
					if(videoTransceiver) {
						if (videoTransceiver.setDirection) {
							videoTransceiver.setDirection("recvonly");
						} else {
							videoTransceiver.direction = "recvonly";
						}
						Janus.log("Setting video transceiver to recvonly:", videoTransceiver);
					} else {
						// In theory, this is the only case where we might not have a transceiver yet
						videoTransceiver = config.pc.addTransceiver("video", { direction: "recvonly" });
						Janus.log("Adding recvonly video transceiver:", videoTransceiver);
					}
				}
			}
		} else {
			mediaConstraints["offerToReceiveAudio"] = isAudioRecvEnabled(media);
			mediaConstraints["offerToReceiveVideo"] = isVideoRecvEnabled(media);
			mediaConstraints["voiceActivityDetection"] = false;
		}
		var iceRestart = (callbacks.iceRestart === true);
		if(iceRestart) {
			mediaConstraints["iceRestart"] = true;
		}
		Janus.debug(mediaConstraints);
		// Check if this is Firefox and we've been asked to do simulcasting
		var sendVideo = isVideoSendEnabled(media);
		if(sendVideo && simulcast && Janus.webRTCAdapter.browserDetails.browser === "firefox") {
			// FIXME Based on https://gist.github.com/voluntas/088bc3cc62094730647b
			Janus.log("Enabling Simulcasting for Firefox (RID)");
			var sender = config.pc.getSenders().find(function(s) {return s.track.kind == "video"});
			if(sender) {
				var parameters = sender.getParameters();
				if(!parameters)
					parameters = {};


				const maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);
				parameters.encodings = [
					{ rid: "h", active: true, maxBitrate: maxBitrates.high },
					{ rid: "m", active: true, maxBitrate: maxBitrates.medium, scaleResolutionDownBy: 2 },
					{ rid: "l", active: true, maxBitrate: maxBitrates.low, scaleResolutionDownBy: 4 }
				];
				sender.setParameters(parameters);
			}
		}
		config.pc.createOffer(mediaConstraints)
			.then(function(offer) {
				Janus.debug(offer);
				// JSON.stringify doesn't work on some WebRTC objects anymore
				// See https://code.google.com/p/chromium/issues/detail?id=467366
				var jsep = {
					"type": offer.type,
					"sdp": offer.sdp
				};
				callbacks.customizeSdp(jsep);
				offer.sdp = jsep.sdp;
				Janus.log("Setting local description");
				if(sendVideo && simulcast) {
					// This SDP munging only works with Chrome (Safari STP may support it too)
					if(Janus.webRTCAdapter.browserDetails.browser === "chrome" ||
							Janus.webRTCAdapter.browserDetails.browser === "safari") {
						Janus.log("Enabling Simulcasting for Chrome (SDP munging)");
						offer.sdp = mungeSdpForSimulcasting(offer.sdp);
					} else if(Janus.webRTCAdapter.browserDetails.browser !== "firefox") {
						Janus.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring");
					}
				}
				if (sendVideo) {
                    //offer.sdp = setMediaBitrate(offer.sdp, 'audio', 128);
                    offer.sdp = addStereo(offer.sdp);
                }

				config.mySdp = offer.sdp;
				config.pc.setLocalDescription(offer)
					.catch(callbacks.error);
				config.mediaConstraints = mediaConstraints;
				if(!config.iceDone && !config.trickle) {
					// Don't do anything until we have all candidates
					Janus.log("Waiting for all candidates...");
					return;
				}
				Janus.log("Offer ready");
				Janus.debug(callbacks);
				callbacks.success(offer);
			}, callbacks.error);
	}

	function createAnswer(handleId, media, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		callbacks.customizeSdp = (typeof callbacks.customizeSdp == "function") ? callbacks.customizeSdp : Janus.noop;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			callbacks.error("Invalid handle");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		var simulcast = (callbacks.simulcast === true);
		if(!simulcast) {
			Janus.log("Creating answer (iceDone=" + config.iceDone + ")");
		} else {
			Janus.log("Creating answer (iceDone=" + config.iceDone + ", simulcast=" + simulcast + ")");
		}
		var mediaConstraints = null;
		if(Janus.unifiedPlan) {
			// We can use Transceivers
			mediaConstraints = {voiceActivityDetection:false};
			var audioTransceiver = null, videoTransceiver = null;
			var transceivers = config.pc.getTransceivers();
			if(transceivers && transceivers.length > 0) {
				for(var t of transceivers) {
					if((t.sender && t.sender.track && t.sender.track.kind === "audio") ||
							(t.receiver && t.receiver.track && t.receiver.track.kind === "audio")) {
						if(!audioTransceiver)
							audioTransceiver = t;
						continue;
					}
					if((t.sender && t.sender.track && t.sender.track.kind === "video") ||
							(t.receiver && t.receiver.track && t.receiver.track.kind === "video")) {
						if(!videoTransceiver)
							videoTransceiver = t;
						continue;
					}
				}
			}
			// Handle audio (and related changes, if any)
			var audioSend = isAudioSendEnabled(media);
			var audioRecv = isAudioRecvEnabled(media);
			if(!audioSend && !audioRecv) {
				// Audio disabled: have we removed it?
				if(media.removeAudio && audioTransceiver) {
					try {
						if (audioTransceiver.setDirection) {
							audioTransceiver.setDirection("inactive");
						} else {
							audioTransceiver.direction = "inactive";
						}
						Janus.log("Setting audio transceiver to inactive:", audioTransceiver);
					} catch(e) {
						Janus.error(e);
					}
				}
			} else {
				// Take care of audio m-line
				if(audioSend && audioRecv) {
					if(audioTransceiver) {
						try {
							if (audioTransceiver.setDirection) {
								audioTransceiver.setDirection("sendrecv");
							} else {
								audioTransceiver.direction = "sendrecv";
							}
							Janus.log("Setting audio transceiver to sendrecv:", audioTransceiver);
						} catch(e) {
							Janus.error(e);
						}
					}
				} else if(audioSend && !audioRecv) {
					try {
						if(audioTransceiver) {
							if (audioTransceiver.setDirection) {
								audioTransceiver.setDirection("sendonly");
							} else {
								audioTransceiver.direction = "sendonly";
							}
							Janus.log("Setting audio transceiver to sendonly:", audioTransceiver);
						}
					} catch(e) {
						Janus.error(e);
					}
				} else if(!audioSend && audioRecv) {
					if(audioTransceiver) {
						try {
							if (audioTransceiver.setDirection) {
								audioTransceiver.setDirection("recvonly");
							} else {
								audioTransceiver.direction = "recvonly";
							}
							Janus.log("Setting audio transceiver to recvonly:", audioTransceiver);
						} catch(e) {
							Janus.error(e);
						}
					} else {
						// In theory, this is the only case where we might not have a transceiver yet
						audioTransceiver = config.pc.addTransceiver("audio", { direction: "recvonly" });
						Janus.log("Adding recvonly audio transceiver:", audioTransceiver);
					}
				}
			}
			// Handle video (and related changes, if any)
			var videoSend = isVideoSendEnabled(media);
			var videoRecv = isVideoRecvEnabled(media);
			if(!videoSend && !videoRecv) {
				// Video disabled: have we removed it?
				if(media.removeVideo && videoTransceiver) {
					try {
						if (videoTransceiver.setDirection) {
							videoTransceiver.setDirection("inactive");
						} else {
							videoTransceiver.direction = "inactive";
						}
						Janus.log("Setting video transceiver to inactive:", videoTransceiver);
					} catch(e) {
						Janus.error(e);
					}
				}
			} else {
				// Take care of video m-line
				if(videoSend && videoRecv) {
					if(videoTransceiver) {
						try {
							if (videoTransceiver.setDirection) {
								videoTransceiver.setDirection("sendrecv");
							} else {
								videoTransceiver.direction = "sendrecv";
							}
							Janus.log("Setting video transceiver to sendrecv:", videoTransceiver);
						} catch(e) {
							Janus.error(e);
						}
					}
				} else if(videoSend && !videoRecv) {
					if(videoTransceiver) {
						try {
							if (videoTransceiver.setDirection) {
								videoTransceiver.setDirection("sendonly");
							} else {
								videoTransceiver.direction = "sendonly";
							}
							Janus.log("Setting video transceiver to sendonly:", videoTransceiver);
						} catch(e) {
							Janus.error(e);
						}
					}
				} else if(!videoSend && videoRecv) {
					if(videoTransceiver) {
						try {
							if (videoTransceiver.setDirection) {
								videoTransceiver.setDirection("recvonly");
							} else {
								videoTransceiver.direction = "recvonly";
							}
							Janus.log("Setting video transceiver to recvonly:", videoTransceiver);
						} catch(e) {
							Janus.error(e);
						}
					} else {
						// In theory, this is the only case where we might not have a transceiver yet
						videoTransceiver = config.pc.addTransceiver("video", { direction: "recvonly" });
						Janus.log("Adding recvonly video transceiver:", videoTransceiver);
					}
				}
			}
		} else {
			if(Janus.webRTCAdapter.browserDetails.browser === "firefox" || Janus.webRTCAdapter.browserDetails.browser === "edge") {
				mediaConstraints = {
					offerToReceiveAudio: isAudioRecvEnabled(media),
					offerToReceiveVideo: isVideoRecvEnabled(media)
				};
			} else {
				mediaConstraints = {
					mandatory: {
						OfferToReceiveAudio: isAudioRecvEnabled(media),
						OfferToReceiveVideo: isVideoRecvEnabled(media)
					}
				};
			}
		}
		Janus.debug(mediaConstraints);
		// Check if this is Firefox and we've been asked to do simulcasting
		var sendVideo = isVideoSendEnabled(media);
		if(sendVideo && simulcast && Janus.webRTCAdapter.browserDetails.browser === "firefox") {
			// FIXME Based on https://gist.github.com/voluntas/088bc3cc62094730647b
			Janus.log("Enabling Simulcasting for Firefox (RID)");
			var sender = config.pc.getSenders()[1];
			Janus.log(sender);
			var parameters = sender.getParameters();
			Janus.log(parameters);

			const maxBitrates = getMaxBitrates(callbacks.simulcastMaxBitrates);
			sender.setParameters({encodings: [
				{ rid: "high", active: true, priority: "high", maxBitrate: maxBitrates.high },
				{ rid: "medium", active: true, priority: "medium", maxBitrate: maxBitrates.medium },
				{ rid: "low", active: true, priority: "low", maxBitrate: maxBitrates.low }
			]});
		}
		config.pc.createAnswer(mediaConstraints)
			.then(function(answer) {
				Janus.debug(answer);
				// JSON.stringify doesn't work on some WebRTC objects anymore
				// See https://code.google.com/p/chromium/issues/detail?id=467366
				var jsep = {
					"type": answer.type,
					"sdp": answer.sdp
				};
				callbacks.customizeSdp(jsep);
				answer.sdp = jsep.sdp;
				Janus.log("Setting local description");
				if(sendVideo && simulcast) {
					// This SDP munging only works with Chrome
					if(Janus.webRTCAdapter.browserDetails.browser === "chrome") {
						// FIXME Apparently trying to simulcast when answering breaks video in Chrome...
						//~ Janus.log("Enabling Simulcasting for Chrome (SDP munging)");
						//~ answer.sdp = mungeSdpForSimulcasting(answer.sdp);
						Janus.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it");
					} else if(Janus.webRTCAdapter.browserDetails.browser !== "firefox") {
						Janus.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring");
					}
				}
				if(sendVideo) {
                    //answer.sdp = setMediaBitrate(answer.sdp, 'audio', 128);
                    answer.sdp = addStereo(answer.sdp);
                }

				config.mySdp = answer.sdp;
				config.pc.setLocalDescription(answer)
					.catch(callbacks.error);
				config.mediaConstraints = mediaConstraints;
				if(!config.iceDone && !config.trickle) {
					// Don't do anything until we have all candidates
					Janus.log("Waiting for all candidates...");
					return;
				}
				callbacks.success(answer);
			}, callbacks.error);
	}

	function sendSDP(handleId, callbacks) {
		callbacks = callbacks || {};
		callbacks.success = (typeof callbacks.success == "function") ? callbacks.success : Janus.noop;
		callbacks.error = (typeof callbacks.error == "function") ? callbacks.error : Janus.noop;
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle, not sending anything");
			return;
		}
		var config = pluginHandle.webrtcStuff;
		Janus.log("Sending offer/answer SDP...");
		if(!config.mySdp) {
			Janus.warn("Local SDP instance is invalid, not sending anything...");
			return;
		}
		config.mySdp = {
			"type": config.pc.localDescription.type,
			"sdp": config.pc.localDescription.sdp
		};
		if(config.trickle === false)
			config.mySdp["trickle"] = false;
		Janus.debug(callbacks);
		config.sdpSent = true;
		callbacks.success(config.mySdp);
	}

	function getVolume(handleId, remote) {
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			return 0;
		}
		var stream = remote ? "remote" : "local";
		var config = pluginHandle.webrtcStuff;
		if(!config.volume[stream])
			config.volume[stream] = { value: 0 };
		// Start getting the volume, if getStats is supported
		if(config.pc.getStats && Janus.webRTCAdapter.browserDetails.browser === "chrome") {
			if(remote && !config.remoteStream) {
				Janus.warn("Remote stream unavailable");
				return 0;
			} else if(!remote && !config.myStream) {
				Janus.warn("Local stream unavailable");
				return 0;
			}
			if(!config.volume[stream].timer) {
				Janus.log("Starting " + stream + " volume monitor");
				config.volume[stream].timer = setInterval(function() {
					config.pc.getStats()
						.then(function(stats) {
							var results = stats.result();
							for(var i=0; i<results.length; i++) {
								var res = results[i];
								if(res.type == 'ssrc') {
									if(remote && res.stat('audioOutputLevel'))
										config.volume[stream].value = parseInt(res.stat('audioOutputLevel'));
									else if(!remote && res.stat('audioInputLevel'))
										config.volume[stream].value = parseInt(res.stat('audioInputLevel'));
								}
							}
						});
				}, 200);
				return 0;	// We don't have a volume to return yet
			}
			return config.volume[stream].value;
		} else {
			// audioInputLevel and audioOutputLevel seem only available in Chrome? audioLevel
			// seems to be available on Chrome and Firefox, but they don't seem to work
			Janus.warn("Getting the " + stream + " volume unsupported by browser");
			return 0;
		}
	}

	function isMuted(handleId, video) {
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			return true;
		}
		var config = pluginHandle.webrtcStuff;
		if(!config.pc) {
			Janus.warn("Invalid PeerConnection");
			return true;
		}
		if(!config.myStream) {
			Janus.warn("Invalid local MediaStream");
			return true;
		}
		if(video) {
			// Check video track
			if(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {
				Janus.warn("No video track");
				return true;
			}
			return !config.myStream.getVideoTracks()[0].enabled;
		} else {
			// Check audio track
			if(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {
				Janus.warn("No audio track");
				return true;
			}
			return !config.myStream.getAudioTracks()[0].enabled;
		}
	}

	function mute(handleId, video, mute) {
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			return false;
		}
		var config = pluginHandle.webrtcStuff;
		if(!config.pc) {
			Janus.warn("Invalid PeerConnection");
			return false;
		}
		if(!config.myStream) {
			Janus.warn("Invalid local MediaStream");
			return false;
		}
		if(video) {
			// Mute/unmute video track
			if(!config.myStream.getVideoTracks() || config.myStream.getVideoTracks().length === 0) {
				Janus.warn("No video track");
				return false;
			}
			config.myStream.getVideoTracks()[0].enabled = mute ? false : true;
			return true;
		} else {
			// Mute/unmute audio track
			if(!config.myStream.getAudioTracks() || config.myStream.getAudioTracks().length === 0) {
				Janus.warn("No audio track");
				return false;
			}
			config.myStream.getAudioTracks()[0].enabled = mute ? false : true;
			return true;
		}
	}

	function getBitrate(handleId) {
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle || !pluginHandle.webrtcStuff) {
			Janus.warn("Invalid handle");
			return "Invalid handle";
		}
		var config = pluginHandle.webrtcStuff;
		if(!config.pc)
			return "Invalid PeerConnection";
		// Start getting the bitrate, if getStats is supported
		if(config.pc.getStats) {
			if(!config.bitrate.timer) {
				Janus.log("Starting bitrate timer (via getStats)");
				config.bitrate.timer = setInterval(function() {
					config.pc.getStats()
						.then(function(stats) {
							stats.forEach(function (res) {
								if(!res)
									return;
								var inStats = false;
								// Check if these are statistics on incoming media
								if((res.mediaType === "video" || res.id.toLowerCase().indexOf("video") > -1) &&
										res.type === "inbound-rtp" && res.id.indexOf("rtcp") < 0) {
									// New stats
									inStats = true;
								} else if(res.type == 'ssrc' && res.bytesReceived &&
										(res.googCodecName === "VP8" || res.googCodecName === "")) {
									// Older Chromer versions
									inStats = true;
								}
								// Parse stats now
								if(inStats) {
									config.bitrate.bsnow = res.bytesReceived;
									config.bitrate.tsnow = res.timestamp;
									if(config.bitrate.bsbefore === null || config.bitrate.tsbefore === null) {
										// Skip this round
										config.bitrate.bsbefore = config.bitrate.bsnow;
										config.bitrate.tsbefore = config.bitrate.tsnow;
									} else {
										// Calculate bitrate
										var timePassed = config.bitrate.tsnow - config.bitrate.tsbefore;
										if(Janus.webRTCAdapter.browserDetails.browser === "safari")
											timePassed = timePassed/1000;	// Apparently the timestamp is in microseconds, in Safari
										var bitRate = Math.round((config.bitrate.bsnow - config.bitrate.bsbefore) * 8 / timePassed);
										if(Janus.webRTCAdapter.browserDetails.browser === "safari")
											bitRate = parseInt(bitRate/1000);
										config.bitrate.value = bitRate + ' kbits/sec';
										//~ Janus.log("Estimated bitrate is " + config.bitrate.value);
										config.bitrate.bsbefore = config.bitrate.bsnow;
										config.bitrate.tsbefore = config.bitrate.tsnow;
									}
								}
							});
						});
				}, 1000);
				return "0 kbits/sec";	// We don't have a bitrate value yet
			}
			return config.bitrate.value;
		} else {
			Janus.warn("Getting the video bitrate unsupported by browser");
			return "Feature unsupported by browser";
		}
	}

	function webrtcError(error) {
		Janus.error("WebRTC error:", error);
	}

	function cleanupWebrtc(handleId, hangupRequest) {
		Janus.log("Cleaning WebRTC stuff");
		var pluginHandle = pluginHandles[handleId];
		if(!pluginHandle) {
			// Nothing to clean
			return;
		}
		var config = pluginHandle.webrtcStuff;
		if(config) {
			if(hangupRequest === true) {
				// Send a hangup request (we don't really care about the response)
				var request = { "janus": "hangup", "transaction": Janus.randomString(12) };
				if(pluginHandle.token)
					request["token"] = pluginHandle.token;
				if(apisecret)
					request["apisecret"] = apisecret;
				Janus.debug("Sending hangup request (handle=" + handleId + "):");
				Janus.debug(request);
				if(websockets) {
					request["session_id"] = sessionId;
					request["handle_id"] = handleId;
					ws.send(JSON.stringify(request));
				} else {
					Janus.httpAPICall(server + "/" + sessionId + "/" + handleId, {
						verb: 'POST',
						withCredentials: withCredentials,
						body: request
					});
				}
			}
			// Cleanup stack
			config.remoteStream = null;
			if(config.volume) {
				if(config.volume["local"] && config.volume["local"].timer)
					clearInterval(config.volume["local"].timer);
				if(config.volume["remote"] && config.volume["remote"].timer)
					clearInterval(config.volume["remote"].timer);
			}
			config.volume = {};
			if(config.bitrate.timer)
				clearInterval(config.bitrate.timer);
			config.bitrate.timer = null;
			config.bitrate.bsnow = null;
			config.bitrate.bsbefore = null;
			config.bitrate.tsnow = null;
			config.bitrate.tsbefore = null;
			config.bitrate.value = null;
			try {
				// Try a MediaStreamTrack.stop() for each track
				if(!config.streamExternal && config.myStream) {
					Janus.log("Stopping local stream tracks");
					var tracks = config.myStream.getTracks();
					for(var mst of tracks) {
						Janus.log(mst);
						if(mst)
							mst.stop();
					}
				}
			} catch(e) {
				// Do nothing if this fails
			}
			config.streamExternal = false;
			config.myStream = null;
			// Close PeerConnection
			try {
				config.pc.close();
			} catch(e) {
				// Do nothing
			}
			config.pc = null;
			config.candidates = null;
			config.mySdp = null;
			config.remoteSdp = null;
			config.iceDone = false;
			config.dataChannel = {};
			config.dtmfSender = null;
		}
		pluginHandle.oncleanup();
	}

	// Helper method to munge an SDP to enable simulcasting (Chrome only)
	function mungeSdpForSimulcasting(sdp) {
		// Let's munge the SDP to add the attributes for enabling simulcasting
		// (based on https://gist.github.com/ggarber/a19b4c33510028b9c657)
		var lines = sdp.split("\r\n");
		var video = false;
		var ssrc = [ -1 ], ssrc_fid = [ -1 ];
		var cname = null, msid = null, mslabel = null, label = null;
		var insertAt = -1;
		for(var i=0; i<lines.length; i++) {
			var mline = lines[i].match(/m=(\w+) */);
			if(mline) {
				var medium = mline[1];
				if(medium === "video") {
					// New video m-line: make sure it's the first one
					if(ssrc[0] < 0) {
						video = true;
					} else {
						// We're done, let's add the new attributes here
						insertAt = i;
						break;
					}
				} else {
					// New non-video m-line: do we have what we were looking for?
					if(ssrc[0] > -1) {
						// We're done, let's add the new attributes here
						insertAt = i;
						break;
					}
				}
				continue;
			}
			if(!video)
				continue;
			var fid = lines[i].match(/a=ssrc-group:FID (\d+) (\d+)/);
			if(fid) {
				ssrc[0] = fid[1];
				ssrc_fid[0] = fid[2];
				lines.splice(i, 1); i--;
				continue;
			}
			if(ssrc[0]) {
				var match = lines[i].match('a=ssrc:' + ssrc[0] + ' cname:(.+)')
				if(match) {
					cname = match[1];
				}
				match = lines[i].match('a=ssrc:' + ssrc[0] + ' msid:(.+)')
				if(match) {
					msid = match[1];
				}
				match = lines[i].match('a=ssrc:' + ssrc[0] + ' mslabel:(.+)')
				if(match) {
					mslabel = match[1];
				}
				match = lines[i].match('a=ssrc:' + ssrc[0] + ' label:(.+)')
				if(match) {
					label = match[1];
				}
				if(lines[i].indexOf('a=ssrc:' + ssrc_fid[0]) === 0) {
					lines.splice(i, 1); i--;
					continue;
				}
				if(lines[i].indexOf('a=ssrc:' + ssrc[0]) === 0) {
					lines.splice(i, 1); i--;
					continue;
				}
			}
			if(lines[i].length == 0) {
				lines.splice(i, 1); i--;
				continue;
			}
		}
		if(ssrc[0] < 0) {
			// Couldn't find a FID attribute, let's just take the first video SSRC we find
			insertAt = -1;
			video = false;
			for(var i=0; i<lines.length; i++) {
				var mline = lines[i].match(/m=(\w+) */);
				if(mline) {
					var medium = mline[1];
					if(medium === "video") {
						// New video m-line: make sure it's the first one
						if(ssrc[0] < 0) {
							video = true;
						} else {
							// We're done, let's add the new attributes here
							insertAt = i;
							break;
						}
					} else {
						// New non-video m-line: do we have what we were looking for?
						if(ssrc[0] > -1) {
							// We're done, let's add the new attributes here
							insertAt = i;
							break;
						}
					}
					continue;
				}
				if(!video)
					continue;
				if(ssrc[0] < 0) {
					var value = lines[i].match(/a=ssrc:(\d+)/);
					if(value) {
						ssrc[0] = value[1];
						lines.splice(i, 1); i--;
						continue;
					}
				} else {
					var match = lines[i].match('a=ssrc:' + ssrc[0] + ' cname:(.+)')
					if(match) {
						cname = match[1];
					}
					match = lines[i].match('a=ssrc:' + ssrc[0] + ' msid:(.+)')
					if(match) {
						msid = match[1];
					}
					match = lines[i].match('a=ssrc:' + ssrc[0] + ' mslabel:(.+)')
					if(match) {
						mslabel = match[1];
					}
					match = lines[i].match('a=ssrc:' + ssrc[0] + ' label:(.+)')
					if(match) {
						label = match[1];
					}
					if(lines[i].indexOf('a=ssrc:' + ssrc_fid[0]) === 0) {
						lines.splice(i, 1); i--;
						continue;
					}
					if(lines[i].indexOf('a=ssrc:' + ssrc[0]) === 0) {
						lines.splice(i, 1); i--;
						continue;
					}
				}
				if(lines[i].length == 0) {
					lines.splice(i, 1); i--;
					continue;
				}
			}
		}
		if(ssrc[0] < 0) {
			// Still nothing, let's just return the SDP we were asked to munge
			Janus.warn("Couldn't find the video SSRC, simulcasting NOT enabled");
			return sdp;
		}
		if(insertAt < 0) {
			// Append at the end
			insertAt = lines.length;
		}
		// Generate a couple of SSRCs (for retransmissions too)
		// Note: should we check if there are conflicts, here?
		ssrc[1] = Math.floor(Math.random()*0xFFFFFFFF);
		ssrc[2] = Math.floor(Math.random()*0xFFFFFFFF);
		ssrc_fid[1] = Math.floor(Math.random()*0xFFFFFFFF);
		ssrc_fid[2] = Math.floor(Math.random()*0xFFFFFFFF);
		// Add attributes to the SDP
		for(var i=0; i<ssrc.length; i++) {
			if(cname) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' cname:' + cname);
				insertAt++;
			}
			if(msid) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' msid:' + msid);
				insertAt++;
			}
			if(mslabel) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' mslabel:' + mslabel);
				insertAt++;
			}
			if(label) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc[i] + ' label:' + label);
				insertAt++;
			}
			// Add the same info for the retransmission SSRC
			if(cname) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' cname:' + cname);
				insertAt++;
			}
			if(msid) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' msid:' + msid);
				insertAt++;
			}
			if(mslabel) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' mslabel:' + mslabel);
				insertAt++;
			}
			if(label) {
				lines.splice(insertAt, 0, 'a=ssrc:' + ssrc_fid[i] + ' label:' + label);
				insertAt++;
			}
		}
		lines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[2] + ' ' + ssrc_fid[2]);
		lines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[1] + ' ' + ssrc_fid[1]);
		lines.splice(insertAt, 0, 'a=ssrc-group:FID ' + ssrc[0] + ' ' + ssrc_fid[0]);
		lines.splice(insertAt, 0, 'a=ssrc-group:SIM ' + ssrc[0] + ' ' + ssrc[1] + ' ' + ssrc[2]);
		sdp = lines.join("\r\n");
		if(!sdp.endsWith("\r\n"))
			sdp += "\r\n";
		return sdp;
	}

	// Helper methods to parse a media object
	function isAudioSendEnabled(media) {
		Janus.debug("isAudioSendEnabled:", media);
		if(!media)
			return true;	// Default
		if(media.audio === false)
			return false;	// Generic audio has precedence
		if(media.audioSend === undefined || media.audioSend === null)
			return true;	// Default
		return (media.audioSend === true);
	}

	function isAudioSendRequired(media) {
		Janus.debug("isAudioSendRequired:", media);
		if(!media)
			return false;	// Default
		if(media.audio === false || media.audioSend === false)
			return false;	// If we're not asking to capture audio, it's not required
		if(media.failIfNoAudio === undefined || media.failIfNoAudio === null)
			return false;	// Default
		return (media.failIfNoAudio === true);
	}

	function isAudioRecvEnabled(media) {
		Janus.debug("isAudioRecvEnabled:", media);
		if(!media)
			return true;	// Default
		if(media.audio === false)
			return false;	// Generic audio has precedence
		if(media.audioRecv === undefined || media.audioRecv === null)
			return true;	// Default
		return (media.audioRecv === true);
	}

	function isVideoSendEnabled(media) {
		Janus.debug("isVideoSendEnabled:", media);
		if(!media)
			return true;	// Default
		if(media.video === false)
			return false;	// Generic video has precedence
		if(media.videoSend === undefined || media.videoSend === null)
			return true;	// Default
		return (media.videoSend === true);
	}

	function isVideoSendRequired(media) {
		Janus.debug("isVideoSendRequired:", media);
		if(!media)
			return false;	// Default
		if(media.video === false || media.videoSend === false)
			return false;	// If we're not asking to capture video, it's not required
		if(media.failIfNoVideo === undefined || media.failIfNoVideo === null)
			return false;	// Default
		return (media.failIfNoVideo === true);
	}

	function isVideoRecvEnabled(media) {
		Janus.debug("isVideoRecvEnabled:", media);
		if(!media)
			return true;	// Default
		if(media.video === false)
			return false;	// Generic video has precedence
		if(media.videoRecv === undefined || media.videoRecv === null)
			return true;	// Default
		return (media.videoRecv === true);
	}

	function isScreenSendEnabled(media) {
		Janus.debug("isScreenSendEnabled:", media);
		if (!media)
			return false;
		if (typeof media.video !== 'object' || typeof media.video.mandatory !== 'object')
			return false;
		var constraints = media.video.mandatory;
		if (constraints.chromeMediaSource)
			return constraints.chromeMediaSource === 'desktop' || constraints.chromeMediaSource === 'screen';
		else if (constraints.mozMediaSource)
			return constraints.mozMediaSource === 'window' || constraints.mozMediaSource === 'screen';
		else if (constraints.mediaSource)
			return constraints.mediaSource === 'window' || constraints.mediaSource === 'screen';
		return false;
	}

	function isDataEnabled(media) {
		Janus.debug("isDataEnabled:", media);
		if(Janus.webRTCAdapter.browserDetails.browser === "edge") {
			Janus.warn("Edge doesn't support data channels yet");
			return false;
		}
		if(media === undefined || media === null)
			return false;	// Default
		return (media.data === true);
	}

	function isTrickleEnabled(trickle) {
		Janus.debug("isTrickleEnabled:", trickle);
		return (trickle === false) ? false : true;
	}
};



/***/ }),

/***/ "./src/wcs/libs/janusScreenShare.js":
/*!******************************************!*\
  !*** ./src/wcs/libs/janusScreenShare.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "JanusScreenShare": function() { return /* binding */ JanusScreenShare; }
/* harmony export */ });
/* harmony import */ var _janus_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./janus.js */ "./src/wcs/libs/janus.js");


var JanusScreenShare = function (dom, janusServer, room) {
    let server = null
    if (window.location.protocol === 'http:') {
	    server = "ws://" + (janusServer || window.location.hostname) + ":8188/janus";
	}
	else {
			server = "wss://" + (janusServer || window.location.hostname) + ":8989/janus";
	}
    var janus = null;
    var screentest = null;
    var opaqueId = "screensharing-" + _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.randomString(12);

    var myusername = null;
    var myid = null;

    var capture = null;
    var role = null;
    var room = room || 1234;
    var source = null;

    var spinner = null;


    // Just an helper to generate random usernames
    function randomString(len, charSet) {
        charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        var randomString = '';
        for (var i = 0; i < len; i++) {
            var randomPoz = Math.floor(Math.random() * charSet.length);
            randomString += charSet.substring(randomPoz, randomPoz + 1);
        }
        return randomString;
    }


    function init(aid, _options) {
        // Initialize the library (all console debuggers enabled)
        const { debug } = _options
        _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.init({
            debug: debug, callback: function () {
                // Use a button to start the demo
             
                    // Make sure the browser supports WebRTC
                    if (!_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.isWebrtcSupported()) {
                        alert("No WebRTC support... ");
                        return;
                    }
                    // Create session
                    janus = new _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus(
                        {
                            server: server,
                            success: function () {
                                // Attach to VideoRoom plugin
                                janus.attach(
                                    {
                                        plugin: "janus.plugin.videoroom",
                                        opaqueId: opaqueId,
                                        success: function (pluginHandle) {
                                           
                                            screentest = pluginHandle;
                                            debug && console.log("Plugin attached! (" + screentest.getPlugin() + ", id=" + screentest.getId() + ")");
                                        },
                                        error: function (error) {
                                            _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.error("  -- Error attaching plugin...", error);
                                            bootbox.alert("Error attaching plugin... " + error);
                                        },
                                        consentDialog: function (on) {
                                        },
                                        iceState: function (state) {
                                            _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("ICE state changed to " + state);
                                        },
                                        mediaState: function (medium, on) {
                                            _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("Janus " + (on ? "started" : "stopped") + " receiving our " + medium);
                                        },
                                        webrtcState: function (on) {
                                            _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("Janus says our WebRTC PeerConnection is " + (on ? "up" : "down") + " now");

                                        },
                                        onmessage: function (msg, jsep) {
                                            _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug(" ::: Got a message (publisher) :::", msg);
                                            var event = msg["videoroom"];
                                            _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Event: " + event);
                                            if (event) {
                                                if (event === "joined") {
                                                    myid = msg["id"];
                                                    _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("Successfully joined room " + msg["room"] + " with ID " + myid);
                                                    if(role === "publisher") {
                                                        // This is our session, publish our stream
                                                        _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Negotiating WebRTC stream for our screen (capture " + capture + ")");
                                                        screentest.createOffer(
                                                            {
                                                                media: { video: "screen", audioSend: false, videoRecv: false,audioRecv:false,recvonly:false},	// Screen sharing Publishers are sendonly
                                                                success: function(jsep) {
                                                                    _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Got publisher SDP!");
                                                                    _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug(jsep);
                                                                    var publish = { "request": "configure", "audio": false, "video": true,"bitrate":_options.bitrate };
                                                                    screentest.send({"message": publish, "jsep": jsep});
                                                                },
                                                                error: function(error) {
                                                                    _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.error("WebRTC error:", error);
                                                                    bootbox.alert("WebRTC error... " + JSON.stringify(error));
                                                                }
                                                            });
                                                    }
                                            else {
                                                        // We're just watching a session, any feed to attach to?

                                                    }
                                                } else if (event === "event") {
                                                    // Any feed to attach to?
                                                    if (role === "listener" && msg["publishers"]) {

                                                    } else if (msg["leaving"]) {
                                                        // One of the publishers has gone away?
                                                        var leaving = msg["leaving"];

                                                    } else if (msg["error"]) {
                                                        console.warn(msg["error"]);
                                                    }
                                                }
                                            }
                                            if(jsep) {
                                                _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Handling SDP as well...", jsep);
                                                screentest.handleRemoteJsep({ jsep: jsep });
                                            }

                                        },
                                        onlocalstream: function (stream) {

                                        },
                                        onremotestream: function (stream) {
                                            // The publisher stream is sendonly, we don't expect anything here
                                        },
                                        oncleanup: function () {
                                            debug && console.log(" ::: Got a cleanup notification :::");
                                        }
                                    });
                            },
                            error: function (error) {
                                console.error(error);

                            },
                            destroyed: function () {}
                        });
                        setTimeout(()=>{shareScreen(aid);},1000);
                
            }
        });
    }





    function shareScreen(aid) {
        // Create a new room
        let desc = "screen sharing";
        role = "publisher";
        let register = { "request": "join", "room": room, "ptype": "publisher", "display":aid };
        let username = "flex-control";
        let myusername = "flex-control";
        screentest.send({"message": register});
    }
    function stop(){
       screentest.hangup();
       janus.destroy()
    }
    

    return {
        init: init,
        stop: stop,
        start: shareScreen
    }


}


/***/ }),

/***/ "./src/wcs/libs/janusclient.js":
/*!*************************************!*\
  !*** ./src/wcs/libs/janusclient.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "JanusClient": function() { return /* binding */ JanusClient; }
/* harmony export */ });
/* harmony import */ var _janus_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./janus.js */ "./src/wcs/libs/janus.js");


var JanusClient = function (dom, janusServer, room, buffer) {
	var list = "";
	var server = null;
	if (window.location.protocol === 'http:') {
		server = "ws://" + (janusServer || window.location.hostname) + ":8188/janus";
	}
	else {
			server = "wss://" + (janusServer || window.location.hostname) + ":8989/janus";
	}
	var janus = null;
	var sfutest = null;
	var opaqueId = "orkestra-" + _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.randomString(12);

	var myroom = room || 1234;	// Demo room
	var myusername = null;
	var myid = null;
	var mystream = null;
	// We use this other ID just to map our subscriptions to us
	var mypvtid = null;
	var handler;
	var _buffer = buffer;
	var feeds = [];
	var bitrateTimer = [];
	var nopublisher = false;
	var doSimulcast = (getQueryStringValue("simulcast") === "yes" || getQueryStringValue("simulcast") === "true");
	var doSimulcast2 = (getQueryStringValue("simulcast2") === "yes" || getQueryStringValue("simulcast2") === "true");
	// Initialize the library (all console debuggers enabled)
	var attachingIDs ="";
	function init() {
		if (_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.running) return;
		_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.init({
			debug: false, callback: function () {
				_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.running = true;
				// Make sure the browser supports WebRTC
				if (!_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.isWebrtcSupported()) {
					bootbox.alert("No WebRTC support... ");
					return;
				}
				// Create session

				janus = new _janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus(
					{
						server: server,
						success: function () {
							// Attach to video room test plugin
							janus.attach(
								{
									plugin: "janus.plugin.videoroom",
									opaqueId: opaqueId,
									success: function (pluginHandle) {
										sfutest = pluginHandle;
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("Plugin attached! (" + sfutest.getPlugin() + ", id=" + sfutest.getId() + ")");
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("  -- This is a publisher/manager");
										// Prepare the username registration
									},
									error: function (error) {
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.error("  -- Error attaching plugin...", error);
										bootbox.alert("Error attaching plugin... " + error);
									},
									consentDialog: function (on) {
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Consent dialog should be " + (on ? "on" : "off") + " now");
										if (on) {
											// Darken screen and show hint
											$.blockUI({
												message: '<div><img src="up_arrow.png"/></div>',
												css: {
													border: 'none',
													padding: '15px',
													backgroundColor: 'transparent',
													color: '#aaa',
													top: '10px',
													left: (navigator.mozGetUserMedia ? '-100px' : '300px')
												}
											});
										} else {
											// Restore screen
											$.unblockUI();
										}
									},
									mediaState: function (medium, on) {
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("Janus " + (on ? "started" : "stopped") + " receiving our " + medium);
									},
									webrtcState: function (on) {
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("Janus says our WebRTC PeerConnection is " + (on ? "up" : "down") + " now");
										/*	$("#videolocal").parent().parent().unblock();
											if(!on)
											return;
											$('#publish').remove();
											// This controls allows us to override the global room bitrate cap
											$('#bitrate').parent().parent().removeClass('hide').show();
											$('#bitrate a').click(function() {
												var id = $(this).attr("id");
												var bitrate = parseInt(id)*1000;
												if(bitrate === 0) {
													Janus.log("Not limiting bandwidth via REMB");
												} else {
													Janus.log("Capping bandwidth to " + bitrate + " via REMB");
												}
												$('#bitrateset').html($(this).html() + '<span class="caret"></span>').parent().removeClass('open');
												sfutest.send({"message": { "request": "configure", "bitrate": bitrate }});
												return false;
											});*/
									},
									onmessage: function (msg, jsep) {
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug(" ::: Got a message (publisher) :::");

										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug(msg);
										var event = msg["videoroom"];
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Event: " + event);

										if (event != undefined && event != null) {
											if (event === "joined") {
												// Publisher/manager created, negotiate WebRTC and attach to existing feeds, if any
												//
												//
												var janusReady = new CustomEvent("JanusReady", {
													detail: {
														ready: true
													}
												});
												document.dispatchEvent(janusReady);

												myid = msg["id"];
												mypvtid = msg["private_id"];
												_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("Successfully joined room " + msg["room"] + " with ID " + myid);
												// Any new feed to attach to?
												if (msg["publishers"] !== undefined && msg["publishers"] !== null) {
													janus.list = msg["publishers"];
													_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Got a list of available publishers/feeds:");
													_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug(janus.list);
													FlexJanus.feeds = janus.list;
													for (var f = 0; f < janus.list.length; f++) {
														var id = janus.list[f]["id"];
														var display = janus.list[f]["display"];
														var audio = janus.list[f]["audio_codec"];
														var video = janus.list[f]["video_codec"];
														_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("  >> [" + id + "] " + display + " (audio: " + audio + ", video: " + video + ")");
														//newRemoteFeed(id, display, audio, video);
														var newStream = new CustomEvent("newStream", {
															detail: {
																id: janus.list[f]["display"]
															}
														});
														document.dispatchEvent(newStream)
													}
												}
											} else if (event === "destroyed") {
												// The room has been destroyed
												_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.warn("The room has been destroyed!");
											} else if (event === "event") {
												// Any new feed to attach to?
												if (msg["publishers"] !== undefined && msg["publishers"] !== null) {
													var list = msg["publishers"];
													_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Got a list of available publishers/feeds:");
													_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug(janus.list);
													for (var f = 0; f < list.length; f++) {
														janus.list.push(list[f]);
														if (typeof FlexJanus.feeds=="undefined") FlexJanus.feeds = janus.list;
														else {
															let id = list[f].id;
															let elem = FlexJanus.feeds.find((x)=>{ if (x.display == list[f].display) return true})
															if (typeof elem == "undefined"){
																FlexJanus.feeds.push(list[f]);
															}
															elem = list[f];
														}
														var newStream = new CustomEvent("newStream", {
															detail: {
																id: list[f]["display"]
															}
														});
														document.dispatchEvent(newStream)
														var r = msg["publishers"]
														//newRemoteFeed(r[0].id, r[0].display, r[0].audio, r[0].video);
													}
													
												} else if (msg["leaving"] !== undefined && msg["leaving"] !== null) {
													// One of the publishers has gone away?
													var leaving = msg["leaving"];
													_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("Publisher left: " + leaving);
													var remoteFeed = null;
													for (var i = 0; i < 26; i++) {
														if (feeds[i] != null && feeds[i] != undefined && feeds[i].rfid == leaving) {
															remoteFeed = feeds[i];
															break;
														}

													}
													FlexJanus.feeds = FlexJanus.feeds.filter((el) => { return el.id !== leaving });
													var deleteStream = new CustomEvent("updateStream", { detail: { id: unpublished } });
													document.dispatchEvent(deleteStream);

													if (remoteFeed != null) {
														_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Feed " + remoteFeed.rfid + " (" + remoteFeed.rfdisplay + ") has left the room, detaching");
														//	dom.querySelector('#remote'+remoteFeed.rfindex).empty().hide();
														//	dom.querySelector('#videoremote'+remoteFeed.rfindex).empty();
														feeds[remoteFeed.rfindex] = null;
														remoteFeed.detach();
													}
												} else if (msg["unpublished"] !== undefined && msg["unpublished"] !== null) {
													// One of the publishers has unpublished?
													var unpublished = msg["unpublished"];
													_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("Publisher left: " + unpublished);
													if (unpublished === 'ok') {
														// That's us
														sfutest.hangup();
														return;
													}
													var remoteFeed = null;
													for (var i = 0; i < 26; i++) {
														if (feeds[i] != null && feeds[i] != undefined && feeds[i].id == unpublished) {
															remoteFeed = feeds[i];
															break;
														}
													}

													FlexJanus.feeds = FlexJanus.feeds.filter((el) => { return el.id !== unpublished })

													var deleteStream = new CustomEvent("updateStream", { detail: { id: unpublished } });
													document.dispatchEvent(deleteStream);

													if (remoteFeed != null) {
														_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Feed " + remoteFeed.rfid + " (" + remoteFeed.rfdisplay + ") has left the room, detaching");
														//	dom.querySelector('#remote'+remoteFeed.rfindex).empty().hide();
														//	dom.querySelector('#videoremote'+remoteFeed.rfindex).empty();
														feeds[remoteFeed.rfindex] = null;
														remoteFeed.detach();
													}
												} else if (msg["error"] !== undefined && msg["error"] !== null) {
													if (msg["error_code"] === 426) {
														// This is a "no such room" error: give a more meaningful description
														console.warn(
															"<p>Apparently room <code>" + myroom + "</code> (the one this demo uses as a test room) " +
															"does not exist...</p><p>Do you have an updated <code>janus.plugin.videoroom.cfg</code> " +
															"configuration file? If not, make sure you copy the details of room <code>" + myroom + "</code> " +
															"from that sample in your current configuration file, then restart Janus and try again."
														);
													} else {
														console.warn(msg["error"]);
													}
												}
											}
										}
										if (jsep !== undefined && jsep !== null) {
											_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Handling SDP as well...");
											_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug(jsep);
											sfutest.handleRemoteJsep({ jsep: jsep });
											// Check if any of the media we wanted to publish has
											// been rejected (e.g., wrong or unsupported codec)
											var audio = msg["audio_codec"];
											if (mystream && mystream.getAudioTracks() && mystream.getAudioTracks().length > 0 && !audio) {
												// Audio has been rejected
												toastr.warning("Our audio stream has been rejected, viewers won't hear us");
											}
											var video = msg["video_codec"];
											if (mystream && mystream.getVideoTracks() && mystream.getVideoTracks().length > 0 && !video) {
												// Video has been rejected
												toastr.warning("Our video stream has been rejected, viewers won't see us");
												// Hide the webcam video
												$('#myvideo').hide();
												$('#videolocal').append(
													'<div class="no-video-container">' +
													'<i class="fa fa-video-camera fa-5 no-video-icon" style="height: 100%;"></i>' +
													'<span class="no-video-text" style="font-size: 16px;">Video rejected, no webcam</span>' +
													'</div>');
											}
										}
									},
									onlocalstream: function (stream) {
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug(" ::: Got a local stream :::");


									},
									onremotestream: function (stream) {
										// The publisher stream is sendonly, we don't expect anything here

									},
									oncleanup: function () {
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log(" ::: Got a cleanup notification: we are unpublished now :::");
										mystream = null;
									}
								});
						},
						error: function (error) {
							_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.error(error);
							console.error("Janus critical error",error);
						},
						destroyed: function () {
							console.warn("janus destroyed !!");
						}
					});
				janus.list = [];
				janus.activeHandles = [];
				setTimeout(() => { if (nopublisher === false) registerUsername() }, 4000);

			}
		});
	}
	function start(id, dom) {
		var handler = FlexJanus.feeds.find((f) => { if (f.display === id) return true; });
		if (!handler) {
			console.warn("There is not that feed", id);
		}

		else changeCamera(id, dom);
	}
	function stopCamera(id) {
		var elem = dom.querySelector('video');
		elem.src = "";
		elem.srcObject = null;

	}
	function registerUsername() {
		var register = { "request": "join", "room": myroom, "ptype": "publisher", "display": "flex" };
		let username = "orkestra";
		myusername = "orkestra";
		let inter = setInterval(() => {
			if (sfutest) {
				sfutest.send({ "message": register });
				clearInterval(inter);
			}
		}, 500);
	}
	function registerUsernameAsSubscriber(feedId) {
		nopublisher = true;
		var register = { "request": "join", "room": myroom, "ptype": "subscriber", "display": "flex", "feed": feedId };
		let username = "orkestra";
		myusername = "orkestra";
		let inter = setInterval(() => {
			if (sfutest) {
				sfutest.send({ "message": register });
				clearInterval(inter);
			}
		}, 1500);
	}

	function toggleMute() {
		var muted = sfutest.isAudioMuted();
		_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log((muted ? "Unmuting" : "Muting") + " local stream...");
		if (muted)
			sfutest.unmuteAudio();
		else
			sfutest.muteAudio();
		muted = sfutest.isAudioMuted();

	}
	function changeCamera(id, dom) {
		var handler = FlexJanus.feeds.find((f) => { if (f.display === id) return true; });
		newRemoteFeed(handler.id,handler.display,handler.audio,handler.video).then((_handler)=>{
			var elem = dom.querySelector('video') || dom.shadowRoot.querySelector('video');
			if (_handler) {
				if (_handler.stream){
					_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.attachMediaStream(elem, _handler.stream);
					if (elem.showAudioInput && elem.showAudioInput === true){
						let vmc = elem.parentNode.querySelector('volume-meter');
						if (vmc) vmc.init(_handler.stream);
					}
				}
				else
					setTimeout(()=>{
						var handler = FlexJanus.feeds.find((f) => { if (f.display === id) return true; });
						_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.attachMediaStream(elem, handler.stream);
						if (elem.showAudioInput && elem.showAudioInput === true){
							let vmc = elem.parentNode.querySelector('volume-meter');
							if (vmc) vmc.init(handler.stream);
						}
					},2000)
			}
		});
		

	}
	function changeSubStream(id, subs) {
		var handler = FlexJanus.feeds.find((f) => { if (f.rfdisplay === id) return true; });
		if (handler) handler.send({ message: { request: "configure", substream: subs } });
	}
	function changeBuffer(buffer){
		_buffer = buffer;
	}

	function newRemoteFeed(id, display, audio, video) {
		// A new feed has been published, create a new plugin handle and attach to it as a subscriber
		return new Promise((res, rej) => {
			var handler = FlexJanus.feeds.find((f) => { if (f.id === id) return true; });
			
			if (handler.stream) {res(handler);return;}
			if (attachingIDs.indexOf(id)!=-1) {res(handler);return;}
			var remoteFeed = null;
			attachingIDs+="_"+id;
			janus.attach(
				{
					plugin: "janus.plugin.videoroom",
					opaqueId: opaqueId,
					success: function (pluginHandle) {
						janus.activeHandles.push({ id: id, handle: pluginHandle });
						handler = pluginHandle;
						remoteFeed = pluginHandle;
						remoteFeed.simulcastStarted = false;
						_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("Plugin attached! (" + remoteFeed.getPlugin() + ", id=" + remoteFeed.getId() + ")");
						_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("  -- This is a subscriber");
						// We wait for the plugin to send us an offer
						var subscribe = { "request": "join", "room": myroom, "ptype": "subscriber", "feed": id, "private_id": mypvtid, offer_data: false };
						// In case you don't want to receive audio, video or data, even if the
						// publisher is sending them, set the 'offer_audio', 'offer_video' or
						// 'offer_data' properties to false (they're true by default), e.g.:
						// 		subscribe["offer_video"] = false;
						// For example, if the publisher is VP8 and this is Safari, let's avoid video
						if (_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.webRTCAdapter.browserDetails.browser === "safari" &&
							(video === "vp9" || (video === "vp8" && !_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.safariVp8))) {
							if (video)
								video = video.toUpperCase()
							toastr.warning("Publisher is using " + video + ", but Safari doesn't support it: disabling video");
							subscribe["offer_video"] = false;
						}
						remoteFeed.videoCodec = video;
						remoteFeed.send({ "message": subscribe });
						let config = handler.webrtcStuff;	
						setInterval(()=>{
							if (config.pc){
								config.pc.getReceivers().forEach((t)=>{
									t.playoutDelayHint = t.jitterBufferDelayHint = _buffer || 0.15 ;
								})
							}

						},1000);
						
					},
					error: function (error) {
						_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.error("  -- Error attaching plugin...", error);
						rej(error);
					},
					onmessage: function (msg, jsep) {
						_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug(" ::: Got a message (subscriber) :::");
						_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug(msg);
						var event = msg["videoroom"];
						_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Event: " + event);
						if (msg["error"] !== undefined && msg["error"] !== null) {
							console.error(msg["error"]);
						} else if (event != undefined && event != null) {
							if (event === "attached") {
								// Subscriber created and attached
								for (var i = 0; i < 26; i++) {
									if (feeds[i] === undefined || feeds[i] === null) {
										feeds[i] = remoteFeed;
										remoteFeed.rfindex = i;
										break;
									}
								}
								remoteFeed.rfid = msg["id"];
								remoteFeed.rfdisplay = msg["display"];

								_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("Successfully attached to feed " + remoteFeed.rfid + " (" + remoteFeed.rfdisplay + ") in room " + msg["room"]);
								//	$('#remote'+remoteFeed.rfindex).removeClass('hide').html(remoteFeed.rfdisplay).show();
							} else if (event === "event") {
								// Check if we got an event on a simulcast-related event from this publisher
								var substream = msg["substream"];
								var temporal = msg["temporal"];
								if ((substream !== null && substream !== undefined) || (temporal !== null && temporal !== undefined)) {
									if (!remoteFeed.simulcastStarted) {
										remoteFeed.simulcastStarted = true;
										// Add some new buttons
										//	addSimulcastButtons(0, remoteFeed.videoCodec === "vp8" || remoteFeed.videoCodec === "h264");
									}
									// We just received notice that there's been a switch, update the buttons
									//updateSimulcastButtons(0, substream, temporal);
								}
							} else {
								// What has just happened?
							}
						}
						if (jsep !== undefined && jsep !== null) {
							_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Handling SDP as well...");
							_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug(jsep);
							// Answer and attach
							remoteFeed.createAnswer(
								{
									jsep: jsep,
									// Add data:true here if you want to subscribe to datachannels as well
									// (obviously only works if the publisher offered them in the first place)
									media: { audioSend: false, videoSend: false, audioRecv: false, recvonly: true },	// We want recvonly audio/video
									success: function (jsep) {
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Got SDP!");
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug(jsep);
										var body = { "request": "start", "room": myroom };
										remoteFeed.send({ "message": body, "jsep": jsep });
										/*let bitrateTimer = setInterval(function() {
											// Display updated bitrate, if supported
											var bitrate = handler.getBitrate();
											//console.log(bitrate);
											if (dom.querySelector && dom.querySelector('#bitrate')) dom.querySelector('#bitrate').innerText=bitrate;
											// Check if the resolution changed too
										
										}, 20000);*/
									},
									error: function (error) {
										_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.error("WebRTC error:", error);
										bootbox.alert("WebRTC error... " + JSON.stringify(error));
									}
								});
						}
					},
					webrtcState: function (on) {
						_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log("Janus says this WebRTC PeerConnection (feed #" + remoteFeed.rfindex + ") is " + (on ? "up" : "down") + " now");
					},
					onlocalstream: function (stream) {
						// The subscriber stream is recvonly, we don't expect anything here
					},
					onremotestream: function (stream) {
						attachingIDs = attachingIDs.replace(id,"")
						if (!remoteFeed) return;

						_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.debug("Remote feed #" + remoteFeed.rfindex);
						FlexJanus.feeds = FlexJanus.feeds.filter((x) => { return x != null })
						var exists = FlexJanus.feeds.find((x) => {
							if (remoteFeed && x && x.id == remoteFeed.rfid) return true;
						});
						if (exists)
							FlexJanus.feeds.forEach((r) => {
								if (r.id == remoteFeed.rfid) r.stream = stream;
							});
						else {

							remoteFeed.stream = stream;
							

						}
						let found = FlexJanus.feeds.find((f)=> {if (f.id ==remoteFeed.id) return true;})
						if (!found) FlexJanus.feeds.push(remoteFeed);
						res(remoteFeed)
					},
					oncleanup: function () {
						_janus_js__WEBPACK_IMPORTED_MODULE_0__.Janus.log(" ::: Got a cleanup notification (remote feed " + id + ") :::");
						let streamOff = new CustomEvent("deletedStream", {
							detail: {
								id: display
							}
						});
						document.dispatchEvent(streamOff);
						FlexJanus.feeds = FlexJanus.feeds.filter((r) => {
							if (r.rfid == id) return false;
							return true;
						});

						remoteFeed.rfindex = 0;

						if (bitrateTimer[remoteFeed.rfindex] !== null && bitrateTimer[remoteFeed.rfindex] !== null)
							clearInterval(bitrateTimer[remoteFeed.rfindex]);
						bitrateTimer[remoteFeed.rfindex] = null;
						remoteFeed.simulcastStarted = false;

					}
				});
		})
	}

	// Helper to parse query string
	function getQueryStringValue(name) {
		name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
		var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
			results = regex.exec(location.search);
		return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
	}

	return {
		changeCamera: changeCamera,
		init: init,
		stop: stopCamera,
		start: start,
		changeBuffer:changeBuffer,
		changeSubStream: changeSubStream,
		registerUsernameAsSubscriber: registerUsernameAsSubscriber,
		client: janus,
		feeds: feeds
	}
}



/***/ }),

/***/ "./src/wcs/libs/januspublish.js":
/*!**************************************!*\
  !*** ./src/wcs/libs/januspublish.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "JanusPublish": function() { return /* binding */ JanusPublish; }
/* harmony export */ });
/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ "./node_modules/underscore/modules/index-all.js");
/* harmony import */ var _janus_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./janus.js */ "./src/wcs/libs/janus.js");



var JanusPublish = function (dom,janusServer,room){
	var server = null;
	var list = "";
	var options = {audio:true,audio:true,simulcast:true,bitrate:0,echoC:true,noiseS:true,gainC:true};
	if (window.location.protocol === 'http:') {
		server = "ws://" + (janusServer || window.location.hostname) + ":8188/janus";
	}
	else {
			server = "wss://" + (janusServer || window.location.hostname) + ":8989/janus";
	}
	var audioDeviceId = null;
	var videoDeviceId = null;
	window.noiseS = true;
	window.gainC = true;
	window.echoC= true;
	var janus = null;
	var sfutest = null;
	var opaqueId = "orkestra-"+_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.randomString(12);

	var myroom = room || 1234;	// Demo room
	var myid = null;
	var mystream = null;
	var canvas;
	var video;
	var _stream;
	// We use this other ID just to map our subscriptions to us
	var mypvtid = null;
	var firstTime = true;
	var feeds = [];
	var bitrateTimer = [];
	var doSimulcast = (getQueryStringValue("simulcast") === "yes" || getQueryStringValue("simulcast") === "true");
	var doSimulcast2 = (getQueryStringValue("simulcast2") === "yes" || getQueryStringValue("simulcast2") === "true");

	// Initialize the library (all console debuggers enabled)
	function init (aid,_options){
		if (_options) options = _options;
		_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.init({debug: false, callback: function() {
			// Make sure the browser supports WebRTC
			if(!_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.isWebrtcSupported()) {
				bootbox.alert("No WebRTC support... ");
				return;
			}
			// Create session

			janus = new _janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus(
				{
					server: server,
					success: function() {
						// Attach to video room test plugin
						janus.attach(
							{
								plugin: "janus.plugin.videoroom",
								opaqueId: opaqueId,
								success: function(pluginHandle) {
									sfutest = pluginHandle;
									_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.log("Plugin attached! (" + sfutest.getPlugin() + ", id=" + sfutest.getId() + ")");
									_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.log("  -- This is a publisher/manager");
									// Prepare the username registration
									var janusReady =new CustomEvent("JanusPublishReady", {
										detail: {
											ready: true
										}
									});
									document.dispatchEvent(janusReady);
								},
								error: function(error) {
									_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.error("  -- Error attaching plugin...", error);
									bootbox.alert("Error attaching plugin... " + error);
								},
								consentDialog: function(on) {
					
								},
					     		mediaState: function(medium, on) {
										_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.log("Janus " + (on ? "started" : "stopped") + " receiving our " + medium);
								 },
								webrtcState: function(on) {
										_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.log("Janus says our WebRTC PeerConnection is " + (on ? "up" : "down") + " now");

								},
								onmessage: function(msg, jsep) {
										_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug(" ::: Got a message (publisher) :::");

										_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug(msg);
										var event = msg["videoroom"];
										_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug("Event: " + event);
										if(event != undefined && event != null) {
											if(event === "joined") {
												// Publisher/manager created, negotiate WebRTC and attach to existing feeds, if any
												myid = msg["id"];
												mypvtid = msg["private_id"];
												_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.log("Successfully joined room " + msg["room"] + " with ID " + myid);
												//publishOwnFeed(true);
												// Any new feed to attach to?
												if(msg["publishers"] !== undefined && msg["publishers"] !== null) {
													janus.list = msg["publishers"];
													_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug("Got a list of available publishers/feeds:");
													_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug(janus.list);
													for(var f in janus.list) {
														var id = janus.list[f]["id"];
														var display = janus.list[f]["display"];
														var audio = janus.list[f]["audio_codec"];
														var video = janus.list[f]["video_codec"];
														_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug("  >> [" + id + "] " + display + " (audio: " + audio + ", video: " + video + ")");
														//		newRemoteFeed(id, display, audio, video);
													}
												}
											} else if(event === "destroyed") {
												// The room has been destroyed
												_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.warn("The room has been destroyed!");
												bootbox.alert("The room has been destroyed", function() {
													window.location.reload();
												});
											} else if(event === "event") {
												// Any new feed to attach to?
												if(msg["publishers"] !== undefined && msg["publishers"] !== null) {
													janus.list = msg["publishers"];
													_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug("Got a list of available publishers/feeds:");
													_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug(janus.list);
													for(var f in janus.list) {
														var id = janus.list[f]["id"];
														var display = janus.list[f]["display"];
														var audio = janus.list[f]["audio_codec"];
														var video = janus.list[f]["video_codec"];
														_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug("  >> [" + id + "] " + display + " (audio: " + audio + ", video: " + video + ")");
														//		newRemoteFeed(id, display, audio, video);
													}
												} else if(msg["leaving"] !== undefined && msg["leaving"] !== null) {
													// One of the publishers has gone away?
													var leaving = msg["leaving"];
													_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.log("Publisher left: " + leaving);
													var remoteFeed = null;
													for(var i=1; i<6; i++) {
														if(feeds[i] != null && feeds[i] != undefined && feeds[i].rfid == leaving) {
															remoteFeed = feeds[i];
															break;
														}
													}
													if(remoteFeed != null) {
														_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug("Feed " + remoteFeed.rfid + " (" + remoteFeed.rfdisplay + ") has left the room, detaching");
														dom.querySelector('#remote'+remoteFeed.rfindex).empty().hide();
														dom.querySelector('#videoremote'+remoteFeed.rfindex).empty();
														feeds[remoteFeed.rfindex] = null;
														remoteFeed.detach();
													}
												} else if(msg["unpublished"] !== undefined && msg["unpublished"] !== null) {
													// One of the publishers has unpublished?
													var unpublished = msg["unpublished"];
													_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.log("Publisher left: " + unpublished);
													if(unpublished === 'ok') {
														// That's us
														sfutest.hangup();
														return;
													}
													/*
													var remoteFeed = null;
													for(var i=1; i<6; i++) {
														if(feeds[i] != null && feeds[i] != undefined && feeds[i].rfid == unpublished) {
															remoteFeed = feeds[i];
															break;
														}
													}*/
													if(remoteFeed != null) {
														_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug("Feed " + remoteFeed.rfid + " (" + remoteFeed.rfdisplay + ") has left the room, detaching");
													//	dom.querySelector('#remote'+remoteFeed.rfindex).empty().hide();
													//	dom.querySelector('#videoremote'+remoteFeed.rfindex).empty();
														feeds[remoteFeed.rfindex] = null;
														remoteFeed.detach();
													}
												} else if(msg["error"] !== undefined && msg["error"] !== null) {
													console.error(msg);
												}
											}
										}
										if(jsep !== undefined && jsep !== null) {
											_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug("Handling SDP as well...");
											_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug(jsep);
											sfutest.handleRemoteJsep({jsep: jsep});
											// Check if any of the media we wanted to publish has
											// been rejected (e.g., wrong or unsupported codec)
											var audio = msg["audio_codec"];
											if(mystream && mystream.getAudioTracks() && mystream.getAudioTracks().length > 0 && !audio) {
												// Audio has been rejected
												toastr.warning("Our audio stream has been rejected, viewers won't hear us");
											}
											var video = msg["video_codec"];
											if(mystream && mystream.getVideoTracks() && mystream.getVideoTracks().length > 0 && !video) {
													console.warn("video not permited");
												}
											}
										},
										onlocalstream: function(stream) {
											_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug(" ::: Got a local stream :::");
											mystream = stream;
											_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug(stream);
											janus.list.push(stream);
											if (!window.portrait || window.portrait === false) _janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.attachMediaStream(dom.querySelector('#myvideo'), stream);
											if (window.showAudioInput && window.showAudioInput === true){
												let vmc = document.querySelector('webrtc-publisher').shadowRoot.querySelector('volume-meter');
												if (vmc) vmc.init(stream);
											}
										},
										onremotestream: function(stream) {
											// The publisher stream is sendonly, we don't expect anything here
										},
										oncleanup: function() {
											_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.log(" ::: Got a cleanup notification: we are unpublished now :::");
											if (mystream) {
												mystream.getTracks().forEach(track => {
													track.stop();
												  });
												mystream = null;
											}
										}
									});
								},
								error: function(error) {
									_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.error(error);
									
								},
								destroyed: function() {}
							});
							janus.list = [];
							setTimeout(()=>{registerUsername(aid);},1000);
						}});

	}
	function start(id){
		var feed_ = janus.list.find((f)=>{if(f.display===id) return true;});
		newRemoteFeed(feed_.id,feed_.display,feed_.audio,feed_.video);
	}
	function stop(id){
		
		var unpublish = { "request": "unpublish" };
	    if (sfutest) 
			try{
				sfutest.send({"message": unpublish});
			}
			catch(e){
				console.warn("Not publisher");
			}
		
	}
	function destroy(){		
		sfutest.hangup();		
        janus.destroy();
	}

	function registerUsername(aid) {
		var register = { "request": "join", "room": myroom, "ptype": "publisher", "display":aid };
								let idx = setInterval(()=>{
										if (sfutest){
												clearInterval(idx);
												sfutest.send({"message": register});
												if (!window.portrait || window.portrait === false) publishOwnFeed(true);
												else canvasCapture();
												sfutest.unmuteAudio();
										}
								},50);
   }




function toggleMute() {
	var muted = sfutest.isAudioMuted();
	_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.log((muted ? "Unmuting" : "Muting") + " local stream...");
	if(muted)
	sfutest.unmuteAudio();
	else
	sfutest.muteAudio();
	muted = sfutest.isAudioMuted();

}
function changeCamera (id){
	var feed_ = janus.list.find((f)=>{if(f.display===id) return true;});
	if (handler!="") handler.detach();
	newRemoteFeed(feed_.id,feed_.display,feed_.audio,feed_.video);

}
var handler = "";
function changeDev(){
	if(firstTime) {
		firstTime = false;
		restartCapture();
		return;
	}
	restartCapture();
}
function canvasCapture(audioDeviceId, videoDeviceId, constrain, angle) {
	cleanPreprocess()
	let wcp = document.querySelector('webrtc-publisher');
	let videoCfg;
	if (window.res) {
		let size = _janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.getSizeFromRes(window.res);
		videoCfg = {
			width: {
				ideal: size.width
			},
			height: {
				ideal: size.height
			}
		}
	} else {
		videoCfg = {
			width: {
				ideal: 1280
			},
			height: {
				ideal: 720
			}
		}
	}
	navigator.mediaDevices.getUserMedia({
		audio: true,
		video: videoCfg
	}).then((stream) => {
		// We have our video
		_stream = stream;
		video = wcp.shadowRoot.querySelector('video');
		video.srcObject = stream;
		video.muted = "muted";
		video.autoplay = true;
		video.addEventListener('play', playHandler);
		setTimeout(()=>{
			video.style.position = "absolute";
			video.style.left = "-1440px";
			video.style.top = "0px";
			video.style.visibility="hidden";
			video.style.cssFloat = "left";
		},0)	
		canvas = wcp.shadowRoot.querySelector('#canvasforRotate');
		if (canvas) {
			canvas.parentNode.removeChild(canvas);
		}
		canvas = document.createElement('canvas');
		canvas.style.position = "absolute";
		canvas.style.top = "0px";
		canvas.style.left = "25%";
		canvas.id = "canvasforRotate";
		wcp.shadowRoot.appendChild(canvas);

		function loop() {
			const context = canvas.getContext('2d');
			context.drawImage(video, 0, 0, canvas.width, canvas.height);
			context.clearRect(0, 0, canvas.width, canvas.height);
			context.save();
			context.translate(canvas.width, 0);
			context.rotate(90 * Math.PI / 180);
			context.drawImage(video, -video.width / 2, -video.height / 2);
			context.restore();
			if(canvas.width === 1920) canvas.style.zoom = 0.2;
			else if(canvas.width === 720) canvas.style.zoom = 0.4;
			else if(canvas.width === 480) canvas.style.zoom = 0.8;
			else if(canvas.width === 360) canvas.style.zoom = 0.8;
		};
		clearInterval(window.drawLoop)
		window.drawLoop = setInterval(loop, 1000 / 24); // 24 fps


	}).catch(e => {
		alert("Not supported format");
		console.error(e);
	})
}
function playHandler(){
	canvas.width = video.videoHeight;
	canvas.height = video.videoWidth;
	var canvasStream = canvas.captureStream();
	canvasStream.addTrack(_stream.getAudioTracks()[0]);
	var body = {
		audio: true,
		video: true
	};
	sfutest.send({
		message: body
	});
	// if (window.showAudioInput && window.showAudioInput === true){
	// 	let vmc = document.querySelector('webrtc-publisher').shadowRoot.querySelector('volume-meter');
	// 	if (vmc) vmc.init(_stream);
	// }
	sfutest.createOffer({
		// Add data:true here if you want to publish datachannels as well
		//media: { audioRecv: false, videoRecv: false, audioSend: _audio, videoSend: _video },	// Publishers are sendonly
		stream: canvasStream,
		media: {
			replaceAudio: true, // This is only needed in case of a renegotiation
			replaceVideo: true, // This is only needed in case of a renegotiation
		},
		// If you want to test simulcasting (Chrome and Firefox only), then
		// pass a ?simulcast=true when opening this demo page: it will turn
		// the following 'simulcast' property to pass to janus.js to true
		simulcast: false,
		simulcast2: false,
		success: function (jsep) {
			_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug("Got publisher SDP!");
			_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug(jsep);
			var publish = {};
			publish = {
				"request": "configure",
				"audio": true,
				"video": true
			};
			publish["videocodec"] = "h264";
			// You can force a specific codec to use when publishing by using the
			// audiocodec and videocodec properties, for instance:
			// 		publish["audiocodec"] = "opus"
			// to force Opus as the audio codec to use, or:
			// 		publish["videocodec"] = "vp9"
			// to force VP9 as the videocodec to use. In both case, though, forcing
			// a codec will only work if: (1) the codec is actually in the SDP (and
			// so the browser supports it), and (2) the codec is in the list of
			// allowed codecs in a room. With respect to the point (2) above,
			// refer to the text in janus.plugin.videoroom.cfg for more details
			sfutest.send({
				"message": publish,
				"jsep": jsep
			});
		},
		error: function (error) {
			_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.error("WebRTC error:", error);
		}
	});

}
function cleanPreprocess () {
	clearInterval(window.drawLoop);
	let wcp = document.querySelector('webrtc-publisher');
	let video = wcp.shadowRoot.querySelector('video');
	video.removeEventListener('play',playHandler);
	video.style.visibility="visible";
	video.style.position = "relative";
	video.style.left="0px";
	if (wcp.shadowRoot.querySelector('#canvasforRotate')) wcp.shadowRoot.querySelector('#canvasforRotate').parentNode.removeChild(wcp.shadowRoot.querySelector('#canvasforRotate'));

}
function restartCapture(audioDeviceId,videoDeviceId,constrain) {
	// Negotiate WebRTC
	var body = constrain;
	console.log("Sending message (" + JSON.stringify(body) + ")");
	sfutest.send({"message": body});
	console.log("Trying a createOffer too (audio/video sendrecv)");

	sfutest.createOffer(
		{
			// We provide a specific device ID for both audio and video
			media: {
				audio: {
					deviceId: {
						exact: audioDeviceId
					}
				},
				replaceAudio: true,	// This is only needed in case of a renegotiation
				video: {
					deviceId: {
						exact: videoDeviceId
					}
				},
				replaceVideo: true,	// This is only needed in case of a renegotiation
				data: false	// Let's negotiate data channels as well
			},
			// If you want to test simulcasting (Chrome and Firefox only), then
			// pass a ?simulcast=true when opening this demo page: it will turn
			// the following 'simulcast' property to pass to janus.js to true
			simulcast: doSimulcast,
			success: function(jsep) {
				console.log("Got SDP!");
				console.log(jsep);
				sfutest.send({"message": body, "jsep": jsep});
			},
			error: function(error) {
				console.error("WebRTC error:", error);
				
			}
		});

}



 async function listDevices(callback){
				
                return new Promise((resolve,reject)=>{
				let constrain = { audio: true, video: true };
		               
                        navigator.mediaDevices.enumerateDevices().then((devices)=> {

                                resolve(devices);
                                // Get rid of the now useless stream
                                try {
                                        // var tracks = stream.getTracks();
                                        // for(var i in tracks) {
                                        //         var mst = tracks[i];
                                        //         if(mst !== null && mst !== undefined)
                                        //                 mst.stop();
                                        // }
                                } catch(e) {
									reject(e);
                                }
                        });

						
        });
}

function publishOwnFeed(useAudio) {
		cleanPreprocess();
		console.log("OPTIONS",options);
		let vmedia = {};
		let amedia = {};
		var _video = options.video;
		var _audio = options.audio;
		var _audioDeviceId = options.audioinput;
		var _videoDeviceId = options.videoinput;
		window.videoDeviceId = options.videoinput;
		if (_video === false){
			vmedia = false;
		}
		else {
			if (typeof _videoDeviceId =="undefined") vmedia = true;
			else vmedia ={
				deviceId: {
					exact: _videoDeviceId || "default"
				},
				advanced: [{height: {min: 480}}, {width: {min: 640}}, {frameRate: {max: 24}}, {width: {max: 1280}}, {height: {max: 720}}]
			}
		}
		if (_audio === false){
			amedia = false;
		}
		else {
			amedia = {
				deviceId: {
					exact: _audioDeviceId
				}
			}
		}
		doSimulcast=options.simulcast;
		sfutest.createOffer(
			{
				// Add data:true here if you want to publish datachannels as well
				//media: { audioRecv: false, videoRecv: false, audioSend: _audio, videoSend: _video },	// Publishers are sendonly
				media: {
					video:vmedia,
					replaceAudio: true,	// This is only needed in case of a renegotiation
					audio:amedia,
					replaceVideo: true,	// This is only needed in case of a renegotiation
					data: false	// Let's negotiate data channels as well
				},
				// If you want to test simulcasting (Chrome and Firefox only), then
				// pass a ?simulcast=true when opening this demo page: it will turn
				// the following 'simulcast' property to pass to janus.js to true
				simulcast: doSimulcast,
				simulcast2: doSimulcast2,
				success: function(jsep) {
					_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug("Got publisher SDP!");
					_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.debug(jsep);
					var publish = {};
					if (options.bitrate!=0)
					publish = { "request": "configure", "audio": useAudio, "video": options.video, bitrate:options.bitrate};
					else
					publish = { "request": "configure", "audio": useAudio, "video": options.video};
					publish["videocodec"] = "h264";
					// You can force a specific codec to use when publishing by using the
					// audiocodec and videocodec properties, for instance:
					// 		publish["audiocodec"] = "opus"
					// to force Opus as the audio codec to use, or:
					// 		publish["videocodec"] = "vp9"
					// to force VP9 as the videocodec to use. In both case, though, forcing
					// a codec will only work if: (1) the codec is actually in the SDP (and
					// so the browser supports it), and (2) the codec is in the list of
					// allowed codecs in a room. With respect to the point (2) above,
					// refer to the text in janus.plugin.videoroom.cfg for more details
					sfutest.send({"message": publish, "jsep": jsep});
				},
				error: function(error) {
					_janus_js__WEBPACK_IMPORTED_MODULE_1__.Janus.error("WebRTC error:", error);
					if (useAudio) {
							publishOwnFeed(false);
					} else {
						console.warn("WebRTC error... " + JSON.stringify(error));
						
					}
				}
			});

	}
// Helper to parse query string
function getQueryStringValue(name) {
	name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
	var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
	results = regex.exec(location.search);
	return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}



	return {
		changeCamera:changeCamera,
		init:init,
		stop:stop,
		destroy,
		start:start,
		restartCapture:restartCapture,
		changeDev:changeDev,
		listDevices:listDevices,
		rotateVideo: canvasCapture
	}

}




/***/ }),

/***/ "./src/wcs/libs/volume-meter-wc.js":
/*!*****************************************!*\
  !*** ./src/wcs/libs/volume-meter-wc.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VolumeMeter": function() { return /* binding */ VolumeMeter; }
/* harmony export */ });
// <volume-meter width="500" height="25" color="red"></volume-meter>	
class VolumeMeter extends HTMLElement {


    constructor() {
        super();
        this.attachShadow({ mode: 'open' });
        //this.shadowRoot.innerHTML+="<style>"+buttonClass+"</style>";
        this.audioContext = null;
        this.meter = undefined;
        this.canvasContext = null;
        this.rafID = null;
    }
    get color (){
        return this.getAttribute('color');
    }
    set color (c){
        this.setAttribute('color',c)
    }
    get width(){
        return  parseInt(this.getAttribute("width"));
    }
    set width(x){
        if (this.shadowRoot.querySelector("canvas")) {
                    
            this.shadowRoot.querySelector("canvas").width = this.width;
            
        }
        this.setAttribute("width", parseInt(x));
    }
    get height(){
        return  parseInt(this.getAttribute("height"));
    }
    set height(x){
        if (this.shadowRoot.querySelector("canvas")) {
                    
            this.shadowRoot.querySelector("canvas").height = this.height;
            
        }
        this.setAttribute("height", parseInt(x));
    }
    async connectedCallback() {
         this.color = this.color || "green";
    }
    init(stream) {
        // grab our canvas
        if (!this.shadowRoot.querySelector("canvas")) {
            let canvas = document.createElement('canvas');
            canvas.width = this.width;
            canvas.height = this.height;
            this.shadowRoot.appendChild(canvas);
        }
        this.canvasContext = this.shadowRoot.querySelector("canvas").getContext("2d");
        // monkeypatch Web Audio
        window.AudioContext = window.AudioContext || window.webkitAudioContext;

        // grab an audio context
        this.audioContext = new AudioContext();
        // monkeypatch getUserMedia
        let mediaStreamSource = this.audioContext.createMediaStreamSource(stream);
        // Create a new volume meter and connect it.
        this.meter = this.createAudioMeter(this.audioContext);
        mediaStreamSource.connect(this.meter);
        this.render();
       
    }
    hide (){
        this.canvasContext.clearRect(0, 0, this.width, this.height);
        this.meter = undefined;
    }
    render(time) {
        if (!this.meter) return;
        // clear the background
        this.canvasContext.clearRect(0, 0, this.width, this.height);

        // check if we're currently clipping
        if (this.meter.checkClipping())
            this.canvasContext.fillStyle = "red";
        else
            this.canvasContext.fillStyle = this.color;

        // draw a bar based on the current volume
        this.canvasContext.fillRect(0, 0, this.width,this.meter.volume * this.height * 1.4);

        // set up the next visual callback
        this.rafID = window.requestAnimationFrame(this.render.bind(this));
    }

    createAudioMeter(audioContext, clipLevel, averaging, clipLag) {
        this.processor = this.audioContext.createScriptProcessor(512);
        this.processor.addEventListener('audioprocess', this.volumeAudioProcess.bind(this));
        this.processor.clipping = false;
        this.processor.lastClip = 0;
        this.processor.volume = 0;
        this.processor.clipLevel = clipLevel || 0.98;
        this.processor.averaging = averaging || 0.95;
        this.processor.clipLag = clipLag || 750;

        // this will have no effect, since we don't copy the input to the output,
        // but works around a current Chrome bug.
        this.processor.connect(this.audioContext.destination);

        this.processor.checkClipping =()=> {
                if (!this.processor.clipping)
                    return false;
                if ((this.processor.lastClip + this.processor.clipLag) < window.performance.now())
                    this.processor.clipping = false;
                return this.processor.clipping;
            };

        this.processor.shutdown =
            function () {
                this.disconnect();
                this.onaudioprocess = null;
            };

        return this.processor;
    }

    volumeAudioProcess(event) {
        var buf = event.inputBuffer.getChannelData(0);
        var bufLength = buf.length;
        var sum = 0;
        var x;

        // Do a root-mean-square on the samples: sum up the squares...
        for (var i = 0; i < bufLength; i++) {
            x = buf[i];
            if (Math.abs(x) >= this.processor.clipLevel) {
                this.processor.clipping = true;
                this.processor.lastClip = window.performance.now();
            }
            sum += x * x;
        }

        // ... then take the square root of the sum.
        var rms = Math.sqrt(sum / bufLength);

        // Now smooth this out with the averaging factor applied
        // to the previous sample - take the max here because we
        // want "fast attack, slow release."
        this.processor.volume = Math.max(rms, this.processor.volume * this.processor.averaging);
    }
}
customElements.define('volume-meter', VolumeMeter);


/***/ }),

/***/ "./src/wcs/libs sync recursive":
/*!****************************!*\
  !*** ./src/wcs/libs/ sync ***!
  \****************************/
/***/ (function(module) {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = function() { return []; };
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "./src/wcs/libs sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "./src/wcs/screen-share/screen-share.js":
/*!**********************************************!*\
  !*** ./src/wcs/screen-share/screen-share.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WCScreenShare": function() { return /* binding */ WCScreenShare; }
/* harmony export */ });
/* harmony import */ var _libs_janusScreenShare_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../libs/janusScreenShare.js */ "./src/wcs/libs/janusScreenShare.js");
/* harmony import */ var web_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! web-dialog */ "./node_modules/web-dialog/index.js");
/* harmony import */ var _icons_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../icons/config.js */ "./src/wcs/icons/config.js");
/* harmony import */ var _css_webrtc_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../css/webrtc.js */ "./src/wcs/css/webrtc.js");





class WCScreenShare extends HTMLElement {
  static get observedAttributes () {
    return ['config','input','options',"style"];
  }
  
  attributeChangedCallback (name, oldValue, newValue) {
    if (oldValue !== newValue) {
      
        this[name] = newValue;
      
    }
  }
 
  constructor () {
    super();
    this.attachShadow({mode: 'open'});
    this.shadowRoot.innerHTML+="<style>"+_css_webrtc_js__WEBPACK_IMPORTED_MODULE_3__.buttonClass+"</style>";
   
  } 
  get style() { return this.getAttribute('style'); }
  set style(value) {
    let old = this.getAttribute('style');
    if (typeof value!="undefined") {
      this.setAttribute('style', value);
      setTimeout(()=>{this.shadowRoot.querySelector('#myvideo').style.cssText+=value;},1000);
    }
  }

  get config () { return this.getAttribute('config'); }
  set config (value) {
    this.setAttribute('config', value);
    if (value!="") {
      let configJson = JSON.parse(value);
      this.JanusScreenShare  = (0,_libs_janusScreenShare_js__WEBPACK_IMPORTED_MODULE_0__.JanusScreenShare)(this.shadowRoot,configJson.janusServer,configJson.room);
    }
    this.render();
  }
  get options () { return this.getAttribute('options'); }
  set options (value) {
    this.setAttribute('options', value);
    setTimeout(()=>{this.setConfig();},500);
  }
  async connectedCallback () {
     this.__initialized = true;
  }

 publish(options){
   //  this.unpublish();
     if(options instanceof MouseEvent)
            this.JanusScreenShare.init(this.input,this.flags);
     else this.JanusScreenShare.init(this.input,options || this.flags);
 }
 unpublish(){
   this.JanusScreenShare.stop();
 }
 setConfig(){
   let conf = {};
   try {
     conf = JSON.parse(this.options);
     this.flags = conf;
   }
   catch(ex){
     console.log(ex);
   }
  
   if (typeof conf.bitrate!=="undefined") this.shadowRoot.querySelector('#bitrate').value = conf.bitrate;
   if (typeof conf.simulcast!=="undefined") this.shadowRoot.querySelector('#simulcast').checked = conf.simulcast;

 }
 async showConfig(){
 
 }
  configChange(ev){

    this.flags.simulcast = this.shadowRoot.querySelector('#simulcast').checked;
    this.flags.bitrate = parseInt(this.shadowRoot.querySelector('#bitrate').value);
   
  }
  render () {
    if (this.config === "undefined") return; 
    if (this.shadowRoot.querySelector('#videoWrap')) return;
    this.shadowRoot.innerHTML+=`
    <div style="display:none; position: fixed;" id="videoWrap"><video id='myvideo' muted style='position: relative;top: 0;left: 0;' controls autoplay></video>
    <span id="configIcon" style="position: absolute;top: 15px;left: 88%;width:40px;height:40px;cursor:hand;visibility:hidden">`+_icons_config_js__WEBPACK_IMPORTED_MODULE_2__.svg+`</span></div>
    <web-dialog center>
     <form id='change_dev_form' class="form-inline" >
 					        
   <div id="configPanel" >
   <h2> Advanced:</h2>
		
      Simulcast:<input type="checkbox"	id="simulcast" checked style="margin-right:20px">
      <h2>Bitrate:</h2> <input type="number" id="bitrate" value=0 style="margin-right:20px">
      </form>
      <span style="float:right"><span id="saveB" class="btn btn-primary"> Save </span>
      <span id="closeB" class="btn btn-primary"> Close </span></span>
      <div>
      </web-dialog>
     `;
    this.shadowRoot.querySelector('form').addEventListener('change',this.configChange.bind(this));
    this.shadowRoot.querySelector('#saveB').addEventListener('click',this.publish.bind(this));
    this.shadowRoot.querySelector('#closeB').addEventListener('click',()=>this.shadowRoot.querySelector('web-dialog').open =false);
    this.shadowRoot.querySelector('#configIcon').addEventListener('click',this.showConfig.bind(this));
    this.shadowRoot.querySelector('#videoWrap').addEventListener('mouseover',()=>{
      this.shadowRoot.querySelector('#configIcon').style.visibility="visible";
      if (showIconTimer) clearTimeout(showIconTimer);
      var showIconTimer = setTimeout(()=>{this.shadowRoot.querySelector('#configIcon').style.visibility="hidden";},3000)
    });

  }
}

customElements.define('screen-share', WCScreenShare);


/***/ }),

/***/ "./src/wcs/timer.js":
/*!**************************!*\
  !*** ./src/wcs/timer.js ***!
  \**************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WCTimer": function() { return /* binding */ WCTimer; }
/* harmony export */ });
/* harmony import */ var _css_apptable_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css/apptable.css */ "./src/wcs/css/apptable.css");
/* harmony import */ var _css_apptable_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_apptable_css__WEBPACK_IMPORTED_MODULE_0__);

class WCTimer extends HTMLElement {
  static get observedAttributes () {
    return ['datos'];
  }

  attributeChangedCallback (name, oldValue, newValue) {
    if (!this.__initialized) { return; }
    if (oldValue !== newValue) {
      if (name === 'no-headers') {
        this.noHeaders = newValue;
      } else {
        this[name] = newValue;
      }
    }
  }

  get datos () { return this.getAttribute('datos'); }
  set datos (value) {
    this.setAttribute('datos', value);
    this.render();
  }

  get value () { return this.__data; }
  set value (value) {
    this.setValue(value);
  }


  constructor () {
    super();

  }

  async connectedCallback () {
   

    this.__initialized = true;
  }




  setValue (value) {
    this.__data = parse(value);
    this.render();
  }

 

  render () {
    if (this.datos === "undefined") return;
    if (!this.__table)  this.__table = document.createElement('table');
    const div = document.createElement('h2');
    div.innerHTML = "TIMER DATA";
    div.id ="app_div"
    this.__headers = ["Key","Value"];
    this.__table.innerHTML="";
    if (this.__headers) {
      const thead = document.createElement('thead');
      const tr = document.createElement('tr');
      this.__headers.forEach(header => {
        const th = document.createElement('th');
        th.innerText = header;
        tr.appendChild(th);
      });
      thead.append(tr);
      this.__table.appendChild(thead);
    }

    const tbody = document.createElement('tbody');
    var d = JSON.parse(this.datos);
    Object.keys(d).forEach(row => {
      const tr = document.createElement('tr');

        const td = document.createElement('td');
        td.innerText = row;
        tr.appendChild(td);
        const td1 = document.createElement('td');
        td1.innerText = JSON.stringify(d[row]);
        tr.appendChild(td1);

      tbody.appendChild(tr);
    });
    this.__table.id = "table";
    this.__table.appendChild(tbody);




    if (!this.querySelector("#app_div")) this.appendChild(div);
    if (!this.querySelector("#table")) this.appendChild(this.__table);

  }
}

customElements.define('app-timer', WCTimer);


/***/ }),

/***/ "./src/wcs/users.js":
/*!**************************!*\
  !*** ./src/wcs/users.js ***!
  \**************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WCUserTable": function() { return /* binding */ WCUserTable; }
/* harmony export */ });
/* harmony import */ var _css_usertable_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css/usertable.css */ "./src/wcs/css/usertable.css");
/* harmony import */ var _css_usertable_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_usertable_css__WEBPACK_IMPORTED_MODULE_0__);

class WCUserTable extends HTMLElement {
  static get observedAttributes () {
    return ['users'];
  }

  attributeChangedCallback (name, oldValue, newValue) {
    if (!this.__initialized) { return; }
    if (oldValue !== newValue) {
      if (name === 'no-headers') {
        this.noHeaders = newValue;
      } else {
        this[name] = newValue;
      }
    }
  }

  get users () { return this.getAttribute('users'); }
  set users (value) {
    this.setAttribute('users', value);
    this.render();
  }

  get value () { return this.__data; }
  set value (value) {
    this.setValue(value);
  }

  

  constructor () {
    super();

  }

  async connectedCallback () {
  

    this.__initialized = true;
  }




  setValue (value) {
    this.__data = JSON.parse(value);
    this.render();
  }



  render () {
    if (this.users === "undefined") return;
    if (!this.__table)  {
      this.__table = document.createElement('table');
      this.__table.id ="userTable";
    }
    const div = document.createElement('h2');
    div.innerHTML = "USERS DATA";
    div.id ="user_div";
    this.__headers = ["Id","Name","Profile","Capacity","Context","UserData"]
    this.__table.innerHTML = "";
    if (this.__headers) {

      const thead = document.createElement('thead');
      const tr = document.createElement('tr');
      this.__headers.forEach(header => {
        const th = document.createElement('th');
        th.innerText = header;
        tr.appendChild(th);
      });
      thead.append(tr);
      this.__table.appendChild(thead);
    }

    const tbody = document.createElement('tbody');
    JSON.parse(this.users).forEach(row => {
      const tr = document.createElement('tr');
      for (let n in row[1])
       {
        
        const td = document.createElement('td');
     
        if (n=="capacities" || n=="userData" || n=="context") td.innerHTML = "<div>"+JSON.stringify(row[1][n])+"</div>";
        else td.innerText = row[1][n];
        tr.appendChild(td);
 
      }
      tbody.appendChild(tr);
    });
    this.__table.appendChild(tbody);

  //  this.removeChild(document.querySelector("#table"));
    //this.__table = table;

  //  console.log("HERE",this.querySelector("#user_div"));
    if (!this.querySelector("#user_div")) this.appendChild(div);
    if (!this.querySelector("#table")) this.appendChild(this.__table);



  }
}

customElements.define('user-table', WCUserTable);


/***/ }),

/***/ "./src/wcs/webrtc-publisher/webrtcPublisher.js":
/*!*****************************************************!*\
  !*** ./src/wcs/webrtc-publisher/webrtcPublisher.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WCWebrtcPublisher": function() { return /* binding */ WCWebrtcPublisher; }
/* harmony export */ });
/* harmony import */ var _libs_januspublish_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../libs/januspublish.js */ "./src/wcs/libs/januspublish.js");
/* harmony import */ var web_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! web-dialog */ "./node_modules/web-dialog/index.js");
/* harmony import */ var _webrtr_publisher_template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./webrtr-publisher.template.js */ "./src/wcs/webrtc-publisher/webrtr-publisher.template.js");
/* harmony import */ var _css_webrtc_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../css/webrtc.js */ "./src/wcs/css/webrtc.js");
/* harmony import */ var _orkestra_utils_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../orkestra/utils/index.js */ "./src/orkestra/utils/index.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/dist/esm5/internal/Observable.js");
/* harmony import */ var _libs_volume_meter_wc_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../libs/volume-meter-wc.js */ "./src/wcs/libs/volume-meter-wc.js");







class WCWebrtcPublisher extends HTMLElement {
  static get observedAttributes () {
    return ['config','input','options',"style","settings"];
  }
  
  attributeChangedCallback (name, oldValue, newValue) {
    if (oldValue !== newValue) {
      
        this[name] = newValue;
      
    }
  }
 
  constructor () {
    super();
    this.playerEventObserver = new rxjs__WEBPACK_IMPORTED_MODULE_6__.Subject();
    this.attachShadow({mode: 'open'}).appendChild(_webrtr_publisher_template_js__WEBPACK_IMPORTED_MODULE_2__.tmpl.content.cloneNode(true));;
    this.shadowRoot.innerHTML+="<style>"+_css_webrtc_js__WEBPACK_IMPORTED_MODULE_3__.buttonClass+"</style>";
    this.log =  _orkestra_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.Logger.getLogger('Webrtc-publisher');
    this.playerEventObservable = new rxjs__WEBPACK_IMPORTED_MODULE_7__.Observable((observer) => { this.playerEventObserver.subscribe(observer); });
    this.shadowRoot.querySelector('form').addEventListener('change',this.configChange.bind(this));
    this.shadowRoot.querySelector('#saveB').addEventListener('click',this.save.bind(this),true);
    this.shadowRoot.querySelector('#closeB').addEventListener('click',()=>{this.shadowRoot.querySelector('web-dialog').open =false;document.exitFullscreen()});
    this.showConfListener = this.showConfig.bind(this);
    this.showIconListener = this.showIcon.bind(this);
    this.shadowRoot.querySelector('#configIcon').addEventListener('click',this.showConfListener);
    this.shadowRoot.querySelector('#configIcon').addEventListener('touchend',this.showConfListener);
    
    this.shadowRoot.querySelector('#videoWrap').addEventListener('mouseover',this.showIconListener);
      
    this.shadowRoot.querySelector('#videoWrap').addEventListener('touchend',this.showIconListener);
    
  } 

  showIcon (){
    this.shadowRoot.querySelector('#configIcon').style.visibility="visible";
    if (showIconTimer) clearTimeout(showIconTimer);
    var showIconTimer = setTimeout(()=>{this.shadowRoot.querySelector('#configIcon').style.visibility="hidden";},3000)
  }

  get style() { return this.getAttribute('style'); }
  set style(value) {
    let old = this.getAttribute('style');
    if (typeof value!="undefined") {
      this.setAttribute('style', value);
      setTimeout(()=>{this.shadowRoot.querySelector('video').style.cssText+=value;},1000);
    }
  }

  get config () { return this.getAttribute('config'); }
  set config (value) {
    this.setAttribute('config', value);
    if (value!="") {
      let configJson = JSON.parse(value);
      this.PublishJanus  = (0,_libs_januspublish_js__WEBPACK_IMPORTED_MODULE_0__.JanusPublish)(this.shadowRoot,configJson.janusServer,configJson.room);
    }
    this.render();
  }

  get settings () { return this.getAttribute('settings'); }
  set settings (value) {
    this.setAttribute('settings', value);
    if(this.settings=='false')
    {
      this.shadowRoot.querySelector('#configIcon').style.visibility="hidden";
      this.shadowRoot.querySelector('#configIcon').removeEventListener('click',this.showConfListener);
      this.shadowRoot.querySelector('#configIcon').removeEventListener('touchend',this.showConfListener);
      this.shadowRoot.querySelector('#videoWrap').removeEventListener('mouseover',this.showIconListener);
      this.shadowRoot.querySelector('#videoWrap').removeEventListener('touchend',this.showIconListener);

    } 
  }

  get options () { return this.getAttribute('options'); }
  set options (value) {
    this.setAttribute('options', value);
    setTimeout(()=>{this.setConfig();},500);
  }
  async connectedCallback () {
     this.__initialized = true;
  }
 async listMedia(){
   let devices = await this.PublishJanus.listDevices();
   return devices;
 }
 playEventSubscriber(){
  return this.playerEventObservable;
 }
 publish(options){
     this.log.info("click publish");
     this.unpublish();
     if(options instanceof MouseEvent)
            this.PublishJanus.init(this.input,this.flags);
     else this.PublishJanus.init(this.input,options || this.flags);
     if (this.flags.video == false) this.setOnlyAudioPoster(true);
     else this.setOnlyAudioPoster(false);
     this.playerEventObserver.next({type:"play",value:"true"});
 }
 unpublish(){
   this.PublishJanus.stop();
   this.shadowRoot.querySelector('video').srcObject= null;
   this.playerEventObserver.next({type:"pause",value:"true"});
 }
 destroy(){
   this.PublishJanus.stop();
   this.PublishJanus.destroy();
   this.shadowRoot.querySelector('video').srcObject= null;

 }
 setConfig(){
   this.log.info(this.options);
   let conf = {};
   try {
     conf = JSON.parse(this.options);
     this.flags = conf;
   }
   catch(ex){
     this.log.warn(ex);
   }
   if (typeof conf.portrait!=="undefined") this.shadowRoot.querySelector('#portrait').checked = conf.portrait || false;
   if (typeof conf.res!=="undefined") this.shadowRoot.querySelector('#res').value = conf.res || "VGA";
   if (typeof conf.audio!=="undefined") this.shadowRoot.querySelector('#audioc').checked = conf.audio;
   if (typeof conf.video!=="undefined") this.shadowRoot.querySelector('#videoc').checked = conf.video;
   if (typeof conf.bitrate!=="undefined") this.shadowRoot.querySelector('#bitrate').value = conf.bitrate;
   if (typeof conf.noiseS!=="undefined") this.shadowRoot.querySelector('#noise').checked = conf.noiseS;
   if (typeof conf.echoC!=="undefined") this.shadowRoot.querySelector('#echo').checked = conf.echoC;
   if (typeof conf.gainC!=="undefined") this.shadowRoot.querySelector('#gain').checked = conf.gainC;
   if (typeof conf.gainC!=="undefined") this.shadowRoot.querySelector('#delay').value = conf.delay || 0;
   if (typeof conf.volIncrease!=="undefined") this.shadowRoot.querySelector('#volIncrease').value = conf.volIncrease || 0;
   if (typeof conf.simulcast!=="undefined") this.shadowRoot.querySelector('#simulcast').checked = conf.simulcast;
   window.echoC = this.shadowRoot.querySelector('#echo').checked;
   window.noiseS = this.shadowRoot.querySelector('#noise').checked;
   window.gainC = this.shadowRoot.querySelector('#gain').checked;
   window.volIncrease = parseInt(this.shadowRoot.querySelector('#volIncrease').value) || 0;
   window.audioType = this.shadowRoot.querySelector('#audiotype').value || "";
   if (typeof conf.showAudioInput!=="undefined") window.showAudioInput = conf.showAudioInput;


 }
 async showConfig(){
  this.requestFullscreen();
  let audioValue;
  let audioText ; 
  let videoValue ;
  let videoText ;
   let medias = await this.listMedia();
   this.shadowRoot.querySelector('web-dialog').open =true;
   let audios = this.shadowRoot.querySelector('#audio-device');
   let videos = this.shadowRoot.querySelector('#video-device');
  if (audios && videos && audios.children.length>0){
     audioValue = audios.options[audios.selectedIndex].value;
     audioText = audios.options[audios.selectedIndex].text;
     videoValue = videos.options[videos.selectedIndex].value;
     videoText = videos.options[videos.selectedIndex].text;
  }
   audios.innerHTML ="";
   videos.innerHTML ="";
   medias.forEach((m)=>{
     let option = document.createElement('option');
     option.value = m.deviceId;
     option.innerHTML = m.label || m.deviceId;
     if (m.kind === "audioinput"){
        if (m.deviceId == audioValue) option.selected = true;
        audios.appendChild(option)
     }
     else if (m.kind==="videoinput"){
        if (m.deviceId == videoValue) option.selected = true;
        videos.appendChild(option);
     }
   })
 }
  configChange(ev){
    this.flags.portrait = window.portrait = this.shadowRoot.querySelector('#portrait').checked;
    this.flags.res = window.res = this.shadowRoot.querySelector('#res').value;
    this.flags.audioinput = this.shadowRoot.querySelector('#audio-device').value;
    this.flags.videoinput = this.shadowRoot.querySelector('#video-device').value;
    this.flags.video = this.shadowRoot.querySelector('#videoc').checked;
    this.flags.audio = this.shadowRoot.querySelector('#audioc').checked;
    this.flags.echoC = window.echoC = this.shadowRoot.querySelector('#echo').checked;
    this.flags.noiseS = window.noiseS = this.shadowRoot.querySelector('#noise').checked;
    this.flags.gainC = window.gainC = this.shadowRoot.querySelector('#gain').checked;
    this.flags.delay = window.delay = this.shadowRoot.querySelector('#delay').value;
    this.flags.volIncrease = window.volIncrease = parseInt(this.shadowRoot.querySelector('#volIncrease').value);
    this.flags.audioType = window.audioType = this.shadowRoot.querySelector('#audiotype').value;
    this.flags.simulcast = this.shadowRoot.querySelector('#simulcast').checked;
    this.flags.bitrate = parseInt(this.shadowRoot.querySelector('#bitrate').value)*1024;
    this.log.info(this.flags);
    if (ev && ev.srcElement.id === "audio-device"){
      if (this.flags.portrait === true){
        this.PublishJanus.rotateVideo(this.flags.audioinput,this.flags.videoinput,{video:this.flags.video,audio:this.flags.audio},90);
      }
      else this.PublishJanus.restartCapture(this.flags.audioinput,this.flags.videoinput,{video:this.flags.video,audio:this.flags.audio, portrait:this.flags.portrait});
      if (this.flags.video == false) this.setOnlyAudioPoster(true);
      else this.setOnlyAudioPoster(false);
    }
    else if (ev && ev.srcElement.id === "video-device"){
      if (this.flags.portrait === true){
        this.PublishJanus.rotateVideo(this.flags.audioinput,this.flags.videoinput,{video:this.flags.video,audio:this.flags.audio},90);
      }
      else this.PublishJanus.restartCapture(this.flags.audioinput,this.flags.videoinput,{video:this.flags.video,audio:this.flags.audio, portrait:this.flags.portrait});
      if (this.flags.video == false) this.setOnlyAudioPoster(true);
      else this.setOnlyAudioPoster(false);

    }
  }
  setOnlyAudioPoster(flag){
    if (flag===true){
      this.shadowRoot.querySelector('video').poster = "https://assets.boxcast.com/latest/static/audio-only.png";
    }
    else 
    this.shadowRoot.querySelector('video').poster = "";
  }
   userCmdEvents(evt){
    if (evt.cmd =="stream"){
       FlexJanus.stop(this.input);
       this.input = evt.value;
       FlexJanus.start(evt.value, this);
       if (this.flags.video == false) this.setOnlyAudioPoster(true);
       else this.setOnlyAudioPoster(false);
    }
  }
  setOrkestraInstance(app){
    this.app = app;
    this.app.useServiceHub(app.options.channel+"_mediaServs").then (()=>{
    
       this.app.publishService('adaptiveStream_'+this.app.getMyAgentId());
       setTimeout(()=> { 
       let data= {
          io: "out",
          portrait:false,
          res:"VGA",
          bitrate:0,
          volume:1,
          volIncrease:1,
          noiseS:true,
          echoC:false,
          gainC:false,
          simulcast:false,
          viewport:this.shadowRoot.querySelector('video').clientWidth+"x"+this.shadowRoot.querySelector('video').clientHeight,
          audio:true,
          video:true,
          status:1,
          timestamp:new Date().getTime()
        }
     this.sendAdaptativeStreamInfo(data)},3000);
     this.app.subscribeToService('adaptiveStream_'+this.app.getMyAgentId(),this.adaptativeStreamChange.bind(this),"in");

   }).catch(e=>{
     this.log.error(e);
   });
   
  }
  sendAdaptativeStreamInfo(data){
    this.app.sendServiceData('adaptiveStream_'+this.app.getMyAgentId(),data,"out");
  }
  adaptativeStreamChange(evt){
    this.log.info(evt);
    if (typeof evt.value.data.bitrate !="undefined"){
       let diff = _orkestra_utils_index_js__WEBPACK_IMPORTED_MODULE_4__.Obj.getObjectDiff(evt.value.data,this.flags);
       this.log.info("diff",diff);
       this.flags.portrait = window.portrait = evt.value.data.portrait;
       this.flags.res = window.res = evt.value.data.res;
       this.flags.bitrate = evt.value.data.bitrate;
       this.flags.video = evt.value.data.video;
       this.flags.audio = evt.value.data.audio;
       this.flags.echoC = window.echoC = evt.value.data.echoC;
       this.flags.gainC = window.gainC = evt.value.data.gainC;
       this.flags.noiseS = window.noiseS = evt.value.data.noiseS;
       this.flags.simulcat = evt.value.data.simulcast;
       this.flags.delay = window.delay = evt.value.data.delay || 0;
       this.flags.volIncrease = window.volIncrease = parseInt(evt.value.data.volIncrease) || 1;
       this.flags.audioType = window.audioType = evt.value.data.audioType || "";
       this.publish(this.flags);
       if (this.flags.video == false) this.setOnlyAudioPoster(true);
       else this.setOnlyAudioPoster(false);
    } 
  }
  save(){
     
    this.configChange();
    if (this.flags.portrait === true){
      this.unpublish();
      this.PublishJanus.init(this.input,this.flags);
      if (this.flags.video == false) this.setOnlyAudioPoster(true);
      else this.setOnlyAudioPoster(false);
      this.playerEventObserver.next({type:"play",value:"true"});
      setTimeout(()=>{this.PublishJanus.rotateVideo();},1500);
    }
    else {
      this.publish(this.flags);
      this.playerEventObserver.next({type:"play",value:"true"});
    }
   }

  render () {
    if (this.config === "undefined") return; 
 

  }

}

customElements.define('webrtc-publisher', WCWebrtcPublisher);


/***/ }),

/***/ "./src/wcs/webrtc-publisher/webrtr-publisher.template.js":
/*!***************************************************************!*\
  !*** ./src/wcs/webrtc-publisher/webrtr-publisher.template.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "tmpl": function() { return /* binding */ tmpl; }
/* harmony export */ });
/* harmony import */ var _icons_config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../icons/config.js */ "./src/wcs/icons/config.js");
/* harmony import */ var _libs_volume_meter_wc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../libs/volume-meter-wc */ "./src/wcs/libs/volume-meter-wc.js");


let tmp =`
    <div id="videoWrap" style="height:100%;">
    <volume-meter width="25" height="500" color="blue" style="position:absolute"></volume-meter>
    <video id='myvideo' muted style='position: relative;top: 0;left: 0;width:100%;height:100%;' autoplay>
    </video>

    <span id="configIcon" style="position: absolute;top: 0%;left: 0%;width:80px;height:80px;cursor:hand;visibility:visible;blakground:black;">`+_icons_config_js__WEBPACK_IMPORTED_MODULE_0__.svg+`</span>
    </div>
    <web-dialog center>
     <form id='change_dev_form' class="form-inline" >

  						              <div class="form-group" style="margin-right: 20px;">
                                   <h2> Media Choose:</h2>
                                   <div>
                                   <label for="audio-device" i18n>Audio device (input):</label>

                                   <select id="audio-device" class="form-control"  ></select>
                                    </div>
                                    <div>
  							                   <label for="video-device" i18n>Video device (input):</label>
                                   <select id="video-device" class="form-control"></select>
                                   </div>

  						              </div>

  					        
   <div id="configPanel" >
   <h2> Advanced:</h2>
   <h2>Resolution: <select id="res"> <option value="4k"> 4K(UHD)</option><option value="fhd"> FHD (16:9)</option><option value="UXGA"> UXGA</option><option value="HD" selected> HD(16:9)</option><option value="SVGA"> SVGA</option><option value="VGA"> VGA</option><option value="360p"> 360p (16:9)</option><option value="QVGA"> QVGA</option></select></h2>
			EchoCancelation:<input type="checkbox"	id="echo" checked style="margin-right:20px">
			NoiseSupression:<input type="checkbox"	id="noise" checked style="margin-right:20px">
      GainControl:<input type="checkbox"	id="gain" checked style="margin-right:20px">
      Video:<input type="checkbox"	id="videoc" checked style="margin-right:20px">
      Audio:<input type="checkbox"	id="audioc" checked style="margin-right:20px">
      Simulcast:<input type="checkbox"	id="simulcast" checked style="margin-right:20px">
      Portrait:<input type="checkbox"	id="portrait" style="margin-right:20px">
      <h2>Bitrate:</h2> <input type="number" id="bitrate" value=0 style="margin-right:20px"><span>kb/s</span>
      <h2>Micro Volume (force):</h2> <input type="range" id="volIncrease" value=1 min=1 max=5 style="margin-right:20px">
      <h2>Audio Delay:</h2> <input type="number" id="delay" value=0 style="margin-right:20px"><span>s</span>
      <h2>Audio Type: <select id="audiotype"> <option value=""> None</option><option value="music" selected> Music</option><option value="speech"> Speech</option><option value="speech-recognition"> Speech Recognotion</option></select></h2>
      </form>
      <span style="float:right"><span id="saveB" class="btn btn-primary"> Save </span>
      <span id="closeB" class="btn btn-primary"> Close </span></span>
      <div>
      </web-dialog>`;
  let tmpl = document.createElement('template');
  tmpl.innerHTML = tmp;
  
      


/***/ }),

/***/ "./src/wcs/xmedia/xmedia.js":
/*!**********************************!*\
  !*** ./src/wcs/xmedia/xmedia.js ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "XMedia": function() { return /* binding */ XMedia; }
/* harmony export */ });
/* harmony import */ var _libs_janusclient_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../libs/janusclient.js */ "./src/wcs/libs/janusclient.js");
/* harmony import */ var _orkestra_utils_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../orkestra/utils/index.js */ "./src/orkestra/utils/index.js");



const template = document.createElement('template');
template.innerHTML = `
<style>
:host {
  display: inline-block;
  position: relative;
}
.title {
  position: absolute;
  background-color: rgb(63 63 63);
  color: rgb(205 202 202);
  letter-spacing: 0.05rem;
  left: 0;
  padding: 0.3rem 1.2rem;
  font-size: 65%;
}
#video {
  background-color: black;
}
@media (max-width: 750px){
  .title {
    padding: 0.2rem 0.8rem;
    font-size: 55%;
  }
}
</style>`;
class XMedia extends HTMLElement {

  static get observedAttributes() {
    return ['input', 'type', "style", "config","nosignalimg", 'title'];
  }

  attributeChangedCallback(name, oldValue, newValue) {
    if (oldValue !== newValue) {
      if (name === 'type') {
        this.type = newValue;
      } else {
        this[name] = newValue;
        if (name=="nosignalimg"){
           this.render();
        }
      }
      setTimeout(()=>{
      let mediatype = this.identifiyMedia();
      if (!(mediatype =="dash" || mediatype=="webrtc")) return;


      if (mediatype === "webrtc"){
          if (this.profile ==="low" ){
              this.changeSubStream(this.input,0);
          }
          else {
             let width = this.shadowRoot.querySelector('video').clientWidth;
              if (width>800) {
			                this.changeSubStream(this.input,1);
              }
              else  {

                        this.changeSubStream(this.input,1);
              }
            }
      }
      else if (mediatype==="dash"){
        if (this.profile ==="low"){
          let v = this.shadowRoot.querySelector('dash-video');
          let options = this.getAttribute('options');
          if (options != '{"stableBuffer":20,"bufferAtTopQuality":20,"maxBitrate":150,"minBitrate":-1,"limitByPortal":false}')
           {
              v.setAttribute('options','{"stableBuffer":20,"bufferAtTopQuality":20,"maxBitrate":150,"minBitrate":-1,"limitByPortal":false}');
              v.updateOptions();
           }


        }
      }
    },5000)

    }
  }

  get config() { return this.getAttribute('config'); }
  set config(value) {
    let old = this.getAttribute('config');
    if (old != value) {
      this.setAttribute('config', value);

    }
    let obj = JSON.parse(value);
    
    if (!window.FlexJanus && obj.janusServer ) {
      if (!window.parent.FlexJanus){
        if (obj.iframe===true){
          window.parent.FlexJanus = (0,_libs_janusclient_js__WEBPACK_IMPORTED_MODULE_0__.JanusClient)(this, obj.janusServer,obj.room,obj.buffer);
          window.parent.FlexJanus.init(this);
        }
        else {
          window.FlexJanus = (0,_libs_janusclient_js__WEBPACK_IMPORTED_MODULE_0__.JanusClient)(this, obj.janusServer,obj.room,obj.buffer);
          (window.FlexJanus || window.parent.FlexJanus).init(this)
        }        
      }
    
      if (obj.publisherFeed && obj.publisherFeed!=""){
        
        (window.FlexJanus || window.parent.FlexJanus).registerUsernameAsSubscriber(obj.publisherFeed);
      }

    }
    if (obj.showAudioInput === "true" || obj.showAudioInput === true){
       this.enableVolumeMeter();
    }
    if(obj.showBitrate=== "true"){
       setTimeout(()=>{this.querySelector('#bitrate').style.display="block";},5000);
    }
    if (typeof obj.profile!="undefined") {
      this.profile = obj.profile;
    }
    if (obj.autoplay === "false") {
      this.autoPlay(false);
    }
    if (obj.muted === "true") {
      this.muted = true;
      this.mute();
      this.render();

    }
    else if (obj.muted === "false") {
      this.muted = false;
      this.mute();
      this.render();

    }
    if (obj.me) {
      if (this.input === obj.me) {
        if (this.shadowRoot.querySelector('video')) {
          this.muted = true;
          this.mute();
          this.render();
        }
      }
    }
  }
  get input() { return this.getAttribute('input'); }
  set input(value) {

    if (this.oldInput != value) {
      this.oldInput = value;
      this.setAttribute('input', value);
      if (!value) {
        this.cleanInput()
        return;
      }
      let mediaType = this.identifiyMedia();
      this.render();
      if (mediaType == "webrtc" && this.janusReady) (window.FlexJanus || window.parent.FlexJanus).start(this.input, this);
      else if (mediaType == "webrtc" && this.janusReady == undefined) {
        setTimeout(() => { (window.FlexJanus || window.parent.FlexJanus).start(this.input, this); }, 5000);
      }

    }
    else if (this.shadowRoot.querySelector('video') && this.shadowRoot.querySelector('video').paused) {
      let mediaType = this.identifiyMedia();
      if (mediaType == "webrtc" && this.janusReady) (window.FlexJanus || window.parent.FlexJanus).start(this.input, this);
    }
    let obj = JSON.parse(this.getAttribute('config'));
    if (obj && obj.me) {
      if (this.input === obj.me) {
        if (this.shadowRoot.querySelector('video')) {
          this.shadowRoot.querySelector('video').muted = true;
        }
      }
    }

  }

  get type() { return this.getAttribute('type'); }
  set type(value) {
    let old = this.getAttribute('type');
    if (old != value) {
      this.setAttribute('type', value);
      this.render();
    }
  }

  get title() {
    return this.getAttribute('title')
  }
  set title(value) {
    this.setAttribute('title', value)
    this.createTitleElement(value)
  } 

  constructor() {
    super();
    this.substream = -1;
    this.oldInput = "";
    this.autoplay = true;
    this.loaded = false;
    this.log =  _orkestra_utils_index_js__WEBPACK_IMPORTED_MODULE_1__.Logger.getLogger('X-media');

    this.attachShadow({mode: 'open'});
    document.addEventListener('JanusReady', this.janusReadyListener.bind(this));
    document.addEventListener('newStream', this.newStreamListener.bind(this));
    document.addEventListener('deletedStream', this.deletedStreamListener.bind(this));
    if (window.parent){
      window.parent.document.addEventListener('JanusReady', this.janusReadyListener.bind(this));
      window.parent.document.addEventListener('newStream', this.newStreamListener.bind(this));
      window.parent.document.addEventListener('deletedStream', this.deletedStreamListener.bind(this));
    }
    this.log.warn(this.input, "could not connect");
    this.shadowRoot.appendChild(template.content.cloneNode(true));
    /* force to refresh substream in order to check if resolution haven been changed (publisher) */
    setInterval(()=> {
       if (!this.profile || this.profile !=="low"){
          this.changeSubStream(this.input,1);
       }
    },2000)

  }
  janusReadyListener(e) {
    this.janusReady = true;
  }
  deletedStreamListener(e){
  	if (this.input === e.detail.id){
		if (this.shadowRoot.querySelector('video')) this.shadowRoot.querySelector('video').srcObject = null;
	}
  }
  newStreamListener(e) {
    if (this.input === e.detail.id)
      setTimeout(() => {
        (window.FlexJanus || window.parent.FlexJanus).start(this.input, this);
        if (this.profile ==="low" ){
          this.changeSubStream(this.input,0);
      }
      else {
         let width = this.shadowRoot.querySelector('video').clientWidth;
          if (width>800) {
              this.changeSubStream(this.input,1);
          }
          else  {

                    this.changeSubStream(this.input,2);
          }
        }
        this.setOnlyAudioPoster();
      }, 2000);
  

  }
  setOnlyAudioPoster(){
    if (this.shadowRoot.querySelector('video').srcObject!=null){
    let videoNum = this.shadowRoot.querySelector('video').srcObject.getVideoTracks().length;
    if (videoNum===0){
      this.shadowRoot.querySelector('video').poster = "https://assets.boxcast.com/latest/static/audio-only.png";
    }
  }
  }
  disconnectedCallback() {
    document.removeEventListener('JanusReady', this.janusReadyListener.bind(this));
    document.removeEventListener('newStream', this.newStreamListener.bind(this));
    document.removeEventListener('deletedStream', this.deletedStreamListener.bind(this));
    this.log.info('disconnected from the DOM');
  }
  async connectedCallback() {
    if (this.hasAttribute('input')) {
      this.render();
    }
    if (this.hasAttribute('type')) {
      this.render();
    }
    if (!this.querySelector('#bitrate'))this.shadowRoot.innerHTML+="<div id='bitrate' style='position:absolute;display:none;color:yellow;'></div>";
  }
  userCmdEvents(evt){
    this.log.info("XMEDIA CMD",evt);
    if (evt.cmd =="stream"){
      (window.FlexJanus || window.parent.FlexJanus).stop(this.input);
       this.input = evt.value;
       (window.FlexJanus || window.parent.FlexJanus).start(evt.value, this);
    }
  }
  identifiyMedia() {
    if (this.input && this.input !== "undefined") {
      let isURI = this.input.indexOf('/') != -1;
      if (!isURI) {
        return "webrtc";
      }
      else {

        let fileName = this.input.substring(this.input.lastIndexOf('/') + 1, this.input.length);
        let ext = fileName.substring(fileName.lastIndexOf('.'), this.input.length);
        if (ext === "") this.log.warn("Not extension found could not know media type");
        switch (ext.toLowerCase()) {
          case '.png': return "image";
          case '.jpg': return "image";
          case '.jpeg': return "image";
          case '.gif': return "image";
          case '.webp': return "image";
          case '.svg': return "image";
          case '.mp4': return "video";
          case '.ogv': return "video";
          case '.vp9': return "video";
          case '.vp8': return "video";
          case '.mpeg': return "video";
          case '.mpg': return "video";
          case '.mpd': return "dash";
          default: return "unknown";
        }
      }
    }
    else return undefined;
  }
  cleanInput() {
    let v = this.shadowRoot.querySelector('video')
    if (v) this.shadowRoot.removeChild(v);
    let img = this.shadowRoot.querySelector('img')
    if (img) this.shadowRoot.removeChild(img);
    let d = this.shadowRoot.querySelector('dash-video');
    if(d) this.shadowRoot.removeChild(d);
  }
  mute() {
    let v = this.shadowRoot.querySelector('video');
    if (this.shadowRoot.querySelector('dash-video')) v = this.shadowRoot.querySelector('dash-video').shadowRoot.querySelector('video');
    if (v) v.muted = this.muted;
  }
  muteVideo(){
    let v = this.shadowRoot.querySelector('video');
    if (this.shadowRoot.querySelector('dash-video')) v = this.shadowRoot.querySelector('dash-video').shadowRoot.querySelector('video');
    this.muted=true;
    if (v) v.muted = this.muted;
  }
  unmuteVideo(){
    let v = this.shadowRoot.querySelector('video');
    if (this.shadowRoot.querySelector('dash-video')) v = this.shadowRoot.querySelector('dash-video').shadowRoot.querySelector('video');
    this.muted=false;
    if (v) v.muted = this.muted;
  }
  changeLoop(val){
    let v = this.shadowRoot.querySelector('video');
    if (this.shadowRoot.querySelector('dash-video')) v = this.shadowRoot.querySelector('dash-video').shadowRoot.querySelector('video');
    v.loop = val;
  }
  autoPlay(flag) {
    this.autoplay = flag;
    let v = this.shadowRoot.querySelector('video');
    if (this.shadowRoot.querySelector('dash-video')) v = this.shadowRoot.querySelector('dash-video').shadowRoot.querySelector('video');
    if (v && flag === false) v.removeAttribute("autoplay");
  }
  load(resetVideo) {
    let mediaType = this.identifiyMedia();
    let v = this.shadowRoot.querySelector('video');
    if (this.shadowRoot.querySelector('dash-video')) v= this.shadowRoot.querySelector('dash-video').shadowRoot.querySelector('video');
    if (mediaType === "webrtc") {
      if (v) v.muted = this.muted;

    }
    else{
      if (v && (resetVideo==undefined || resetVideo)) {
        v.currentTime = 0;
        v.play();
      }
    }
    this.loaded = true;
  }
  unload(resetVideo) {
    let mediaType = this.identifiyMedia();
    let v = this.shadowRoot.querySelector('video');
    if (this.shadowRoot.querySelector('dash-video')) v= this.shadowRoot.querySelector('dash-video').shadowRoot.querySelector('video');
    if (mediaType === "webrtc") {
      if (v) v.muted = true;

    }
    else{
      if (v && (resetVideo==undefined || resetVideo)) {
        v.pause();
      }
    }
    this.loaded = false;

  }
  changeSubStream(stream,subid){
    if ((window.FlexJanus || window.parent.FlexJanus)) (window.FlexJanus || window.parent.FlexJanus).changeSubStream(stream,subid);
  }
  play(){
    let v = this.shadowRoot.querySelector('video');
    if (this.shadowRoot.querySelector('dash-video')) v= this.shadowRoot.querySelector('dash-video').shadowRoot.querySelector('video');
    if (v && this.loaded === true) v.play();
  }
  pause(){
    let v = this.shadowRoot.querySelector('video');
    if (this.shadowRoot.querySelector('dash-video')) v= this.shadowRoot.querySelector('dash-video').shadowRoot.querySelector('video');
    if (v && this.loaded === true) v.pause();
  }
  muteScene() {
    this.muted = true;
    this.mute();
  }
  unmuteScene() {
    this.muted = false;
    this.mute();
  }

  /**
   * It creates a span element that has the title of the x-media
   * @param title: string
   */
  createTitleElement(title) {
    const titleElement = this.shadowRoot.querySelector('.title')
    if (!titleElement) {
      // Create title element
      const element = Object.assign(document.createElement('span'), {
        className: 'title',
        textContent: title
      })
      this.shadowRoot.appendChild(element)
    } else{
      // Update title element
      titleElement.textContent = title
    }
  }

  /**
   * Create <video> element in x-media component
   * @param {string} source 
   */
  createVideoElement(source) {
    const v = document.createElement("video");
    v.id = "video";
    v.muted = this.muted;
    v.controls = false;
    v.autoplay = this.autoplay;
    v.loop = false;
    v.style = "width:100%;height:100%";
    if (source) {
      v.src = source;
    }
    this.shadowRoot.appendChild(v);
  }
  enableVolumeMeter(){
    this.shadowRoot.innerHTML ='<volume-meter width="25" height="500" color="blue" style="position:absolute"></volume-meter>';
    setTimeout(()=>{
      if(this.shadowRoot.querySelector('video'))
      this.shadowRoot.querySelector('video').showAudioInput = true;
    },2000);
  }
  disableVolumeMeter(){
    this.shadowRoot.querySelector('volume-meter').parentNode.removeChild(this.shadowRoot.querySelector('volume-meter'));
    setTimeout(()=>{
      if(this.shadowRoot.querySelector('video'))
      this.shadowRoot.querySelector('video').showAudioInput = false;
    },2000);
  }
  render() {
    let mediaType = this.identifiyMedia();
    if (mediaType && mediaType != "unknown") {
      switch (mediaType) {
        case "image": {
          if (!this.shadowRoot.querySelector('img')) {
            this.cleanInput('video');
            this.cleanInput('dash');
            let v = document.createElement("img");
            v.id = "video";
            v.src = this.input;
            v.style = "width:100%;height:100%;object-fit:contain;";
            this.shadowRoot.appendChild(v);
          }
          else{
            let i = this.shadowRoot.querySelector("img");
            i.src = this.input;
            i.style = "width:100%;height:100%;object-fit:contain;";
          }
          break;
        }
        case "video": {
          let v = this.shadowRoot.querySelector('video');
          if (!v) {
            this.cleanInput('img');
            this.cleanInput('dash');
            this.createVideoElement(this.input)
          }
          else {
            v.muted = this.muted;
            v.srcObject = null;
            v.src = this.input;
            v.autoplay = this.autoplay;
          }
          break;
        }
       case "dash": {
          let v = this.shadowRoot.querySelector('dash-video');
          if (v)  this.shadowRoot.removeChild(v);
            this.cleanInput('img');
            this.cleanInput('video');
            v = document.createElement("dash-video");
            v.id = "video";
            v.muted = this.muted;
            v.controls = false;
            v.autoplay = this.autoplay;
            v.loop = false;
	          v.setAttribute('log','false');
            v.setAttribute('options','{"stableBuffer":20,"bufferAtTopQuality":20,"maxBitrate":5000,"minBitrate":-1,"limitByPortal":true}');
            v.style = "width:100%;height:100%";
            v.src = this.input;
            this.shadowRoot.appendChild(v);

          break;
        }

        case "webrtc": {
          if (!this.shadowRoot.querySelector('video')) {
            this.cleanInput('img');
            this.cleanInput('dash');
            let v = document.createElement("video");
            v.id = "video";
            v.muted = this.muted;
            if(this.nosignalimg){
              v.poster = this.nosignalimg;
            }
            else{
              v.poster = "https://f4.bcbits.com/img/a1761578860_10.jpg";
            }
            v.controls = false;
            v.autoplay = true;
            v.style = "width:100%;height:100%";
            this.shadowRoot.appendChild(v);
          }
          else {
            let v = this.shadowRoot.querySelector('video');
            if(this.nosignalimg){
              v.poster = this.nosignalimg;
            }
            else{
              v.poster = "https://f4.bcbits.com/img/a1761578860_10.jpg";
            }
          }
        }
      }
    } else {
      const v = this.shadowRoot.querySelector('video');
      if (!v) {
        this.createVideoElement()
      }
    }

  }


}


customElements.define('x-media', XMedia);


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	!function() {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = function(module) {
/******/ 			var getter = module && module.__esModule ?
/******/ 				function() { return module['default']; } :
/******/ 				function() { return module; };
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	!function() {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
!function() {
"use strict";
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Orkestra": function() { return /* reexport safe */ _orkestra_orkestra_js__WEBPACK_IMPORTED_MODULE_0__.Orkestra; },
/* harmony export */   "ObjectSync": function() { return /* reexport safe */ _orkestra_motion_motion_js__WEBPACK_IMPORTED_MODULE_19__.ObjectSync; },
/* harmony export */   "WCAppTable": function() { return /* reexport safe */ _wcs_app_js__WEBPACK_IMPORTED_MODULE_2__.WCAppTable; },
/* harmony export */   "WCUserTable": function() { return /* reexport safe */ _wcs_users_js__WEBPACK_IMPORTED_MODULE_1__.WCUserTable; },
/* harmony export */   "WCTimer": function() { return /* reexport safe */ _wcs_timer_js__WEBPACK_IMPORTED_MODULE_3__.WCTimer; },
/* harmony export */   "XMedia": function() { return /* reexport safe */ _wcs_xmedia_xmedia_js__WEBPACK_IMPORTED_MODULE_20__.XMedia; },
/* harmony export */   "TextData": function() { return /* reexport safe */ _orkestra_instruments_index_js__WEBPACK_IMPORTED_MODULE_4__.TextData; },
/* harmony export */   "KeyPress": function() { return /* reexport safe */ _orkestra_instruments_index_js__WEBPACK_IMPORTED_MODULE_4__.KeyPress; },
/* harmony export */   "UI": function() { return /* reexport safe */ _orkestra_ui_UI_js__WEBPACK_IMPORTED_MODULE_5__.UI; },
/* harmony export */   "Byname": function() { return /* reexport safe */ _orkestra_rules_byname_js__WEBPACK_IMPORTED_MODULE_13__.Byname; },
/* harmony export */   "URI": function() { return /* reexport safe */ _orkestra_utils_index_js__WEBPACK_IMPORTED_MODULE_18__.URI; },
/* harmony export */   "Obj": function() { return /* reexport safe */ _orkestra_utils_index_js__WEBPACK_IMPORTED_MODULE_18__.Obj; },
/* harmony export */   "QRCode": function() { return /* reexport safe */ _orkestra_utils_index_js__WEBPACK_IMPORTED_MODULE_18__.QRCode; },
/* harmony export */   "Bytimeline": function() { return /* reexport safe */ _orkestra_rules_byTimeline_js__WEBPACK_IMPORTED_MODULE_14__.Bytimeline; },
/* harmony export */   "Divided": function() { return /* reexport safe */ _orkestra_ui_plugins_divided_js__WEBPACK_IMPORTED_MODULE_6__.Divided; },
/* harmony export */   "PipGrid": function() { return /* reexport safe */ _orkestra_ui_plugins_pipgrid_js__WEBPACK_IMPORTED_MODULE_7__.PipGrid; },
/* harmony export */   "Mosaic": function() { return /* reexport safe */ _orkestra_ui_plugins_mosaic_js__WEBPACK_IMPORTED_MODULE_12__.Mosaic; },
/* harmony export */   "Tabs": function() { return /* reexport safe */ _orkestra_ui_plugins_tabs_js__WEBPACK_IMPORTED_MODULE_11__.Tabs; },
/* harmony export */   "JanusClient": function() { return /* reexport safe */ _wcs_libs_janusclient_js__WEBPACK_IMPORTED_MODULE_21__.JanusClient; },
/* harmony export */   "JanusPublish": function() { return /* reexport safe */ _wcs_libs_januspublish_js__WEBPACK_IMPORTED_MODULE_22__.JanusPublish; },
/* harmony export */   "UserData": function() { return /* reexport safe */ _orkestra_instruments_index_js__WEBPACK_IMPORTED_MODULE_4__.UserData; },
/* harmony export */   "WCWebrtcPublisher": function() { return /* reexport safe */ _wcs_webrtc_publisher_webrtcPublisher_js__WEBPACK_IMPORTED_MODULE_23__.WCWebrtcPublisher; },
/* harmony export */   "WCScreenShare": function() { return /* reexport safe */ _wcs_screen_share_screen_share_js__WEBPACK_IMPORTED_MODULE_24__.WCScreenShare; },
/* harmony export */   "Explicit": function() { return /* reexport safe */ _orkestra_rules_explicit_js__WEBPACK_IMPORTED_MODULE_15__.Explicit; },
/* harmony export */   "UserPref": function() { return /* reexport safe */ _orkestra_rules_userPref_js__WEBPACK_IMPORTED_MODULE_17__.UserPref; },
/* harmony export */   "FullScreen": function() { return /* reexport safe */ _orkestra_ui_plugins_fullscreen_js__WEBPACK_IMPORTED_MODULE_16__.FullScreen; },
/* harmony export */   "DASHVideoElement": function() { return /* reexport module object */ _wcs_libs_dash_video_element_js__WEBPACK_IMPORTED_MODULE_25__; },
/* harmony export */   "Logger": function() { return /* reexport safe */ _orkestra_utils_index_js__WEBPACK_IMPORTED_MODULE_18__.Logger; },
/* harmony export */   "Simple": function() { return /* reexport safe */ _orkestra_transitions_simple_js__WEBPACK_IMPORTED_MODULE_10__.Simple; },
/* harmony export */   "CustomLayout": function() { return /* reexport safe */ _orkestra_ui_plugins_customLayout_js__WEBPACK_IMPORTED_MODULE_8__.CustomLayout; },
/* harmony export */   "EditLayout": function() { return /* reexport safe */ _orkestra_ui_plugins_editLayout_js__WEBPACK_IMPORTED_MODULE_9__.EditLayout; }
/* harmony export */ });
/* harmony import */ var _orkestra_orkestra_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./orkestra/orkestra.js */ "./src/orkestra/orkestra.js");
/* harmony import */ var _wcs_users_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wcs/users.js */ "./src/wcs/users.js");
/* harmony import */ var _wcs_app_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wcs/app.js */ "./src/wcs/app.js");
/* harmony import */ var _wcs_timer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./wcs/timer.js */ "./src/wcs/timer.js");
/* harmony import */ var _orkestra_instruments_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./orkestra/instruments/index.js */ "./src/orkestra/instruments/index.js");
/* harmony import */ var _orkestra_ui_UI_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./orkestra/ui/UI.js */ "./src/orkestra/ui/UI.js");
/* harmony import */ var _orkestra_ui_plugins_divided_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./orkestra/ui/plugins/divided.js */ "./src/orkestra/ui/plugins/divided.js");
/* harmony import */ var _orkestra_ui_plugins_pipgrid_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./orkestra/ui/plugins/pipgrid.js */ "./src/orkestra/ui/plugins/pipgrid.js");
/* harmony import */ var _orkestra_ui_plugins_customLayout_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./orkestra/ui/plugins/customLayout.js */ "./src/orkestra/ui/plugins/customLayout.js");
/* harmony import */ var _orkestra_ui_plugins_editLayout_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./orkestra/ui/plugins/editLayout.js */ "./src/orkestra/ui/plugins/editLayout.js");
/* harmony import */ var _orkestra_transitions_simple_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./orkestra/transitions/simple.js */ "./src/orkestra/transitions/simple.js");
/* harmony import */ var _orkestra_ui_plugins_tabs_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./orkestra/ui/plugins/tabs.js */ "./src/orkestra/ui/plugins/tabs.js");
/* harmony import */ var _orkestra_ui_plugins_mosaic_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./orkestra/ui/plugins/mosaic.js */ "./src/orkestra/ui/plugins/mosaic.js");
/* harmony import */ var _orkestra_rules_byname_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./orkestra/rules/byname.js */ "./src/orkestra/rules/byname.js");
/* harmony import */ var _orkestra_rules_byTimeline_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./orkestra/rules/byTimeline.js */ "./src/orkestra/rules/byTimeline.js");
/* harmony import */ var _orkestra_rules_explicit_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./orkestra/rules/explicit.js */ "./src/orkestra/rules/explicit.js");
/* harmony import */ var _orkestra_ui_plugins_fullscreen_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./orkestra/ui/plugins/fullscreen.js */ "./src/orkestra/ui/plugins/fullscreen.js");
/* harmony import */ var _orkestra_rules_userPref_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./orkestra/rules/userPref.js */ "./src/orkestra/rules/userPref.js");
/* harmony import */ var _orkestra_utils_index_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./orkestra/utils/index.js */ "./src/orkestra/utils/index.js");
/* harmony import */ var _orkestra_motion_motion_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./orkestra/motion/motion.js */ "./src/orkestra/motion/motion.js");
/* harmony import */ var _wcs_xmedia_xmedia_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./wcs/xmedia/xmedia.js */ "./src/wcs/xmedia/xmedia.js");
/* harmony import */ var _wcs_libs_janusclient_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./wcs/libs/janusclient.js */ "./src/wcs/libs/janusclient.js");
/* harmony import */ var _wcs_libs_januspublish_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./wcs/libs/januspublish.js */ "./src/wcs/libs/januspublish.js");
/* harmony import */ var _wcs_webrtc_publisher_webrtcPublisher_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./wcs/webrtc-publisher/webrtcPublisher.js */ "./src/wcs/webrtc-publisher/webrtcPublisher.js");
/* harmony import */ var _wcs_screen_share_screen_share_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./wcs/screen-share/screen-share.js */ "./src/wcs/screen-share/screen-share.js");
/* harmony import */ var _wcs_libs_dash_video_element_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./wcs/libs/dash-video-element.js */ "./src/wcs/libs/dash-video-element.js");
/* harmony import */ var _wcs_libs_dash_video_element_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(_wcs_libs_dash_video_element_js__WEBPACK_IMPORTED_MODULE_25__);





























 



}();
/******/ })()
;
//# sourceMappingURL=main.js.map